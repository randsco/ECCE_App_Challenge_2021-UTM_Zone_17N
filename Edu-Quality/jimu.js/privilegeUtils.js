// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/Deferred esri/arcgis/OAuthInfo esri/IdentityManager esri/request jimu/tokenUtils jimu/portalUrlUtils".split(" "),function(m,n,k,p,q,g){return{checkEssentialAppsLicense:function(h,d,l){var e=g.getStandardPortalUrl(d.portalUrl),b=g.getSharingUrl(e);e=new n({appId:"arcgisWebApps",portalUrl:e});k.registerOAuthInfos([e]);var c=new m;(l?k.checkAppAccess(b,"arcgisWebApps"):d.getItemById(h).then(function(f){return"public"===f.access?{isPublicApp:!0}:k.checkAppAccess(b,"arcgisWebApps")})).then(function(f){d.getSigninSettingsOfSelfInfo().then(function(a){a&&
a.blockedApps&&a.blockedApps.indexOf&&-1<a.blockedApps.indexOf("webappbuilder")?c.reject({message:"wab is blocked by org admin",isBlockedByOrg:!0}):c.resolve(f)},function(a){c.reject({message:a&&a.message,isBlockedByOrg:!1})})},function(f){c.reject({message:f&&f.message,isBlockedByOrg:!1})});return c},checkIsSelfOrigin:function(h,d,l){var e=!0,b=g.getPortalUrlFromLocation();b=g.getStandardPortalUrl(b);h=g.getItemUrl(b,h);var c=window.location.host;b=q.userHaveSignInPortal(b);c=0<=["www.arcgis.com",
"devext.arcgis.com","qaext.arcgis.com"].indexOf(c);var f=window.location!==window.parent.location;if(d.isPortal||l||c||b||f)d=new m,d.resolve(e);else return p({url:h,handleAs:"json",content:{f:"json"},callbackParamName:"callback"}).then(function(a){a.contentOrigin&&"self"!==a.contentOrigin&&(e=!1);return e});return d}}});