// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/SmartEditor/setting/EditFields":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-style dojo/dom-construct dojo/on dojo/string dojo/query dojo/text!./EditFields.html ./FieldValidation ./CopyAttributes dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Popup jimu/dijit/Message esri/lang dijit/registry".split(" "),function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B){return F([G,J,v],{baseClass:"jimu-widget-smartEditor-setting-fields",
templateString:h,_configInfo:null,_fieldValid:null,_fieldValidations:null,_fieldValues:null,_attachmentValidations:null,__layerName:null,_removeFromSmartActionsGroup:[],_removeFromAttributeActionsGroup:[],postCreate:function(){this.inherited(arguments);this._removeFromSmartActionsGroup=[];this._removeFromAttributeActionsGroup=[];this.fieldsPopUp=null;this._initFieldsTable();if(this.honorWebMapSettings)var d=this.editUtils.mergeFieldInfosWithConfiguration(this._configInfo.layerInfo,null);this._setFieldsTable(d||
this._configInfo.fieldInfos);this._fieldValidations=void 0===this._configInfo.fieldValidations?{}:y.clone(this._configInfo.fieldValidations);this._fieldValues=void 0===this._configInfo.fieldValues?{}:y.clone(this._configInfo.fieldValues);this._attachmentValidations=void 0===this._configInfo.attachmentValidations?{}:y.clone(this._configInfo.attachmentValidations);this.own(f(this.attachmentsValidation,"click",y.hitch(this,function(){this._onAttachmentsValidationClicked()})));this._configInfo.layerInfo.layerObject.hasAttachments?
t.set(this.attachmentsValidation,"display","block"):t.set(this.attachmentsValidation,"display","none")},popupEditPage:function(){this.fieldsPopUp=new e({titleLabel:x.substitute({layername:this._layerName},this.nls.fieldsPage.title),width:972,maxHeight:700,autoHeight:!0,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){this._validateTable()?(this.honorWebMapSettings||this._resetFieldInfos(),this._configInfo.fieldValidations=this._fieldValidations,this._configInfo.fieldValues=
this._fieldValues,this._configInfo.attachmentValidations=this._attachmentValidations,this.emit("RemoveFromGroup",{smartActionGroupInfo:this._removeFromSmartActionsGroup,attributeActionGroupInfo:this._removeFromAttributeActionsGroup}),this.fieldsPopUp.close()):g({message:b.substitute(this.nls.fieldsPage.noDisplayFieldWarningMsg,{layerName:this._layerName})})})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){this.fieldsPopUp.close()})}],onClose:y.hitch(this,
function(){})})},_initFieldsTable:function(){this._fieldsTable=new D({fields:[{name:"required",title:"",type:"text","class":"required"},{name:"visible",title:this.nls.fieldsPage.fieldsSettingsTable.display,type:"checkbox","class":"visible",width:"15%"},{name:"isEditable",title:this.nls.fieldsPage.fieldsSettingsTable.edit,type:"checkbox","class":"editable",width:"15%"},{name:"fieldName",title:this.nls.fieldsPage.fieldsSettingsTable.fieldName,type:"text","class":"fieldName",width:"30%"},{name:"label",
title:this.nls.fieldsPage.fieldsSettingsTable.fieldAlias,type:"text",editable:!1,"class":"fieldLabel",width:"30%"},{name:"actions",title:this.nls.fieldsPage.fieldsSettingsTable.actions,type:"actions",actions:["up","down","edit","copy"],"class":"actions",width:"10%"}],selectable:!1,style:{height:"300px",maxHeight:"300px"}});this._fieldsTable.placeAt(this.fieldsTable);this._fieldsTable.startup();c("th.simple-table-field",this._fieldsTable.domNode).forEach(function(d){switch(void 0===d.innerText||""===
d.innerText?"":d.innerText.replace(/(\r\n|\n|\r)/gm,"")){case this.nls.fieldsPage.fieldsSettingsTable.display:d.title=this.nls.fieldsPage.fieldsSettingsTable.displayTip;break;case this.nls.fieldsPage.fieldsSettingsTable.edit:d.title=this.nls.fieldsPage.fieldsSettingsTable.editTip;break;case this.nls.fieldsPage.fieldsSettingsTable.fieldName:d.title=this.nls.fieldsPage.fieldsSettingsTable.fieldNameTip;break;case this.nls.fieldsPage.fieldsSettingsTable.fieldAlias:d.title=this.nls.fieldsPage.fieldsSettingsTable.fieldAliasTip;
break;case this.nls.fieldsPage.fieldsSettingsTable.actions:d.title=this.nls.fieldsPage.fieldsSettingsTable.actionsTip}},this);this.own(f(this._fieldsTable,"actions-edit",y.hitch(this,this._onEditFieldInfoClick)))},_validateTable:function(){if(this.honorWebMapSettings||0===this._configInfo.fieldInfos.length)return!0;var d=this._fieldsTable.getRows();return 0===d.length?!1:K.some(d,function(m){return this._fieldsTable.getRowData(m).visible},this)},_onEditFieldInfoClick:function(d){d=this._fieldsTable.getRowData(d);
var m=x.substitute({fieldname:d.fieldName},this.nls.actionPage.smartActionTitle),u={fields:y.clone(this._configInfo.layerInfo.layerObject.fields)};this._fieldValid=new n({nls:this.nls,_layerDefinition:u,_layerId:this._configInfo.layerInfo.layerObject.id,_url:this._configInfo.layerInfo.layerObject.url,_fieldValidations:this._fieldValidations,_fieldName:d.fieldName,_fieldAlias:d.label,popupTitle:m,_smartActionsTable:this._smartActionsTable});this._fieldValid.removeFromGroup=y.hitch(this,function(C){this._removeFromSmartActionsGroup.push(C)});
this._fieldValid.onGroupEditingStart=y.hitch(this,function(){this.fieldsPopUp&&this.fieldsPopUp.close();this._tab&&this._tab.selectTab(this.nls.layersPage.smartActionsTabTitle)});this._fieldValid.popupActionsPage()},_onCopyAttrButtonClick:function(d){var m=this._fieldsTable.getRowData(d),u={fields:y.clone(this._configInfo.layerInfo.layerObject.fields)};this._copyAttr=new p({nls:this.nls,_layerDefinition:u,_fieldInfos:this._configInfo.fieldInfos,_layerId:this._configInfo.layerInfo.layerObject.id,_url:this._configInfo.layerInfo.layerObject.url,
_fieldName:m.fieldName,_fieldAlias:m.label,_fieldValues:this._fieldValues,_geocoderSettings:this._geocoderSettings,_configuredPresetInfos:this._configuredPresetInfos,layerInfos:this.layerInfos,isRelatedLayer:this.isRelatedLayer,map:this.map,_fieldType:d.fieldType,_attributeActionsTable:this._attributeActionsTable});this.own(f(this._copyAttr,"onGroupEditingStart",y.hitch(this,function(C){this.fieldsPopUp&&this.fieldsPopUp.close();this._tab&&this._tab.selectTab(C)})));this.own(f(this._copyAttr,"removeFromGroup",
y.hitch(this,function(C){this._removeFromAttributeActionsGroup.push(C)})));this._copyAttr.popupActionsPage();this.own(f(this._copyAttr,"SetGeocoder",y.hitch(this,function(){this.emit("SetGeocoder")})))},_onAttachmentsValidationClicked:function(){var d=x.substitute({layername:this._layerName},this.nls.fieldsPage.smartAttachmentPopupTitle),m={fields:y.clone(this._configInfo.layerInfo.layerObject.fields)};this._attachmentFieldValidation=new n({nls:this.nls,_layerDefinition:m,_layerId:this._configInfo.layerInfo.layerObject.id,
_url:this._configInfo.layerInfo.layerObject.url,_fieldValidations:this._attachmentValidations,_fieldName:"Actions",_fieldAlias:"",popupTitle:d});this._attachmentFieldValidation.popupActionsPage()},_setFieldsTable:function(d){var m,u,C;K.forEach(d,function(O){var M=O.visible;"esriFieldTypeGeometry"!==O.type&&"esriFieldTypeOID"!==O.type&&"esriFieldTypeBlob"!==O.type&&"esriFieldTypeGlobalID"!==O.type&&"esriFieldTypeRaster"!==O.type&&"esriFieldTypeXML"!==O.type&&(!1===O.visible&&!0===O.isEditable&&(M=
!0),M={fieldName:O.fieldName,isEditable:O.hasOwnProperty("isEditable")?O.isEditable:O.editable,label:O.label,visible:M},O.hasOwnProperty("nullable")&&!1===O.nullable?M.required="*":M.required="",m=this._fieldsTable.addRow(M).tr,C=c(".jimu-icon-edit",m)[0],C.title=this.nls.fieldsPage.editActionTip,u=m.children[m.children.length-1],m.fieldType=O.type,this._addNewAction(u.children[0],m))},this);setTimeout(y.hitch(this,function(){K.forEach(this._fieldsTable.fields,function(M){"visible"===M.name?M.onChange=
y.hitch(this,this._onDisplayFieldChanged):"isEditable"===M.name&&(M.onChange=y.hitch(this,this._onIsEditableFieldChanged))},this);if(!this.isEditableLayer){var O=c(".editable",this._fieldsTable.domNode);O.forEach(function(M){M=B.getEnclosingWidget(M.childNodes[0]);M.setValue(!1);M.setStatus(!1)})}this.honorWebMapSettings&&(O=c(".editable",this._fieldsTable.domNode),O.forEach(function(M){B.getEnclosingWidget(M.childNodes[0]).setStatus(!1)}),O=c(".visible",this._fieldsTable.domNode),O.forEach(function(M){B.getEnclosingWidget(M.childNodes[0]).setStatus(!1)}))}),
300)},_addNewAction:function(d,m){var u=a.create("div",{"class":"esriCTCopyAction",title:this.nls.fieldsPage.copyActionTip});f(u,"click",y.hitch(this,this._onCopyAttrButtonClick,m));a.place(u,d,"last")},_onDisplayFieldChanged:function(d){var m=this._fieldsTable.getRowData(d);!m.visible&&m.isEditable&&(m.isEditable=!1,this._fieldsTable.editRow(d,m))},_onIsEditableFieldChanged:function(d){var m=this._fieldsTable.getRowData(d);m.isEditable&&!m.visible&&(m.visible=!0,this._fieldsTable.editRow(d,m))},
_resetFieldInfos:function(){var d=[],m=this._fieldsTable.getData();K.forEach(m,y.hitch(this,function(u){var C={isEditable:null===u.isEditable?this.isEditableLayer?!0:!1:u.isEditable,visible:null===u.visible?!0:u.visible};u=this._getFieldInfoByFieldName(this._configInfo.fieldInfos,u.fieldName);y.mixin(u,C);d.push(u)}));this._configInfo.fieldInfos=d},_getFieldInfoByFieldName:function(d,m){var u;K.some(d,function(C){if(C.name===m)return u=C,!0});return u},geocoderConfigured:function(){this._copyAttr.geocoderConfigured()}})})},
"widgets/SmartEditor/setting/FieldValidation":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-construct dojo/query dojo/json dojox/html/entities dojo/text!./FieldValidation.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Popup ./FilterPage".split(" "),function(F,J,y,K,t,a,f,b,c,h,n,p,v,G){return F([n,h],{baseClass:"jimu-widget-smartEditor-rule-table",templateString:c,_resourceInfo:null,_url:null,_fieldName:null,_fieldValidations:null,
_layerId:null,_fieldsPopUp:null,postCreate:function(){this.inherited(arguments);this._fieldsPopUp=null;this._initActionsTable();this._setActionsTable()},getSettings:function(){return this._fieldValidations},_getConfigActionOrder:function(){var D=[];return void 0!==this._fieldValidations&&null!==this._fieldValidations&&this._fieldValidations.hasOwnProperty(this._fieldName)&&(y.forEach(this._fieldValidations[this._fieldName],function(e){D.push(e.actionName)}),null!==D&&0!==D.length)?D:["Hide","Required",
"Disabled"]},_getConfigAction:function(D){var e=null;void 0!==this._fieldValidations&&null!==this._fieldValidations&&this._fieldValidations.hasOwnProperty(this._fieldName)&&y.some(this._fieldValidations[this._fieldName],function(g){return g.actionName===D?(e=g,!0):!1});return e},_nlsActionToConfig:function(D){switch(D){case this.nls.actionPage.actions.hide:return"Hide";case this.nls.actionPage.actions.disabled:return"Disabled";case this.nls.actionPage.actions.required:return"Required";default:return D}},
popupActionsPage:function(){this._fieldsPopUp&&(this._fieldsPopUp.close(),this._fieldsPopUp=null);this._fieldsPopUp=new v({titleLabel:this.popupTitle,width:920,maxHeight:600,autoHeight:!0,content:this,buttons:[{label:this.nls.ok,onClick:J.hitch(this,function(){var D=this._validationTable.getRows();if(void 0===this._fieldValidations||null===this._fieldValidations)this._fieldValidations={};this._fieldValidations[this._fieldName]=[];y.forEach(D,function(e){var g=this._validationTable.getRowData(e);e=
{};e.actionName=this._nlsActionToConfig(g.label);e.submitWhenHidden=g.submitWhenHidden;void 0!==g.expression&&null!==g.expression&&""!==g.expression&&""!==g.filter&&(g=f.parse(b.decode(g.filter)),e.expression=g.expr,e.filter=g);this._fieldValidations[this._fieldName].push(e)},this);this._fieldsPopUp.close()})},{label:this.nls.cancel,classNames:["jimu-btn jimu-btn-vacation"],onClick:J.hitch(this,function(){this._fieldsPopUp.close()})}],onClose:J.hitch(this,function(){})})},_initActionsTable:function(){this._validationTable=
new p({fields:[{name:"label",title:this.nls.actionPage.actionsSettingsTable.rule,type:"text",width:"15%","class":"rule"},{name:"expression",title:this.nls.actionPage.actionsSettingsTable.expression,type:"text",width:"55%","class":"expression"},{name:"groupName",title:this.nls.actionPage.actionsSettingsTable.groupName,type:"text",width:"20%","class":"expression"},{name:"submitWhenHidden",title:"submitWhenHidden",type:"checkbox",hidden:!0},{name:"filter",title:"filter",type:"text",hidden:!0},{name:"actions",
title:this.nls.actionPage.actionsSettingsTable.actions,type:"actions",actions:["up","down","edit"],width:"10%","class":"actions"}],selectable:!1,style:{height:"300px",maxHeight:"300px"}});this._validationTable.onBeforeRowEdit=J.hitch(this,function(D){var e=this._validationTable.getRowData(D);if(e.groupName){var g=t.create("div");t.create("div",{innerHTML:this.nls.actionPage.editOptionsPopup.expression,className:"settingsDesc"},g);t.create("div",{innerHTML:this.nls.actionPage.editOptionsPopup.editGroupHint,
className:"editGroupHint"},g);var x=new v({titleLabel:this.nls.actionPage.editOptionsPopup.popupTitle,width:500,maxHeight:445,autoHeight:!0,content:g,"class":this.baseClass,buttons:[{label:this.nls.actionPage.editOptionsPopup.editGroupButton,onClick:J.hitch(this,function(){this._editGroup(e.groupName);x.close()})},{label:this.nls.actionPage.editOptionsPopup.editIndependentlyButton,onClick:J.hitch(this,function(){this._validationTable._onActionsEdit(D);x.close()})}]})}else this._validationTable._onActionsEdit(D)});
this.own(K(this._validationTable,"row-edit",J.hitch(this,function(D){var e=this._validationTable.getRowData(D);e.groupName&&(e={groupName:e.groupName,layerId:this._layerId,fieldName:this._fieldName,action:this._nlsActionToConfig(e.label)},this.removeFromGroup(e),this._validationTable.editRow(D,{groupName:null}))})));this._validationTable.placeAt(this.validationTable);this._validationTable.startup();a("th.simple-table-field",this._validationTable.domNode).forEach(function(D){switch(void 0===D.innerText||
""===D.innerText?"":D.innerText.replace(/(\r\n|\n|\r)/gm,"")){case this.nls.actionPage.actionsSettingsTable.rule:D.title=this.nls.actionPage.actionsSettingsTable.ruleTip;break;case this.nls.actionPage.actionsSettingsTable.expression:D.title=this.nls.actionPage.actionsSettingsTable.expressionTip;break;case this.nls.actionPage.actionsSettingsTable.actions:D.title=this.nls.actionPage.actionsSettingsTable.actionsTip;break;case this.nls.actionPage.actionsSettingsTable.groupName:D.title=this.nls.actionPage.actionsSettingsTable.groupNameTip}},
this);this.own(K(this._validationTable,"actions-edit",J.hitch(this,this._onEditFieldInfoClick)));this.own(K(this._validationTable,"actions-delete",J.hitch(this,this._onDeleteFieldInfoClick)))},_onDeleteFieldInfoClick:function(D){this._removeFilter(D)},_onEditFieldInfoClick:function(D){this._showFilter(D)},_setActionsTable:function(){var D=this._getConfigActionOrder();y.forEach(D,function(e){var g=this._getConfigAction(e),x=e;switch(e){case "Hide":this.nls.actionPage.hasOwnProperty("actions")&&this.nls.actionPage.actions.hasOwnProperty("hide")&&
(x=this.nls.actionPage.actions.hide);break;case "Required":this.nls.actionPage.hasOwnProperty("actions")&&this.nls.actionPage.actions.hasOwnProperty("required")&&(x=this.nls.actionPage.actions.required);break;case "Disabled":this.nls.actionPage.hasOwnProperty("actions")&&this.nls.actionPage.actions.hasOwnProperty("disabled")&&(x=this.nls.actionPage.actions.disabled);break;default:x=e}e={label:x,expression:null};void 0!==g&&null!==g&&(g.hasOwnProperty("filter")&&void 0!==g.filter&&null!==g.filter&&
(g.filter.smartActionGroupName&&(e.groupName=g.filter.smartActionGroupName),e.filter=f.stringify(g.filter),e.expression=g.filter.expr),g.hasOwnProperty("expression")&&(e.expression=g.expression),g.hasOwnProperty("submitWhenHidden")&&(e.submitWhenHidden=g.submitWhenHidden));this._validationTable.addRow(e)},this)},_removeFilter:function(D){this._validationTable.editRow(D,{expression:"",filter:null,submitWhenHidden:!1})},_showFilter:function(D){this._filterPage&&this._filterPage.destroy();this._filterPage=
new G({nls:this.nls,_resourceInfo:this._resourceInfo,_url:this._url,_layerId:this._layerId,_validationTable:this._validationTable});this._filterPage.popup(D)},_editGroup:function(D){if(this._smartActionsTable){var e=this._smartActionsTable.getRows();y.some(e,function(g){if(this._smartActionsTable.getRowData(g).name===D)return this._fieldsPopUp.close(),this.onGroupEditingStart(),this._smartActionsTable._onActionsEdit(g),!0},this)}},onGroupEditingStart:function(){},removeFromGroup:function(D){}})})},
"widgets/SmartEditor/setting/FilterPage":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/json dojo/text!./FilterPage.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup jimu/dijit/Filter esri/lang dijit/form/CheckBox dojo/dom-construct".split(" "),function(F,J,y,K,t,a,f,b,c,h,n,p){return F([f,J,a],{baseClass:"jimu-widget-smartEditor-filter-page",templateString:t,_filter:null,_url:null,_layerId:null,_layerDefinition:null,_validationTable:null,postCreate:function(){this.inherited(arguments);
this._init()},_init:function(){this._origNLS=window.jimuNls.filterBuilder.matchMsg;window.jimuNls.filterBuilder.matchMsg=this.nls.filterPage.filterBuilder},destroy:function(){window.jimuNls.filterBuilder.matchMsg=this._origNLS;this._filter&&(this._filter.destroyRecursive(),this._filter=null,delete this._filter);this._submitHidden&&(this._submitHidden.destroyRecursive(),this._submitHidden=null,delete this._submitHidden)},popup:function(v){var G;v&&this._validationTable&&(G=this._validationTable.getRowData(v));
if(G&&G.label===this.nls.actionPage.actions.hide){this.submitWhenHidden.style.display="block";this._submitHidden=new n({id:"submitHidden",checked:void 0===G.submitWhenHidden?!1:G.submitWhenHidden,value:this.nls.filterPage.submitHidden},null);this.submitWhenHidden.appendChild(this._submitHidden.domNode);var D=y.replace("\x3clabel class\x3d'submithide' for\x3d'submitWhenHidden'\x3e{replace}\x3c/label\x3e\x3c/br\x3e\x3c/br\x3e",{replace:this.nls.filterPage.submitHidden});p.place(D,this._submitHidden.domNode,
"after")}else this.submitWhenHidden.style.display="none";this._filter=new c({style:"width:100%;margin-top:22px;",noFilterTip:this.nls.filterPage.noFilterTip});this._filter.placeAt(this.filterControl);var e=new b({titleLabel:h.substitute({action:G?G.label:this._groupName},this.nls.filterPage.title),width:850,height:485,content:this,rowData:G,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var x=this._filter.toJson(),B=!1;this._submitHidden&&this._submitHidden.checked&&(B=this._submitHidden.checked);
x&&x.expr&&("1\x3d1"===x.expr?this._validationTable?this._validationTable.editRow(v,{expression:"",filter:null,submitWhenHidden:B}):(this._filterInfo={expression:"",filter:null,submitWhenHidden:B},this.emit("filterInfo",this._filterInfo)):this._validationTable?this._validationTable.editRow(v,{expression:x.displaySQL,filter:K.stringify(x),submitWhenHidden:B}):(this._filterInfo={expression:x.displaySQL,filter:K.stringify(x),submitWhenHidden:B},this.emit("filterInfo",this._filterInfo)),e.close())})},
{label:this.nls.cancel,classNames:["jimu-btn jimu-btn-vacation"],onClick:function(){e.close()}}]});if(G)var g=G;else this._filterInfo&&(g=this._filterInfo);g&&(void 0===g.filter||null===g.filter||""===g.filter?this._filter.build({url:this._url,partsObj:null,layerDefinition:this._layerDefinition,featureLayerId:this._layerId}):g.filter.parts?this._filter.build({url:this._url,partsObj:g.filter,layerDefinition:this._layerDefinition,featureLayerId:this._layerId}):this._filter.build({url:this._url,partsObj:K.parse(g.filter),
layerDefinition:this._layerDefinition,featureLayerId:this._layerId}))}})})},"widgets/SmartEditor/setting/CopyAttributes":function(){define("dojo/_base/declare dojo/Evented dojo/query dojo/dom-style dijit/registry dojo/_base/lang dojo/_base/array dojo/on dojo/dom-construct dojo/text!./CopyAttributes.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Popup esri/lang ./Intersection ./Coordinates ./Address".split(" "),function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x){return F([p,
J,n],{baseClass:"jimu-widget-smartEditor-rule-table",templateString:h,_resourceInfo:null,_url:null,_fieldName:null,_fieldValues:null,_configuredFieldValues:null,_layerId:null,_validGeocoderFields:[],_fieldsPopUp:null,_removeGroupInfo:null,_cbxForActionsWithGroupName:[],ValidFieldsForCoordinates:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"],ValidFieldsByType:{esriFieldTypeOID:["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeSmallInteger:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeInteger:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeSingle:["esriFieldTypeOID","esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeGlobalID"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:"esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeGUID esriFieldTypeDate esriFieldTypeOID esriFieldTypeGlobalID".split(" ")},postCreate:function(){this.inherited(arguments);this._fieldsPopUp=null;this._configuredFieldValues=[];this._removeGroupInfo=
null;this._initActionsTable();this._setActionsTable()},getSettings:function(){return this._fieldValues},_getConfigActionOrder:function(){var B=[],d=[];this.isRelatedLayer?d=["Preset"]:(d=["Intersection"],this._validGeocoderFields=this._getValidGeocoderFields(),this._validGeocoderFields.length&&d.push("Address"),-1<this.ValidFieldsForCoordinates.indexOf(this._fieldType)&&d.push("Coordinates"),d.push("Preset"));return void 0!==this._fieldValues&&null!==this._fieldValues&&this._fieldValues.hasOwnProperty(this._fieldName)&&
(f.forEach(this._fieldValues[this._fieldName],function(m){-1<d.indexOf(m.actionName)&&B.push(m.actionName)}),null!==B&&0!==B.length)?B:d},_getValidGeocoderFields:function(){var B=[],d=[];B=this.ValidFieldsByType[this._fieldType];this._geocoderSettings&&this._geocoderSettings.hasOwnProperty("url")&&(d=f.filter(this._geocoderSettings.fields,function(m){return-1<B.indexOf(m.type)?!0:!1}));return d},_getConfigAction:function(B){var d=null;void 0!==this._fieldValues&&null!==this._fieldValues&&this._fieldValues.hasOwnProperty(this._fieldName)&&
f.some(this._fieldValues[this._fieldName],function(m){return m.actionName===B?(d=m,!0):!1});return d},_nlsActionToConfig:function(B){switch(B){case this.nls.actionPage.copyAction.intersection:return"Intersection";case this.nls.actionPage.copyAction.address:return"Address";case this.nls.actionPage.copyAction.coordinates:return"Coordinates";case this.nls.actionPage.copyAction.preset:return"Preset";default:return B}},popupActionsPage:function(){this._fieldsPopUp&&(this._fieldsPopUp.close(),this._fieldsPopUp=
null);this._fieldsPopUp=new G({titleLabel:D.substitute({fieldname:this._fieldName},this.nls.actionPage.title),width:920,maxHeight:600,autoHeight:!0,content:this,buttons:[{label:this.nls.ok,onClick:a.hitch(this,function(){var B=this._copyAttrTable.getRows();if(void 0===this._fieldValues||null===this._fieldValues)this._fieldValues={};this._fieldValues[this._fieldName]=[];f.forEach(B,function(d){var m=this._copyAttrTable.getRowData(d);d={};d.actionName=this._nlsActionToConfig(m.actionName);this._configuredFieldValues[d.actionName]?
a.mixin(d,this._configuredFieldValues[d.actionName]):a.mixin(d,{enabled:!1});a.mixin(d,{enabled:m.enabled});"Preset"===d.actionName&&this._configuredPresetInfos&&!this._configuredPresetInfos.hasOwnProperty(this._fieldName)&&(this._configuredPresetInfos[this._fieldName]=[""]);!d.enabled&&m.attributeActionGroupName&&(m={groupName:m.attributeActionGroupName,layerId:this._layerId,fieldName:this._fieldName,action:d.actionName},this.removeFromGroup(m),delete d.attributeActionGroupName);this._fieldValues[this._fieldName].push(d)},
this);this._fieldsPopUp.close()})},{label:this.nls.cancel,classNames:["jimu-btn jimu-btn-vacation"],onClick:a.hitch(this,function(){this._fieldsPopUp.close()})}],onClose:a.hitch(this,function(){})})},_initActionsTable:function(){this._copyAttrTable=new v({fields:[{name:"enabled",title:this.nls.actionPage.copyAction.enableText,type:"checkbox",width:"15%"},{name:"actionName",title:this.nls.actionPage.copyAction.actionText,type:"text"},{name:"attributeActionGroupName",title:this.nls.actionPage.actionsSettingsTable.groupName,
type:"text"},{name:"actions",title:this.nls.actionPage.copyAction.criteriaText,type:"actions",actions:["up","down","edit"],"class":"actions"}],selectable:!1,style:{height:"300px",maxHeight:"300px"}});this._copyAttrTable.placeAt(this.copyAttributeTable);this._copyAttrTable.startup();this.own(b(this._copyAttrTable,"actions-edit",a.hitch(this,this._onActionEdit)))},_onActionEdit:function(B){this._removeGroupInfo=null;var d=this._copyAttrTable.getRowData(B);if(d.attributeActionGroupName){var m=c.create("div");
c.create("div",{innerHTML:this.nls.actionPage.editOptionsPopup.editAttributeGroup,className:"settingsDesc"},m);c.create("div",{innerHTML:this.nls.actionPage.editOptionsPopup.editAttributeGroupHint,className:"editGroupHint"},m);var u=new G({titleLabel:this.nls.actionPage.editOptionsPopup.popupTitle,width:500,maxHeight:445,autoHeight:!0,content:m,"class":this.baseClass,buttons:[{label:this.nls.actionPage.editOptionsPopup.editGroupButton,onClick:a.hitch(this,function(){this._editGroup(d);u.close()})},
{label:this.nls.actionPage.editOptionsPopup.editIndependentlyButton,disable:"Preset"===d.actionName?!0:!1,onClick:a.hitch(this,function(){d.attributeActionGroupName&&(this._removeGroupInfo={groupName:d.attributeActionGroupName,layerId:this._layerId,fieldName:this._fieldName,action:this._nlsActionToConfig(d.actionName)});this._onEditFieldInfoClick(B);u.close()})}]})}else this._onEditFieldInfoClick(B)},_onEditFieldInfoClick:function(B){switch(this._copyAttrTable.getRowData(B).actionName){case this.nls.actionPage.copyAction.intersection:this._createIntersectionPanel(B);
break;case this.nls.actionPage.copyAction.address:this._geocoderSettings&&this._geocoderSettings.hasOwnProperty("url")?this._createAddressPanel(B):this.emit("SetGeocoder");break;case this.nls.actionPage.copyAction.coordinates:this._createCoordinatesPanel(B)}},_removeFromGroup:function(B){this._removeGroupInfo&&(this.removeFromGroup(this._removeGroupInfo),this._copyAttrTable.editRow(B,{attributeActionGroupName:null}))},_createIntersectionPanel:function(B){this._intersectionDijit=e({nls:this.nls,_fieldValues:this._configuredFieldValues,
layerInfos:this.layerInfos,map:this.map,_fieldType:this._fieldType,isGroup:!1,ValidFieldsByType:this.ValidFieldsByType});this.own(b(this._intersectionDijit,"attributeActionUpdated",a.hitch(this,function(){this._removeFromGroup(B)})))},_createCoordinatesPanel:function(B){this._coordinatesDijit=g({nls:this.nls,isGroup:!1,_fieldType:this._fieldType,_fieldValues:this._configuredFieldValues});this.own(b(this._coordinatesDijit,"attributeActionUpdated",a.hitch(this,function(){this._removeFromGroup(B)})))},
_createAddressPanel:function(B){this._addressDijit=x({nls:this.nls,_fieldValues:this._configuredFieldValues,_geocoderSettings:this._geocoderSettings,_validGeocoderFields:this._validGeocoderFields,isGroup:!1});this.own(b(this._addressDijit,"attributeActionUpdated",a.hitch(this,function(){this._removeFromGroup(B)})))},_setActionsTable:function(){var B=this._getConfigActionOrder();this._cbxForActionsWithGroupName=[];f.forEach(B,function(d){var m=this._getConfigAction(d),u=d;switch(d){case "Intersection":this.nls.actionPage.hasOwnProperty("copyAction")&&
this.nls.actionPage.copyAction.hasOwnProperty("intersection")&&(u=this.nls.actionPage.copyAction.intersection);break;case "Address":this.nls.actionPage.hasOwnProperty("copyAction")&&this.nls.actionPage.copyAction.hasOwnProperty("address")&&(u=this.nls.actionPage.copyAction.address);break;case "Coordinates":this.nls.actionPage.hasOwnProperty("copyAction")&&this.nls.actionPage.copyAction.hasOwnProperty("coordinates")&&(u=this.nls.actionPage.copyAction.coordinates);break;case "Preset":this.nls.actionPage.hasOwnProperty("copyAction")&&
this.nls.actionPage.copyAction.hasOwnProperty("preset")&&(u=this.nls.actionPage.copyAction.preset);break;default:u=d}u={actionName:u};void 0!==m&&null!==m?this._configuredFieldValues[d]=m:(this._configuredFieldValues[d]={enabled:!1},"Intersection"===d&&(this._configuredFieldValues[d].fields=[]),"Coordinates"===d&&(this._configuredFieldValues[d].coordinatesSystem="MapSpatialReference",this._configuredFieldValues[d].field="x"));u.enabled=this._configuredFieldValues[d].enabled;this._configuredFieldValues[d].hasOwnProperty("attributeActionGroupName")&&
(u.attributeActionGroupName=this._configuredFieldValues[d].attributeActionGroupName);u.enabled&&"Preset"===d&&!this._configuredFieldValues[d].hasOwnProperty("attributeActionGroupName")&&(u.enabled=!1);m=this._copyAttrTable.addRow(u);u=y(".jimu-checkbox",m.tr)[0];u=t.byNode(u);"Preset"!==d||this._configuredFieldValues[d].hasOwnProperty("attributeActionGroupName")||(u.set("disabled",!0),(m=y(".jimu-icon-edit",m.tr))&&0<m.length&&K.set(m[0],"display","none"));this._configuredFieldValues[d].hasOwnProperty("attributeActionGroupName")&&
(this._cbxForActionsWithGroupName.push(u),this.own(b(u,"change",a.hitch(this,function(){var C=!0;f.some(this._cbxForActionsWithGroupName,function(O){O.getValue()||(C=!1,K.set(this.warningNote,"display","block"))},this);C&&K.set(this.warningNote,"display","none")}))))},this)},geocoderConfigured:function(){this._geocoderSettings&&this._geocoderSettings.hasOwnProperty("url")&&this._createAddressPanel()},_editGroup:function(B){var d=B.attributeActionGroupName;var m=this._nlsActionToConfig(B.actionName);
this._copyAttrTable&&(B=this._attributeActionsTable[m].getRows(),f.some(B,function(u){if(this._attributeActionsTable[m].getRowData(u).name===d)return this._fieldsPopUp.close(),this.onGroupEditingStart(this.nls.layersPage.attributeActionsTabTitle),this._attributeActionsTable[m]._onActionsEdit(u),!0},this))},onGroupEditingStart:function(B){this.emit("onGroupEditingStart",B)},removeFromGroup:function(B){this.emit("removeFromGroup",B)}})})},"widgets/SmartEditor/setting/Intersection":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dijit/form/Select dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/on dojo/query dojo/promise/all dojo/Deferred dojo/text!./Intersection.html dijit/_TemplatedMixin jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Message jimu/dijit/Popup jimu/dijit/CheckBox dijit/popup dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/NumberTextBox dijit/form/DropDownButton dojo/dom-class ./layersAndFieldsApplyOn".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S,q){return F([e,J,v],{baseClass:"jimu-widget-smartEditor-setting-intersection",templateString:p,popup:null,totalLayers:[],_layersForApplyOn:[],isGroup:!1,ValidFieldsByType:{esriFieldTypeOID:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeSmallInteger:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeInteger:["esriFieldTypeOID",
"esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeSingle:["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeGlobalID"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:"esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeGUID esriFieldTypeDate esriFieldTypeOID esriFieldTypeGlobalID".split(" ")},
ValidFieldsByTypeToApplyOn:{esriFieldTypeInteger:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString"]},postCreate:function(){this.inherited(arguments);this.totalLayers=[];this._layersForApplyOn=[];this._createToleranceSettingsDialogContent();this._createDialogContent();this.isDelete||this.showDialog();this._initLayerSelector();this._createLayersAndFields();
this.own(b(this.addLayer,"click",y.hitch(this,function(){if(0<this.totalLayers.length){var k=this._layerTable.addRow({}).tr;this._addLayersDropDown(k);this._addFieldsDropDown(k);this._addToleranceSettings(k)}else new x({message:this.nls.intersectionPage.noLayersMessage})})))},_createDialogContent:function(){this.isEnabled=!1;this._fieldValues&&this._fieldValues.Intersection&&this._fieldValues.Intersection.hasOwnProperty("enabled")&&(this.isEnabled=this._fieldValues.Intersection.enabled);this._initControls();
this._initTable()},_initControls:function(){this.groupNameTextBox=new C({style:{width:"100%"},required:!0,trim:!0},f.create("div",{},this.groupNameTextBoxNode));this.groupNameTextBox.validator=y.hitch(this,function(k){return k?k!==this.prevName&&this.editUtils.isDuplicateGroupName(k,this.existingGroupNames)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});
this.name&&this.groupNameTextBox.set("value",this.name);this.dataTypeDropdown=new K({options:this._addDataTypeOptions(),style:{width:"100%"}});this.dataTypeDropdown.placeAt(this.dataTypeDropDownNode);this.dataTypeDropdown.startup();this.own(b(this.dataTypeDropdown,"change",y.hitch(this,function(k){this.isGroup&&(this._fieldType=k,this.totalLayers=[],this._layersForApplyOn=[],k=this._layerTable.getRows(),t.forEach(k,y.hitch(this,function(E){this._layerTable.deleteRow(E)})),this._initLayerSelector(),
this._createLayersAndFields())})));this._fieldType&&this.dataTypeDropdown.set("value",this._fieldType,!1);this.ignoreLayerRanking=new d({label:this.nls.intersectionPage.ignoreLayerRankingCheckboxLabel},f.create("div",{},this.ignoreLayerRankingNode))},_addDataTypeOptions:function(){return[{label:this.nls.dataType.esriFieldTypeString,value:"esriFieldTypeString"},{label:this.nls.dataType.esriFieldTypeInteger,value:"esriFieldTypeInteger"},{label:this.nls.dataType.esriFieldTypeDate,value:"esriFieldTypeDate"},
{label:this.nls.dataType.esriFieldTypeGUID,value:"esriFieldTypeGUID"}]},_initTable:function(){this._layerTable=new g({fields:[{name:"layerName",title:this.nls.intersectionPage.layerText,type:"empty",width:"30%"},{name:"fieldName",title:this.nls.intersectionPage.fieldText,type:"empty",width:"30%"},{name:"toleranceSettings",title:this.nls.intersectionPage.toleranceSettingText,type:"empty",width:"25%"},{name:"actions",title:this.nls.intersectionPage.actionsText,type:"actions",width:"15%",actions:["up",
"down","delete"],"class":"actions"}],selectable:!1});this._layerTable.placeAt(this.layerTableNode);this._layerTable.startup();this.own(b(this._layerTable,"actions-edit",y.hitch(this,this._onEditFieldInfoClick)));this.own(b(this._layerTable,"actions-delete",y.hitch(this,this._onDeleteFieldInfoClick)));this._populateTableData()},_populateTableData:function(){this._fieldValues.Intersection.ignoreLayerRanking&&this.ignoreLayerRanking.setValue(!0);t.forEach(this._fieldValues.Intersection.fields,y.hitch(this,
function(k){if(k.layerId&&this.layerInfos.getLayerInfoById(k.layerId)){var E=this._layerTable.addRow({}).tr;this._addLayersDropDown(E,k);this._addFieldsDropDown(E,k);this._addToleranceSettings(E,k)}}))},_createToleranceSettingsDialogContent:function(){var k=f.create("div",{"class":"esriCTpopupFieldContent"});this._useDefaultToleranceCheckbox=new d({label:this.nls.intersectionPage.useDefaultToleranceText},f.create("div",{"class":"esriCTPopupLabels"},k));f.create("div",{"class":"esriCTPopupLabels esriCTMargin",
innerHTML:this.nls.intersectionPage.toleranceValueText},k);this._toleranceValueTextbox=new O({style:{width:"100%"},constraints:{min:0},required:!0},f.create("div",{"class":"esriCTPopupLabels"},k));f.create("div",{"class":"esriCTPopupLabels esriCTMargin",innerHTML:this.nls.intersectionPage.toleranceUnitText},k);var E=[{label:this.nls.units.miles,value:"miles"},{label:this.nls.units.kilometers,value:"kilometers"},{label:this.nls.units.meters,value:"meters"},{label:this.nls.units.feet,value:"feet"}];
var N=f.create("div",{},k);this._toleranceUnitDropdown=new K({style:{width:"200px"},options:E});this._toleranceUnitDropdown.placeAt(N);this._toleranceUnitDropdown.startup();this.toleranceSettingIconDialog=new u({"class":this.baseClass,content:k});this.own(b(this.toleranceSettingIconDialog,"close",y.hitch(this,function(){var l;var z=this._useDefaultToleranceCheckbox.getValue();var L=this._toleranceValueTextbox.get("value");var R=this._toleranceUnitDropdown.getValue();z?l=this._useDefaultToleranceCheckbox.label:
this._toleranceValueTextbox.isValid()&&(l="px"===R?L+" "+this.nls.intersectionPage.pixelsUnitText:L+" "+this.nls.units[R]);if(z||this._toleranceValueTextbox.isValid())this._toleranceValueTextbox.isValid()?this._selectedRowForToleranceSettings.toleranceSettings.value=L:this._selectedRowForToleranceSettings.toleranceSettings.value=0,this._selectedRowForToleranceSettings.toleranceSettings.unit=R,this._selectedRowForToleranceSettings.toleranceSettings.useDefault=z,a.set(this._selectedRowForToleranceSettings.toleranceTextContainer,
"innerHTML",l),a.set(this._selectedRowForToleranceSettings.toleranceTextContainer,"title",l)})))},_addToleranceSettings:function(k,E){k.toleranceSettings=E&&E.toleranceSettings?E.toleranceSettings:{useDefault:!1,value:0,unit:"meters"};E=k.toleranceSettings.useDefault?this._useDefaultToleranceCheckbox.label:"px"===k.toleranceSettings.unit?k.toleranceSettings.value+" "+this.nls.intersectionPage.pixelsUnitText:k.toleranceSettings.value+" "+this.nls.units[k.toleranceSettings.unit];var N=c(".simple-table-cell",
k)[2];N=f.create("div",{"class":"esriCTToleranceParentDiv"},N);k.toleranceTextContainer=f.create("div",{"class":"esriCTToleranceValueText esriCTEllipsis",innerHTML:E,title:E},N);E=new M({iconClass:"esriCTToleranceSettingsIcon",dropDown:this.toleranceSettingIconDialog,title:this.nls.intersectionPage.toleranceSettingText},f.create("div",{},N));this.own(b(E,"click",y.hitch(this,function(){this._selectedRowForToleranceSettings=k;this._updateUnitsOption();this._toleranceValueTextbox.set("value",k.toleranceSettings.value);
this._useDefaultToleranceCheckbox.setValue(k.toleranceSettings.useDefault);this._toleranceUnitDropdown.set("value",k.toleranceSettings.unit)})))},_updateUnitsOption:function(){var k=!1;"esriGeometryPoint"===this._selectedRowForToleranceSettings.layerSelector.getSelectedItem().layerInfo.layerObject.geometryType?(t.some(this._toleranceUnitDropdown.options,y.hitch(this,function(E){if("px"===E.value)return k=!0})),k||this._toleranceUnitDropdown.addOption({label:this.nls.intersectionPage.pixelsUnitText,
value:"px"})):this._toleranceUnitDropdown.removeOption("px")},_addLayersDropDown:function(k,E){k.layerSelector&&k.layerSelector.destroy();var N=this._createLayerChooserMapArgs();var l=new G(N);l.startup();N=c(".simple-table-cell",k)[0];l=new D({layerChooser:l});l.placeAt(N);l.startup();k.layerSelector=l;l.setSelectedLayer(this.totalLayers[0]);E&&l.setSelectedLayer(this.layerInfos.getLayerInfoById(E.layerId).layerObject);this.own(b(l,"selection-change",y.hitch(this,function(){k.layerFields.set("options",
this._addLayerFieldOptions(k));k.layerFields.set("value",k.layerFields.options[0],!1);var z=c(".esriCTToleranceValueText",k)[0];var L=this.nls.units.meters;k.toleranceSettings={value:0,unit:"meters"};a.set(z,"innerHTML","0 "+L)})))},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},_createIntersectionLayerfilter:function(k){return function(E){var N=!1;E.getLayerObject().then(function(l){l&&l.fields&&t.some(l.fields,
function(z){if(-1<k.indexOf(z.type))return N=!0})});return N}},_createFiltersForLayerSelector:function(){var k=G.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);var E=G.createImageServiceLayerFilter(!0);k=G.orCombineFilters([k,E]);E=this._createIntersectionLayerfilter(this.ValidFieldsByType[this._fieldType]);return G.andCombineFilters([k,E])},_initLayerSelector:function(){var k=[];var E=this._createLayerChooserMapArgs();this._layerChooserFromMap=new G(E);this._layerChooserFromMap.startup();
E=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();this._getAllFilteredLayers(E,k);return k},_getAllFilteredLayers:function(k,E){t.forEach(k,y.hitch(this,function(N){if(N.isLeaf()){var l=new n;this._layerChooserFromMap.filter(N).then(y.hitch(this,function(z){z&&(this.totalLayers.push(N),this._isLayerEditable(N)&&this._layersForApplyOn.push(N));l.resolve()}));E.push(l)}else this._getAllFilteredLayers(N.newSubLayers,E)}))},_isLayerEditable:function(k){var E=!1;k&&k.layerObject&&k.layerObject.getEditCapabilities&&
(k=k.layerObject.getEditCapabilities(),k.canCreate||k.canUpdate||k.canDelete||k.canUpdateGeometry)&&(E=!0);return E},_addFieldsDropDown:function(k,E){var N;if(N=c(".simple-table-cell",k)[1])N=f.create("div",{"class":"esriCTDropDownContainer"},N),k.layerFields=new K({options:this._addLayerFieldOptions(k),"class":"esriCTSettingsFieldDropdown"}),k.layerFields.placeAt(N),k.layerFields.startup(),E&&k.layerFields.set("value",E.field,!1)},_addLayerNameOptions:function(){var k=[];var E=this.layerInfos.getLayerInfoArray();
t.forEach(E,y.hitch(this,function(N){-1<N.layerObject.capabilities.indexOf("Query")&&k.push({label:N.layerObject.name,value:N.layerObject.id})}));return k},_addLayerFieldOptions:function(k){var E=[],N=[];if(!k.layerSelector.getSelectedItem())return E;"esriFieldTypeString"===this._fieldType&&E.push({label:this.nls.intersectionPage.useLayerName,value:"esriCTUseLayerName"});N=this.ValidFieldsByType[this._fieldType];k=k.layerSelector.getSelectedItem().layerInfo.layerObject;t.forEach(k.fields,y.hitch(this,
function(l){"esriFieldTypeGeometry"!==l.type&&"esriFieldTypeBlob"!==l.type&&"esriFieldTypeRaster"!==l.type&&"esriFieldTypeXML"!==l.type&&-1<N.indexOf(l.type)&&E.push({label:l.alias||l.name,value:l.name})}));return E},showDialog:function(){var k=600,E=!1;this.isGroup||(S.add(this.groupInfoNode1,"esriCTHidden"),S.add(this.groupInfoNode2,"esriCTHidden"),S.add(this.layerTableNode,"esriCTIntersectionTableMaxHeight"),E=!0,k=400);var N=new B({titleLabel:this.nls.actionPage.copyAction.intersection,width:950,
maxHeight:k,autoHeight:E,content:this,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var l={},z={};l.enabled=this.isEnabled;l.ignoreLayerRanking=this.ignoreLayerRanking.checked;l.fields=this._getTableData();if(this.isGroup){if(!this.groupNameTextBox.isValid()){this.groupNameTextBox.focus();return}}else delete this._fieldValues.Intersection.attributeActionGroupName;this._fieldValues.Intersection||(this._fieldValues.Intersection={actionName:"Intersection"});y.mixin(this._fieldValues.Intersection,
l);this.isGroup?(z.name=this.groupNameTextBox.get("value"),z.dataType=this.dataTypeDropdown.get("value"),z.attributeInfo=l,z.appliedOn=this._layerAndFieldsApplyOnObj.getCheckedFields(z),this.emit("groupInfoUpdated",z)):this.emit("attributeActionUpdated");N.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){N.close()})}],onClose:y.hitch(this,function(){})});this.isGroup&&this.groupNameTextBox.focus()},_getTableData:function(){var k=[],E;t.forEach(this._layerTable.getRows(),
y.hitch(this,function(N){N.layerSelector&&(E={},E.layerId=N.layerSelector.getSelectedItem().layerInfo.id,E.field=N.layerFields.getValue(),E.toleranceSettings=y.clone(N.toleranceSettings),k.push(E))}));return k},_createLayerFieldsFilter:function(k){var E=[],N={};t.forEach(this._layersForApplyOn,y.hitch(this,function(l){l.isTable||t.forEach(l.layerObject.fields,y.hitch(this,function(z){this.ValidFieldsByTypeToApplyOn[k]&&(E=this.ValidFieldsByTypeToApplyOn[k],-1<E.indexOf(z.type)&&z.editable&&(N[l.id]||
(N[l.id]={}),N[l.id][z.name]=z))}))}));return N},_createLayersAndFields:function(){this._layerAndFieldsApplyOnObj=new q({map:this.map,layerInfos:this.layerInfos,_configInfos:this._configInfos,actionName:"Intersection",nls:this.nls,prevName:this.prevName,existingGroups:this.existingGroups,layerDetails:this._createLayerFieldsFilter(this.dataTypeDropdown.get("value")),appliedOn:this.appliedOn});f.empty(this.tableParentContainer);this._layerAndFieldsApplyOnObj.placeAt(this.tableParentContainer);this._layerAndFieldsApplyOnObj.startup()},
deleteGroup:function(){this._layerAndFieldsApplyOnObj.deleteGroup()}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(F,J,y,K,t,a,f,
b,c,h,n,p,v,G,D,e,g,x){var B=y([K,t,a,J],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,
onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);v.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new x({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=p.hitch(this,this.basicFilter);this.filter=B.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(d){var m=new b;this.onlyShowVisible?m.resolve(d.isShowInMap()):m.resolve(!0);return m},filter:function(d){d=new b;d.resolve(!0);return d},getSelectedItems:function(){var d=this.tree.getSelectedItems();return G.map(d,p.hitch(this,function(m){return this.getHandledItem(m)}))},getAllItems:function(){var d=this.tree.getAllItems(),m=[];G.forEach(d,p.hitch(this,function(u){"root"!==u.id&&(u=this.getHandledItem(u),
m.push(u))}));return m},getHandledItem:function(d){return{name:d.name,layerInfo:d.layerInfo}},_isLeafItem:function(d){return d.isLeaf},setCreateMapResponse:function(d){this.createMapResponse=d;g.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(p.hitch(this,function(m){this.layerInfosObj=m;this.own(F(this.layerInfosObj,"layerInfosChanged",p.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(F(this.layerInfosObj,"layerInfosIsShowInMapChanged",
p.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(d,m){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(d){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(d){this._clear();v.setStyle(this.errorTipSection,"display","block");var m=[];this.onlyShowWebMapLayers?(m=d.getLayerInfoArrayOfWebmap(),m=m.concat(d.getTableInfoArrayOfWebmap())):(m=d.getLayerInfoArray(),
m=m.concat(d.getTableInfoArray()));0!==m.length&&(v.setStyle(this.errorTipSection,"display","none"),G.forEach(m,p.hitch(this,function(u){this._addDirectLayerInfo(u)})))},_addDirectLayerInfo:function(d){d&&d.getLayerObject().then(p.hitch(this,function(){this._addItem("root",d)}),p.hitch(this,function(m){console.error(m)}))},_clear:function(){var d=this._store.query({parent:"root"});G.forEach(d,p.hitch(this,function(m){m&&"root"!==m.id&&this._store.remove(m.id)}))},_addItem:function(d,m){var u=null,
C=m.getLayerType(),O=this.filter(m);n({layerType:C,valid:O}).then(p.hitch(this,function(M){if(M.valid){var S=p.hitch(this,function(N,l){this._id++;u={name:m.title||"",parent:d,layerInfo:m,type:M.layerType,layerClass:m.layerObject.declaredClass,id:this._id.toString(),isLeaf:N,hasChildren:l};this._store.add(u)}),q=m.getSubLayers(),k=0===q.length,E=!0;this.onlyFilterCurrentLayerWhenAddItem?(k&&(E=!1),S(k,E)):k?S(k,!1):(q=G.map(q,p.hitch(this,function(N){return this.filter(N)})),n(q).then(p.hitch(this,
function(N){(N=G.some(N,function(l){return l}))&&S(k,N)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var d=this._getRootItem();d=new f({data:[d],getChildren:function(m){return this.query({parent:m.id})}});this._store=new c(d);d=new h({store:this._store,query:{id:"root"},mayHaveChildren:p.hitch(this,this._mayHaveChildren)});this.tree=new e({multiple:this.multiple,model:d,showRoot:!1,isLeafItem:p.hitch(this,this._isLeafItem),
style:{width:"100%"},onOpen:p.hitch(this,function(m,u){"root"!==m.id&&this._onTreeOpen(m,u)}),onClick:p.hitch(this,function(m,u,C){this._onTreeClick(m,u,C);this.emit("tree-click",m,u,C)}),getIconStyle:p.hitch(this,function(m,u){var C=null;if(!m||"root"===m.id)return null;var O={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},M=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(m=this._getIconInfo(m,u).imageName)O.backgroundImage=
"url("+M+"/css/images/"+m+")",C=O;return C}),getIconClass:p.hitch(this,function(m,u){return this._getIconInfo(m,u).className}),getTooltip:p.hitch(this,function(m){return this.displayTooltipForTreeNode?m.layerInfo.title:""})});v.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(d){return d.hasChildren},_getIconInfo:function(d,m){var u="",C="";"ArcGISDynamicMapServiceLayer"===d.type||"ArcGISTiledMapServiceLayer"===d.type?m?(u="mapserver_open.png",
C="mapservice-layer-icon open"):(u="mapserver_close.png",C="mapservice-layer-icon close"):"GroupLayer"===d.type?m?(u="group_layer2.png",C="group-layer-icon open"):(u="group_layer1.png",C="group-layer-icon close"):"FeatureLayer"===d.type?(d=D.getTypeByGeometryType(d.layerInfo.layerObject.geometryType),"point"===d?(u="point_layer1.png",C="point-layer-icon"):"polyline"===d?(u="line_layer1.png",C="line-layer-icon"):"polygon"===d&&(u="polygon_layer1.png",C="polygon-layer-icon")):"Table"===d.type?(u="table.png",
C="table-icon"):"ArcGISImageServiceLayer"===d.type||"ArcGISImageServiceVectorLayer"===d.type?(u="image_layer.png",C="iamge-layer-icon"):m?(u="mapserver_open.png",C="mapservice-layer-icon open"):(u="mapserver_close.png",C="mapservice-layer-icon close");return{imageName:u,className:C}},_onTreeOpen:function(d,m){if("root"!==d.id){var u=[];m=[];u=d.layerInfo.getSubLayers();d.checked||(this.shelter.show(),m=G.map(u,p.hitch(this,function(C){return C.getLayerObject()})),n(m).then(p.hitch(this,function(){this.domNode&&
(G.forEach(u,p.hitch(this,function(C){this._addItem(d.id,C)})),d.checked=!0,this.shelter.hide())}),p.hitch(this,function(C){console.error(C);this.shelter.hide()})))}},_onTreeClick:function(d,m,u){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});B.createFilterByLayerType=function(d){p.isArrayLike(d)||(d=[]);return function(m){var u=new b;if(0===d.length)u.resolve(!0);else{var C=[];m.traversal(function(O){C.push(O.getLayerType())});
n(C).then(function(O){for(var M=0;M<O.length;M++)for(var S=0;S<d.length;S++)if(O[M]===d[S]){u.resolve(!0);return}u.resolve(!1)},function(O){console.error(O);u.reject(O)})}return u}};B.createFeaturelayerFilter=function(d,m,u,C){var O=["point","polyline","polygon"];d&&0<d.length?(d=G.filter(d,function(M){return 0<=O.indexOf(M)}),0===d.length&&(d=O)):d=O;return function(M){var S=M.getLayerType();M=M.getLayerObject();return n({layerType:S,layerObject:M}).then(function(q){var k=q.layerType;q=q.layerObject;
if("ArcGISDynamicMapServiceLayer"===k||"ArcGISTiledMapServiceLayer"===k||"GroupLayer"===k||"FeatureCollection"===k)return!0;if("FeatureLayer"===k){k=D.getTypeByGeometryType(q.geometryType);k=0<=G.indexOf(d,k);var E=B._shouldPassStatisticsCheck(C,q);return q.url?(q=D.isFeaturelayerUrlSupportQuery(q.url,q.capabilities),k&&q&&E):m&&k}return"Table"===k?(k=D.isFeaturelayerUrlSupportQuery(q.url,q.capabilities),q=B._shouldPassStatisticsCheck(C,q),u&&k&&q):!1})}};B.createImageServiceLayerFilter=function(d,
m){return function(u){var C=u.getLayerType();u=u.getLayerObject();return n({layerType:C,layerObject:u}).then(function(O){var M=O.layerType,S=O.layerObject;return"ArcGISImageServiceLayer"===M||"ArcGISImageServiceVectorLayer"===M?d?D.isImageServiceSupportQuery(O.layerObject.capabilities)?m?B._shouldPassStatisticsCheck(m,S):!0:!1:!0:!1})}};B._shouldPassStatisticsCheck=function(d,m){return d?(d=!1,d=m.advancedQueryCapabilities?!!m.advancedQueryCapabilities.supportsStatistics:!!m.supportsStatistics):!0};
B.createQueryableLayerFilter=function(d){var m=B.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,d);d=B.createImageServiceLayerFilter(!0,d);return B.orCombineFilters([m,d])};B.andCombineFilters=function(d){return B._combineFilters(d,!0)};B.orCombineFilters=function(d){return B._combineFilters(d,!1)};B._combineFilters=function(d,m){return function(u){var C=new b,O=G.map(d,function(M){return M(u)});n(O).then(function(M){var S=!1;S=m?G.every(M,function(q){return q}):G.some(M,function(q){return q});
C.resolve(S)},function(M){console.error(M);C.reject(M)});return C}};return B})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(F,J,y,K,t,a,f){return y("dijit.tree.ObjectStoreModel",f,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(b){t.mixin(this,b);this.childrenCache={}},getRoot:function(b,c){if(this.root)b(this.root);else{var h=this.store.query(this.query);
h.then&&this.own(h);a(h,t.hitch(this,function(n){if(1!=n.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+n.length+" items, but must return exactly one");this.root=n[0];b(this.root);h.observe&&h.observe(t.hitch(this,function(p){this.onChange(p)}),!0)}),c)}},mayHaveChildren:function(){return!0},getChildren:function(b,c,h){var n=this.store.getIdentity(b);if(this.childrenCache[n])a(this.childrenCache[n],c,h);else{var p=this.childrenCache[n]=this.store.getChildren(b);p.then&&this.own(p);
p.observe&&this.own(p.observe(t.hitch(this,function(v,G,D){this.onChange(v);G!=D&&a(p,t.hitch(this,"onChildrenChange",b))}),!0));a(p,c,h)}},isItem:function(){return!0},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return b[this.labelAttr]},newItem:function(b,c,h,n){return this.store.put(b,{parent:c,before:n})},pasteItem:function(b,c,h,n,p,v){var G=new K;if(c===h&&!n&&!v)return G.resolve(!0),G;c&&!n?this.getChildren(c,t.hitch(this,function(D){D=[].concat(D);var e=F.indexOf(D,
b);D.splice(e,1);this.onChildrenChange(c,D);G.resolve(this.store.put(b,{overwrite:!0,parent:h,oldParent:c,before:v,isCopy:!1}))})):G.resolve(this.store.put(b,{overwrite:!0,parent:h,oldParent:c,before:v,isCopy:!0}));return G},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e){var g=F([D._TreeNode,v],{templateString:K,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,
"first");this.own(n(this.checkNode,"click",t.hitch(this,this._onClick)));this.own(n(this.rowNode,"keydown",t.hitch(this,function(x,B){B.target=x;B.keyCode!==p.ENTER&&B.keyCode!==p.SPACE||this._onClick(B)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(x){(x.target||x.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,x):this.tree._onClick(this,x)},_onChange:function(){this.isLeaf&&setTimeout(t.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return F([D,v],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+e.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(h.before(this,"onClick",t.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(x){this.model.store.remove(x)},getAllItems:function(){var x=this.getAllTreeNodeWidgets();return f.map(x,t.hitch(this,function(B){var d=B.item;d.selected=B.checkNode.checked;return d}))},getSelectedItems:function(){var x=this.getAllTreeNodeWidgets();x=f.filter(x,t.hitch(this,function(B){return B.checkNode.checked}));return f.map(x,
t.hitch(this,function(B){return B.item}))},getFilteredItems:function(x){var B=this.getAllTreeNodeWidgets();B=f.map(B,t.hitch(this,function(d){var m=d.item;m.selected=d.checkNode.checked;return m}));return f.filter(B,t.hitch(this,function(d){return x(d)}))},getTreeNodeByItemId:function(x){for(var B=this._getAllTreeNodeDoms(),d=0;d<B.length;d++){var m=G.byNode(B[d]);if(m.item.id.toString()===x.toString())return m}return null},selectItem:function(x){(x=this.getTreeNodeByItemId(x))&&x.isLeaf&&this.selectNodeWidget(x)},
unselectItem:function(x){(x=this.getTreeNodeByItemId(x))&&x.isLeaf&&x.unselect()},getAllLeafTreeNodeWidgets:function(){var x=this.getAllTreeNodeWidgets();return f.filter(x,t.hitch(this,function(B){return B.isLeaf}))},getAllTreeNodeWidgets:function(){var x=this._getAllTreeNodeDoms();return f.map(x,t.hitch(this,function(B){return G.byNode(B)}))},isLeafItem:function(x){return x&&x.isLeaf},_getAllTreeNodeDoms:function(){return c(".dijitTreeNode",this.domNode)},_createTreeNode:function(x){x.isLeaf=this.isLeafItem(x.item);
this.multiple||(x.groupId=this.uniqueId);return new g(x)},_onTreeNodeSelect:function(x){this.emit("item-select",{item:x.item,treeNode:x})},_onTreeNodeUnselect:function(x){this.emit("item-unselect",{item:x.item,treeNode:x})},selectNodeWidget:function(x){this.multiple||this.unselectAllLeafNodeWidgets();x.select()},_jimuBeforeClick:function(x,B,d){B.isLeaf&&(a.hasClass(d.target||d.srcElement,"jimu-tree-check-node")||(this.multiple?B.toggleSelect():this.selectNodeWidget(B)));return arguments},_onCheckNodeClick:function(x,
B,d){!this.multiple&&B&&this.unselectAllLeafNodeWidgets();b.stop(d);this.focusNode(x);setTimeout(t.hitch(this,function(){B?this.selectNodeWidget(x):x.unselect();this.onClick(x.item,x,d)}),0)},unselectAllLeafNodeWidgets:function(){var x=this.getAllLeafTreeNodeWidgets();f.forEach(x,t.hitch(this,function(B){B.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S,q,k,E,N,l,z,L,R,Q){function V(I){return e.delegate(I.promise||I,{addCallback:function(P){this.then(P)},addErrback:function(P){this.otherwise(P)}})}var W=K("dijit._TreeNode",[M,S,q,k,E],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(I){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=I;this._set("label",I);v("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:l,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(I){var P=Math.max(I,0)*this.tree._nodePixelIndent+"px";h.set(this.domNode,
"backgroundPosition",P+" 0px");h.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",P);F.forEach(this.getChildren(),function(X){X.set("indent",I+1)});this._set("indent",I)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(I){var P=this.tree,X=P.model;P._v10Compat&&I===X.root&&(I=null);this._applyClassAndStyle(I,"icon","Icon");this._applyClassAndStyle(I,"label","Label");this._applyClassAndStyle(I,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(I,P,X){var A="_"+P+"Class";P+="Node";var r=this[A];this[A]=this.tree["get"+X+"Class"](I,this.isExpanded);b.replace(this[P],this[A]||"",r||"");h.set(this[P],this.tree["get"+X+"Style"](I,this.isExpanded)||{})},_updateLayout:function(){var I=this.getParent();I=!I||!I.rowNode||"none"==I.rowNode.style.display;b.toggle(this.domNode,"dijitTreeIsRoot",I);b.toggle(this.domNode,"dijitTreeIsLast",!I&&!this.getNextSibling())},_setExpando:function(I){var P=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];I=I?0:this.isExpandable?this.isExpanded?1:2:3;b.replace(this.expandoNode,P[I],P);this.expandoNodeText.innerHTML=["*","-","+","*"][I]},expand:function(){if(this._expandDeferred)return V(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");b.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var I=p.wipeIn({node:this.containerNode,duration:O.defaultDuration}),P=this._expandDeferred=new t(function(){I.stop()});J.after(I,"onEnd",function(){P.resolve(!0)},!0);I.play();return V(P)},collapse:function(){if(this._collapseDeferred)return V(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");b.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var I=p.wipeOut({node:this.containerNode,duration:O.defaultDuration}),P=this._collapseDeferred=new t(function(){I.stop()});J.after(I,"onEnd",
function(){P.resolve(!0)},!0);I.play();return V(P)},indent:0,setChildItems:function(I){var P=this.tree,X=P.model,A=[],r=P.focusedChild,w=this.getChildren();F.forEach(w,function(H){q.prototype.removeChild.call(this,H)},this);this.defer(function(){F.forEach(w,function(H){if(!H._destroyed&&!H.getParent()){P.dndController.removeTreeNode(H);(function fa(aa){var ca=X.getIdentity(aa.item),ea=P._itemNodesMap[ca];1==ea.length?delete P._itemNodesMap[ca]:(ca=F.indexOf(ea,aa),-1!=ca&&ea.splice(ca,1));F.forEach(aa.getChildren(),
fa)})(H);if(P.persist){var T=F.map(H.getTreePath(),function(aa){return P.model.getIdentity(aa)}).join("/"),U;for(U in P._openedNodes)U.substr(0,T.length)==T&&delete P._openedNodes[U];P._saveExpandedNodes()}P.lastFocusedChild&&!f.isDescendant(P.lastFocusedChild.domNode,P.domNode)&&delete P.lastFocusedChild;r&&!f.isDescendant(r.domNode,P.domNode)&&P.focus();H.destroyRecursive()}})});this.state="Loaded";I&&0<I.length?(this.isExpandable=!0,F.forEach(I,function(H){var T=X.getIdentity(H),U=P._itemNodesMap[T];
if(U)for(var Z=0;Z<U.length;Z++)if(U[Z]&&!U[Z].getParent()){var aa=U[Z];aa.set("indent",this.indent+1);break}aa||(aa=this.tree._createTreeNode({item:H,tree:P,isExpandable:X.mayHaveChildren(H),label:P.getLabel(H),labelType:P.model&&P.model.labelType||"text",tooltip:P.getTooltip(H),ownerDocument:P.ownerDocument,dir:P.dir,lang:P.lang,textDir:P.textDir,indent:this.indent+1}),U?U.push(aa):P._itemNodesMap[T]=[aa]);this.addChild(aa);(this.tree.autoExpand||this.tree._state(aa))&&A.push(P._expandNode(aa))},
this),F.forEach(this.getChildren(),function(H){H._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);I=a(A);this.tree._startPaint(I);return V(I)},getTreePath:function(){for(var I=this,P=[];I&&I!==this.tree.rootNode;)P.unshift(I.item),I=I.getParent();P.unshift(this.tree.rootNode.item);return P},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(I){this.inherited(arguments);var P=this.getChildren();
0==P.length&&(this.isExpandable=!1,this.collapse());F.forEach(P,function(X){X._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(I){this.labelNode.setAttribute("aria-selected",I?"true":"false");b.toggle(this.rowNode,"dijitTreeRowSelected",I)},focus:function(){u.focus(this.focusNode)}});v("dojo-bidi")&&W.extend({_setTextDirAttr:function(I){!I||this.textDir==I&&this._created||(this._set("textDir",I),this.applyTextDir(this.labelNode),F.forEach(this.getChildren(),
function(P){P.set("textDir",I)},this))}});var Y=K("dijit.Tree",[M,N,S,E],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:z,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(I,P){x.publish(this.id,e.mixin({tree:this,event:I},P||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new t;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var I=
this;this.own(g(this.containerNode,g.selector(".dijitTreeNode",B.enter),function(A){I._onNodeMouseEnter(C.byNode(this),A)}),g(this.containerNode,g.selector(".dijitTreeNode",B.leave),function(A){I._onNodeMouseLeave(C.byNode(this),A)}),g(this.containerNode,g.selector(".dijitTreeRow",m.press),function(A){I._onNodePress(C.getEnclosingWidget(this),A)}),g(this.containerNode,g.selector(".dijitTreeRow",m),function(A){I._onClick(C.getEnclosingWidget(this),A)}),g(this.containerNode,g.selector(".dijitTreeRow",
"dblclick"),function(A){I._onDblClick(C.getEnclosingWidget(this),A)}));this.model||this._store2model();this.own(J.after(this.model,"onChange",e.hitch(this,"_onItemChange"),!0),J.after(this.model,"onChildrenChange",e.hitch(this,"_onItemChildrenChange"),!0),J.after(this.model,"onDelete",e.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){e.isString(this.dndController)&&(this.dndController=e.getObject(this.dndController));for(var P={},X=0;X<this.dndParams.length;X++)this[this.dndParams[X]]&&
(P[this.dndParams[X]]=this[this.dndParams[X]]);this.dndController=new this.dndController(this,P)}this._load();this.onLoadDeferred=V(this.pendingCommandsPromise);this.onLoadDeferred.then(e.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;G.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var I={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(I.mayHaveChildren=
e.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(I.getChildren=e.hitch(this,function(P,X,A){this.getItemChildren(this._v10Compat&&P===this.model.root?null:P,X,A)}));this.model=new R(I);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(e.hitch(this,function(I){var P=this.rootNode=this.tree._createTreeNode({item:I,tree:this,isExpandable:!0,label:this.label||this.getLabel(I),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(P.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(P.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(P.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),P.labelNode.setAttribute("role","presentation"),P.labelNode.removeAttribute("aria-selected"),P.containerNode.setAttribute("role","tree"),P.containerNode.setAttribute("aria-expanded","true"),P.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(P.domNode);I=this.model.getIdentity(I);this._itemNodesMap[I]?this._itemNodesMap[I].push(P):this._itemNodesMap[I]=[P];P._updateLayout();
this._expandNode(P).then(e.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),e.hitch(this,function(I){console.error(this,": error loading root: ",I)}))},getNodesByItem:function(I){if(!I)return[];I=e.isString(I)?I:this.model.getIdentity(I);return[].concat(this._itemNodesMap[I])},_setSelectedItemAttr:function(I){this.set("selectedItems",[I])},_setSelectedItemsAttr:function(I){var P=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(e.hitch(this,function(){var X=F.map(I,function(r){return!r||e.isString(r)?r:P.model.getIdentity(r)}),A=[];F.forEach(X,function(r){A=A.concat(P._itemNodesMap[r]||[])});this.set("selectedNodes",A)}))},_setPathAttr:function(I){return I.length?V(this.set("paths",[I]).then(function(P){return P[0]})):V(this.set("paths",[]).then(function(P){return P[0]}))},_setPathsAttr:function(I){function P(A,r){var w=A.shift(),H=F.filter(r,function(T){return T.getIdentity()==w})[0];
if(H)return A.length?X._expandNode(H).then(function(){return P(A,H.getChildren())}):H;throw new Y.PathError("Could not expand path at "+w);}var X=this;return V(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(F.map(I,function(A){A=F.map(A,function(r){return r&&e.isObject(r)?X.model.getIdentity(r):r});if(A.length)return P(A,[X.rootNode]);throw new Y.PathError("Empty path");}))}).then(function(A){X.set("selectedNodes",A);return X.paths}))},_setSelectedNodeAttr:function(I){this.set("selectedNodes",
[I])},_setSelectedNodesAttr:function(I){this.dndController.setSelection(I)},expandAll:function(){function I(X){return P._expandNode(X).then(function(){var A=F.filter(X.getChildren()||[],function(r){return r.isExpandable});return a(F.map(A,I))})}var P=this;return V(I(this.rootNode))},collapseAll:function(){function I(X){var A=F.filter(X.getChildren()||[],function(r){return r.isExpandable});A=a(F.map(A,I));return!X.isExpanded||X==P.rootNode&&!P.showRoot?A:A.then(function(){return P._collapseNode(X)})}
var P=this;return V(I(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(I){return this.model.getLabel(I)},getIconClass:function(I,P){return!I||this.model.mayHaveChildren(I)?P?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(I,P){(I=this._getNext(P))&&I.isTreeNode&&this.focusNode(I)},
_onUpArrow:function(I,P){if(I=P.getPreviousSibling())for(P=I;P.isExpandable&&P.isExpanded&&P.hasChildren();)P=P.getChildren(),P=P[P.length-1];else if(I=P.getParent(),this.showRoot||I!==this.rootNode)P=I;P&&P.isTreeNode&&this.focusNode(P)},_onRightArrow:function(I,P){P.isExpandable&&!P.isExpanded?this._expandNode(P):P.hasChildren()&&(P=P.getChildren()[0])&&P.isTreeNode&&this.focusNode(P)},_onLeftArrow:function(I,P){P.isExpandable&&P.isExpanded?this._collapseNode(P):(I=P.getParent())&&I.isTreeNode&&
(this.showRoot||I!==this.rootNode)&&this.focusNode(I)},focusLastChild:function(){var I=this._getLast();I&&I.isTreeNode&&this.focusNode(I)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var I=this.rootNode;I.isExpanded;){var P=I.getChildren();if(!P.length)break;I=P[P.length-1]}return I},_getNext:function(I){if(I.isExpandable&&I.isExpanded&&I.hasChildren())return I.getChildren()[0];for(;I&&I.isTreeNode;){var P=I.getNextSibling();if(P)return P;
I=I.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(I,P){return f.isDescendant(I,P.expandoNode)||f.isDescendant(I,P.expandoNodeText)},_onNodePress:function(I,P){this.focusNode(I)},__click:function(I,P,X,A){var r=this.isExpandoNode(P.target,I);I.isExpandable&&(X||r)?this._onExpandoClick({node:I}):(this._publish("execute",{item:I.item,node:I,evt:P}),this[A](I.item,I,P),this.focusNode(I));P.stopPropagation();P.preventDefault()},_onClick:function(I,P){this.__click(I,P,this.openOnClick,
"onClick")},_onDblClick:function(I,P){this.__click(I,P,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(I){I=I.node;this.focusNode(I);I.isExpanded?this._collapseNode(I):this._expandNode(I)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(I){G.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(I)},_getRootOrFirstNode:function(){G.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(I){I._expandNodeDeferred&&delete I._expandNodeDeferred;if("Loading"!=I.state&&I.isExpanded){var P=I.collapse();this.onClose(I.item,I);this._state(I,!1);this._startPaint(P);return P}},_expandNode:function(I){if(I._expandNodeDeferred)return I._expandNodeDeferred;var P=this.model,X=I.item,A=this;I._loadDeferred||(I.markProcessing(),I._loadDeferred=new t,P.getChildren(X,function(r){I.unmarkProcessing();
I.setChildItems(r).then(function(){I._loadDeferred.resolve(r)})},function(r){console.error(A,": error loading "+I.label+" children: ",r);I._loadDeferred.reject(r)}));P=I._loadDeferred.then(e.hitch(this,function(){var r=I.expand();this.onOpen(I.item,I);this._state(I,!0);return r}));this._startPaint(P);return P},focusNode:function(I){for(var P=[],X=this.domNode;X&&X.tagName&&"IFRAME"!==X.tagName.toUpperCase();X=X.parentNode)P.push({domNode:X.contentWindow||X,scrollLeft:X.scrollLeft||0,scrollTop:X.scrollTop||
0});this.focusChild(I);this.defer(function(){for(var A=0,r=P.length;A<r;A++)P[A].domNode.scrollLeft=P[A].scrollLeft,P[A].domNode.scrollTop=P[A].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(I){var P=this.model.getIdentity(I);if(P=this._itemNodesMap[P]){var X=this.getLabel(I),A=this.getTooltip(I);F.forEach(P,function(r){r.set({item:I,label:X,tooltip:A});r._updateItemClasses(I)})}},_onItemChildrenChange:function(I,P){I=this.model.getIdentity(I);
(I=this._itemNodesMap[I])&&F.forEach(I,function(X){X.setChildItems(P)})},_onItemDelete:function(I){I=this.model.getIdentity(I);var P=this._itemNodesMap[I];P&&(F.forEach(P,function(X){this.dndController.removeTreeNode(X);var A=X.getParent();A&&A.removeChild(X);this.lastFocusedChild&&!f.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!f.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();X.destroyRecursive()},this),delete this._itemNodesMap[I])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var I=y(this.cookieName);I&&F.forEach(I.split(","),function(P){this._openedNodes[P]=!0},this)}},_state:function(I,P){if(!this.persist)return!1;var X=F.map(I.getTreePath(),function(A){return this.model.getIdentity(A)},this).join("/");if(1===arguments.length)return this._openedNodes[X];P?this._openedNodes[X]=!0:delete this._openedNodes[X];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var I=
[],P;for(P in this._openedNodes)I.push(P);y(this.cookieName,I.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!e.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(I){I&&c.setMarginBox(this.domNode,I);this._nodePixelIndent=c.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(e.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(I){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var P=e.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
d(I,P,P)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(I){return new W(I)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});v("dojo-bidi")&&Y.extend({_setTextDirAttr:function(I){I&&this.textDir!=I&&(this._set("textDir",
I),this.rootNode.set("textDir",I))}});Y.PathError=n("TreePathError");Y._TreeNode=W;return Y})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(F,J,y,K){return y("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(t){K.mixin(this,t);this.connects=[];t=this.store;if(!t.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
t.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([J.after(t,"onNew",K.hitch(this,"onNewItem"),!0),J.after(t,"onDelete",K.hitch(this,"onDeleteItem"),!0),J.after(t,"onSet",K.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var t;t=this.connects.pop();)t.remove()},getRoot:function(t,a){this.root?t(this.root):this.store.fetch({query:this.query,onComplete:K.hitch(this,function(f){if(1!=f.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+f.length+
" items, but must return exactly one");this.root=f[0];t(this.root)}),onError:a})},mayHaveChildren:function(t){return F.some(this.childrenAttrs,function(a){return this.store.hasAttribute(t,a)},this)},getChildren:function(t,a,f){var b=this.store;if(b.isItemLoaded(t)){for(var c=[],h=0;h<this.childrenAttrs.length;h++){var n=b.getValues(t,this.childrenAttrs[h]);c=c.concat(n)}var p=0;this.deferItemLoadingUntilExpand||F.forEach(c,function(G){b.isItemLoaded(G)||p++});0==p?a(c):F.forEach(c,function(G,D){b.isItemLoaded(G)||
b.loadItem({item:G,onItem:function(e){c[D]=e;0==--p&&a(c)},onError:f})})}else{var v=K.hitch(this,arguments.callee);b.loadItem({item:t,onItem:function(G){v(G,a,f)},onError:f})}},isItem:function(t){return this.store.isItem(t)},fetchItemByIdentity:function(t){this.store.fetchItemByIdentity(t)},getIdentity:function(t){return this.store.getIdentity(t)},getLabel:function(t){return this.labelAttr?this.store.getValue(t,this.labelAttr):this.store.getLabel(t)},newItem:function(t,a,f){var b={parent:a,attribute:this.childrenAttrs[0]},
c;this.newItemIdAttr&&t[this.newItemIdAttr]?this.fetchItemByIdentity({identity:t[this.newItemIdAttr],scope:this,onItem:function(h){h?this.pasteItem(h,null,a,!0,f):(c=this.store.newItem(t,b))&&void 0!=f&&this.pasteItem(c,a,a,!1,f)}}):(c=this.store.newItem(t,b))&&void 0!=f&&this.pasteItem(c,a,a,!1,f)},pasteItem:function(t,a,f,b,c){var h=this.store,n=this.childrenAttrs[0];a&&F.forEach(this.childrenAttrs,function(v){if(h.containsValue(a,v,t)){if(!b){var G=F.filter(h.getValues(a,v),function(D){return D!=
t});h.setValues(a,v,G)}n=v}});if(f)if("number"==typeof c){var p=h.getValues(f,n).slice();p.splice(c,0,t);h.setValues(f,n,p)}else h.setValues(f,n,h.getValues(f,n).concat(t))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(t,a){a&&this.getChildren(a.item,K.hitch(this,function(f){this.onChildrenChange(a.item,f)}))},onDeleteItem:function(t){this.onDelete(t)},onSetItem:function(t,a){if(-1!=F.indexOf(this.childrenAttrs,a))this.getChildren(t,K.hitch(this,function(f){this.onChildrenChange(t,
f)}));else this.onChange(t)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(F,J,y,K,t){return J("dijit.tree.ForestStoreModel",t,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,f,b){a===
this.root?this.root.children?f(this.root.children):this.store.fetch({query:this.query,onComplete:K.hitch(this,function(c){this.root.children=c;f(c)}),onError:b}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var f=a.scope||y.global;a.onItem&&a.onItem.call(f,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,f,b){return f===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,f,b,c,h){if(f===this.root&&!c)this.onLeaveRoot(a);this.inherited(arguments,[a,f===this.root?null:f,b===this.root?null:b,c,h]);if(b===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",
a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:K.hitch(this,function(f){this.root.children=f;if(a.length!=f.length||F.some(a,function(b,c){return f[c]!=b}))this.onChildrenChange(this.root,f)})})},onNewItem:function(a,f){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=F.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,f,b,c){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(F,J,y,K,t,a,f,b,c,h,n){return J("dijit.tree._dndSelector",n,{constructor:function(){this.selection={};this.anchor=null;this.events.push(b(this.tree.domNode,c.press,K.hitch(this,"onMouseDown")),b(this.tree.domNode,c.release,K.hitch(this,"onMouseUp")),b(this.tree.domNode,c.move,K.hitch(this,
"onMouseMove")),b(this.tree.domNode,h.press,K.hitch(this,"onClickPress")),b(this.tree.domNode,h.release,K.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var p=[],v=this.selection,G;for(G in v)p.push(v[G]);return p},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(p,v){this.setSelection(this.getSelectedTreeNodes().concat([p]));v&&(this.anchor=p);return p},removeTreeNode:function(p){var v=
F.filter(this.getSelectedTreeNodes(),function(G){return!a.isDescendant(G.domNode,p.domNode)});this.setSelection(v);return p},isTreeNodeSelected:function(p){return p.id&&!!this.selection[p.id]},setSelection:function(p){var v=this.getSelectedTreeNodes();F.forEach(this._setDifference(v,p),K.hitch(this,function(G){G.setSelected(!1);this.anchor==G&&delete this.anchor;delete this.selection[G.id]}));F.forEach(this._setDifference(p,v),K.hitch(this,function(G){G.setSelected(!0);this.selection[G.id]=G}));this._updateSelectionProperties()},
_setDifference:function(p,v){F.forEach(v,function(G){G.__exclude__=!0});p=F.filter(p,function(G){return!G.__exclude__});F.forEach(v,function(G){delete G.__exclude__});return p},_updateSelectionProperties:function(){var p=this.getSelectedTreeNodes(),v=[],G=[];F.forEach(p,function(D){var e=D.getTreePath();G.push(D);v.push(e)},this);p=F.map(G,function(D){return D.item});this.tree._set("paths",v);this.tree._set("path",v[0]||[]);this.tree._set("selectedNodes",G);this.tree._set("selectedNode",G[0]||null);
this.tree._set("selectedItems",p);this.tree._set("selectedItem",p[0]||null)},onClickPress:function(p){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(p.target,this.current))){"mousedown"==p.type&&f.isLeft(p)&&p.preventDefault();var v="keydown"==p.type?this.tree.focusedChild:this.current;if(v){var G=t.getCopyKeyState(p),D=v.id;this.singular||p.shiftKey||!this.selection[D]?(this._doDeselect=!1,this.userSelect(v,G,p.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(p){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==p.type?this.tree.focusedChild:this.current,t.getCopyKeyState(p),p.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(p,v){if(p===v)return 0;if("sourceIndex"in document.documentElement)return p.sourceIndex-v.sourceIndex;if("compareDocumentPosition"in document.documentElement)return p.compareDocumentPosition(v)&2?1:-1;if(document.createRange){var G=doc.createRange();G.setStartBefore(p);
p=doc.createRange();p.setStartBefore(v);return G.compareBoundaryPoints(G.END_TO_END,p)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(p,v,G){if(this.singular)this.anchor==p&&v?this.selectNone():(this.setSelection([p]),this.anchor=p);else if(G&&this.anchor){v=this._compareNodes(this.anchor.rowNode,p.rowNode);G=this.anchor;0>v?v=G:(v=p,p=G);for(G=[];v!=p;)G.push(v),v=this.tree._getNext(v);G.push(p);this.setSelection(G)}else this.selection[p.id]&&
v?this.removeTreeNode(p):v?this.addTreeNode(p,!0):(this.setSelection([p]),this.anchor=p)},getItem:function(p){return{data:this.selection[p],type:["treeNode"]}},forInSelectedItems:function(p,v){v=v||y.global;for(var G in this.selection)p.call(v,this.getItem(G),G,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(F,J,y,K,t,a){return J("dijit.tree._dndContainer",null,{constructor:function(f,b){this.tree=
f;this.node=f.domNode;K.mixin(this,b);this.containerState="";y.add(this.node,"dojoDndContainer");this.events=[t(this.node,a.enter,K.hitch(this,"onOverEvent")),t(this.node,a.leave,K.hitch(this,"onOutEvent")),F.after(this.tree,"_onNodeMouseEnter",K.hitch(this,"onMouseOver"),!0),F.after(this.tree,"_onNodeMouseLeave",K.hitch(this,"onMouseOut"),!0),t(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var f;f=this.events.pop();)f.remove();this.node=this.parent=
null},onMouseOver:function(f){this.current=f},onMouseOut:function(){this.current=null},_changeState:function(f,b){var c="dojoDnd"+f;f=f.toLowerCase()+"State";y.replace(this.node,c+b,c+this[f]);this[f]=b},_addItemClass:function(f,b){y.add(f,"dojoDndItem"+b)},_removeItemClass:function(f,b){y.remove(f,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p){return F([c,h,a],{templateString:n,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
p.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(K(this.layerChooser,"tree-click",J.hitch(this,this._onTreeClick)));this.own(K(this.layerChooser,"update",J.hitch(this,this._onLayerChooserUpdate)));this.own(K(document.body,"click",J.hitch(this,this._onBodyClicked)));this.own(K(document.body,"keydown",J.hitch(this,function(v){v.keyCode===t.ENTER&&this._onBodyClicked(v)})));
this.own(K(this.layerChooser.domNode,"keydown",J.hitch(this,function(v){v.keyCode===t.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(v){var G=new f;if(v){var D=this.layerInfosObj.getLayerOrTableInfoById(v.id);D?this.layerChooser.filter(D).then(J.hitch(this,function(e){e?(this._onSelectNewItem({layerInfo:D,
name:D.title,url:v.url}),G.resolve(!0)):G.resolve(!1)}),J.hitch(this,function(){G.resolve(!1)})):G.resolve(!1)}else this._onSelectNewItem(null),G.resolve(!0);return G},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(v){v=v.target||v.srcElement;v===this.domNode||y.isDescendant(v,this.domNode)||v===this.layerChooser.domNode||y.isDescendant(v,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(v){v.stopPropagation();
v.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(v){v.keyCode===t.ENTER&&this._onDropDownClick(v)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";b.open({parent:this,popup:this.layerChooser,around:this.domNode});var v=this.layerChooser.domNode.parentNode;v&&(y.addClass(v,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&y.addClass(v,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){b.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(v){var G=J.getObject("layerInfo.id",
!1,this._selectedItem)||-1,D=J.getObject("layerInfo.id",!1,v)||-1;G=G!==D;this._selectedItem=v;this.hideLayerChooser();v=J.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=v;y.setAttr(this.layerNameNode,"title",v);v=J.getObject("layerInfo.layerObject",!1,this._selectedItem);G&&this.emit("selection-change",[v])},_onTreeClick:function(){var v=this._getSelectedItems();this._onSelectNewItem(0<v.length?v[0]:null)}})})},"widgets/SmartEditor/setting/layersAndFieldsApplyOn":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on jimu/BaseWidgetSetting dijit/_TemplatedMixin jimu/dijit/CheckBox jimu/utils dojo/dom-attr dojo/dom-class dojo/query dojo/string dojo/dom-style dijit/form/ValidationTextBox dojo/text!./layerAndFieldsApplyOn.html dijit/form/CheckBox dijit/registry".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B){return F([f,J,b],{baseClass:"jimu-widget-smartEditor-setting-layersAndFieldsApplyOn",templateString:g,checkBoxNodes:null,layerCheckBoxNodes:null,showDomainFieldIndicator:!1,searchTextBox:null,defalutFieldInfos:[{actionName:"Intersection",enabled:!1,fields:[]},{actionName:"Address",enabled:!1},{actionName:"Coordinates",enabled:!1,coordinatesSystem:"MapSpatialReference",field:"x"},{actionName:"Preset",enabled:!1}],nlsActionName:{Intersection:"Intersection1",
Address:"Address1",Coordinates:"Coordinates1",Preset:"Preset1"},postCreate:function(){this.inherited(arguments);this.nlsActionName={Intersection:this.nls.actionPage.copyAction.intersection,Address:this.nls.actionPage.copyAction.address,Coordinates:this.nls.actionPage.copyAction.coordinates,Preset:this.nls.actionPage.copyAction.preset};this.layerCheckBoxNodes={};this.checkBoxNodes={};this._prevAppliedOnLayers=[];this.appliedOn&&(this._prevAppliedOnLayers=y.clone(Object.keys(this.appliedOn)));this._addSearchControl();
this._addLayerAndFields(!0)},_addSearchControl:function(){this.searchTextBox=new e({trim:!0,placeHolder:this.nls.actionPage.searchPlaceHolder,intermediateChanges:!0},t.create("div",{},this.searchNode));D.set(this.searchTextBox.domNode,"width","350px");this.own(a(this.searchTextBox,"change",y.hitch(this,this._searchTextUpdated)));var d=t.create("div",{"class":"esriCTExpandAllNode"},this.searchNode),m=t.create("div",{"class":"esriCTExpandAllNode"},this.searchNode);this._expandAllCheckBox=new x({"class":"switch-toggle",
checked:!1},t.create("div",{},d));t.create("label",{innerHTML:this.nls.actionPage.expandAllLabel,"class":"esriCTDojoCheckBoxLabel"},d);this._checkAllFieldsCheckBox=new x({checked:!1},t.create("div",{},m));t.create("label",{innerHTML:this.nls.actionPage.selectAllLabel,"class":"esriCTDojoCheckBoxLabel"},m);this.noFieldsDOM=t.create("div",{innerHTML:this.nls.actionPage.noValidFieldTypeMsg,"class":"esriCTHidden"},this.searchNode);this.own(a(this._expandAllCheckBox,"change",y.hitch(this,function(u){u?
(u=v(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed.esriCTToggleLayerExpanded",this.layerAndFieldsMainDiv))&&0<u.length&&K.forEach(u,function(C){C.click()}):(u=v(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed",this.layerAndFieldsMainDiv))&&0<u.length&&K.forEach(u,function(C){p.contains(C,"esriCTToggleLayerExpanded")||C.click()})})));this.own(a(this._checkAllFieldsCheckBox,"change",y.hitch(this,function(u){var C;var O=""!==this.searchTextBox.get("value")?v("div[searchstring*\x3d'"+this.searchTextBox.get("value").toLowerCase()+
"']",this.layerAndFieldsMainDiv):v(".esriCTFieldsDiv",this.layerAndFieldsMainDiv);K.forEach(O,y.hitch(this,function(M){C=B.byNode(v(".esriCTFieldsCheckBox",M)[0]);u?C.check(!0):C.uncheck(!0)}));this.emit("layerFieldsUpdated",!1)})))},_searchTextUpdated:function(d){var m=d.toLowerCase();if(""!==m){d=v("[searchstring]",this.layerAndFieldsMainDiv);m=v("div[searchstring*\x3d'"+m+"']",this.layerAndFieldsMainDiv);d.style("display","none");d.removeClass("esriCTNotFilteredBySearch");d.addClass("esriCTFilteredBySearch");
m.style("display","");m.replaceClass("esriCTNotFilteredBySearch","esriCTFilteredBySearch");d=this.layerDetails;for(var u in d){var C;if(0<Object.keys(d[u]).length){m=v("[layermaindivid \x3d '"+u+"']",this.layerAndFieldsMainDiv);var O=v("[layerid\x3d'"+u+"']",this.layerAndFieldsMainDiv);var M=!0;for(C=0;C<O.length;C++)if(p.contains(O[C],"esriCTNotFilteredBySearch")){M=!1;break}M?m.style("display","none"):m.style("display","")}}}else v("[layermaindivid]",this.layerAndFieldsMainDiv).style("display",
""),v("[searchstring]",this.layerAndFieldsMainDiv).style("display",""),v("[searchstring]",this.layerAndFieldsMainDiv).removeClass("esriCTFilteredBySearch"),v("[searchstring]",this.layerAndFieldsMainDiv).addClass("esriCTNotFilteredBySearch");this._handleHeaderCheckBoxState()},_addLayerAndFields:function(){var d=[];var m=this.layerDetails;hasFields=!1;for(var u in m)if(0<Object.keys(m[u]).length){hasFields=!0;var C=t.create("div",{"class":"esriCTLayerMainDiv"},this.layerAndFieldsMainDiv);n.set(C,"layermaindivid",
u);this._createLayerName(C,u);C=this._getLayersFieldValues(u);this.appliedOn&&this.appliedOn.hasOwnProperty(u)&&0<this.appliedOn[u].length&&d.push(u);for(var O in m[u])if(m[u][O].editable){var M=!1,S=t.create("div",{"class":"esriCTFieldsDiv  esriCTHidden"},this.layerAndFieldsMainDiv);n.set(S,"layerid",u);if(C&&C.hasOwnProperty(O)){var q;K.some(C[O],function(k){if(k.actionName===this.actionName&&k.enabled&&(!k.hasOwnProperty("attributeActionGroupName")||k.hasOwnProperty("attributeActionGroupName")&&
k.attributeActionGroupName!==this.prevName))return q=k,M=!0},this);"Preset"!==this.actionName||!M||!q||q.hasOwnProperty("attributeActionGroupName")&&""!==q.attributeActionGroupName||(M=!1)}this._createFieldName(m[u][O],u,S,M,q?q.attributeActionGroupName:null)}}0<d.length&&setTimeout(y.hitch(this,function(){this._applyPrevSettings();K.forEach(d,y.hitch(this,function(k){var E=v('[rootnodelayerid\x3d"'+k+'"]');E&&0<E.length&&p.contains(E[0],"esriCTToggleLayerExpanded")&&(v('[rootnodelayerid\x3d"'+k+
'"]').toggleClass("esriCTToggleLayerExpanded"),v('[layerid\x3d"'+k+'"]').toggleClass("esriCTHidden"))}));this.emit("layerFieldsUpdated",!0)}),100);hasFields?p.add(this.noFieldsDOM,"esriCTHidden"):p.remove(this.noFieldsDOM,"esriCTHidden")},_createLayerName:function(d,m){var u;this.layerCheckBoxNodes[m]=[];this.checkBoxNodes[m]=[];if(this.layerInfos.getLayerOrTableInfoById(m)){var C=this.layerInfos.getLayerOrTableInfoById(m).layerObject.name;var O=t.create("div",{"class":"esriCTToggleLayerIcon esriCTToggleLayerCollapsed esriCTToggleLayerExpanded"},
d);n.set(O,"rootnodelayerid",m);this.own(a(O,"click",y.hitch(this,function(M){var S=!0,q=v(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed",this.layerAndFieldsMainDiv);p.toggle(M.currentTarget,"esriCTToggleLayerExpanded");u=n.get(M.currentTarget,"rootnodelayerid");v('[layerid\x3d"'+u+'"]').toggleClass("esriCTHidden");K.some(q,y.hitch(this,function(k){if(p.contains(k,"esriCTToggleLayerExpanded"))return S=!1,!0}));this._expandAllCheckBox.set("checked",S,!1)})));d=t.create("div",{"class":"esriCTLayercheckBox"},
d);t.create("div",{innerHTML:C},d);C=new c({label:C,checked:!1});this.layerCheckBoxNodes[m].push(C);n.set(C.domNode,"LayerCheckBoxId",m);a(C.domNode,"click",y.hitch(this,this._parentNodeStateChanged))}},_getLayersFieldValues:function(d){var m;K.some(this._configInfos,function(u){if(u.featureLayer&&u.featureLayer.id===d)return u.fieldValues?m=u.fieldValues:u.fieldValues={},!0},this);return m},_getAllLayersFieldValues:function(d,m,u){K.forEach(m,function(C){C.featureLayer&&C.featureLayer.id===u&&(C.fieldValues?
d||(d=[]):C.fieldValues={},d.push(C.fieldValues));C.relationshipInfos&&(d=this._getAllLayersFieldValues(d,C.relationshipInfos,u))},this);return d},_createFieldName:function(d,m,u,C,O){var M=h.getDefaultPortalFieldInfo(d);var S=G.substitute(O?this.nls.attributeActionsPage.alreadyAppliedActionMsg:this.nls.attributeActionsPage.alreadyAppliedActionLayerMsg,{action:this.nlsActionName[this.actionName]});O&&(O=G.substitute(this.nls.attributeActionsPage.appliedGroupName,{groupName:O}),S=S+" "+O);S=t.create("div",
{"class":"esriCTExistingExpressionDiv esriCTVisibilityHidden",title:S},u);C&&p.remove(S,"esriCTVisibilityHidden");this.showDomainFieldIndicator&&(C=t.create("div",{"class":"esriCTDomainlistDiv esriCTVisibilityHidden",innerHTML:"*",title:this.nls.actionPage.domainListTitle},u),d.domain&&d.domain.codedValues&&(p.remove(C,"esriCTVisibilityHidden"),p.remove(this.domainFieldHintMsg,"esriCTHidden")));d=t.create("div",{"class":"esriCTFieldsCheckBox"},u);d=new c({label:M.label,value:M.fieldName,checked:!1},
d);this.checkBoxNodes[m].push(d);n.set(u,"searchstring",M.label.toLowerCase());n.set(d.domNode,"fieldsCheckBoxId",m);a(d.domNode,"click",y.hitch(this,this._childNodeStateChanged));a(d,"change",y.hitch(this,function(){this._handleHeaderCheckBoxState()}))},_handleHeaderCheckBoxState:function(){var d=!0;var m=""!==this.searchTextBox.get("value")?v("[searchstring*\x3d'"+this.searchTextBox.get("value").toLowerCase()+"']",this.layerAndFieldsMainDiv):v(".esriCTFieldsDiv",this.layerAndFieldsMainDiv);0<m.length?
K.some(m,y.hitch(this,function(u){u=v(".checkbox",u)[0];if(!p.contains(u,"jimu-icon-checked"))return d=!1,!0})):d=!1;d?this._checkAllFieldsCheckBox.set("checked",!0,!1):this._checkAllFieldsCheckBox.set("checked",!1,!1)},_parentNodeStateChanged:function(d){var m=n.get(d.currentTarget,"LayerCheckBoxId");d=this.layerCheckBoxNodes[m];m=this.checkBoxNodes[m];var u=d[0].getValue();K.forEach(m,y.hitch(this,function(C){u?C.setValue(!0):C.setValue(!1)}))},_childNodeStateChanged:function(d){var m=n.get(d.currentTarget,
"fieldsCheckBoxId");d=this.layerCheckBoxNodes[m];m=this.checkBoxNodes[m];var u=!0;K.some(m,y.hitch(this,function(C){if(!C.getValue())return u=!1,!0}));d[0].setValue(u);this.emit("layerFieldsUpdated",!1)},getOnlyCheckedFields:function(){var d={},m;for(m in this.checkBoxNodes){d[m]=[];for(var u in this.checkBoxNodes[m])this.checkBoxNodes[m][u].checked&&d[m].push(this.checkBoxNodes[m][u].get("value"))}return d},getCheckedFields:function(d){var m={},u;for(u in this.checkBoxNodes){m[u]=[];for(var C in this.checkBoxNodes[u])this.checkBoxNodes[u][C].checked&&
m[u].push(this.checkBoxNodes[u][C].get("value"))}this._applySettingsInLayer(d,m);return m},_removeSettingsFromOtherGroups:function(d,m,u){var C;if(this.existingGroups)for(var O in this.existingGroups)if(O!==d&&O!==this.prevName&&(C=this.existingGroups[O].appliedOn)&&C.hasOwnProperty(m)&&-1<C[m].indexOf(u)){var M=C[m].indexOf(u);C[m].splice(M,1)}},_removePrevSettingsFromLayerFields:function(d){var m=[];if((m=this._getAllLayersFieldValues(m,this._configInfos,d))&&0<m.length)for(var u=0;u<m.length;u++)if(d=
m[u])for(var C in d)for(var O=d[C],M=0;M<O.length;M++)O[M].actionName===this.actionName&&O[M].hasOwnProperty("attributeActionGroupName")&&O[M].attributeActionGroupName===this.prevName&&(O[M].enabled=!1,delete O[M].attributeActionGroupName,"Intersection"===this.actionName?(O[M].fields=[],O[M].ignoreLayerRanking=!1):"Address"===this.actionName?delete O[M].field:"Coordinates"===this.actionName&&(O[M].coordinatesSystem="MapSpatialReference",O[M].field="x"))},_applysettingsToField:function(d,m,u){var C=
[];if((C=this._getAllLayersFieldValues(C,this._configInfos,d))&&0<C.length){for(var O=0;O<C.length;O++){var M=C[O];if(this.appliedOn&&this.appliedOn.hasOwnProperty(d)){var S=this.appliedOn[d];S&&0<S.length&&K.forEach(S,function(q){if(-1===m.indexOf(q)&&M.hasOwnProperty(q)){q=M[q];for(var k=0;k<q.length;k++)q[k].actionName===this.actionName&&(q[k].enabled=!1,delete q[k].attributeActionGroupName,"Intersection"===this.actionName?(q[k].fields=[],q[k].ignoreLayerRanking=!1):"Address"===this.actionName?
delete q[k].field:"Coordinates"===this.actionName&&(q[k].coordinatesSystem="MapSpatialReference",q[k].field="x"))}},this)}}K.forEach(m,function(q){for(var k=0;k<C.length;k++){M=C[k];M.hasOwnProperty(q)||(M[q]=y.clone(this.defalutFieldInfos));var E=M[q];for(var N=0;N<E.length;N++)E[N].actionName===this.actionName&&(u.attributeInfo&&(E[N]=y.mixin(E[N],u.attributeInfo)),E[N].enabled=!0,E[N].attributeActionGroupName=u.name,this._removeSettingsFromOtherGroups(u.name,d,q))}},this)}},_applySettingsInLayer:function(d,
m){for(var u in m){if(this._prevAppliedOnLayers&&-1<this._prevAppliedOnLayers.indexOf(u)){var C=this._prevAppliedOnLayers.indexOf(u);this._prevAppliedOnLayers.splice(C,1)}this._applysettingsToField(u,m[u],d)}this.deleteGroup()},deleteGroup:function(){this._prevAppliedOnLayers&&K.forEach(this._prevAppliedOnLayers,function(d){this._removePrevSettingsFromLayerFields(d)},this)},_applyPrevSettings:function(){if(this.appliedOn)for(var d in this.appliedOn)if(this.appliedOn.hasOwnProperty(d)){var m=this.appliedOn[d];
if(m&&0<m.length){var u=this.layerCheckBoxNodes[d],C=!0;K.forEach(this.checkBoxNodes[d],y.hitch(this,function(M){-1<m.indexOf(M.value)?M.setValue(!0):M.getValue()||(C=!1)}));C&&u&&u[0]&&u[0].setValue(C)}}var O=!0;d=v(".esriCTFieldsDiv",this.layerAndFieldsMainDiv);0<d.length&&K.some(d,y.hitch(this,function(M){M=v(".checkbox",M)[0];if(!p.contains(M,"jimu-icon-checked"))return O=!1,!0}));this._expandAllCheckBox.set("checked",O,!1)}})})},"widgets/SmartEditor/setting/Coordinates":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on dojo/text!./Coordinates.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup dijit/form/Select dijit/form/ValidationTextBox ./layersAndFieldsApplyOn dojo/dom-class".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G){return F([c,J,b],{baseClass:"jimu-widget-smartEditor-setting-coordinates",templateString:f,groupNameTextBox:null,postCreate:function(){this.inherited(arguments);this.fieldSelector=this.groupNameTextBox=null;this._initControls();this._createLayersAndFields();this.isDelete||this.showDialog()},_onCoordinateSystemChanged:function(D){this.fieldSelector.set("options",this._getFieldsOptionsObj(D));0<this.fieldSelector.options.length&&this.fieldSelector.set("value",this.fieldSelector.options[0].value)},
showDialog:function(){var D=!1;var e=675;var g=!1;if(this._fieldValues&&this._fieldValues.Coordinates&&this._fieldValues.Coordinates.hasOwnProperty("enabled")){D=this._fieldValues.Coordinates.enabled;var x=this._fieldValues.Coordinates.coordinatesSystem;var B=this._fieldValues.Coordinates.field;var d=this._fieldValues.Coordinates.hasOwnProperty("coordinatesSource")?this._fieldValues.Coordinates.coordinatesSource:"featureLocation"}this.coordinatesSource=new n({options:this._addCoordinatesSourceOpt(),
style:{width:"99%"}},t.create("div",{},this.coordinatesSourceNode));d&&this.coordinatesSource.set("value",d,!1);this.own(a(this.coordinatesSource,"change",y.hitch(this,function(C){m.set("options",this._createCoordinatesOptions(C));0<m.options.length&&(m.set("value",m.options[0].value,!1),this._onCoordinateSystemChanged(m.options[0].value))})));var m=new n({style:{width:"99%"},options:this._createCoordinatesOptions(this.coordinatesSource.value)},t.create("div",{},this.selectCoordinateNode));this.own(a(m,
"change",y.hitch(this,this._onCoordinateSystemChanged)));x&&m.set("value",x,!1);this.fieldSelector=new n({style:{width:"99%"},options:this._getFieldsOptionsObj(m.getValue())},t.create("div",{},this.selectAttributeNode));B&&(this.fieldSelector.set("value",B),"MGRS"===B&&this._createLayersAndFields());this.own(a(this.fieldSelector,"change",y.hitch(this,function(){this._createLayersAndFields()})));this.isGroup||(G.add(this.groupInfoNode1,"esriCTHidden"),G.add(this.groupInfoNode2,"esriCTHidden"),G.remove(this.coordianteDijitMainWrapper,
"esriCTCoordinateWidth"),G.add(this.coordianteDijitMainWrapper,"esriCTFullWidth"),g=!0,e=420);var u=new h({titleLabel:this.nls.coordinatesPage.popupTitle,width:e,maxHeight:500,autoHeight:g,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var C={},O={};C.enabled=D;C.coordinatesSystem=m.get("value");C.field=this.fieldSelector.get("value");C.coordinatesSource=this.coordinatesSource.get("value");if(this.isGroup){if(!this.groupNameTextBox.isValid()){this.groupNameTextBox.focus();
return}}else delete this._fieldValues.Coordinates.attributeActionGroupName;this._fieldValues.Coordinates||(this._fieldValues.Coordinates={actionName:"Coordinates"});y.mixin(this._fieldValues.Coordinates,C);this.isGroup?(O.name=this.groupNameTextBox.get("value"),O.dataType=this.fieldSelector._getSelectedOptionsAttr().label,O.attributeInfo=C,O.appliedOn=this._layerAndFieldsApplyOnObj.getCheckedFields(O),this.emit("groupInfoUpdated",O)):this.emit("attributeActionUpdated");u.close()})},{label:this.nls.cancel,
classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){u.close()})}],onClose:y.hitch(this,function(){})});this.isGroup&&this.groupNameTextBox.focus()},_initControls:function(){this.groupNameTextBox=new p({style:{width:"99%"},required:!0,trim:!0},t.create("div",{},this.groupNameTextBoxNode));this.groupNameTextBox.validator=y.hitch(this,function(D){return D?D!==this.prevName&&this.editUtils.isDuplicateGroupName(D,this.existingGroupNames)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),
!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.name&&this.groupNameTextBox.set("value",this.name)},_createCoordinatesOptions:function(D){var e=[];this.isGroup?(0<this.coordinatesSavedDataTypes[D].MapSpatialReference.length&&e.push({label:this.nls.coordinatesPage.mapSpatialReference,value:"MapSpatialReference"}),0<this.coordinatesSavedDataTypes[D].LatLong.length&&e.push({label:this.nls.coordinatesPage.latlong,value:"LatLong"}),0<this.coordinatesSavedDataTypes[D].MGRS.length&&
e.push({label:this.nls.coordinatesPage.MGRS,value:"MGRS"})):e.push({label:this.nls.coordinatesPage.mapSpatialReference,value:"MapSpatialReference"},{label:this.nls.coordinatesPage.latlong,value:"LatLong"},{label:this.nls.coordinatesPage.MGRS,value:"MGRS"});return e},_getFieldsOptionsObj:function(D){var e=[],g=[];g=this._getCoordinateSystemOptions(D);var x=this.coordinatesSource.get("value");K.forEach(g,y.hitch(this,function(B){this.isGroup?(-1!==this.coordinatesSavedDataTypes[x][D].indexOf(B.alias)||
-1!==this.coordinatesSavedDataTypes[x].LatLong.indexOf(B.alias))&&e.push({label:B.alias||B.name,value:B.name}):("xy"!==B.name||"xy"===B.name&&"esriFieldTypeString"===this._fieldType)&&e.push({label:B.alias||B.name,value:B.name})}));return e},_getCoordinateSystemOptions:function(D){switch(D){case "LatLong":var e=[{name:"y",alias:"Latitude"},{name:"x",alias:"Longitude"},{name:"xy",alias:"Latitude Longitude"}];break;case "MapSpatialReference":e=[{name:"x",alias:"X"},{name:"y",alias:"Y"},{name:"xy",alias:"X Y"}];
break;case "MGRS":e=[{name:"MGRS",alias:"MGRS"}]}return e},_createLayerFieldsFilter:function(){var D={};!this.fieldSelector||"xy"!==this.fieldSelector.value&&"MGRS"!==this.fieldSelector.value?K.forEach(this._totalLayers,y.hitch(this,function(e){e.isTable||K.forEach(e.layerObject.fields,y.hitch(this,function(g){if("esriFieldTypeString"===g.type||"esriFieldTypeSmallInteger"===g.type||"esriFieldTypeInteger"===g.type||"esriFieldTypeSingle"===g.type||"esriFieldTypeDouble"===g.type&&g.editable)D[e.id]||
(D[e.id]={}),D[e.id][g.name]=g}))})):K.forEach(this._totalLayers,y.hitch(this,function(e){e.isTable||(D[e.id]={},K.forEach(e.layerObject.fields,y.hitch(this,function(g){"esriFieldTypeString"===g.type&&(D[e.id]||(D[e.id]={}),D[e.id][g.name]=g)})))}));return D},_createLayersAndFields:function(){this._layerAndFieldsApplyOnObj=new v({map:this.map,layerInfos:this.layerInfos,_configInfos:this._configInfos,actionName:"Coordinates",nls:this.nls,prevName:this.prevName,existingGroups:this.existingGroups,layerDetails:this._createLayerFieldsFilter(),
appliedOn:this.appliedOn});t.empty(this.tableParentContainer);this._layerAndFieldsApplyOnObj.placeAt(this.tableParentContainer);this._layerAndFieldsApplyOnObj.startup()},deleteGroup:function(){this._layerAndFieldsApplyOnObj.deleteGroup()},_addCoordinatesSourceOpt:function(){var D=[];D=[{label:this.nls.coordinatesPage.featureLocation,value:"featureLocation"},{label:this.nls.coordinatesPage.myLocation,value:"myLocation"}];return D=this.removeCoordsSourceOption(D)},removeCoordsSourceOption:function(D){K.forEach(D,
y.hitch(this,function(e,g){e&&this.isGroup&&(e=this.coordinatesSavedDataTypes[e.value],0===e.LatLong.length&&0===e.MGRS.length&&0===e.MapSpatialReference.length&&D.splice(g,1))}));return D}})})},"widgets/SmartEditor/setting/Address":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/text!./Address.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup jimu/dijit/Message dijit/form/ValidationTextBox dijit/form/Select ./layersAndFieldsApplyOn dojo/on".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D){return F([c,J,b],{baseClass:"jimu-widget-smartEditor-setting-address",templateString:f,_validGeocoderFields:[],ValidFieldsByTypeToApplyOn:{esriFieldTypeOID:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"],esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeInteger:["esriFieldTypeSmallInteger",
"esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeSingle:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString"]},
postCreate:function(){this.inherited(arguments);this._validGeocoderFields=this._getValidGeocoderFields();this._initControls();this.isDelete||this.showDialog();this._createLayersAndFields();this._geocoderSettings&&this._geocoderSettings.url&&"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"!==this._geocoderSettings.url&&a.add(this.attributeInfoNode,"esriCTHidden")},_initControls:function(){this.groupNameTextBox=new p({style:{width:"99%"},required:!0,trim:!0},t.create("div",{},this.groupNameTextBoxNode));
this.groupNameTextBox.validator=y.hitch(this,function(B){return B?B!==this.prevName&&this.editUtils.isDuplicateGroupName(B,this.existingGroupNames)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.name&&this.groupNameTextBox.set("value",this.name);var e=this._getFieldsOptionsObj(this._validGeocoderFields);this.fieldSelector=new v({style:{width:"99%"},
options:e},t.create("div",{},this.selectNode));if(this._fieldValues&&this._fieldValues.Address&&this._fieldValues.Address.hasOwnProperty("field"))var g=this._fieldValues.Address.field;if(g){var x=!1;K.some(e,y.hitch(this,function(B){if(B.value===g)return x=!0}));x?this.fieldSelector.set("value",g,!1):new n({message:this.nls.addressPage.prevConfigruedFieldChangedMsg})}this.own(D(this.fieldSelector,"change",y.hitch(this,function(){this._createLayersAndFields()})))},showDialog:function(){var e=!1,g=
!1,x=500,B=675;this.isGroup||(a.add(this.groupInfoNode1,"esriCTHidden"),a.add(this.groupInfoNode2,"esriCTHidden"),a.remove(this.addressDijitMainWrapper,"esriCTAddressWidth"),a.add(this.addressDijitMainWrapper,"esriCTFullWidth"),B=600,x=300,g=!0);e=!1;this._fieldValues&&this._fieldValues.Address&&this._fieldValues.Address.hasOwnProperty("enabled")&&(e=this._fieldValues.Address.enabled);var d=new h({titleLabel:this.nls.addressPage.popupTitle,width:B,maxHeight:x,autoHeight:g,content:this,buttons:[{label:this.nls.ok,
onClick:y.hitch(this,function(){var m={},u={};m.enabled=e;m.field=this.fieldSelector.get("value");if(this.isGroup){if(!this.groupNameTextBox.isValid()){this.groupNameTextBox.focus();return}}else delete this._fieldValues.Address.attributeActionGroupName;this._fieldValues.Address||(this._fieldValues.Address={actionName:"Address"});y.mixin(this._fieldValues.Address,m);this.isGroup?(u.name=this.groupNameTextBox.get("value"),u.dataType=m.field,u.attributeInfo=m,u.appliedOn=this._layerAndFieldsApplyOnObj.getCheckedFields(u),
this.emit("groupInfoUpdated",u)):this.emit("attributeActionUpdated");d.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){d.close()})}],onClose:y.hitch(this,function(){})});this.isGroup&&this.groupNameTextBox.focus()},_getFieldsOptionsObj:function(e){var g=[];K.forEach(e,y.hitch(this,function(x){"esriFieldTypeGeometry"!==x.type&&"esriFieldTypeBlob"!==x.type&&"esriFieldTypeRaster"!==x.type&&"esriFieldTypeXML"!==x.type&&g.push({label:x.alias||x.name,value:x.name,
fieldType:x.type})}));return g},_createLayerFieldsFilter:function(){var e={},g=this.fieldSelector.getOptions(this.fieldSelector.value).fieldType;if(g&&this.ValidFieldsByTypeToApplyOn[g]){var x=this.ValidFieldsByTypeToApplyOn[g];K.forEach(this._totalLayers,y.hitch(this,function(B){B.isTable||K.forEach(B.layerObject.fields,y.hitch(this,function(d){-1<x.indexOf(d.type)&&d.editable&&(e[B.id]||(e[B.id]={}),e[B.id][d.name]=d)}))}))}return e},_createLayersAndFields:function(){this._layerAndFieldsApplyOnObj=
new G({map:this.map,layerInfos:this.layerInfos,_configInfos:this._configInfos,actionName:"Address",nls:this.nls,prevName:this.prevName,existingGroups:this.existingGroups,layerDetails:this._createLayerFieldsFilter(),appliedOn:this.appliedOn});t.empty(this.tableParentContainer);this._layerAndFieldsApplyOnObj.placeAt(this.tableParentContainer);this._layerAndFieldsApplyOnObj.startup()},deleteGroup:function(){this._layerAndFieldsApplyOnObj.deleteGroup()},_getValidGeocoderFields:function(){var e=[];this._geocoderSettings&&
this._geocoderSettings.hasOwnProperty("url")&&K.forEach(this._geocoderSettings.fields,y.hitch(this,function(g){e.push(g)}));return e}})})},"widgets/SmartEditor/setting/EditDescription":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/text!./EditDescription.html dijit/_TemplatedMixin jimu/BaseWidgetSetting dijit/Editor jimu/dijit/Popup esri/lang dojo/sniff jimu/utils dojo/_base/html jimu/dijit/EditorXssFilter dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G){return F([f,a],{baseClass:"jimu-widget-smartEditor-edit-description",templateString:t,_configInfo:null,_fieldValid:null,_fieldValidations:null,__layerName:null,postCreate:function(){this.inherited(arguments);this.editorXssFilter=G.getInstance();this._initEditor();this.resize();setTimeout(J.hitch(this,function(){this.resize()}),200)},popupEditDescription:function(){this._editorObj.focus();this._configInfo.editDescription&&null!==this._configInfo.editDescription&&
this._editorObj.set("value",this.editorXssFilter.sanitize(this._configInfo.editDescription));var D=new c({titleLabel:h.substitute({layername:this._layerName},this.nls.editDescriptionPage.title),width:720,maxHeight:700,autoHeight:!0,content:this,buttons:[{label:this.nls.ok,onClick:J.hitch(this,function(){this._configInfo.editDescription=this.editorXssFilter.sanitize(this._getText());this._editorObj.destroy();D.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:J.hitch(this,
function(){this._editorObj.destroy();D.close()})}],onClose:J.hitch(this,function(){})})},_getText:function(){return this._editorObj.focusNode.innerHTML},_initEditor:function(){if(!this._editorObj)if(this._initEditorPluginsCSS(),this._editorObj=new b({plugins:["bold","italic","underline",p.getEditorTextColor("smartEditor"),p.getEditorBackgroundColor("smartEditor"),"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent"],extraPlugins:["|",
"createLink","unlink","pastefromword","|","undo","redo","|","viewSource","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize","formatBlock"],style:"font-family:Verdana;"},this.editText),this.own(y(this._editorObj,"focus",J.hitch(this,function(){}))),this.own(y(this._editorObj,"blur",J.hitch(this,function(){}))),this._editorObj.onLoadDeferred.then(J.hitch(this,function(){})),
this._editorObj.startup(),8!==n("ie"))this._editorObj.resize({w:"100%",h:"100%"});else{var D=v.getMarginBox(this.editText);this._editorObj.resize({w:D.w,h:D.h})}},_initEditorPluginsCSS:function(){var D=document.getElementsByTagName("head")[0];var e=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";K('link[href\x3d"'+e+'"]',D)[0]||p.loadStyleLink("editor_plugins_resources_TextColor",e);e=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";K('link[href\x3d"'+e+'"]',D)[0]||
p.loadStyleLink("editor_plugins_resources_editorPlugins",e);e=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";K('link[href\x3d"'+e+'"]',D)[0]||p.loadStyleLink("editor_plugins_resources_PasteFromWord",e)}})})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M){function S(k){return new d({command:k.name})}function q(k){return new d({buttonClass:B,command:k.name})}y=y("dijit.Editor",O,{plugins:null,extraPlugins:null,constructor:function(){n.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",m]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(p("ie")||p("trident")||p("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new K;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);n.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=t.getLocalization("dijit._editor",
"commands",this.lang);p("webkit")&&c.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new e({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));J.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);f.add(this.iframe.parentNode,"dijitEditorIFrameContainer");f.add(this.iframe,"dijitEditorIFrame");a.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){J.forEach(this._plugins,function(k){k&&k.destroy&&k.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(k,E){var N=n.isString(k)?{name:k}:n.isFunction(k)?{ctor:k}:k;if(!N.setEditor){var l={args:N,plugin:null,editor:this};N.name&&(d.registry[N.name]?l.plugin=d.registry[N.name](N):G.publish(M._scopeName+".Editor.getPlugin",l));if(!l.plugin)try{var z=
N.ctor||n.getObject(N.name)||F(N.name);z&&(l.plugin=new z(N))}catch(L){throw Error(this.id+": cannot find plugin ["+N.name+"]");}if(!l.plugin)throw Error(this.id+": cannot find plugin ["+N.name+"]");k=l.plugin}1<arguments.length?this._plugins[E]=k:this._plugins.push(k);k.setEditor(this);n.isFunction(k.setToolbar)&&k.setToolbar(this.toolbar)},resize:function(k){k&&x.prototype.resize.apply(this,arguments)},layout:function(){var k=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+b.getPadBorderExtents(this.iframe.parentNode).h+
b.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=k+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(k){var E,N=this.document.body,l=N.clientWidth,z=N.clientHeight,L=N.clientLeft,R=N.offsetWidth,Q=N.offsetHeight,V=N.offsetLeft;/^rtl$/i.test(N.dir||"")?l<R&&k.x>l&&k.x<R&&(E=!0):k.x<L&&k.x>V&&(E=!0);E||z<Q&&k.y>z&&k.y<Q&&(E=!0);E||(delete this._cursorToStart,delete this._savedSelection,"BODY"==k.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(k){this.customUndo&&this.endEditing(!0);"BODY"!=k.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(k){this._inEditing||(this._inEditing=!0,this._beginEditing(k));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(k){if(!this.customUndo||
"undo"!=k&&"redo"!=k){this.customUndo&&(this.endEditing(),this._beginEditing());var E=this.inherited(arguments);this.customUndo&&this._endEditing();return E}return this[k]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(k){try{var E=this.document.execCommand(k,!1,null);if(p("webkit")&&!E)throw{};}catch(N){E=v.substitute,alert(E(this.commands.systemShortcut,
[this.commands[k],E(this.commands[p("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[k]])])),E=!1}return E},queryCommandEnabled:function(k){return!this.customUndo||"undo"!=k&&"redo"!=k?this.inherited(arguments):"undo"==k?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(k){var E=k.mark,N=k.mark;k=k.isCollapsed;var l;if(N)if(9>p("ie")||9===p("ie")&&p("quirks"))if(n.isArray(N))E=[],J.forEach(N,function(R){E.push(C.getNode(R,this.editNode))},this),this.selection.moveToBookmark({mark:E,
isCollapsed:k});else{if(N.startContainer&&N.endContainer&&(l=C.getSelection(this.window))&&l.removeAllRanges){l.removeAllRanges();k=C.create(this.window);var z=C.getNode(N.startContainer,this.editNode);var L=C.getNode(N.endContainer,this.editNode);z&&L&&(k.setStart(z,N.startOffset),k.setEnd(L,N.endOffset),l.addRange(k))}}else(l=C.getSelection(this.window))&&l.removeAllRanges&&(l.removeAllRanges(),k=C.create(this.window),z=C.getNode(N.startContainer,this.editNode),L=C.getNode(N.endContainer,this.editNode),
z&&L&&(k.setStart(z,N.startOffset),k.setEnd(L,N.endOffset),l.addRange(k)))},_changeToStep:function(k,E){this.setValue(E.text);(k=E.bookmark)&&this._moveToBookmark(k)},undo:function(){var k=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var E=this._steps.pop();E&&0<this._steps.length&&(this.focus(),this._changeToStep(E,this._steps[this._steps.length-1]),this._undoedSteps.push(E),this.onDisplayChanged(),delete this._undoRedoActive,k=!0);delete this._undoRedoActive}return k},
redo:function(){var k=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var E=this._undoedSteps.pop();E&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],E),this._steps.push(E),this.onDisplayChanged(),k=!0);delete this._undoRedoActive}return k},endEditing:function(k){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(k),this._inEditing=!1)},_getBookmark:function(){var k=this.selection.getBookmark(),
E=[];if(k&&k.mark){var N=k.mark;if(9>p("ie")||9===p("ie")&&p("quirks")){var l=C.getSelection(this.window);if(n.isArray(N))J.forEach(k.mark,function(L){E.push(C.getIndex(L,this.editNode).o)},this),k.mark=E;else if(l){var z;l.rangeCount&&(z=l.getRangeAt(0));k.mark=z?z.cloneRange():this.selection.getBookmark()}}try{k.mark&&k.mark.startContainer&&(E=C.getIndex(k.mark.startContainer,this.editNode).o,k.mark={startContainer:E,startOffset:k.mark.startOffset,endContainer:k.mark.endContainer===k.mark.startContainer?
E:C.getIndex(k.mark.endContainer,this.editNode).o,endOffset:k.mark.endOffset})}catch(L){k.mark=null}}return k},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:u.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var k=u.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:k,bookmark:this._getBookmark()})},onKeyDown:function(k){p("ie")||this.iframe||k.keyCode!=h.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var E=
k.keyCode;if(k.ctrlKey&&!k.shiftKey&&!k.altKey){if(90==E||122==E){k.stopPropagation();k.preventDefault();this.undo();return}if(89==E||121==E){k.stopPropagation();k.preventDefault();this.redo();return}}this.inherited(arguments);switch(E){case h.ENTER:case h.BACKSPACE:case h.DELETE:this.beginEditing();break;case 88:case 86:if(k.ctrlKey&&!k.altKey&&!k.metaKey){this.endEditing();88==k.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!k.ctrlKey&&!k.altKey&&
!k.metaKey&&(k.keyCode<h.F1||k.keyCode>h.F15)){this.beginEditing();break}case h.ALT:this.endEditing();break;case h.UP_ARROW:case h.DOWN_ARROW:case h.LEFT_ARROW:case h.RIGHT_ARROW:case h.HOME:case h.END:case h.PAGE_UP:case h.PAGE_DOWN:this.endEditing(!0);case h.CTRL:case h.SHIFT:case h.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(k){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(k){this.customUndo?this.isClosed?this.setValue(k):(this.beginEditing(),k||(k="\x26#160;"),this.setValue(k),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(k){this.setValueDeferred.then(n.hitch(this,function(){!this.disabled&&k||!this._buttonEnabledPlugins&&k?
J.forEach(this._plugins,function(E){E.set("disabled",!0)}):this.disabled&&!k&&J.forEach(this._plugins,function(E){E.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(c.set(this.document.body,"color",c.get(this.iframe,"color")),c.set(this.document.body,"background-color",c.get(this.iframe,"background-color")))}catch(k){}}});n.mixin(d.registry,{undo:S,redo:S,cut:S,copy:S,paste:S,insertOrderedList:S,insertUnorderedList:S,
indent:S,outdent:S,justifyCenter:S,justifyFull:S,justifyLeft:S,justifyRight:S,"delete":S,selectAll:S,removeFormat:S,unlink:S,insertHorizontalRule:S,bold:q,italic:q,underline:q,strikethrough:q,subscript:q,superscript:q,"|":function(){return new d({setEditor:function(k){this.editor=k;this.button=new g({ownerDocument:k.ownerDocument})}})}});return y})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(F,J,y,K,t,a,f,b){y("dijit-legacy-requires")&&t(0,function(){F(["dijit/ToolbarSeparator"])});return J("dijit.Toolbar",[a,b,f],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(F,J,y,K){return F("dijit.ToolbarSeparator",[y,K],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);J.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(F,J,y,K,t){J=J("dijit._editor._Plugin",K,{constructor:function(a){this.params=
a||{};y.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:t,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),f=this.editor,b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(a=y.mixin({label:a,ownerDocument:f.ownerDocument,dir:f.dir,
lang:f.lang,showLabel:!1,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete a.name,this.button=new this.buttonClass(a))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(a,f,b){this.own(F.connect(a,f,this,b))},updateState:function(){var a=this.editor,f=this.command;if(a&&a.isLoaded&&f.length){var b=this.get("disabled");if(this.button)try{var c=
a._implCommand(f);var h=!b&&(this[c]?this[c](f):a.queryCommandEnabled(f));this.enabled!==h&&(this.enabled=h,this.button.set("disabled",!h));if(h&&"boolean"==typeof this.button.checked){var n=a.queryCommandState(f);this.checked!==n&&(this.checked=n,this.button.set("checked",a.queryCommandState(f)))}}catch(p){console.log(p)}}},setEditor:function(a){this.editor=a;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",y.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",y.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);if(this[b.s])var c=this[b.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,f);return c||this},get:function(a){var f=this._getAttrNames(a);
return this[f.g]?this[f.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a);this.updateState()},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.charAt(0).toUpperCase()+a.substr(1);return f[a]={s:"_set"+b+"Attr",g:"_get"+b+"Attr"}},_set:function(a,f){this[a]=f}});J.registry={};return J})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n){return F("dijit._editor.plugins.EnterKeyHandling",c,{blockNodeForEnter:"BR",constructor:function(p){p&&("blockNodeForEnter"in p&&(p.blockNodeForEnter=p.blockNodeForEnter.toUpperCase()),K.mixin(this,p))},setEditor:function(p){if(this.editor!==p)if(this.editor=p,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,p.onLoadDeferred.then(K.hitch(this,function(G){this.own(t(p.document,"keydown",K.hitch(this,function(D){if(D.keyCode==y.ENTER){var e=K.mixin({},D);e.shiftKey=
!0;this.handleEnterKey(e)||(D.stopPropagation(),D.preventDefault())}})));9<=a("ie")&&10>=a("ie")&&this.own(t(p.document,"paste",K.hitch(this,function(D){setTimeout(K.hitch(this,function(){var e=this.editor.document.selection.createRange();e.move("character",-1);e.select();e.move("character",1);e.select()}),0)})));return G}));else if(this.blockNodeForEnter){var v=K.hitch(this,"handleEnterKey");p.addKeyHandler(13,0,0,v);p.addKeyHandler(13,0,1,v);this.own(this.editor.on("KeyPressed",K.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var p=this.editor.selection.getAncestorElement("LI");if(p){a("mozilla")&&"LI"==p.parentNode.parentNode.nodeName&&(p=p.parentNode.parentNode);var v=p.firstChild;!v||1!=v.nodeType||"UL"!=v.nodeName&&"OL"!=v.nodeName||(p.insertBefore(v.ownerDocument.createTextNode("\u00a0"),v),v=n.create(this.editor.window),v.setStart(p.firstChild,0),p=n.getSelection(this.editor.window,!0),p.removeAllRanges(),p.addRange(v))}else h.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(p=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(p.innerHTML=this.bogusHtmlContent,9>=a("ie")&&(p=this.editor.document.selection.createRange(),p.move("character",-1),p.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(p){var v,G=this.editor.document,D;if(p.shiftKey){p=this.editor.selection.getParentElement();if(v=n.getAncestor(p,this.blockNodes)){if("LI"==v.tagName)return!0;p=n.getSelection(this.editor.window);var e=p.getRangeAt(0);e.collapsed||(e.deleteContents(),p=n.getSelection(this.editor.window),e=p.getRangeAt(0));if(n.atBeginningOfContainer(v,e.startContainer,e.startOffset)){var g=G.createElement("br");e=n.create(this.editor.window);v.insertBefore(g,
v.firstChild);e.setStartAfter(g);p.removeAllRanges();p.addRange(e)}else if(n.atEndOfContainer(v,e.startContainer,e.startOffset))e=n.create(this.editor.window),g=G.createElement("br"),v.appendChild(g),v.appendChild(G.createTextNode("\u00a0")),e.setStart(v.lastChild,0),p.removeAllRanges(),p.addRange(e);else{if((D=e.startContainer)&&3==D.nodeType){var x=D.nodeValue;var B=G.createTextNode(x.substring(0,e.startOffset));var d=G.createTextNode(x.substring(e.startOffset));v=G.createElement("br");""==d.nodeValue&&
a("webkit")&&(d=G.createTextNode("\u00a0"));J.place(B,D,"after");J.place(v,B,"after");J.place(d,v,"after");J.destroy(D);e=n.create(this.editor.window);e.setStart(d,0);p.removeAllRanges();p.addRange(e);return!1}return!0}}else p=n.getSelection(this.editor.window),p.rangeCount?(e=p.getRangeAt(0))&&e.startContainer&&(e.collapsed||(e.deleteContents(),p=n.getSelection(this.editor.window),e=p.getRangeAt(0)),(D=e.startContainer)&&3==D.nodeType?(v=e.startOffset,D.length<v&&(d=this._adjustNodeAndOffset(D,v),
D=d.node,v=d.offset),x=D.nodeValue,B=G.createTextNode(x.substring(0,v)),d=G.createTextNode(x.substring(v)),v=G.createElement("br"),d.length||(d=G.createTextNode("\u00a0")),B.length?J.place(B,D,"after"):B=D,J.place(v,B,"after"),J.place(d,v,"after"),J.destroy(D)):(0<=e.startOffset&&(g=D.childNodes[e.startOffset]),v=G.createElement("br"),d=G.createTextNode("\u00a0"),g?(J.place(v,g,"before"),J.place(d,v,"after")):(D.appendChild(v),D.appendChild(d))),e=n.create(this.editor.window),e.setStart(d,0),e.setEnd(d,
d.length),p.removeAllRanges(),p.addRange(e),this.editor.selection.collapse(!0)):h.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var m=!0;p=n.getSelection(this.editor.window);e=p.getRangeAt(0);e.collapsed||(e.deleteContents(),p=n.getSelection(this.editor.window),e=p.getRangeAt(0));g=n.getBlockAncestor(e.endContainer,null,this.editor.editNode);var u=g.blockNode;if(this._checkListLater=u&&("LI"==u.nodeName||"LI"==u.parentNode.nodeName))return a("mozilla")&&(this._pressedEnterInBlock=
u),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(u.innerHTML)&&(u.innerHTML="",a("webkit")&&(e=n.create(this.editor.window),e.setStart(u,0),p.removeAllRanges(),p.addRange(e)),this._checkListLater=!1),!0;if(!g.blockNode||g.blockNode===this.editor.editNode){try{h.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(C){}g={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(g.blockNode){if(g.blockNode!=this.editor.editNode&&!(g.blockNode.textContent||g.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(g.blockNode),!1}else g.blockNode=this.editor.editNode;p=n.getSelection(this.editor.window);e=p.getRangeAt(0)}u=G.createElement(this.blockNodeForEnter);u.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(g.blockNode);d=e.endOffset;m=e.endContainer;m.length<d&&(d=this._adjustNodeAndOffset(m,d),m=
d.node,d=d.offset);if(n.atEndOfContainer(g.blockNode,m,d))g.blockNode===g.blockContainer?g.blockNode.appendChild(u):J.place(u,g.blockNode,"after"),m=!1,e=n.create(this.editor.window),e.setStart(u,0),p.removeAllRanges(),p.addRange(e),this.editor.height&&b.scrollIntoView(u);else if(n.atBeginningOfContainer(g.blockNode,e.startContainer,e.startOffset))J.place(u,g.blockNode,g.blockNode===g.blockContainer?"first":"before"),u.nextSibling&&this.editor.height&&(e=n.create(this.editor.window),e.setStart(u.nextSibling,
0),p.removeAllRanges(),p.addRange(e),b.scrollIntoView(u.nextSibling)),m=!1;else{g.blockNode===g.blockContainer?g.blockNode.appendChild(u):J.place(u,g.blockNode,"after");m=!1;g.blockNode.style&&u.style&&g.blockNode.style.cssText&&(u.style.cssText=g.blockNode.style.cssText);if((D=e.startContainer)&&3==D.nodeType){d=e.endOffset;D.length<d&&(d=this._adjustNodeAndOffset(D,d),D=d.node,d=d.offset);x=D.nodeValue;B=G.createTextNode(x.substring(0,d));d=G.createTextNode(x.substring(d,x.length));J.place(B,D,
"before");J.place(d,D,"after");J.destroy(D);for(e=B.parentNode;e!==g.blockNode;){x=G.createElement(e.tagName);e.style&&x.style&&e.style.cssText&&(x.style.cssText=e.style.cssText);"FONT"===e.tagName&&(e.color&&(x.color=e.color),e.face&&(x.face=e.face),e.size&&(x.size=e.size));for(;d;)D=d.nextSibling,x.appendChild(d),d=D;J.place(x,e,"after");B=e;d=x;e=e.parentNode}if(1==d.nodeType||3==d.nodeType&&d.nodeValue)u.innerHTML="";for(B=d;d;)D=d.nextSibling,u.appendChild(d),d=D}e=n.create(this.editor.window);
G=B;if("BR"!==this.blockNodeForEnter){for(;G;)v=G,G=D=G.firstChild;v&&v.parentNode?(u=v.parentNode,e.setStart(u,0),p.removeAllRanges(),p.addRange(e),this.editor.height&&b.scrollIntoView(u),a("mozilla")&&(this._pressedEnterInBlock=g.blockNode)):m=!0}else e.setStart(u,0),p.removeAllRanges(),p.addRange(e),this.editor.height&&b.scrollIntoView(u),a("mozilla")&&(this._pressedEnterInBlock=g.blockNode)}return m},_adjustNodeAndOffset:function(p,v){for(;p.length<v&&p.nextSibling&&3==p.nextSibling.nodeType;)v-=
p.length,p=p.nextSibling;return{node:p,offset:v}},removeTrailingBr:function(p){if(p=/P|DIV|LI/i.test(p.tagName)?p:this.editor.selection.getParentOfType(p,["P","DIV","LI"]))p.lastChild&&(1<p.childNodes.length&&3==p.lastChild.nodeType&&/^[\s\xAD]*$/.test(p.lastChild.nodeValue)||"BR"==p.lastChild.tagName)&&J.destroy(p.lastChild),p.childNodes.length||(p.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S,q,k,E){var N=y("dijit._editor.RichText",[C,O],{constructor:function(l){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};l&&v.isString(l.value)&&(this.value=l.value);this.onLoadDeferred=new K},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[v.trim,v.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);g("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));g("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(g("ie")||g("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[v.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[v.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);B.publish(E._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var l=v.hitch(this,function(R,Q){return function(){return!this.execCommand(R,Q)}}),z={b:l("bold"),i:l("italic"),u:l("underline"),a:l("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:l("formatblock",
"h1"),2:l("formatblock","h2"),3:l("formatblock","h3"),4:l("formatblock","h4"),"\\":l("insertunorderedlist")};g("ie")||(z.Z=l("redo"));for(var L in z)this.addKeyHandler(L,!0,!1,z[L])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(N._editorCommandsLocalized)this._local2NativeFormatNames=N._local2NativeFormatNames,this._native2LocalFormatNames=N._native2LocalFormatNames;else{N._editorCommandsLocalized=!0;N._local2NativeFormatNames={};
N._native2LocalFormatNames={};this._local2NativeFormatNames=N._local2NativeFormatNames;this._native2LocalFormatNames=N._native2LocalFormatNames;for(var l="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),z="",L,R=0;L=l[R++];)z="l"!==L.charAt(1)?z+("\x3c"+L+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+L+"\x3e\x3cbr/\x3e"):z+("\x3c"+L+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+L+"\x3e\x3cbr/\x3e");var Q=b.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:z});this.ownerDocumentBody.appendChild(Q);
l=v.hitch(this,function(){for(var V=Q.firstChild;V;)try{this.selection.selectElement(V.firstChild);var W=V.tagName.toLowerCase();this._local2NativeFormatNames[W]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[W]]=W;V=V.nextSibling.nextSibling}catch(Y){}b.destroy(Q)});this.defer(l)}},open:function(l){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new K;this.isClosed||this.close();B.publish(E._scopeName+"._editor.RichText::open",
this);1===arguments.length&&l.nodeName&&(this.domNode=l);var z=this.domNode;if(v.isString(this.value)){var L=this.value;z.innerHTML=""}else if(z.nodeName&&"textarea"==z.nodeName.toLowerCase()){var R=this.textarea=z;this.name=R.name;L=R.value;z=this.domNode=this.ownerDocument.createElement("div");z.setAttribute("widgetId",this.id);R.removeAttribute("widgetId");z.cssText=R.cssText;z.className+=" "+R.className;b.place(z,R,"before");var Q=v.hitch(this,function(){h.set(R,{display:"block",position:"absolute",
top:"-1000px"});if(g("ie")){var I=R.style;this.__overflow=I.overflow;I.overflow="hidden"}});g("ie")?this.defer(Q,10):Q();if(R.form){var V=R.value;this.reset=function(){this.getValue()!==V&&this.replaceValue(V)};G(R.form,"submit",v.hitch(this,function(){a.set(R,"disabled",this.disabled);R.value=this.getValue()}))}}else L=q.getChildrenHtml(z),z.innerHTML="";this.value=L;z.nodeName&&"LI"===z.nodeName&&(z.innerHTML=" \x3cbr\x3e");this.header=z.ownerDocument.createElement("div");z.appendChild(this.header);
this.editingArea=z.ownerDocument.createElement("div");z.appendChild(this.editingArea);this.footer=z.ownerDocument.createElement("div");z.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!J.useXDomain||J.allowXdRichTextSave)){if((L=t.byId(E._scopeName+"._editor.RichText.value"))&&""!==L.value){Q=L.value.split(this._SEPARATOR);for(var W=0,Y;Y=Q[W++];)if(Y=Y.split(this._NAME_CONTENT_SEP),Y[0]===this.name){this.value=Y[1];Q=Q.splice(W,1);L.value=Q.join(this._SEPARATOR);
break}}N._globalSaveHandler||(N._globalSaveHandler={},d.addOnUnload(function(){for(var I in N._globalSaveHandler){var P=N._globalSaveHandler[I];v.isFunction(P)&&P()}}));N._globalSaveHandler[this.id]=v.hitch(this,"_saveContent")}this.isClosed=!1;L=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");L.id=this.id+"_iframe";L.style.border="none";L.style.width="100%";this._layoutMode?L.style.height="100%":7<=g("ie")?(this.height&&(L.style.height=this.height),this.minHeight&&(L.style.minHeight=
this.minHeight)):L.style.height=this.height?this.height:this.minHeight;L.frameBorder=0;L._loadFunc=v.hitch(this,function(I){this.window=I;this.document=I.document;this.selection=new M.SelectionManager(I);g("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});Q=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");Q=11>g("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+Q+"');document.close()":"javascript: '"+
Q+"'";this.editingArea.appendChild(L);L.src=Q;"LI"===z.nodeName&&(z.lastChild.style.marginTop="-1.2em");f.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var l=h.getComputedStyle(this.domNode);if(this["aria-label"])var z=this["aria-label"];else{var L=D('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||t.byId(this["aria-labelledby"],this.ownerDocument);L&&(z=L.textContent||L.innerHTML||"")}L="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(z?" aria-label\x3d'"+x.escape(z)+"'":"")+"\x3e\x3c/div\x3e";var R=[l.fontWeight,l.fontSize,l.fontFamily].join(" "),Q=l.lineHeight;Q=0<=Q.indexOf("px")?parseFloat(Q)/parseFloat(l.fontSize):0<=Q.indexOf("em")?parseFloat(Q):"normal";var V="",W=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(Y){Y=Y.replace(/^;/ig,"")+";";var I=Y.split(":")[0];if(I){I=v.trim(I);I=I.toLowerCase();var P,X="";for(P=0;P<I.length;P++){var A=I.charAt(P);switch(A){case "-":P++,A=I.charAt(P).toUpperCase();default:X+=
A}}h.set(W.domNode,X,"")}V+=Y+";"});this.iframe.setAttribute("title",z);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||n.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",z?"\x3ctitle\x3e"+x.escape(z)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",R,";\n",this.height||g("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",Q,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",g("ie")||g("trident")||g("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",z?" aria-label\x3d'"+x.escape(z)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+V+"'\x3e",L,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var l=[];this.styleSheets&&(l=this.styleSheets.split(";"),this.styleSheets=
"");l=l.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var z="",L=0,R,Q=u.get(this.ownerDocument);R=l[L++];)R=(new m(Q.location,R)).toString(),this.editingAreaStyleSheets.push(R),z+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+R+'"/\x3e';return z},addStyleSheet:function(l){var z=l.toString(),L=u.get(this.ownerDocument);if("."===z.charAt(0)||"/"!==z.charAt(0)&&!l.host)z=(new m(L.location,z)).toString();-1<F.indexOf(this.editingAreaStyleSheets,z)||(this.editingAreaStyleSheets.push(z),
this.onLoadDeferred.then(v.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(z);else{var R=this.document.getElementsByTagName("head")[0],Q=this.document.createElement("link");Q.rel="stylesheet";Q.type="text/css";Q.href=z;R.appendChild(Q)}})))},removeStyleSheet:function(l){var z=l.toString(),L=u.get(this.ownerDocument);if("."===z.charAt(0)||"/"!==z.charAt(0)&&!l.host)z=(new m(L.location,z)).toString();l=F.indexOf(this.editingAreaStyleSheets,z);-1!==l&&(delete this.editingAreaStyleSheets[l],
D('link[href\x3d"'+z+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(l){l=!!l;this._set("disabled",l);if(this.isLoaded){var z=g("ie")&&(this.isLoaded||!this.focusOnLoad);z&&(this.editNode.unselectable="on");this.editNode.contentEditable=!l;this.editNode.tabIndex=l?"-1":this.tabIndex;z&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(g("mozilla")&&!l&&this._mozSettingProps){l=this._mozSettingProps;for(var L in l)if(l.hasOwnProperty(L))try{this.document.execCommand(L,
!1,l[L])}catch(R){}}this._disabledOK=!0}},onLoad:function(l){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=k.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var z=this;this.beforeIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){z.editNode.focus()};this.focusNode=
this.editNode;var L=this.events.concat(this.captureEvents),R=this.iframe?this.document:this.editNode;this.own.apply(this,F.map(L,function(Q){var V=Q.toLowerCase().replace(/^on/,"");return G(R,V,v.hitch(this,Q))},this));this.own(G(R,"mouseup",v.hitch(this,"onClick")));g("ie")&&(this.own(G(this.document,"mousedown",v.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);g("webkit")&&(this._webkitListener=this.own(G(this.document,"mouseup",v.hitch(this,"onDisplayChanged")))[0],this.own(G(this.document,
"mousedown",v.hitch(this,function(Q){Q=Q.target;!Q||Q!==this.document.body&&Q!==this.document||this.defer("placeCursorAtEnd")}))));if(g("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(Q){}this.isLoaded=!0;this.set("disabled",this.disabled);L=v.hitch(this,function(){this.setValue(l);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&e(v.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(L):L()},onKeyDown:function(l){if(l.keyCode===p.SHIFT||l.keyCode===p.ALT||l.keyCode===p.META||l.keyCode===p.CTRL)return!0;l.keyCode===p.TAB&&this.isTabIndent&&(l.stopPropagation(),l.preventDefault(),this.queryCommandEnabled(l.shiftKey?"outdent":"indent")&&this.execCommand(l.shiftKey?"outdent":"indent"));if(l.keyCode==p.TAB&&!this.isTabIndent&&!l.ctrlKey&&!l.altKey)return l.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>g("ie")&&l.keyCode===p.BACKSPACE&&"Control"===this.document.selection.type&&(l.stopPropagation(),l.preventDefault(),this.execCommand("delete"));g("ff")&&(l.keyCode===p.PAGE_UP||l.keyCode===p.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&l.preventDefault();var z=this._keyHandlers[l.keyCode],L=arguments;z&&!l.altKey&&F.some(z,function(R){if(!(R.shift^l.shiftKey||R.ctrl^(l.ctrlKey||l.metaKey)))return R.handler.apply(this,L)||l.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(l){n.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",l)},_setValueAttr:function(l){this.setValue(l)},_setDisableSpellCheckAttr:function(l){this.document?a.set(this.document.body,"spellcheck",!l):this.onLoadDeferred.then(v.hitch(this,function(){a.set(this.document.body,"spellcheck",!l)}));this._set("disableSpellCheck",l)},addKeyHandler:function(l,z,L,R){"string"==
typeof l&&(l=l.toUpperCase().charCodeAt(0));v.isArray(this._keyHandlers[l])||(this._keyHandlers[l]=[]);this._keyHandlers[l].push({shift:L||!1,ctrl:z||!1,handler:R})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(l){this.onDisplayChanged(l)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(l){(g("ie")||g("trident"))&&this.defer(function(){k.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var z=this.getValue(!0);if(z!==this.value)this.onChange(z);
this._set("value",z)},_onFocus:function(l){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!g("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>g("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(l,z){l=l.toLowerCase();"formatblock"===l?g("safari")&&void 0===z&&(l="heading"):"hilitecolor"!==l||g("mozilla")||(l="backcolor");return l},_implCommand:function(l){return"_"+this._normalizeCommand(l)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(l){var z=this._qcaCache[l];return void 0!==z?z:this._qcaCache[l]=this._queryCommandAvailable(l)},_queryCommandAvailable:function(l){switch(l.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return g("ie")||g("trident")||g("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!g("webkit");default:return!1}},execCommand:function(l,z){this.focused&&this.focus();l=this._normalizeCommand(l,z);if(void 0!==z){if("heading"===l)throw Error("unimplemented");"formatblock"===
l&&(g("ie")||g("trident"))&&(z="\x3c"+z+"\x3e")}var L="_"+l+"Impl";if(this[L])var R=this[L](z);else if((z=1<arguments.length?z:null)||"createlink"!==l)R=this.document.execCommand(l,!1,z);this.onDisplayChanged();return R},queryCommandEnabled:function(l){if(this.disabled||!this._disabledOK)return!1;l=this._normalizeCommand(l);var z=this._implCommand(l);return this[z]?this[z](l):this._browserQueryCommandEnabled(l)},queryCommandState:function(l){if(this.disabled||!this._disabledOK)return!1;l=this._normalizeCommand(l);
try{return this.document.queryCommandState(l)}catch(z){return!1}},queryCommandValue:function(l){if(this.disabled||!this._disabledOK)return!1;l=this._normalizeCommand(l);if(g("ie")&&"formatblock"===l)l=this._native2LocalFormatNames[this.document.queryCommandValue(l)];else if(g("mozilla")&&"hilitecolor"===l){try{var z=this.document.queryCommandValue("styleWithCSS")}catch(L){z=!1}this.document.execCommand("styleWithCSS",!1,!0);l=this.document.queryCommandValue(l);this.document.execCommand("styleWithCSS",
!1,z)}else l=this.document.queryCommandValue(l);return l},_sCall:function(l,z){return this.selection[l].apply(this.selection,z)},placeCursorAtStart:function(){this.focus();var l=!1;if(g("mozilla"))for(var z=this.editNode.firstChild;z;){if(3===z.nodeType){if(0<z.nodeValue.replace(/^\s+|\s+$/g,"").length){l=!0;this.selection.selectElement(z);break}}else if(1===z.nodeType){l=!0;var L=z.tagName?z.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(L)?this.selection.selectElement(z):
this.selection.selectElementChildren(z);break}z=z.nextSibling}else l=!0,this.selection.selectElementChildren(this.editNode);l&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var l=!1;if(g("mozilla"))for(var z=this.editNode.lastChild;z;){if(3===z.nodeType){if(0<z.nodeValue.replace(/^\s+|\s+$/g,"").length){l=!0;this.selection.selectElement(z);break}}else if(1===z.nodeType){l=!0;this.selection.selectElement(z.lastChild||z);break}z=z.previousSibling}else l=!0,this.selection.selectElementChildren(this.editNode);
l&&this.selection.collapse(!1)},getValue:function(l){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,l):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(l){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){l=this._preFilterContent(l);var z=this.isClosed?this.domNode:this.editNode;z.innerHTML=l;this._preDomFilterContent(z)}else this.textarea.value=l;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(v.hitch(this,function(){this.setValue(l)}))},replaceValue:function(l){this.isClosed?this.setValue(l):this.window&&this.window.getSelection&&!g("mozilla")?this.setValue(l):this.window&&this.window.getSelection?(l=this._preFilterContent(l),this.execCommand("selectall"),this.execCommand("inserthtml",l),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(l);this._set("value",this.getValue(!0))},_preFilterContent:function(l){var z=
l;F.forEach(this.contentPreFilters,function(L){L&&(z=L(z))});return z},_preDomFilterContent:function(l){l=l||this.editNode;F.forEach(this.contentDomPreFilters,function(z){z&&v.isFunction(z)&&z(l)},this)},_postFilterContent:function(l,z){if(v.isString(l))var L=l;else l=l||this.editNode,this.contentDomPostFilters.length&&(z&&(l=v.clone(l)),F.forEach(this.contentDomPostFilters,function(R){l=R(l)})),L=q.getChildrenHtml(l);v.trim(L.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(L="");F.forEach(this.contentPostFilters,
function(R){L=R(L)});return L},_saveContent:function(){var l=t.byId(E._scopeName+"._editor.RichText.value");l&&(l.value&&(l.value+=this._SEPARATOR),l.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(l,z){l=l.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");z||(l=l.replace(/'/gm,"\x26#39;"));return l},getNodeHtml:function(l){n.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return q.getNodeHtml(l)},getNodeChildrenHtml:function(l){n.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return q.getChildrenHtml(l)},close:function(l){if(!this.isClosed){arguments.length||(l=!0);l&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);g("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var z=this.textarea.style;z.position="";z.left=z.top="";g("ie")&&(z.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;b.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;f.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);N._globalSaveHandler&&delete N._globalSaveHandler[this.id]},_removeMozBogus:function(l){return l.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(l){l=l.replace(/\sclass="webkit-block-placeholder"/gi,"");l=l.replace(/\sclass="apple-style-span"/gi,
"");return l=l.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(l){return l.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(l){return l.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(l){if(!l)return!1;
if(g("ie")||g("trident")||g("edge"))return this.focused&&!this.disabled;var z=9>g("ie")?this.document.selection.createRange():this.document;try{return z.queryCommandEnabled(l)}catch(L){return!1}},_createlinkEnabledImpl:function(){var l=!0;return l=g("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var l=!0;return l=g("mozilla")||g("webkit")||g("ie")||g("trident")||g("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var l=!0;return l=g("mozilla")||g("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var l=!0;g("webkit")?((l=this.window.getSelection())&&(l=l.toString()),l=!!l):l=this._browserQueryCommandEnabled("cut");return l},_copyEnabledImpl:function(){var l=!0;g("webkit")?((l=this.window.getSelection())&&(l=l.toString()),l=!!l):l=this._browserQueryCommandEnabled("copy");
return l},_pasteEnabledImpl:function(){var l=!0;return g("webkit")?!0:l=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(l){return g("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,l)},_unlinkImpl:function(l){return this.queryCommandEnabled("unlink")&&(g("mozilla")||g("webkit"))?(l=this.selection.getAncestorElement("a"),this.selection.selectElement(l),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,l)},_hilitecolorImpl:function(l){if(!this._handleTextColorOrProperties("hilitecolor",l))if(g("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var z=this.document.execCommand("hilitecolor",!1,l);this.document.execCommand("styleWithCSS",!1,!1)}else z=this.document.execCommand("hilitecolor",!1,l);return z},_backcolorImpl:function(l){g("ie")&&(l=l?l:null);var z=this._handleTextColorOrProperties("backcolor",l);z||(z=this.document.execCommand("backcolor",
!1,l));return z},_forecolorImpl:function(l){g("ie")&&(l=l?l:null);var z=!1;(z=this._handleTextColorOrProperties("forecolor",l))||(z=this.document.execCommand("forecolor",!1,l));return z},_inserthtmlImpl:function(l){l=this._preFilterContent(l);var z=!0;if(9>g("ie")){var L=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var R=L.item(0);L.length;)L.remove(L.item(0));R.outerHTML=l}else L.pasteHTML(l);L.select()}else if(8>g("trident")){var Q=S.getSelection(this.window);
if(Q&&Q.rangeCount&&Q.getRangeAt){L=Q.getRangeAt(0);L.deleteContents();var V=b.create("div");V.innerHTML=l;for(R=this.document.createDocumentFragment();l=V.firstChild;)var W=R.appendChild(l);L.insertNode(R);W&&(L=L.cloneRange(),L.setStartAfter(W),L.collapse(!1),Q.removeAllRanges(),Q.addRange(L))}}else g("mozilla")&&!l.length?this.selection.remove():z=this.document.execCommand("inserthtml",!1,l);return z},_boldImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),z=this._adaptIEFormatAreaAndExec("bold");
z||(z=this.document.execCommand("bold",!1,l));return z},_italicImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),z=this._adaptIEFormatAreaAndExec("italic");z||(z=this.document.execCommand("italic",!1,l));return z},_underlineImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),z=this._adaptIEFormatAreaAndExec("underline");z||(z=this.document.execCommand("underline",!1,l));return z},_strikethroughImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),
z=this._adaptIEFormatAreaAndExec("strikethrough");z||(z=this.document.execCommand("strikethrough",!1,l));return z},_superscriptImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),z=this._adaptIEFormatAreaAndExec("superscript");z||(z=this.document.execCommand("superscript",!1,l));return z},_subscriptImpl:function(l){var z=!1;if(g("ie")||g("trident"))this._adaptIESelection(),z=this._adaptIEFormatAreaAndExec("subscript");z||(z=this.document.execCommand("subscript",!1,l));return z},
_fontnameImpl:function(l){if(g("ie")||g("trident"))var z=this._handleTextColorOrProperties("fontname",l);z||(z=this.document.execCommand("fontname",!1,l));return z},_fontsizeImpl:function(l){if(g("ie")||g("trident"))var z=this._handleTextColorOrProperties("fontsize",l);z||(z=this.document.execCommand("fontsize",!1,l));return z},_insertorderedlistImpl:function(l){var z=!1;if(g("ie")||g("trident")||g("edge"))z=this._adaptIEList("insertorderedlist",l);z||(z=this.document.execCommand("insertorderedlist",
!1,l));return z},_insertunorderedlistImpl:function(l){var z=!1;if(g("ie")||g("trident")||g("edge"))z=this._adaptIEList("insertunorderedlist",l);z||(z=this.document.execCommand("insertunorderedlist",!1,l));return z},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(l){var z=0;if(l&&l.childNodes){var L;for(L=0;L<l.childNodes.length;L++){var R=c.position(l.childNodes[L]);
z+=R.h}}return z},_isNodeEmpty:function(l,z){return 1===l.nodeType?0<l.childNodes.length?this._isNodeEmpty(l.childNodes[0],z):!0:3===l.nodeType?""===l.nodeValue.substring(z):!1},_removeStartingRangeFromRange:function(l,z){if(l.nextSibling)z.setStart(l.nextSibling,0);else{for(l=l.parentNode;l&&null==l.nextSibling;)l=l.parentNode;l&&z.setStart(l.nextSibling,0)}return z},_adaptIESelection:function(){var l=S.getSelection(this.window);if(l&&l.rangeCount&&!l.isCollapsed){for(var z=l.getRangeAt(0),L=z.startContainer,
R=z.startOffset;3===L.nodeType&&R>=L.length&&L.nextSibling;)R-=L.length,L=L.nextSibling;for(var Q=null;this._isNodeEmpty(L,R)&&L!==Q;)Q=L,z=this._removeStartingRangeFromRange(L,z),L=z.startContainer,R=0;l.removeAllRanges();l.addRange(z)}},_adaptIEFormatAreaAndExec:function(l){var z=S.getSelection(this.window),L=this.document,R;if(l&&z&&z.isCollapsed){if(this.queryCommandValue(l)){l=this._tagNamesForCommand(l);var Q=z.getRangeAt(0);var V=Q.startContainer;if(3===V.nodeType){var W=Q.endOffset;V.length<
W&&(W=this._adjustNodeAndOffset(Y,W),V=W.node,W=W.offset)}for(;V&&V!==this.editNode;){var Y=V.tagName?V.tagName.toLowerCase():"";if(-1<F.indexOf(l,Y)){var I=V;break}V=V.parentNode}if(I&&(Y=Q.startContainer,l=L.createElement(I.tagName),b.place(l,I,"after"),Y&&3===Y.nodeType)){W=Q.endOffset;Y.length<W&&(W=this._adjustNodeAndOffset(Y,W),Y=W.node,W=W.offset);V=Y.nodeValue;Q=L.createTextNode(V.substring(0,W));var P=V.substring(W,V.length);P&&(R=L.createTextNode(P));b.place(Q,Y,"before");if(R){var X=L.createElement("span");
X.className="ieFormatBreakerSpan";b.place(X,Y,"after");b.place(R,X,"after");R=X}b.destroy(Y);W=Q.parentNode;for(Y=[];W!==I;){V=W.tagName;Q={tagName:V};Y.push(Q);V=L.createElement(V);W.style&&V.style&&W.style.cssText&&(V.style.cssText=W.style.cssText,Q.cssText=W.style.cssText);"FONT"===W.tagName&&(W.color&&(V.color=W.color,Q.color=W.color),W.face&&(V.face=W.face,Q.face=W.face),W.size&&(V.size=W.size,Q.size=W.size));W.className&&(V.className=W.className,Q.className=W.className);if(R)for(;R;)Q=R.nextSibling,
V.appendChild(R),R=Q;V.tagName==W.tagName?(X=L.createElement("span"),X.className="ieFormatBreakerSpan",b.place(X,W,"after"),b.place(V,X,"after")):b.place(V,W,"after");Q=W;R=V;W=W.parentNode}if(R){if(1===R.nodeType||3===R.nodeType&&R.nodeValue)l.innerHTML="";for(;R;)Q=R.nextSibling,l.appendChild(R),R=Q}if(Y.length){Q=Y.pop();R=L.createElement(Q.tagName);Q.cssText&&R.style&&(R.style.cssText=Q.cssText);Q.className&&(R.className=Q.className);"FONT"===Q.tagName&&(Q.color&&(R.color=Q.color),Q.face&&(R.face=
Q.face),Q.size&&(R.size=Q.size));for(b.place(R,l,"before");Y.length;)Q=Y.pop(),I=L.createElement(Q.tagName),Q.cssText&&I.style&&(I.style.cssText=Q.cssText),Q.className&&(I.className=Q.className),"FONT"===Q.tagName&&(Q.color&&(I.color=Q.color),Q.face&&(I.face=Q.face),Q.size&&(I.size=Q.size)),R.appendChild(I),R=I;I=L.createTextNode(".");X.appendChild(I);R.appendChild(I)}else X=L.createElement("span"),X.className="ieFormatBreakerSpan",I=L.createTextNode("."),X.appendChild(I),b.place(X,l,"before");R=
S.create(this.window);R.setStart(I,0);R.setEnd(I,I.length);z.removeAllRanges();z.addRange(R);this.selection.collapse(!1);I.parentNode.innerHTML="";l.firstChild||b.destroy(l);return!0}return!1}Q=z.getRangeAt(0);if((Y=Q.startContainer)&&3===Y.nodeType)return W=Q.startOffset,Y.length<W&&(W=this._adjustNodeAndOffset(Y,W),Y=W.node,W=W.offset),V=Y.nodeValue,Q=L.createTextNode(V.substring(0,W)),P=V.substring(W),""!==P&&(R=L.createTextNode(V.substring(W))),X=L.createElement("span"),I=L.createTextNode("."),
X.appendChild(I),Q.length?b.place(Q,Y,"after"):Q=Y,b.place(X,Q,"after"),R&&b.place(R,X,"after"),b.destroy(Y),R=S.create(this.window),R.setStart(I,0),R.setEnd(I,I.length),z.removeAllRanges(),z.addRange(R),L.execCommand(l),b.place(X.firstChild,X,"before"),b.destroy(X),R.setStart(I,0),R.setEnd(I,I.length),z.removeAllRanges(),z.addRange(R),this.selection.collapse(!1),I.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(l){var z=S.getSelection(this.window);if(z.isCollapsed&&z.rangeCount&&
!this.queryCommandValue(l)){var L=z.getRangeAt(0),R=L.startContainer;if(R&&3==R.nodeType&&!L.startOffset)return L="ul","insertorderedlist"===l&&(L="ol"),l=this.document.createElement(L),L=b.create("li",null,l),b.place(l,R,"before"),L.appendChild(R),b.create("br",null,l,"after"),l=S.create(this.window),l.setStart(R,0),l.setEnd(R,R.length),z.removeAllRanges(),z.addRange(l),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(l,z){var L=S.getSelection(this.window),R=this.document,
Q,V;z=z||null;if(l&&L&&L.isCollapsed&&L.rangeCount){var W=L.getRangeAt(0);if((Q=W.startContainer)&&3===Q.nodeType){var Y=W.startOffset;Q.length<Y&&(W=this._adjustNodeAndOffset(Q,Y),Q=W.node,Y=W.offset);var I=Q.nodeValue;W=R.createTextNode(I.substring(0,Y));""!==I.substring(Y)&&(V=R.createTextNode(I.substring(Y)));I=R.createElement("span");Y=R.createTextNode(".");I.appendChild(Y);R=R.createElement("span");I.appendChild(R);W.length?b.place(W,Q,"after"):W=Q;b.place(I,W,"after");V&&b.place(V,I,"after");
b.destroy(Q);Q=S.create(this.window);Q.setStart(Y,0);Q.setEnd(Y,Y.length);L.removeAllRanges();L.addRange(Q);if(g("webkit")){L="color";if("hilitecolor"===l||"backcolor"===l)L="backgroundColor";h.set(I,L,z);this.selection.remove();b.destroy(R);I.innerHTML="\x26#160;";this.selection.selectElement(I);this.focus()}else this.execCommand(l,z),b.place(I.firstChild,I,"before"),b.destroy(I),Q.setStart(Y,0),Q.setEnd(Y,Y.length),L.removeAllRanges(),L.addRange(Q),this.selection.collapse(!1),Y.parentNode.removeChild(Y);
return!0}}return!1},_adjustNodeAndOffset:function(l,z){for(;l.length<z&&l.nextSibling&&3===l.nextSibling.nodeType;)z-=l.length,l=l.nextSibling;return{node:l,offset:z}},_tagNamesForCommand:function(l){return"bold"===l?["b","strong"]:"italic"===l?["i","em"]:"strikethrough"===l?["s","strike"]:"superscript"===l?["sup"]:"subscript"===l?["sub"]:"underline"===l?["u"]:[]},_stripBreakerNodes:function(l){if(this.isLoaded)return D(".ieFormatBreakerSpan",l).forEach(function(z){for(;z.firstChild;)b.place(z.firstChild,
z,"before");b.destroy(z)}),l},_stripTrailingEmptyNodes:function(l){function z(L){return/^(p|div|br)$/i.test(L.nodeName)&&0==L.children.length&&/^[\s\xA0]*$/.test(L.textContent||L.innerText||"")||3===L.nodeType&&/^[\s\xA0]*$/.test(L.nodeValue)}for(;l.lastChild&&z(l.lastChild);)b.destroy(l.lastChild);return l},_setTextDirAttr:function(l){this._set("textDir",l);this.onLoadDeferred.then(v.hitch(this,function(){this.editNode.dir=l}))}});return N})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(F,J,y){var K={getIndex:function(f,b){for(var c=[],h=[],n=f,p,v;f!=b;){var G=0;for(p=f.parentNode;v=p.childNodes[G++];)if(v===f){--G;break}c.unshift(G);h.unshift(G-p.childNodes.length);f=p}if(0<c.length&&3==n.nodeType){for(v=n.previousSibling;v&&3==v.nodeType;)c[c.length-1]--,v=v.previousSibling;for(v=n.nextSibling;v&&3==v.nodeType;)h[h.length-1]++,v=v.nextSibling}return{o:c,r:h}},getNode:function(f,b){if(!y.isArray(f)||0==f.length)return b;var c=b;
F.every(f,function(h){if(0<=h&&h<c.childNodes.length)c=c.childNodes[h];else return c=null,!1;return!0});return c},getCommonAncestor:function(f,b,c){c=c||f.ownerDocument.body;var h=function(v){for(var G=[];v;)if(G.unshift(v),v!==c)v=v.parentNode;else break;return G};f=h(f);b=h(b);h=Math.min(f.length,b.length);for(var n=f[0],p=1;p<h;p++)if(f[p]===b[p])n=f[p];else break;return n},getAncestor:function(f,b,c){for(c=c||f.ownerDocument.body;f&&f!==c;){var h=f.nodeName.toUpperCase();if(b.test(h))return f;
f=f.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(f,b,c){c=c||f.ownerDocument.body;b=b||K.BlockTagNames;for(var h=null,n;f&&f!==c;){var p=f.nodeName.toUpperCase();!h&&b.test(p)&&(h=f);!n&&/^(?:BODY|TD|TH|CAPTION)$/.test(p)&&(n=f);f=f.parentNode}return{blockNode:h,blockContainer:n||f.ownerDocument.body}},atBeginningOfContainer:function(f,b,c){var h=!1,n=0==c;n||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(0,c))&&(n=
!0);if(n)for(h=!0;b&&b!==f;){if(b.previousSibling){h=!1;break}b=b.parentNode}return h},atEndOfContainer:function(f,b,c){var h=!1,n=c==(b.length||b.childNodes.length);n||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(c))&&(n=!0);if(n)for(h=!0;b&&b!==f;){if(b.nextSibling){h=!1;break}b=b.parentNode}return h},adjacentNoneTextNode:function(f,b){var c=f;f=0-f.length||0;for(b=b?"nextSibling":"previousSibling";c&&3==c.nodeType;)f+=c.length,c=c[b];return[c,f]},create:function(f){f=f||window;return f.getSelection?
f.document.createRange():new a},getSelection:function(f,b){if(f.getSelection)return f.getSelection();f=new t.selection(f);b||f._getCurrentSelection();return f}};if(!window.getSelection)var t=K.ie={cachedSelection:{},selection:function(f){this._ranges=[];this.addRange=function(b,c){this._ranges.push(b);c||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();
var b=f.document.selection.createRange();b="CONTROL"==f.document.selection.type.toUpperCase()?new a(t.decomposeControlRange(b)):new a(t.decomposeTextRange(b));this.addRange(b,!0),this.isCollapsed=b.collapsed}},decomposeControlRange:function(f){var b=f.item(0),c=f.item(f.length-1);f=b.parentNode;var h=c.parentNode;b=K.getIndex(b,f).o[0];c=K.getIndex(c,h).o[0]+1;return[f,b,h,c]},getEndPoint:function(f,b){var c=f.duplicate();c.collapse(!b);var h="EndTo"+(b?"End":"Start"),n=c.parentElement(),p;if(0<n.childNodes.length)F.every(n.childNodes,
function(D,e){if(3!=D.nodeType)if(c.moveToElementText(D),0<c.compareEndPoints(h,f))if(p&&3==p.nodeType){v=p;var g=!0}else return v=n,G=e,!1;else{if(e==n.childNodes.length-1)return v=n,G=n.childNodes.length,!1}else e==n.childNodes.length-1&&(v=D,g=!0);if(g&&v)return v=(D=K.adjacentNoneTextNode(v)[0])?D.nextSibling:n.firstChild,e=K.adjacentNoneTextNode(v),D=e[0],e=e[1],D?(c.moveToElementText(D),c.collapse(!1)):c.moveToElementText(n),c.setEndPoint(h,f),G=c.text.length-e,!1;p=D;return!0});else{var v=
n;var G=0}b||1!=v.nodeType||G!=v.childNodes.length||(b=v.nextSibling)&&3==b.nodeType&&(v=b,G=0);return[v,G]},setEndPoint:function(f,b,c){f=f.duplicate();var h;if(3!=b.nodeType)if(0<c){if(h=b.childNodes[c-1])if(3==h.nodeType)b=h,c=h.length;else if(h.nextSibling&&3==h.nextSibling.nodeType)b=h.nextSibling,c=0;else{f.moveToElementText(h.nextSibling?h:b);var n=h.parentNode;h=n.insertBefore(h.ownerDocument.createTextNode(" "),h.nextSibling);f.collapse(!1);n.removeChild(h)}}else f.moveToElementText(b),f.collapse(!0);
3==b.nodeType&&(h=K.adjacentNoneTextNode(b),n=h[0],h=h[1],n?(f.moveToElementText(n),f.collapse(!1),"inherit"!=n.contentEditable&&h++):(f.moveToElementText(b.parentNode),f.collapse(!0),f.move("character",1),f.move("character",-1)),c+=h,0<c&&f.move("character",c)!=c&&console.error("Error when moving!"));return f},decomposeTextRange:function(f){var b=t.getEndPoint(f),c=b[0],h=b[1],n=b[0];b=b[1];f.htmlText.length&&(f.htmlText==f.text?b=h+f.text.length:(b=t.getEndPoint(f,!0),n=b[0],b=b[1]));return[c,h,
n,b]},setRange:function(f,b,c,h,n,p){b=t.setEndPoint(f,b,c);f.setEndPoint("StartToStart",b);if(!p)var v=t.setEndPoint(f,h,n);f.setEndPoint("EndToEnd",v||b);return f}},a=K.W3CRange=J(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?K.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(f,b){b=parseInt(b);if(this.startContainer!==f||this.startOffset!=b)delete this._cachedBookmark,this.startContainer=f,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(f,b)},setEnd:function(f,b){b=parseInt(b);if(this.endContainer!==f||this.endOffset!=b)delete this._cachedBookmark,
this.endContainer=f,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(f,b)},setStartAfter:function(f,b){this._setPoint("setStart",f,b,1)},setStartBefore:function(f,b){this._setPoint("setStart",f,b,0)},setEndAfter:function(f,b){this._setPoint("setEnd",f,b,1)},setEndBefore:function(f,b){this._setPoint("setEnd",f,b,0)},_setPoint:function(f,b,c,h){c=K.getIndex(b,b.parentNode).o;this[f](b.parentNode,c.pop()+h)},_getIERange:function(){var f=(this._body||this.endContainer.ownerDocument.body).createTextRange();
t.setRange(f,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return f},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var f=this.startContainer,b=this._getIERange();3!==f.nodeType||this.startOffset||this.setStartBefore(f);b.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var f=new a([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);f._body=this._body;return f},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});y.setObject("dijit.range",K);return K})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(F,J,y){var K={};J.setObject("dijit._editor.html",K);var t=K.escapeXml=function(a,f){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");f||(a=a.replace(/'/gm,"\x26#39;"));return a};K.getNodeHtml=function(a){var f=[];K.getNodeHtmlHelper(a,f);return f.join("")};K.getNodeHtmlHelper=function(a,f){switch(a.nodeType){case 1:var b=a.nodeName.toLowerCase();if(!b||"/"==b.charAt(0))return"";f.push("\x3c",b);var c=[],h={},n;if(y("dom-attributes-explicit")||y("dom-attributes-specified-flag"))for(var p=0;n=a.attributes[p++];){var v=n.name;"_dj"===v.substr(0,3)||y("dom-attributes-specified-flag")&&
!n.specified||v in h||(n=n.value,("src"==v||"href"==v)&&a.getAttribute("_djrealurl")&&(n=a.getAttribute("_djrealurl")),8===y("ie")&&"style"===v&&(n=n.replace("HEIGHT:","height:").replace("WIDTH:","width:")),c.push([v,n]),h[v]=n)}else{var G=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML;h=G.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);G=G.substr(0,G.indexOf("\x3e"));F.forEach(h,function(D){if(D){var e=D.indexOf("\x3d");if(0<e&&(D=D.substring(0,e),"_dj"!=D.substr(0,3)))if("src"!=D&&"href"!=
D||!a.getAttribute("_djrealurl")){switch(D){case "style":var g=a.style.cssText.toLowerCase();break;case "class":g=a.className;break;case "width":if("img"===b){(e=/width=(\S+)/i.exec(G))&&(g=e[1]);break}case "height":if("img"===b){(e=/height=(\S+)/i.exec(G))&&(g=e[1]);break}default:g=a.getAttribute(D)}null!=g&&c.push([D,g.toString()])}else c.push([D,a.getAttribute("_djrealurl")])}},this)}c.sort(function(D,e){return D[0]<e[0]?-1:D[0]==e[0]?0:1});for(h=0;n=c[h++];)f.push(" ",n[0],'\x3d"',"string"===
typeof n[1]?t(n[1],!0):n[1],'"');switch(b){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":f.push(" /\x3e");break;case "script":f.push("\x3e",a.innerHTML,"\x3c/",b,"\x3e");break;default:f.push("\x3e"),a.hasChildNodes()&&K.getChildrenHtmlHelper(a,f),f.push("\x3c/",b,"\x3e")}break;case 4:case 3:f.push(t(a.nodeValue,!0));break;case 8:f.push("\x3c!--",t(a.nodeValue,!0),"--\x3e");break;default:f.push("\x3c!-- Element not recognized - Type: ",a.nodeType," Name: ",
a.nodeName,"--\x3e")}};K.getChildrenHtml=function(a){var f=[];K.getChildrenHtmlHelper(a,f);return f.join("")};K.getChildrenHtmlHelper=function(a,f){if(a)for(var b=a.childNodes||a,c=!y("ie")||b!==a,h,n=0;h=b[n++];)c&&h.parentNode!=a||K.getNodeHtmlHelper(h,f)};return K})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(F,J,y,K,t,a){var f=null,b=F([y,
t],{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=this._getWhiteList();this.sanitizer=new a({whiteList:this.whiteList,safeAttrValue:K.hitch(this,function(c,h,n,p){return"style"===h?this.xss.friendlyAttrValue(n).replace(/"/g,"'"):"img"===c&&"src"===h?this.xss.escapeAttrValue(n):this.xss.safeAttrValue(c,h,n,p)}),onTag:K.hitch(this,function(c,h,n){if(n.isWhite&&this._isInWhiteList(c,
this.graphicsWhiteList))return h}),onIgnoreTagAttr:K.hitch(this,function(c,h,n,p){if("data-"===h.substr(0,5))return h+'\x3d"'+this.xss.escapeAttrValue(n)+'"'}),onIgnoreTag:K.hitch(this,function(c,h,n){if("o:"===c.substr(0,2)||"!--[if"===c||"!--[endif]--"===c)return h})},!0);this.xss=this.sanitizer.xss},sanitize:function(c){return this.sanitizer.sanitize(c)},_getWhiteList:function(){var c="title height width class style font-family id align text-align".split(" "),h={div:c,h1:c,h2:c,h3:c,h4:c,h5:c,
h6:c,span:c,p:c,s:c,strong:c,em:c,u:c,ol:c,ul:c,li:c,a:["href","target"].concat(c),img:["src","alt","border"].concat(c),blockquote:c,font:["face","size","color"].concat(c),pre:c,code:c,b:c,i:c,wbr:c,video:"autoplay controls loop muted poster preload".split(" ").concat(c),audio:["autoplay","controls","loop","muted","preload"].concat(c),source:["media","src","type"].concat(c),table:["cellpadding","cellspacing","border"].concat(c),tbody:[].concat(c),tr:["valign"].concat(c),td:["valign","colspan","rowspan",
"nowrap"].concat(c),th:["valign","colspan","rowspan","nowrap"].concat(c),hr:c,html:c,title:c,link:["rel","href"],style:["type"].concat(c),body:c};this.graphicsWhiteList={animate:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],
feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],
use:[],view:[],object:[],canvas:c};return this._extendObjectOfArrays([h,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size",
"face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],
ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(c){var h={};J.forEach(c,function(n){var p=Object.keys(n);J.forEach(p,function(v){Array.isArray(n[v])&&Array.isArray(h[v])?h[v]=h[v].concat(n[v]):h[v]=n[v]},this)},this);return h},_isInWhiteList:function(c,h){h=Object.keys(h);var n=!1;J.forEach(h,function(p){c===p&&(n=!0)},this);return n}});b.getInstance=function(){null===f&&(f=new b);return f};return b})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v){var G=y("dijit._editor.plugins.LinkDialog",n,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:p,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=a.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(e){F("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),a.hitch(this,function(g,x,B){var d=this;this.tag="insertImage"==this.command?"img":"a";g=a.delegate(g.getLocalization("dijit","common",this.lang),g.getLocalization("dijit._editor",
"LinkDialog",this.lang));var m=this.dropDown=this.button.dropDown=new x({title:g[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:a.hitch(this,"setValue"),onOpen:function(){d._onOpenDialog();x.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(a.hitch(d,"_onCloseDialog"),0)}});g.urlRegExp=this.urlRegExp;g.id=B.getUniqueId(this.editor.id);this._uniqueId=g.id;this._setContent(m.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
h.substitute(this.linkDialogTemplate,g));m.startup();this._urlInput=B.byId(this._uniqueId+"_urlInput");this._textInput=B.byId(this._uniqueId+"_textInput");this._setButton=B.byId(this._uniqueId+"_setButton");this.own(B.byId(this._uniqueId+"_cancelButton").on("click",a.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",a.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",a.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=a.hitch(this,function(){var u=this._urlInput.get("value");return this._urlRegExp.test(u)||this._emailRegExp.test(u)});this.own(f(m.domNode,"keydown",a.hitch(this,a.hitch(this,function(u){!u||u.keyCode!=t.ENTER||u.shiftKey||u.metaKey||u.ctrlKey||u.altKey||this._setButton.get("disabled")||(m.onExecute(),m.execute(m.get("value")))}))));e()}))},_checkAndFixInput:function(){var e=this,g=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var x=g,B=!1,d=!1;x&&1<x.length&&(x=a.trim(x),0!==x.indexOf("mailto:")&&(0<x.indexOf("/")?-1===x.indexOf("://")&&"/"!==x.charAt(0)&&x.indexOf("./")&&0!==x.indexOf("../")&&e._hostRxp.test(x)&&(B=!0):e._userAtRxp.test(x)&&(d=!0)));B&&e._urlInput.set("value","http://"+x);d&&e._urlInput.set("value","mailto:"+x);e._setButton.set("disabled",!e._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(a.hitch(this,
function(){this.own(f(this.editor.editNode,"mouseup",a.hitch(this,"_onMouseUp")));this.own(f(this.editor.editNode,"dblclick",a.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(e){this.dropDown.set({parserScope:"dojo",content:e})},_checkValues:function(e){e&&e.urlInput&&(e.urlInput=e.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&e&&e.textInput&&("function"===typeof this.linkFilter?e.textInput=this.linkFilter(e.textInput):
J.forEach(this.linkFilter,function(g){e.textInput=e.textInput.replace(g[0],g[1])}));return e},_createlinkEnabledImpl:function(){return!0},setValue:function(e){this._onCloseDialog();if(9>b("ie")){var g=v.getSelection(this.editor.window).getRangeAt(0).endContainer;3===g.nodeType&&(g=g.parentNode);g&&g.nodeName&&g.nodeName.toLowerCase()!==this.tag&&(g=this.editor.selection.getSelectedElement(this.tag));g&&g.nodeName&&g.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(g),
this.editor.execCommand("unlink"))}e=this._checkValues(e);this.editor.execCommand("inserthtml",h.substitute(this.htmlTemplate,e));c("a",this.editor.document).forEach(function(x){x.innerHTML||K.has(x,"name")||x.parentNode.removeChild(x)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(e){if(e&&e.tagName.toLowerCase()===this.tag){var g=e.getAttribute("_djrealurl")||e.getAttribute("href");var x=e.getAttribute("target")||"_self";var B=e.textContent||
e.innerText;this.editor.selection.selectElement(e,!0)}else B=this.editor.selection.getSelectedText();return{urlInput:g||"",textInput:B||"",targetSelect:x||""}},_onOpenDialog:function(){if(b("ie")){var e=v.getSelection(this.editor.window);if(e.rangeCount){var g=e.getRangeAt(0);var x=g.endContainer;3===x.nodeType&&(x=x.parentNode);x&&x.nodeName&&x.nodeName.toLowerCase()!==this.tag&&(x=this.editor.selection.getSelectedElement(this.tag));if(!x||x.nodeName&&x.nodeName.toLowerCase()!==this.tag)(e=this.editor.selection.getAncestorElement(this.tag))&&
e.nodeName&&e.nodeName.toLowerCase()==this.tag?(x=e,this.editor.selection.selectElement(x)):g.startContainer===g.endContainer&&(e=g.startContainer.firstChild)&&e.nodeName&&e.nodeName.toLowerCase()==this.tag&&(x=e,this.editor.selection.selectElement(x))}}else x=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(x))},_onDblClick:function(e){if(e&&e.target&&(e=e.target,(e.tagName?e.tagName.toLowerCase():
"")===this.tag&&K.get(e,"href"))){var g=this.editor;this.editor.selection.selectElement(e);g.onDisplayChanged();g._updateTimer&&(g._updateTimer.remove(),delete g._updateTimer);g.onNormalizedDisplayChanged();var x=this.button;setTimeout(function(){x.set("disabled",!1);x.loadAndOpenDropDown().then(function(){x.dropDown.focus&&x.dropDown.focus()})},10)}},_onMouseUp:function(){if(b("ff")){var e=this.editor.selection.getAncestorElement(this.tag);if(e){var g=v.getSelection(this.editor.window).getRangeAt(0);
if(g.collapsed&&e.childNodes.length){var x=g.cloneRange();x.selectNodeContents(e.childNodes[e.childNodes.length-1]);x.setStart(e.childNodes[0],0);1!==g.compareBoundaryPoints(x.START_TO_START,x)?g.setStartBefore(e):-1!==g.compareBoundaryPoints(x.END_TO_START,x)&&g.setStartAfter(e)}}}}}),D=y("dijit._editor.plugins.ImgLinkDialog",[G],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(e){if(e&&e.tagName.toLowerCase()===this.tag){var g=e.getAttribute("_djrealurl")||e.getAttribute("src");var x=e.getAttribute("alt");this.editor.selection.selectElement(e,!0)}else x=this.editor.selection.getSelectedText();return{urlInput:g||"",textInput:x||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(a.hitch(this,function(){this.own(f(this.editor.editNode,"mousedown",a.hitch(this,"_selectTag")))}))},_selectTag:function(e){e&&e.target&&(e=e.target,(e.tagName?e.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(e))},_checkValues:function(e){e&&e.urlInput&&(e.urlInput=e.urlInput.replace(/"/g,"\x26quot;"));e&&e.textInput&&(e.textInput=e.textInput.replace(/"/g,"\x26quot;"));return e},_onDblClick:function(e){if(e&&e.target&&(e=e.target,(e.tagName?
e.tagName.toLowerCase():"")===this.tag&&K.get(e,"src"))){var g=this.editor;this.editor.selection.selectElement(e);g.onDisplayChanged();g._updateTimer&&(g._updateTimer.remove(),delete g._updateTimer);g.onNormalizedDisplayChanged();var x=this.button;setTimeout(function(){x.set("disabled",!1);x.loadAndOpenDropDown().then(function(){x.dropDown.focus&&x.dropDown.focus()})},10)}}});n.registry.createLink=function(e){var g={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in e?e.allowUnsafeHtml:!1};
"linkFilter"in e&&(g.linkFilter=e.linkFilter);return new G(g)};n.registry.insertImage=function(){return new D({command:"insertImage"})};G.ImgLinkDialog=D;return G})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x){var B=y("dijit._editor.plugins.ViewSource",D,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){p("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var d=b.getLocalization("dijit._editor","commands"),m=this.editor;this.button=new e({label:d.viewSource,ownerDocument:m.ownerDocument,dir:m.dir,lang:m.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:h.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(d){this.editor=d;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=J.before(this.editor,"setValue",h.hitch(this,function(m){return[this._filter(m)]}));this._getValueFilterHandle=J.after(this.editor,"getValue",h.hitch(this,function(m){return this._filter(m)}));this.editor.addKeyHandler(c.F12,!0,!0,h.hitch(this,function(m){this.button.focus();
this.toggle();m.stopPropagation();m.preventDefault();setTimeout(h.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(d){var m=this.editor,u=m._plugins;this._sourceShown=d;var C=this;try{this.sourceArea||this._createSourceView();if(d)m._sourceQueryCommandEnabled=m.queryCommandEnabled,m.queryCommandEnabled=function(M){return"viewsource"===M.toLowerCase()},this.editor.onDisplayChanged(),F.forEach(u,function(M){!M||M instanceof B||!M.isInstanceOf(D)||M.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return C.sourceArea}),this.sourceArea.value=m.get("value"),this.sourceArea.style.height=m.iframe.style.height,this.sourceArea.style.width=m.iframe.style.width,m.iframe.parentNode.style.position="relative",f.set(m.iframe,{position:"absolute",top:0,visibility:"hidden"}),f.set(this.sourceArea,{display:"block"}),this._resizeHandle=n(window,"resize",h.hitch(this,function(){var M=v.getBox(m.ownerDocument);"_prevW"in this&&"_prevH"in this&&
M.w===this._prevW&&M.h===this._prevH||(this._prevW=M.w,this._prevH=M.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(h.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(h.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=h.hitch(this,function(){var M=this.sourceArea.value;return M=this._filter(M)}),this._setListener=J.after(this.editor,
"setValue",h.hitch(this,function(M){this.sourceArea.value=M||""}),!0);else{if(!m._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);m.queryCommandEnabled=m._sourceQueryCommandEnabled;if(!this._readOnly){var O=this.sourceArea.value;m.beginEditing();m.set("value",O);m.endEditing()}F.forEach(u,function(M){M&&
M.isInstanceOf(D)&&M.set("disabled",!1)});f.set(this.sourceArea,"display","none");f.set(m.iframe,{position:"relative",visibility:"visible"});delete m._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(h.hitch(this,function(){var M=m.domNode.parentNode;M&&(M=x.getEnclosingWidget(M))&&M.resize&&M.resize();m.resize()}),300)}catch(M){console.log(M)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var d=this.editor,m=d.getHeaderHeight(),u=
d.getFooterHeight(),C=a.position(d.domNode),O=a.getPadBorderExtents(d.iframe.parentNode),M=a.getMarginExtents(d.iframe.parentNode),S=a.getPadBorderExtents(d.domNode),q=C.w-S.w;C=C.h-(m+S.h+u);this._fsPlugin&&this._fsPlugin.isFullscreen&&(d=v.getBox(d.ownerDocument),q=d.w-S.w,C=d.h-(m+S.h+u));a.setMarginBox(this.sourceArea,{w:Math.round(q-(O.w+M.w)),h:Math.round(C-(O.h+M.h))})},_createSourceView:function(){var d=this.editor,m=d._plugins;this.sourceArea=t.create("textarea");this.readOnly&&(K.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);f.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});K.set(this.sourceArea,"aria-label",this.editor.id);t.place(this.sourceArea,d.iframe,"before");p("ie")&&d.iframe.parentNode.lastChild!==d.iframe&&f.set(d.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});d._viewsource_oldFocus=d.focus;var u=this;d.focus=function(){if(u._sourceShown)u.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,G.focus(d.editNode)):d._viewsource_oldFocus()}catch(M){console.log("ViewSource focus code error: "+M)}};var C,O;for(C=0;C<m.length;C++)if((O=m[C])&&("dijit._editor.plugins.FullScreen"===O.declaredClass||O.declaredClass===g._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=O;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return u._sourceShown?u.sourceArea:this._viewsource_getAltViewNode()});
this.own(n(this.sourceArea,"keydown",h.hitch(this,function(M){this._sourceShown&&M.keyCode==c.F12&&M.ctrlKey&&M.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(h.hitch(this,function(){d.focus()}),100),M.stopPropagation(),M.preventDefault())})))},_stripScripts:function(d){d&&(d=d.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),d=d.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),d=d.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return d},_stripComments:function(d){d&&
(d=d.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return d},_stripIFrames:function(d){d&&(d=d.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return d},_stripEventHandlers:function(d){if(d){var m=d.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(m)for(var u=0,C=m.length;u<C;u++){var O=m[u],M=O.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");d=d.replace(O,M)}}return d},_filter:function(d){d&&(this.stripScripts&&(d=this._stripScripts(d)),this.stripComments&&(d=this._stripComments(d)),
this.stripIFrames&&(d=this._stripIFrames(d)),this.stripEventHandlers&&(d=this._stripEventHandlers(d)));return d},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var d=this.sourceArea;G.focus(d);this._sourceShown&&!this.readOnly&&(d.setSelectionRange?d.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(d=d.createTextRange(),d.collapse(!0),d.moveStart("character",-99999),d.moveStart("character",0),d.moveEnd("character",0),d.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});D.registry.viewSource=D.registry.viewsource=function(d){return new B({readOnly:"readOnly"in
d?d.readOnly:!1,stripComments:"stripComments"in d?d.stripComments:!0,stripScripts:"stripScripts"in d?d.stripScripts:!0,stripIFrames:"stripIFrames"in d?d.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in d?d.stripEventHandlers:!0})};return B})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D){F=y("dijit._editor.plugins._FontDropDown",[h,n,p],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:F,postMixInProperties:function(){this.inherited(arguments);this.strings=t.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=c.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new b({idProperty:"value",data:J.map(this.values,function(d){var m=this.strings[d]||d;return{label:this.getLabel(d,m),name:m,value:d}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(d,m){m=!1!==m;this.select.set("value",0>J.indexOf(this.values,d)?"":d,m);m||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(d){this._set("disabled",d);this.select.set("disabled",d)}});var e=y("dijit._editor.plugins._FontNameDropDown",F,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(d,m){return this.plainText?m:"\x3cdiv style\x3d'font-family: "+d+"'\x3e"+m+"\x3c/div\x3e"},_normalizeFontName:function(d){var m=this.values;if(!d||!m)return d;var u=d.split(",");if(1<u.length)for(var C=0,O=u.length;C<O;C++){var M=f.trim(u[C]);if(-1<J.indexOf(m,M))return M}return d},_setValueAttr:function(d,m){m=!1!==
m;d=this._normalizeFontName(d);this.generic&&(d={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[d]||d);this.inherited(arguments,[d,m])}}),g=y("dijit._editor.plugins._FontSizeDropDown",F,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(d,
m){return this.plainText?m:"\x3cfont size\x3d"+d+"'\x3e"+m+"\x3c/font\x3e"},_setValueAttr:function(d,m){m=!1!==m;d.indexOf&&-1!=d.indexOf("px")&&(d={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(d,10)]||d);this.inherited(arguments,[d,m])}}),x=y("dijit._editor.plugins._FormatBlockDropDown",F,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(d,m){return this.plainText||
"noFormat"==d?m:"\x3c"+d+"\x3e"+m+"\x3c/"+d+"\x3e"},_execCommand:function(d,m,u){if("noFormat"===u){var C;if((m=D.getSelection(d.window))&&0<m.rangeCount&&(u=m.getRangeAt(0),u)){m=u.startContainer;for(C=u.endContainer;m&&m!==d.editNode&&m!==d.document.body&&1!==m.nodeType;)m=m.parentNode;for(;C&&C!==d.editNode&&C!==d.document.body&&1!==C.nodeType;)C=C.parentNode;var O=a.hitch(this,function(k,E){if(k.childNodes&&k.childNodes.length){var N;for(N=0;N<k.childNodes.length;N++){var l=k.childNodes[N];if(1==
l.nodeType&&d.selection.inSelection(l)){var z=l.tagName?l.tagName.toLowerCase():"";-1!==J.indexOf(this.values,z)&&E.push(l);O(l,E)}}}});u=a.hitch(this,function(k){if(k&&k.length){for(d.beginEditing();k.length;)this._removeFormat(d,k.pop());d.endEditing()}});var M=[];if(m==C){for(C=m;C&&C!==d.editNode&&C!==d.document.body;){if(1==C.nodeType){var S=C.tagName?C.tagName.toLowerCase():"";if(-1!==J.indexOf(this.values,S)){var q=C;break}}C=C.parentNode}O(m,M);q&&(M=[q].concat(M))}else for(C=m;d.selection.inSelection(C);)1==
C.nodeType&&(S=C.tagName?C.tagName.toLowerCase():"",-1!==J.indexOf(this.values,S)&&M.push(C),O(C,M)),C=C.nextSibling;u(M);d.onDisplayChanged()}}else d.execCommand(m,u)},_removeFormat:function(d,m){if(d.customUndo){for(;m.firstChild;)K.place(m.firstChild,m,"before");m.parentNode.removeChild(m)}else{d.selection.selectElementChildren(m);var u=d.selection.getSelectedHtml();d.selection.selectElement(m);d.execCommand("inserthtml",u||"")}}}),B=y("dijit._editor.plugins.FontChoice",G,{useDefaultCommand:!1,
_initButton:function(){var d={fontName:e,fontSize:g,formatBlock:x}[this.command],m=this.params;this.params.custom&&(m.values=this.params.custom);var u=this.editor;this.button=new d(a.delegate({dir:u.dir,lang:u.lang},m));this.own(this.button.select.on("change",a.hitch(this,function(C){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=C.indexOf(" ")&&(C="'"+C+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,C):this.editor.execCommand(this.command,
C)})))},updateState:function(){var d=this.editor,m=this.command;if(d&&d.isLoaded&&m.length&&this.button){var u=this.get("disabled");this.button.set("disabled",u);if(!u){try{var C=d.queryCommandValue(m)||""}catch(M){C=""}(u=a.isString(C)&&(C.match(/'([^']*)'/)||C.match(/"([^"]*)"/)))&&(C=u[1]);"fontSize"!==m||C||(C=3);if("formatBlock"===m)if(C&&"p"!=C)0>J.indexOf(this.button.values,C)&&(C="noFormat");else{C=null;if((m=D.getSelection(this.editor.window))&&0<m.rangeCount&&(m=m.getRangeAt(0)))var O=m.endContainer;
for(;O&&O!==d.editNode&&O!==d.document;){if((m=O.tagName?O.tagName.toLowerCase():"")&&-1<J.indexOf(this.button.values,m)){C=m;break}O=O.parentNode}C||(C="noFormat")}C!==this.button.get("value")&&this.button.set("value",C,!1)}}}});J.forEach(["fontName","fontSize","formatBlock"],function(d){G.registry[d]=function(m){return new B({command:d,plainText:m.plainText})}});B._FontDropDown=F;B._FontNameDropDown=e;B._FontSizeDropDown=g;B._FormatBlockDropDown=x;return B})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(F,J,y,K){var t=F.declare("dojox.editor.plugins.Preview",K,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=F.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new J.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:F.hitch(this,"_preview")})},setEditor:function(a){this.editor=a;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var a=this.editor.get("value"),f="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",b;if(this.stylesheets)for(b=0;b<this.stylesheets.length;b++)f+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[b]+"'\x3e\n";this.styles&&(f+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");a="\x3chtml\x3e\n\t\x3chead\x3e\n"+f+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
a+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var c=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");c.document.open();c.document.write(a);c.document.close()}catch(h){console.warn(h)}}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"preview"!==a.args.name.toLowerCase()||(a.plugin=new t({styles:"styles"in a.args?a.args.styles:"",stylesheets:"stylesheets"in a.args?a.args.stylesheets:null}))});return t})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(F,J,y,K,t,a){var f=y("dijit._editor.plugins.TextColor",t,{buttonClass:a,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var b=this;this.button.loadDropDown=function(c){function h(n){b.button.dropDown=new n({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,value:b.value,onChange:function(p){b.editor.execCommand(b.command,p)},onExecute:function(){b.editor.execCommand(b.command,this.get("value"))}});c()}"string"==
typeof b.colorPicker?F([b.colorPicker],h):h(b.colorPicker)}},updateState:function(){var b=this.editor,c=this.command;if(b&&b.isLoaded&&c.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var n=b.queryCommandValue(c)||""}catch(p){n=""}}""==n&&(n="#000000");"transparent"==n&&(n="#ffffff");"string"==typeof n?-1<n.indexOf("rgb")&&(n=J.fromRgb(n).toHex()):(n=((n&255)<<16|n&65280|(n&16711680)>>>16).toString(16),n="#000000".slice(0,7-n.length)+n);this.value=
n;(b=this.button.dropDown)&&b.get&&n!==b.get("value")&&b.set("value",n,!1)}}});t.registry.foreColor=function(b){return new f(b)};t.registry.hiliteColor=function(b){return new f(b)};return f})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(F,J,y,K,t,a,f){var b=f("dojox.editor.plugins.ToolbarLineBreak",[K,t],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){F.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin){var h=c.args.name.toLowerCase();if("||"===h||"toolbarlinebreak"===h)c.plugin=new a({button:new b,setEditor:function(n){this.editor=n}})}});return b})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D){F.experimental("dojox.editor.plugins.FindReplace");var e=F.declare("dojox.editor.plugins._FindReplaceCloseBox",[a,f,c],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=J.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),g=F.declare("dojox.editor.plugins._FindReplaceTextBox",[a,f,c],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=J.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");F.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(m){this.value=m;this.textBox.set("value",m)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(m){this.disabled=m;this.textBox.set("disabled",
m)},onChange:function(m){this.value=m},_onKeyPress:function(m){var u=0,C=0;!m.target||m.ctrlKey||m.altKey||m.shiftKey||(m.keyCode==F.keys.LEFT_ARROW?(u=m.target.selectionStart,C=m.target.selectionEnd,u<C&&(J.selectInputText(m.target,u,u),F.stopEvent(m))):m.keyCode==F.keys.RIGHT_ARROW&&(u=m.target.selectionStart,C=m.target.selectionEnd,u<C&&(J.selectInputText(m.target,C,C),F.stopEvent(m))))}}),x=F.declare("dojox.editor.plugins._FindReplaceCheckBox",[a,f,c],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=J.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(m){this.checkBox.set("value",m)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(m){this.disabled=m;this.checkBox.set("disabled",m)}}),B=F.declare("dojox.editor.plugins._FindReplaceToolbar",n,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");F.addClass(this.domNode,"dijitToolbar")},addChild:function(m,u){J._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(m){m.stopPropagation()}}),d=F.declare("dojox.editor.plugins.FindReplace",[D],{buttonClass:J.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=F.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new J.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:F.hitch(this,
"_toggleFindReplace")});F.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",F.hitch(this,function(m,u){"disabled"===m&&this._toggleFindReplace(!u&&this._displayed,!0,!0)}))},setEditor:function(m){this.editor=m;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(m,u,C){var O=F.marginBox(this.editor.domNode);m&&!F.isOpera?(F.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),u||(this._displayed=
!0)):(F.style(this._frToolbar.domNode,"display","none"),u||(this._displayed=!1),C||this.editor.focus());this.editor.resize({h:O.h})},_populateFindField:function(){var m=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(m&&this._findField.textBox.set("value",m),this._findField.textBox.focus(),J.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(m){this.inherited(arguments);if(!F.isOpera){var u=this._frToolbar=new B;F.style(u.domNode,"display",
"none");F.place(u.domNode,m.domNode,"after");u.startup();this._closeBox=new e;u.addChild(this._closeBox);this._findField=new g({label:this._strings.findLabel,tooltip:this._strings.findTooltip});u.addChild(this._findField);this._replaceField=new g({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});u.addChild(this._replaceField);u.addChild(new y.editor.plugins.ToolbarLineBreak);this._findButton=new J.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;u.addChild(this._findButton);this._replaceButton=new J.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;u.addChild(this._replaceButton);this._replaceAllButton=new J.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;u.addChild(this._replaceAllButton);this._caseSensitive=new x({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});u.addChild(this._caseSensitive);this._backwards=new x({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});u.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new J.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(m){m.keyCode==F.keys.ENTER&&(this._find(),F.stopEvent(m))},_onReplaceKeyDown:function(m){m.keyCode==F.keys.ENTER&&(this._replace()||this._replace(),F.stopEvent(m))},_find:function(m){var u=this._findField.get("value")||"";if(u){var C=this._caseSensitive.get("value"),
O=this._backwards.get("value");u=this._findText(u,C,O);!u&&m&&(this._promDialog.set("content",F.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),J.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(F.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;J.popup.close(this._promDialog)}),3E3),setTimeout(F.hitch(this,function(){this.editor.focus()}),0));return u}return!1},_replace:function(m){var u=
!1,C=this.editor;C.focus();var O=this._findField.get("value")||"",M=this._replaceField.get("value")||"";if(O){var S=this._caseSensitive.get("value"),q=this._backwards.get("value"),k=C._sCall("getSelectedText",[null]);F.isMoz&&(O=F.trim(O),k=F.trim(k));O=this._filterRegexp(O,!S);k&&O.test(k)&&(C.execCommand("inserthtml",M),u=!0,q&&(this._findText(M,S,q),C._sCall("collapse",[!0])));!this._find(!1)&&m&&(this._promDialog.set("content",F.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
J.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(F.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;J.popup.close(this._promDialog)}),3E3),setTimeout(F.hitch(this,function(){this.editor.focus()}),0));return u}return null},_replaceAll:function(m){var u=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&u++;var C=F.hitch(this,function(){this._replace(!1)?
(u++,setTimeout(C,10)):m&&(this._promDialog.set("content",F.string.substitute(this._strings.replaceDialogText,{0:""+u})),J.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(F.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;J.popup.close(this._promDialog)}),3E3),setTimeout(F.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});C()},_findText:function(m,u,
C){var O=this.editor,M=O.window,S=!1;if(m)if(M.find)S=M.find(m,u,C,!1,!1,!1,!1);else{var q=O.document;if(q.selection||M.getSelection)if(this.editor.focus(),O=q.body.createTextRange(),S=O.duplicate(),M.getSelection().getRangeAt(0),(q=q.selection?q.selection.createRange():null)?C?O.setEndPoint("EndToStart",q):O.setEndPoint("StartToEnd",q):this._bookmark&&(M=M.getSelection().toString(),O.moveToBookmark(this._bookmark),O.text!=M?(O=S.duplicate(),this._bookmark=null):(C?S.setEndPoint("EndToStart",O):S.setEndPoint("StartToEnd",
O),O=S.duplicate())),u=u?4:0,C&&(u|=1),S=O.findText(m,O.text.length,u))O.select(),this._bookmark=O.getBookmark()}return S},_filterRegexp:function(m,u){for(var C="",O=null,M=0;M<m.length;M++)switch(O=m.charAt(M),O){case "\\":C+=O;M++;C+=m.charAt(M);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":C+="\\";default:C+=O}C="^"+C+"$";return u?new RegExp(C,"mi"):new RegExp(C,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,J.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});d._FindReplaceCloseBox=e;d._FindReplaceTextBox=g;d._FindReplaceCheckBox=x;d._FindReplaceToolbar=B;F.subscribe(J._scopeName+".Editor.getPlugin",null,function(m){m.plugin||"findreplace"!==
m.args.name.toLowerCase()||(m.plugin=new d({}))});return d})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(F,J,y,K){var t=F.declare("dojox.editor.plugins.PasteFromWord",
K,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var a=F.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");F.mixin(a,F.i18n.getLocalization("dijit","common"));F.mixin(a,F.i18n.getLocalization("dijit._editor","commands"));this.button=new J.form.Button({label:a.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:F.hitch(this,"_openDialog")});this._uId=J.getUniqueId(this.editor.id);a.uId=this._uId;a.width=this.width||"400px";a.height=this.height||"300px";this._dialog=(new J.Dialog({title:a.pasteFromWord})).placeAt(F.body());this._dialog.set("content",F.string.substitute(this._template,a));F.style(F.byId(this._uId+"_rte"),"opacity",.001);this.connect(J.byId(this._uId+"_paste"),"onClick","_paste");this.connect(J.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(F.hitch(this,function(){this._rte=new J._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(F.hitch(this,function(){F.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var a=y.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var f;for(f=0;f<this._filters.length;f++){var b=this._filters[f];a=a.replace(b.regexp,b.handler)}a=y.html.format.prettyPrint(a);this.editor.focus();this.editor.execCommand("inserthtml",a)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"pastefromword"!==a.args.name.toLowerCase()||(a.plugin=new t({width:"width"in a.args?a.args.width:"400px",height:"height"in a.args?a.args.width:"300px"}))});return t})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(F,J,y,K,t){var a=F.getObject("dojox.html.format",!0);a.prettyPrint=
function(f,b,c,h,n){var p=[],v=0,G=[],D="\t",e="",g=[],x,B=/[=]([^"']+?)(\s|>)/g,d=/style=("[^"]*"|'[^']*'|\S*)/gi,m=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(b&&0<b&&10>b)for(D="",x=0;x<b;x++)D+=" ";b=K.doc.createElement("div");b.innerHTML=f;var u=J.encode,C=J.decode,O=b.ownerDocument.createElement("div"),M=function(z){z=z.cloneNode(!1);O.appendChild(z);z=O.innerHTML;O.innerHTML="";return z},S=function(){var z;for(z=0;z<v;z++)p.push(D)},q=function(){p.push("\n")},k=function(z){var L;z=z.split("\n");for(L=
0;L<z.length;L++)z[L]=F.trim(z[L]);z=z.join(" ");z=F.trim(z);if(""!==z){var R=[];if(c&&0<c){var Q="";for(L=0;L<v;L++)Q+=D;L=Q.length;Q=c;for(c>L&&(Q-=L);z;)if(z.length>c){for(L=Q;0<L&&" "!==z.charAt(L);L--);if(!L)for(L=Q;L<z.length&&" "!==z.charAt(L);L++);var V=z.substring(0,L);V=F.trim(V);z=F.trim(z.substring(L==z.length?z.length:L+1,z.length));if(V){var W="";for(L=0;L<v;L++)W+=D;V=W+V+"\n"}R.push(V)}else{W="";for(L=0;L<v;L++)W+=D;z=W+z+"\n";R.push(z);z=null}return R.join("")}W="";for(L=0;L<v;L++)W+=
D;return W+z+"\n"}return""},E=function(z){if(z){var L=z;L&&(L=L.replace(/&quot;/gi,'"'),L=L.replace(/&gt;/gi,"\x3e"),L=L.replace(/&lt;/gi,"\x3c"),L=L.replace(/&amp;/gi,"\x26"));var R;z=0;var Q=L.split("\n"),V=[];for(L=0;L<Q.length;L++){var W=Q[L],Y=-1<W.indexOf("\n");if(W=F.trim(W)){Y=z;for(R=0;R<W.length;R++){var I=W.charAt(R);"{"===I?z++:"}"===I&&(z--,Y=z)}I="";for(R=0;R<v+Y;R++)I+=D;V.push(I+W+"\n")}else Y&&0===L&&V.push("\n")}z=V.join("")}return z},N=function(z){var L=z.nodeName.toLowerCase(),
R=F.trim(M(z));z=R.substring(0,R.indexOf("\x3e")+1);z=z.replace(B,'\x3d"$1"$2');z=z.replace(d,function(V){var W=V.substring(0,6);V=V.substring(6,V.length);var Y=V.charAt(0);V=F.trim(V.substring(1,V.length-1));V=V.split(";");var I=[];y.forEach(V,function(X){if(X=F.trim(X))X=X.substring(0,X.indexOf(":")).toLowerCase()+X.substring(X.indexOf(":"),X.length),I.push(X)});I=I.sort();V=I.join("; ");var P=F.trim(V);return P&&";"!==P?W+Y+(V+";")+Y:""});var Q=[];z=z.replace(m,function(V){Q.push(F.trim(V));return""});
Q=Q.sort();z="\x3c"+L;Q.length&&(z+=" "+Q.join(" "));-1!=R.indexOf("\x3c/")?(G.push(L),z+="\x3e"):(z=n?z+" /\x3e":z+"\x3e",G.push(!1));a:switch(L){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":L=!0;break a;default:L=!1}g.push(L);e&&!L&&(p.push(k(e)),e="");L?e+=z:(S(),p.push(z),q(),v++)},l=function(z){var L=z.childNodes;if(L){var R;for(R=0;R<L.length;R++){var Q=L[R];if(1===
Q.nodeType){var V=F.trim(Q.tagName.toLowerCase());t("ie")&&Q.parentNode!=z||V&&"/"===V.charAt(0)||(N(Q),"script"===V?p.push(E(Q.innerHTML)):"pre"===V?(Q=Q.innerHTML,t("mozilla")&&(Q=Q.replace("\x3cbr\x3e","\n"),Q=Q.replace("\x3cpre\x3e",""),Q=Q.replace("\x3c/pre\x3e","")),"\n"!==Q.charAt(Q.length-1)&&(Q+="\n"),p.push(Q)):l(Q),Q=g.pop(),e&&!Q&&(p.push(k(e)),e=""),(V=G.pop())?(V="\x3c/"+V+"\x3e",Q?e+=V:(v--,S(),p.push(V),q())):v--)}else 3===Q.nodeType||4===Q.nodeType?e+=u(Q.nodeValue,h):8===Q.nodeType&&
(Q=C(Q.nodeValue,h),S(),p.push("\x3c!--"),q(),v++,p.push(k(Q)),v--,S(),p.push("--\x3e"),q())}}};l(b);e&&(p.push(k(e)),e="");return p.join("")};return a})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(F,J,y,K){var t=F.declare("dojox.editor.plugins.InsertAnchor",K,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var a=this,f=F.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),b=this.dropDown=new J.TooltipDialog({title:f.title,execute:F.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();J.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(F.hitch(a,"_onCloseDialog"),0)}});this.button=new J.form.DropDownButton({label:f.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});f.id=J.getUniqueId(this.editor.id);this._uniqueId=f.id;this.dropDown.set("content",b.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+F.string.substitute(this._template,f));b.startup();this._anchorInput=J.byId(this._uniqueId+"_anchorInput");this._textInput=J.byId(this._uniqueId+"_textInput");this._setButton=J.byId(this._uniqueId+"_setButton");this.connect(J.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(F.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(F.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_checkInput:function(){var a=!0;this._anchorInput.isValid()&&
(a=!1);this._setButton.set("disabled",a)},_setup:function(){this.editor.onLoadDeferred.addCallback(F.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(F.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var a=F.moduleUrl(y._scopeName,"editor/plugins/resources").toString();if(!a.match(/^https?:\/\//i)&&!a.match(/^file:\/\//i)){var f="/"===a.charAt(0)?F.doc.location.protocol+"//"+F.doc.location.host:this._calcBaseUrl(F.global.location.href);
"/"!==f[f.length-1]&&"/"!==a.charAt(0)&&(f+="/");a=f+a}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,a)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var a=this.editor.document,f=this.getAnchorStyle();if(F.isIE)a.createStyleSheet("").cssText=
f;else{var b=a.createElement("style");b.appendChild(a.createTextNode(f));a.getElementsByTagName("head")[0].appendChild(b)}}catch(c){}},_calcBaseUrl:function(a){var f=null;null!==a&&(f=a.indexOf("?"),-1!=f&&(a=a.substring(0,f)),f=a.lastIndexOf("/"),f=0<f&&f<a.length?a.substring(0,f):a);return f},_checkValues:function(a){a&&(a.anchorInput&&(a.anchorInput=a.anchorInput.replace(/"/g,"\x26quot;")),a.textInput||(a.textInput="\x26nbsp;"));return a},setValue:function(a){this._onCloseDialog();if(!this.editor.window.getSelection){var f=
J.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===f.nodeType&&(f=f.parentNode);f&&f.nodeName&&"a"!==f.nodeName.toLowerCase()&&(f=this.editor._sCall("getSelectedElement",["a"]));f&&f.nodeName&&"a"===f.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[f]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",F.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){if(a&&"a"===a.tagName.toLowerCase()&&F.attr(a,"name")){var f=F.attr(a,"name");var b=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,!0])}else b=this.editor._sCall("getSelectedText");return{anchorInput:f||"",textInput:b||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var a=this.editor._sCall("getAncestorElement",["a"]);else a=J.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===a.nodeType&&(a=a.parentNode),a&&a.nodeName&&
"a"!==a.nodeName.toLowerCase()&&(a=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){a&&a.target&&(a=a.target,"a"===(a.tagName?a.tagName.toLowerCase():"")&&F.attr(a,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[a]),setTimeout(F.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(a){F.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(a){a&&F.query("a[name]:not([href])",a).removeClass("dijitEditorPluginInsertAnchorStyle");return a}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var f=a.args.name;f&&(f=f.toLowerCase());"insertanchor"===f&&(a.plugin=new t)}});return t})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(F,J,y,K){var t=F.declare("dojox.editor.plugins.Blockquote",K,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=F.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new J.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:F.hitch(this,"_toggleQuote")})},setEditor:function(a){this.editor=a;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");a.customUndo=!0},_toggleQuote:function(a){try{var f=this.editor;f.focus();var b=this.button.get("checked"),c=J.range.getSelection(f.window),h,n,p,v;c&&0<c.rangeCount&&(h=c.getRangeAt(0));if(h){f.beginEditing();if(b)if(h.startContainer===h.endContainer){if(this._isRootInline(h.startContainer)){for(p=h.startContainer;p&&p.parentNode!==f.editNode;)p=p.parentNode;for(;p&&p.previousSibling&&(this._isTextElement(p)||1===p.nodeType&&this._isInlineFormat(this._getTagName(p)));)p=
p.previousSibling;p&&1===p.nodeType&&!this._isInlineFormat(this._getTagName(p))&&(p=p.nextSibling);if(p){var G=f.document.createElement("blockquote");F.place(G,p,"after");G.appendChild(p);for(v=G.nextSibling;v&&(this._isTextElement(v)||1===v.nodeType&&this._isInlineFormat(this._getTagName(v)));)G.appendChild(v),v=G.nextSibling}}else{for(var D=h.startContainer;(this._isTextElement(D)||this._isInlineFormat(this._getTagName(D))||"li"===this._getTagName(D))&&D!==f.editNode&&D!==f.document.body;)D=D.parentNode;
D!==f.editNode&&D!==D.ownerDocument.documentElement&&(G=f.document.createElement("blockquote"),F.place(G,D,"after"),G.appendChild(D))}G&&(f._sCall("selectElementChildren",[G]),f._sCall("collapse",[!0]))}else{var e;p=h.startContainer;for(v=h.endContainer;p&&this._isTextElement(p)&&p.parentNode!==f.editNode;)p=p.parentNode;for(e=p;e.nextSibling&&f._sCall("inSelection",[e]);)e=e.nextSibling;v=e;if(v===f.editNode||v===f.document.body){G=f.document.createElement("blockquote");F.place(G,p,"after");var g=
this._getTagName(p);if(this._isTextElement(p)||this._isInlineFormat(g))for(f=p;f&&(this._isTextElement(f)||1===f.nodeType&&this._isInlineFormat(this._getTagName(f)));)G.appendChild(f),f=G.nextSibling;else G.appendChild(p);return}v=v.nextSibling;for(e=p;e&&e!==v;){if(1===e.nodeType){if(g=this._getTagName(e),"br"!==g){if(!window.getSelection&&"p"===g&&this._isEmpty(e)){e=e.nextSibling;continue}this._isInlineFormat(g)?G||(G=f.document.createElement("blockquote"),F.place(G,e,"after")):(G&&this._isEmpty(G)&&
G.parentNode.removeChild(G),G=f.document.createElement("blockquote"),F.place(G,e,"after"));G.appendChild(e);e=G}}else this._isTextElement(e)&&(G||(G=f.document.createElement("blockquote"),F.place(G,e,"after")),G.appendChild(e),e=G);e=e.nextSibling}G&&(this._isEmpty(G)?G.parentNode.removeChild(G):(f._sCall("selectElementChildren",[G]),f._sCall("collapse",[!0])),G=null)}else if(G=!1,h.startContainer===h.endContainer){for(n=h.endContainer;n&&n!==f.editNode&&n!==f.document.body;){if("blockquote"===(n.tagName?
n.tagName.toLowerCase():"")){G=!0;break}n=n.parentNode}if(G){for(var x;n.firstChild;)x=n.firstChild,F.place(x,n,"before");n.parentNode.removeChild(n);x&&(f._sCall("selectElementChildren",[x]),f._sCall("collapse",[!0]))}}else{p=h.startContainer;for(v=h.endContainer;p&&this._isTextElement(p)&&p.parentNode!==f.editNode;)p=p.parentNode;for(h=[];p&&p.nextSibling&&f._sCall("inSelection",[p]);)p.parentNode&&"blockquote"===this._getTagName(p.parentNode)&&(p=p.parentNode),h.push(p),p=p.nextSibling;for(var B=
this._findBlockQuotes(h);B.length;){var d=B.pop();if(d.parentNode){for(;d.firstChild;)F.place(d.firstChild,d,"before");d.parentNode.removeChild(d)}}}f.endEditing()}f.onNormalizedDisplayChanged()}catch(m){}},updateState:function(){var a=this.editor,f=this.get("disabled");if(a&&a.isLoaded&&this.button&&(this.button.set("disabled",f),!f)){f=!1;var b=J.range.getSelection(a.window);if(b&&0<b.rangeCount&&(b=b.getRangeAt(0)))var c=b.endContainer;for(;c&&c!==a.editNode&&c!==a.document;){if("blockquote"===
(c.tagName?c.tagName.toLowerCase():"")){f=!0;break}c=c.parentNode}this.button.set("checked",f)}},_findBlockQuotes:function(a){var f=[];if(a){var b;for(b=0;b<a.length;b++){var c=a[b];1===c.nodeType&&("blockquote"===this._getTagName(c)&&f.push(c),c.childNodes&&0<c.childNodes.length&&(f=f.concat(this._findBlockQuotes(c.childNodes))))}}return f},_getTagName:function(a){var f="";a&&1===a.nodeType&&(f=a.tagName?a.tagName.toLowerCase():"");return f},_isRootInline:function(a){var f=this.editor;if(this._isTextElement(a)&&
a.parentNode===f.editNode||1===a.nodeType&&this._isInlineFormat(a)&&a.parentNode===f.editNode)return!0;if(this._isTextElement(a)&&this._isInlineFormat(this._getTagName(a.parentNode))){for(a=a.parentNode;a&&a!==f.editNode&&this._isInlineFormat(this._getTagName(a));)a=a.parentNode;if(a===f.editNode)return!0}return!1},_isTextElement:function(a){return a&&3===a.nodeType||4===a.nodeType?!0:!1},_isEmpty:function(a){if(a.childNodes){var f=!0,b;for(b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(1===
c.nodeType){if("p"!==this._getTagName(c)||F.trim(c.innerHTML)){f=!1;break}}else if(this._isTextElement(c)){if((c=F.trim(c.nodeValue))&&"\x26nbsp;"!==c&&"\u00a0"!==c){f=!1;break}}else{f=!1;break}}return f}return!0},_isInlineFormat:function(a){switch(a){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});F.subscribe(J._scopeName+".Editor.getPlugin",
null,function(a){a.plugin||"blockquote"!==a.args.name.toLowerCase()||(a.plugin=new t({}))});return t})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(F,J,y,K){F.experimental("dojox.editor.plugins.UploadImage");var t=F.declare("dojox.editor.plugins.UploadImage",K,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var a=F.create("span",{innerHTML:"."},document.body);F.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new y.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a,f,b){a=a[0];f=F.byId(this.currentImageId,this.editor.document);b=this.downloadPath?this.downloadPath+a.name:a.file;
f.src=b;F.attr(f,"_djrealurl",b);a.width&&(f.width=a.width,f.height=a.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new t({url:a.args.url})}});return t})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S){F.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return J("dojox.form.FileUploader",[m,u,C],{swfPath:e.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(O.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var q="createFlashUploader";else this.uploaderType="html",q="createHtmlUploader";this[q]();this.fileListId&&this.connect(c.byId(this.fileListId),"click",function(k){k=k.target.parentNode.parentNode.parentNode;k.id&&-1<k.id.indexOf("file_")&&
this.removeFile(k.id.split("file_")[1])});d.addOnUnload(this,this.destroy)},getHiddenNode:function(q){if(!q)return null;var k=null;for(q=q.parentNode;q&&"body"!=q.tagName.toLowerCase();){if("none"==h.get(q,"display")){k=q;break}q=q.parentNode}return k},getButtonStyle:function(){var q=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(q))&&h.set(this._hiddenNode,"display","block");if(!q&&this.button&&this.button.domNode){var k=!0;q=this.button.domNode.className+" dijitButtonNode";var E=this.getText(b(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=q=G.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+q+'"\x3e'+E+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(q=this.button);p.get(q,"class")&&(this.baseClass+=" "+p.get(q,"class"));p.set(q,"class",this.baseClass);this.norm=this.getStyle(q);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(q,this.baseClass+" "+this.hoverClass,k),this.down=this.getTempNodeStyle(q,this.baseClass+" "+this.activeClass,k),this.dsbl=this.getTempNodeStyle(q,this.baseClass+" "+this.disabledClass,k),this.fhtml={cn:this.getText(q),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(q),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){h.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&h.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
h.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),h.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):G.destroy(this.progNode);
h.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});v.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&v.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(k){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);a.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var q=t.connect(this,"onReady",this,function(){t.disconnect(q);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&h.set(this._hiddenNode,"display","none")},onChange:function(q){},onProgress:function(q){},onComplete:function(q){},onCancel:function(){},onError:function(q){},onReady:function(q){},onLoad:function(q){},submit:function(q){q=q?D.toObject(q):null;this.upload(q);return!1},upload:function(q){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var k=g.byId(this.progressWidgetId).domNode;"none"==h.get(k,"display")&&(this.restoreProgDisplay="none",h.set(k,"display","block"));"hidden"==h.get(k,"visibility")&&(this.restoreProgDisplay="hidden",h.set(k,"visibility","visible"))}q&&!q.target&&(this.postData=q);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(q=0;q<this.fileList.length;q++)k=
this.fileList[q],k.bytesLoaded=0,k.bytesTotal=k.size||1E5,k.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(q,k){var E;for(E=0;E<this.fileList.length;E++)if(this.fileList[E].name==q){k||this.fileList.splice(E,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(q):k||(G.destroy(this.fileInputs[E]),this.fileInputs.splice(E,1),this._renumberInputs());this.fileListId&&G.destroy("file_"+q)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(K.forEach(this._subs,t.unsubscribe,dojo),K.forEach(this._cons,t.disconnect,dojo),this.scrollConnect&&t.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(G.destroy(this._fileInput),G.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(t.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(q){!0===q?("flash"==this.uploaderType?h.set(this.insideNode,"top","-2500px"):h.set(this.insideNode,"display",
"none"),h.set(this.progNode,"display","")):!1===q?(h.set(this.insideNode,{display:"",top:"0"}),h.set(this.progNode,"display","none")):h.set(this.progNode,"width",q*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var q=!1,k=t.connect(this,"_complete",function(){t.disconnect(k);q=!0}),E=0,N=setInterval(y.hitch(this,function(){E+=5;E>this.fhtml.nr.w&&(E=0,q=!0);this._displayProgress(E/this.fhtml.nr.w);q&&(clearInterval(N),setTimeout(y.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(q){"string"==typeof q&&(q=Error(q));this.onError(q)},_addToFileList:function(){if(this.fileListId){var q="";K.forEach(this.fileList,function(k){q+='\x3ctable id\x3d"file_'+k.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+k.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(k.size?Math.ceil(.001*k.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);c.byId(this.fileListId).innerHTML=
q}},_change:function(q){f("ie")&&K.forEach(q,function(k){k.name=k.name.split("\\")[k.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(q):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=q);this._addToFileList();this.onChange(q);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(q){q=
y.isArray(q)?q:[q];K.forEach(q,function(k){k.ERROR&&this._error(k.ERROR)},this);K.forEach(this.fileList,function(k){k.bytesLoaded=1;k.bytesTotal=1;k.percent=100;this._progress(k)},this);K.forEach(this.fileList,function(k){this.removeFile(k.name,!0)},this);this.onComplete(q);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(y.hitch(this,function(){h.set(g.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(q){for(var k=0,E=0,N=0;N<this.fileList.length;N++){var l=this.fileList[N];l.name==q.name&&(l.bytesLoaded=q.bytesLoaded,l.bytesTotal=q.bytesTotal,l.percent=Math.ceil(l.bytesLoaded/l.bytesTotal*100),this.log(l.name,"percent:",l.percent));E+=Math.ceil(.001*l.bytesLoaded);k+=Math.ceil(.001*l.bytesTotal)}q=Math.ceil(E/k*100);this.progressWidgetId&&g.byId(this.progressWidgetId).update({progress:q+"%"});this.showProgress&&this._displayProgress(.01*q);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(q){if(this._disabled!=q){if("flash"==this.uploaderType){if(!this.flashReady){var k=t.connect(this,"onLoad",this,function(){t.disconnect(k);this._setDisabledAttr(q)});return}this._disabled=q;this.flashMovie.doDisable(q)}else this._disabled=q,h.set(this._fileInput,"display",this._disabled?"none":"");v.toggle(this.domNode,this.disabledClass,q)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var q=
b("[tabIndex]"),k=0;k<q.length;k++)if(q[k].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=q[k];break}this.nextFocusObject.focus()},_disconnect:function(){K.forEach(this._cons,t.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&G.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();x.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:y.hitch(this,function(q){this._error("HTML Upload Error:"+q.message)}),load:y.hitch(this,
function(q,k,E){this._complete(q)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();h.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(t.connect(this._fileInput,"mouseover",this,function(q){v.add(this.domNode,this.hoverClass);this.onMouseOver(q)}));this._cons.push(t.connect(this._fileInput,"mouseout",this,function(q){setTimeout(y.hitch(this,
function(){v.remove(this.domNode,this.activeClass);v.remove(this.domNode,this.hoverClass);this.onMouseOut(q);this._checkHtmlCancel("off")}),0)}));this._cons.push(t.connect(this._fileInput,"mousedown",this,function(q){v.add(this.domNode,this.activeClass);v.remove(this.domNode,this.hoverClass);this.onMouseDown(q)}));this._cons.push(t.connect(this._fileInput,"mouseup",this,function(q){v.remove(this.domNode,this.activeClass);this.onMouseUp(q);this.onClick(q);this._checkHtmlCancel("up")}));this._cons.push(t.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var q=this._fileInput.value;q?this._change([{name:q,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&p.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(q){"change"==q&&(this.dialogIsOpen=!1);"up"==q&&(this.dialogIsOpen=!0);if("off"==q){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var q=this.fhtml.nr;h.set(this.insideNode,{width:q.w+"px",height:"middle"==q.va?q.h+"px":"auto",
textAlign:q.ta,paddingTop:q.p[0]+"px",paddingRight:q.p[1]+"px",paddingBottom:q.p[2]+"px",paddingLeft:q.p[3]+"px"});try{h.set(this.insideNode,"lineHeight","inherit")}catch(k){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],b("*",this._formNode).forEach(function(q){G.destroy(q)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>f("ie")||f("ie")&&f("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=g.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=G.create("form",{enctype:"multipart/form-data",method:"post",id:g.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,h.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var q=
this.htmlFieldName;this.selectMultipleFiles&&(q+=this.fileCount,this.fileCount++);p.set(this._fileInput,{id:this.id,name:q,type:"file"});v.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);q=n.getMarginBox(this._fileInput);h.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-q.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var q;this.fileCount=0;K.forEach(this.fileInputs,function(k){q=this.htmlFieldName+this.fileCount;this.fileCount++;
p.set(k,"name",q)},this)}},_setFormStyle:function(){S.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");h.set(this.domNode,{overflow:"hidden",position:"relative"});h.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var q in this.postData)G.create("input",{type:"hidden",name:q,value:this.postData[q]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var q=t.connect(this,"_complete",this,function(){t.disconnect(q);this._displayProgress(!1)})}var k={},E;for(E in this.postData)k[E]=this.postData[E];this.flashMovie.doUpload(k)}catch(N){this._error("FileUploader - Sorry, the SWF failed to initialize."+N)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var q=window.location.href.split("/");q.pop();q=q.join("/")+"/";this.uploadUrl=q+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",q," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");q={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:M.serialize("fh",this.fhtml),fileMask:M.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new O(q,this.insideNode);this.flashObject.onError=y.hitch(function(k){this._error("Flash Error: "+k)});this.flashObject.onReady=y.hitch(this,function(){h.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=y.hitch(this,function(k){this.flashMovie=k;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&p.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(q,k){this._subs.push(t.subscribe(this.id+q,this,k))},urlencode:function(q){return q&&"none"!=q?q.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(q){q=q.tagName.toLowerCase();
return"button"==q||"input"==q},getTextStyle:function(q){var k={};k.ff=h.get(q,"fontFamily");if(k.ff){k.ff=k.ff.replace(", ",",");k.ff=k.ff.replace(/"|'/g,"");k.ff="sans-serif"==k.ff?"Arial":k.ff;k.fw=h.get(q,"fontWeight");k.fi=h.get(q,"fontStyle");k.fs=parseInt(h.get(q,"fontSize"),10);if(-1<h.get(q,"fontSize").indexOf("%"))for(var E=q;E.tagName;){if(-1==h.get(E,"fontSize").indexOf("%")){k.fs=parseInt(h.get(E,"fontSize"),10);break}"body"==E.tagName.toLowerCase()&&(k.fs=.16*parseInt(h.get(E,"fontSize"),
10));E=E.parentNode}k.fc=(new B(h.get(q,"color"))).toHex();k.fc=parseInt(k.fc.substring(1,Infinity),16)}k.lh=h.get(q,"lineHeight");k.ta=h.get(q,"textAlign");k.ta="start"!=k.ta&&k.ta?k.ta:"left";k.va=this.isButton(q)?"middle":k.lh==k.h?"middle":h.get(q,"verticalAlign");return k},getText:function(q){q=y.trim(q.innerHTML);-1<q.indexOf("\x3c")&&(q=escape(q));return q},getStyle:function(q){var k={},E=n.getContentBox(q),N=n.getPadExtents(q);k.p=[N.t,N.w-N.l,N.h-N.t,N.l];k.w=E.w+N.w;k.h=E.h+N.h;k.d=h.get(q,
"display");E=new B(h.get(q,"backgroundColor"));k.bc=0==E.a?"#ffffff":E.toHex();k.bc=parseInt(k.bc.substring(1,Infinity),16);if(E=this.urlencode(h.get(q,"backgroundImage")))k.bi={url:E,rp:h.get(q,"backgroundRepeat"),pos:escape(h.get(q,"backgroundPosition"))},k.bi.pos||(E=h.get(q,"backgroundPositionX"),N=h.get(q,"backgroundPositionY"),k.bi.pos=escape(("left"==E?"0%":"right"==E?"100%":E)+" "+("top"==N?"0%":"bottom"==N?"100%":N)));return y.mixin(k,this.getTextStyle(q))},getTempNodeStyle:function(q,k,
E){if(E){E=G.place("\x3c"+q.tagName+"\x3e\x3cspan\x3e"+q.innerHTML+"\x3c/span\x3e\x3c/"+q.tagName+"\x3e",q.parentNode);var N=E.firstChild;v.add(N,q.className);v.add(E,k);q=this.getStyle(N)}else E=G.place("\x3c"+q.tagName+"\x3e"+q.innerHTML+"\x3c/"+q.tagName+"\x3e",q.parentNode),v.add(E,q.className),v.add(E,k),E.id=q.id,q=this.getStyle(E);G.destroy(E);return q}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v){y.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");a=v._iframeName;a=a.substring(0,a.lastIndexOf("_"));var G=K.delegate(v,{create:function(){return G._frame=v.create.apply(v,arguments)},get:null,post:null,send:function(D){var e=t._ioSetArgs(D,function(u){m&&m.cancel()},function(u){var C=null;u=u.ioArgs;try{var O=u.handleAs;"xml"===O||"html"===O?C=m.response.data:(C=m.response.text,"json"===O?C=J.fromJson(C):"javascript"===O&&(C=y.eval(C)))}catch(M){C=
M}return C},function(u,C){C.ioArgs._hasError=!0;return u}),g=e.ioArgs,x="GET",B=b.byId(D.form);D.method&&"POST"===D.method.toUpperCase()&&B&&(x="POST");D={method:x,handleAs:"json"===D.handleAs||"javascript"===D.handleAs?"text":D.handleAs,form:D.form,query:B?null:D.content,data:B?D.content:null,timeout:D.timeout,ioArgs:g};D.method&&(D.method=D.method.toUpperCase());if(F.ioPublish&&y.publish&&!1!==g.args.ioPublish)var d=p.after(v,"_notifyStart",function(u){u.options.ioArgs===g&&(d.remove(),t._ioNotifyStart(e))},
!0);var m=v(g.url,D,!0);g._callNext=m._callNext;m.then(function(){e.resolve(e)}).otherwise(function(u){e.ioArgs.error=u;e.reject(u)});return e},_iframeOnload:f.global[a+"_onload"]});K.setObject("dojo.io.iframe",G);return G})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(F,J,y,K,t,a,f,b,c){function h(e){e=F.delegate(p,e);if(!("path"in e))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in e||(e.id="dojox-embed-flash-"+n++);return e}var n=0,p={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(t("ie")){var v=function(e){e=h(e);if(!e)return null;var g,x=e.path;if(e.vars){var B=[];for(g in e.vars)B.push(encodeURIComponent(g)+"\x3d"+encodeURIComponent(e.vars[g]));e.params.FlashVars=B.join("\x26");delete e.vars}x='\x3cobject id\x3d"'+c.escape(String(e.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
c.escape(String(e.width))+'" height\x3d"'+c.escape(String(e.height))+'"'+(e.style?' style\x3d"'+c.escape(String(e.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+c.escape(String(x))+'" /\x3e';if(e.params)for(g in e.params)x+='\x3cparam name\x3d"'+c.escape(g)+'" value\x3d"'+c.escape(String(e.params[g]))+'" /\x3e';return{id:e.id,markup:x+"\x3c/object\x3e"}};var G=function(){for(var e=10,g=null;!g&&7<e;)try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e--)}catch(x){}return g?(e=g.GetVariable("$version").split(" ")[1].split(","),
{major:null!=e[0]?parseInt(e[0]):0,minor:null!=e[1]?parseInt(e[1]):0,rev:null!=e[2]?parseInt(e[2]):0}):{major:0,minor:0,rev:0}}();J.addOnWindowUnload(function(){console.warn("***************UNLOAD");var e=function(){};K("object").reverse().style("display","none").forEach(function(g){for(var x in g)if("FlashVars"!=x&&"function"==typeof g[x])try{g[x]=e}catch(B){}})})}else v=function(e){e=h(e);if(!e)return null;var g,x=e.path;if(e.vars){var B=[];for(g in e.vars)B.push(encodeURIComponent(g)+"\x3d"+encodeURIComponent(e.vars[g]));
e.params.flashVars=B.join("\x26");delete e.vars}x='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+c.escape(String(x))+'" id\x3d"'+c.escape(String(e.id))+'" width\x3d"'+c.escape(String(e.width))+'" height\x3d"'+c.escape(String(e.height))+'"'+(e.style?' style\x3d"'+c.escape(String(e.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(e.params)for(g in e.params)x+=" "+c.escape(g)+'\x3d"'+c.escape(String(e.params[g]))+'"';return{id:e.id,markup:x+
" /\x3e"}},G=function(){var e=navigator.plugins["Shockwave Flash"];return e&&e.description?(e=e.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=e[0]?parseInt(e[0]):0,minor:null!=e[1]?parseInt(e[1]):0,rev:null!=e[2]?parseInt(e[2]):0}):{major:0,minor:0,rev:0}}();var D=function(e,g){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=G.major;this.minimumVersion=e.minimumVersion||9;this.domNode=this.movie=this.id=null;g&&(g=a.byId(g));setTimeout(F.hitch(this,function(){if(e.expressInstall||this.available&&this.available>=this.minimumVersion)if(e&&g)this.init(e,g);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};F.extend(D,{onReady:function(e){},onLoad:function(e){},onError:function(e){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(e,g){this.destroy();g=a.byId(g||this.domNode);if(!g)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var x=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;D.initialized&&(this.id=D.place(e,g),this.domNode=g,setTimeout(F.hitch(this,
function(){this.movie=this.byId(this.id,e.doc);this.onReady(this.movie);this._poller=setInterval(F.hitch(this,function(){try{x=this.movie.PercentLoaded()}catch(B){console.warn("this.movie.PercentLoaded() failed",B,this.movie)}if(100==x)this._onload();else if(0==x&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(e){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var e=
F.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),g;for(g in this)e[g]||delete this[g];this._poller?f(this,"Load",this,"_destroy"):this._destroy()}},byId:function(e,g){g=g||document;return g.embeds[e]?g.embeds[e]:g[e]?g[e]:window[e]?window[e]:document[e]?document[e]:null}});F.mixin(D,{minSupported:8,available:G.major,supported:G.major>=G.required,minimumRequired:G.required,version:G,initialized:!1,onInitialize:function(){D.initialized=!0},__ie_markup__:function(e){return v(e)},proxy:function(e,
g){y.forEach(g instanceof Array?g:[g],function(x){this[x]=F.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+x+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+y.map(arguments,function(B){return __flash__toXML(B)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},e)}});D.place=function(e,g){e=v(e);g=a.byId(g);g||(g=b.doc.createElement("div"),g.id=e.id+"-container",b.body().appendChild(g));return e?(g.innerHTML=e.markup,
e.id):null};D.onInitialize();F.setObject("dojox.embed.Flash",D);return D})},"dojox/embed/flashVars":function(){define(["dojo"],function(F){F.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var J={serialize:function(y,K){var t=function(c){"string"==typeof c&&(c=c.replace(/;/g,"_sc_"),c=c.replace(/\./g,"_pr_"),c=c.replace(/:/g,"_cl_"));return c},a=dojox.embed.flashVars.serialize,f="";if(F.isArray(K)){for(var b=0;b<K.length;b++)f+=a(y+"."+b,t(K[b]))+";";return f.replace(/;{2,}/g,";")}if(F.isObject(K)){for(b in K)f+=
a(y+"."+b,t(K[b]))+";";return f.replace(/;{2,}/g,";")}return y+":"+K}};F.setObject("dojox.embed.flashVars",J);return J})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(F,J,y,K){var t=F.getObject("dojox.html",!0),a={},f={},b=[];t.insertCssRule=function(c,h,n){n=t.getDynamicStyleSheet(n);var p=c+" {"+h+"}";console.log("insertRule:",p);K("ie")?(n.cssText+=p,console.log("ss.cssText:",n.cssText)):n.sheet?n.sheet.insertRule(p,
n._indicies.length):n.appendChild(y.doc.createTextNode(p));n._indicies.push(c+" "+h);return c};t.removeCssRule=function(c,h,n){var p=-1,v,G;for(v in a)if(!n||n===v){var D=a[v];for(G=0;G<D._indicies.length;G++)if(c+" "+h===D._indicies[G]){p=G;break}if(-1<p)break}if(!D)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===p)return console.warn("The css rule was not found and could not be removed."),!1;D._indicies.splice(p,1);K("ie")?D.removeRule(p):D.sheet&&
D.sheet.deleteRule(p);return!0};t.modifyCssRule=function(c,h,n){};t.getStyleSheet=function(c){if(a[c||"default"])return a[c||"default"];if(!c)return!1;var h=t.getStyleSheets();if(h[c])return t.getStyleSheets()[c];for(var n in h)if(h[n].href&&-1<h[n].href.indexOf(c))return h[n];return!1};t.getDynamicStyleSheet=function(c){c||(c="default");a[c]||(y.doc.createStyleSheet?(a[c]=y.doc.createStyleSheet(),9>K("ie")&&(a[c].title=c)):(a[c]=y.doc.createElement("style"),a[c].setAttribute("type","text/css"),y.doc.getElementsByTagName("head")[0].appendChild(a[c]),
console.log(c," ss created: ",a[c].sheet)),a[c]._indicies=[]);return a[c]};t.enableStyleSheet=function(c){if(c=t.getStyleSheet(c))c.sheet?c.sheet.disabled=!1:c.disabled=!1};t.disableStyleSheet=function(c){if(c=t.getStyleSheet(c))c.sheet?c.sheet.disabled=!0:c.disabled=!0};t.activeStyleSheet=function(c){var h=t.getToggledStyleSheets(),n;if(1===arguments.length)J.forEach(h,function(p){p.disabled=p.title===c?!1:!0});else for(n=0;n<h.length;n++)if(!1===h[n].disabled)return h[n];return!0};t.getPreferredStyleSheet=
function(){};t.getToggledStyleSheets=function(){var c;if(!b.length){var h=t.getStyleSheets();for(c in h)h[c].title&&b.push(h[c])}return b};t.getStyleSheets=function(){if(f.collected)return f;J.forEach(y.doc.styleSheets,function(c){var h=c.sheet?c.sheet:c;c=h.title||h.href;if(K("ie"))-1===h.cssText.indexOf("#default#VML")&&(h.href?f[c]=h:h.imports.length?J.forEach(h.imports,function(n){f[n.title||n.href]=n}):f[c]=h);else{f[c]=h;f[c].id=h.ownerNode.id;c=[];try{c=h[h.cssRules?"cssRules":"rules"]}catch(n){console.warn("Reading css rules from stylesheet "+
h.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",h)}J.forEach(c,function(n){n.href&&(f[n.href]=n.styleSheet,f[n.href].id=h.ownerNode.id)})}});f.collected=!0;return f};return t})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(F,J,y,K,t,a,f){F.experimental("dojox.editor.plugins.ChooseImage");
var b=F.declare("dojox.editor.plugins.ChooseImage",y,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var c=f.getLocalization("dijit._editor","commands");this.button=new J.form.Button({label:c.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:a.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var c=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===c?(t.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(t.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var c=F.create("span",{innerHTML:"."},document.body);this.imageChooser=new K({showSelfImg:!1,cropImage:!1,format:[K.GIF,K.JPEG,K.PNG]},c);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){t.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(c){c=c[0];var h=F.byId(this.currentImageId,this.editor.document);var n=this.downloadPath?this.downloadPath+c.name:c.file;h.src=n;F.attr(h,"_djrealurl",n);c.width&&(h.width=c.width,h.height=c.height)},insertTempImage:function(c,h){h=h&&h.fileName?'alt\x3d"'+h.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+c+'" '+h+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});F.subscribe(J._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "chooseImage":c.plugin=new b({url:c.args.url})}});y.registry.chooseImage=function(c){return new b(c)};return b})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(F,J,y,K,t,a){J.experimental("dijit.editor.plugins.EditorTextColor");var f=K("dijit.editor.plugins.EditorTextColor",t,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var b="",c=!1;this.params.custom&&(this.params.custom.recordUID&&(b=this.params.custom.recordUID),this.params.custom.forceAttr&&(c=this.params.custom.forceAttr));var h=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(n){function p(v){h.button.dropDown=new v({dir:h.editor.dir,ownerDocument:h.editor.ownerDocument,value:h.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(G){h.editor.execCommand("useCSS",c);h.editor.execCommand("styleWithCSS",!c);h.editor.execCommand(h.hackCommand,
G)},onClose:function(){h.button.closeDropDown()}});n()}"string"===typeof h.colorPicker?F([h.colorPicker],p):p(h.colorPicker)}},updateState:function(){var b=this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var n=b.queryCommandValue(c)||""}catch(p){n=""}}""===n?n="#000000":"transparent"===n&&(n="rgba(0, 0, 0, 0)");this.value=n;(b=this.button.dropDown)&&b.getColor&&n!==b.getColor()&&(b.refreshRecords(),
b.setColor(n))}}});J.subscribe(y._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorTextColor":b.plugin=new f}});return f})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(F,J,y,K,t,a){J.experimental("dijit.editor.plugins.EditorBackgroundColor");var f=K("dijit.editor.plugins.EditorBackgroundColor",t,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var b="";this.params.custom&&this.params.custom.recordUID&&(b=this.params.custom.recordUID);var c=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(h){function n(p){c.button.dropDown=new p({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,
value:c.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(v){c.editor.execCommand("useCSS",!1);c.editor.execCommand("styleWithCSS",!0);c.editor.execCommand(c.hackCommand,v)},onExecute:function(){c.editor.execCommand(c.hackCommand,this.get("value"))},onClose:function(){c.button.closeDropDown()}});h()}"string"===typeof c.colorPicker?F([c.colorPicker],n):n(c.colorPicker)}},updateState:function(){var b=
this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){if(this.button){var h=this.get("disabled");this.button.set("disabled",h);if(h)return;try{var n=b.queryCommandValue(c)||""}catch(p){n=""}}""===n?n="#000000":"transparent"===n&&(n="rgba(0, 0, 0, 0)");this.value=n;(b=this.button.dropDown)&&b.getColor&&n!==b.getColor()&&(b.refreshRecords(),b.setColor(n))}}});J.subscribe(y._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorBackgroundColor":b.plugin=new f}});
return f})},"widgets/SmartEditor/setting/SmartActionGroup":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojox/html/entities dojo/on dojo/query dojo/Deferred dojo/text!./SmartActionGroup.html dijit/_TemplatedMixin jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/CheckBox dijit/form/CheckBox jimu/dijit/Message ./FilterPage jimu/utils dijit/registry".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S){return F([g,J,G],{baseClass:"jimu-widget-smartEditor-setting-smartActionGroup",templateString:v,_totalLayers:[],_prevAppliedOn:[],filterInfo:{filter:""},searchTextBox:null,postCreate:function(){this.inherited(arguments);this._totalLayers=[];this._prevAppliedOnLayers=[];this.appliedOn&&(this._prevAppliedOnLayers=y.clone(Object.keys(this.appliedOn)));this._initComponents();this._handleParentCheckBoxState()},_initComponents:function(){this.groupNameTextBox=
new d({required:!0,trim:!0,"class":"esriCTGroupNameTextBox"},t.create("div",{},this.groupNameTextBoxNode));this.groupNameTextBox.validator=y.hitch(this,function(q){return q?q!==this.prevName&&this.editUtils.isDuplicateGroupName(q,this.existingGroupNames)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.name&&this.groupNameTextBox.set("value",this.name);
this._initLayerSelector();this.expressionTextBox=new d({disabled:!0,required:!0,"class":"esriCTTextBoxNode",promptMessage:this.nls.smartActionsPage.invalidExpression},t.create("div",{},this.expressionTextBoxNode));this.filterInfo&&this.filterInfo.expression&&this.expressionTextBox.set("value",this.filterInfo.expression);this.own(h(this.editExpressionIconNode,"click",y.hitch(this,this._showFilter)));this._submitHidden=new m({label:this.nls.smartActionsPage.submitAttributeText},t.create("div",{},this.submitWhenHiddenNode));
this.submitWhenHidden&&this._submitHidden.setValue(this.submitWhenHidden);this._createTable(this.appliedOn)},_addLayersDropDown:function(){var q=this._createLayerChooserMapArgs();q=new D(q);q.startup();q=new e({layerChooser:q});q.placeAt(this.layerSelectorDiv);q.startup();this._layerSelector=q;var k=this._totalLayers[0];this.layerForExpression&&(q=this._jimuLayerInfos.getLayerOrTableInfoById(this.layerForExpression))&&(k=q.layerObject);this._layerSelector.setSelectedLayer(k);this.own(h(this._layerSelector,
"selection-change",y.hitch(this,function(){this.expressionTextBox.get("value")&&(new C({message:this.nls.smartActionsPage.warningMsgOnLayerChange}),this.onFilterInfoChanged({expression:"",filter:null,submitWhenHidden:!1}))})))},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},_createFiltersForLayerSelector:function(){return D.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0)},_initLayerSelector:function(){var q=
this._createLayerChooserMapArgs();this._layerChooserFromMap=new D(q);this._layerChooserFromMap.startup();q=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var k=this._layerChooserFromMap.layerInfosObj.getTableInfoArray();k&&0<k.length&&(q=q.concat(k));this._getAllFilteredLayers(q,[])},_isLayerEditable:function(q){var k=!1;q&&q.layerObject&&(q=q.layerObject.getEditCapabilities(),q.canCreate||q.canUpdate||q.canDelete||q.canUpdateGeometry)&&(k=!0);return k},_getAllFilteredLayers:function(q,
k){K.forEach(q,y.hitch(this,function(E){if(E.isLeaf()){var N=new p;this._layerChooserFromMap.filter(E).then(y.hitch(this,function(l){l&&this._isLayerEditable(E)&&this._totalLayers.push(E);N.resolve()}));k.push(N)}else this._getAllFilteredLayers(E.newSubLayers,k)}))},_validateGroup:function(){if(!this.groupNameTextBox.isValid())return this.groupNameTextBox.focus(),!1;if(this._layerSelector){var q=this._layerSelector.getSelectedItem();if(!q||!q.layerInfo||!q.layerInfo.layerObject)return!1}else return!1;
return this.expressionTextBox.isValid()?!0:(this.expressionTextBox.set("disabled",!1),this.expressionTextBox.focus(),this.expressionTextBox.set("disabled",!0),!1)},showDialog:function(){this._addLayersDropDown();var q=new B({titleLabel:this.nls.smartActionsPage.smartActionLabel,width:900,maxHeight:550,autoHeight:!1,content:this,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var k={},E=this._layerSelector.getSelectedItem().layerInfo.layerObject;if(this._validateGroup()){k.name=
this.groupNameTextBox.get("value");k.submitWhenHidden=this._submitHidden.checked;k.layerForExpression=E.id;k.filterInfo=this.filterInfo;k.appliedOn=this.appliedOn;this._applySettingsInLayer(k);for(var N in k.appliedOn){E=k.appliedOn[N];for(var l in E)E[l].hasOwnProperty("Priority")&&delete E[l].Priority,E[l].hasOwnProperty("ExistingExpressions")&&delete E[l].ExistingExpressions}this.emit("groupInfoUpdated",k);q.close()}})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,
function(){q.close()})}],onClose:y.hitch(this,function(){})});this.groupNameTextBox.focus();this._setMaxWidth()},_getTableData:function(){var q=[],k;K.forEach(this._layerTable.getRows(),y.hitch(this,function(E){E.layerSelector&&(k={},k.layerId=E.layerSelector.getSelectedItem().layerInfo.id,k.field=E.layerFields.getValue(),q.push(k))}));return q},_showFilter:function(q){if(!this.groupNameTextBox.isValid())return this.groupNameTextBox.focus(),!1;this._filterPage&&this._filterPage.destroy();var k=this._layerSelector.getSelectedItem().layerInfo.layerObject;
this._filterPage=new O({nls:this.nls,_resourceInfo:this._resourceInfo,_url:k.url,_layerId:k.id,_filterInfo:this.filterInfo,_groupName:this.groupNameTextBox.get("value")});this.own(h(this._filterPage,"filterInfo",y.hitch(this,function(E){this.onFilterInfoChanged(E)})));this._filterPage.popup(q)},onFilterInfoChanged:function(q){this.filterInfo=y.clone(q);this.filterInfo.filter=JSON.parse(c.decode(this.filterInfo.filter));this.expressionTextBox.set("value",q.expression);this._destroyTable();this._createTable(this.appliedOn);
this._handleParentCheckBoxState()},_destroyTable:function(){t.empty(this.tableParentContainer)},_createHeaderObj:function(q,k,E){var N,l=["","Hide","Required","Disabled"],z=t.create("th"),L=t.create("div",{innerHTML:q.title,title:q.title});q.hasOwnProperty("headerIcon")&&(N=t.create("div",{title:q.title}));0<E&&(a.add(z,"esriCTTableTH"),a.add(L,"esriCTTableHeaderTitle "),q.hasOwnProperty("headerIcon")&&a.add(N,"esriCTTableHeaderIcon "+q.headerIcon));var R=t.create("div",{"class":"esriCTPriorityColumnParentContainer"}),
Q=t.create("div",{"class":"esriCTPriorityColumnParentDiv"});Q.appendChild(L);q.hasOwnProperty("headerIcon")&&Q.appendChild(N);N=t.create("div",{"class":"esriCTPriorityNumberDiv"});if(3>=E){a.add(N,"esriCTSAHeaderCheckbox");var V,W;var Y=new m({label:""},t.create("div",{},N));b.set(Y.domNode,"action",l[E]);h(Y,"change",y.hitch(this,function(I){var P=b.get(Y.domNode,"action");V=""!==this.searchTextBox.get("value")?n("tr[searchstring^\x3d'"+this.searchTextBox.get("value").toLowerCase()+"']",this.tableParentContainer):
n("tr.esriCTSmartActionGroupRow",this.tableParentContainer);K.forEach(V,y.hitch(this,function(X){var A=b.get(X,"layerid");var r=b.get(X,"field");A&&r&&(this.appliedOn[A][r][P]=I);(W=n("[action\x3d"+P+"]",X))&&W[0]&&(W=S.byNode(W[0]),I?W.check(!0):W.uncheck(!0))}))}))}4===E&&(t.create("div",{"class":"esriCTPriorityOneDiv",innerHTML:this.nls.smartActionsPage.priorityOneText},N),t.create("div",{"class":"esriCTPriorityTwoDiv",innerHTML:this.nls.smartActionsPage.priorityTwoText},N),t.create("div",{"class":"esriCTPriorityThreeDiv",
innerHTML:this.nls.smartActionsPage.priorityThreeText},N));0===E?this._addSearchControl(R):(R.appendChild(Q),R.appendChild(N));z.appendChild(R);f.set(z,"width",q.width);k.appendChild(z)},_addSearchControl:function(q){this.searchTextBox=new d({trim:!0,placeHolder:this.nls.actionPage.searchPlaceHolder,intermediateChanges:!0},t.create("div",{},q));f.set(this.searchTextBox.domNode,"width","350px");this.own(h(this.searchTextBox,"change",y.hitch(this,this._searchTextUpdated)));q=t.create("div",{"class":"esriCTExpandAllNode"},
q);this._expandAllCheckBox=new u({"class":"switch-toggle",checked:!1},t.create("div",{},q));t.create("label",{innerHTML:this.nls.actionPage.expandAllLabel},q);this.own(h(this._expandAllCheckBox,"change",y.hitch(this,function(k){k?(k=n(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed.esriCTToggleLayerExpanded",this.layerAndFieldsMainDiv))&&0<k.length&&K.forEach(k,function(E){E.click()}):(k=n(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed",this.layerAndFieldsMainDiv))&&0<k.length&&K.forEach(k,
function(E){a.contains(E,"esriCTToggleLayerExpanded")||E.click()})})))},_searchTextUpdated:function(q){q=q.toLowerCase();if(""!==q){var k=n("[searchstring]",this.tableParentContainer);var E=n("tr[searchstring^\x3d'"+q+"']",this.tableParentContainer);k.style("display","none");k.removeClass("esriCTNotFilteredBySearch");k.addClass("esriCTFilteredBySearch");E.style("display","");E.replaceClass("esriCTNotFilteredBySearch","esriCTFilteredBySearch");q=this.appliedOn;this._handleParentCheckBoxState(E);for(var N in q){var l;
if(0<Object.keys(q[N]).length){E=n("[layermaindivid \x3d '"+N+"']",this.tableParentContainer);k=n("[layerid\x3d'"+N+"']",this.tableParentContainer);var z=!0;for(l=0;l<k.length;l++)if(a.contains(k[l],"esriCTNotFilteredBySearch")){z=!1;break}z?E.style("display","none"):E.style("display","")}}}else n("[layermaindivid]",this.tableParentContainer).style("display",""),n("[searchstring]",this.tableParentContainer).style("display",""),n("[searchstring]",this.tableParentContainer).removeClass("esriCTFilteredBySearch"),
n("[searchstring]",this.tableParentContainer).addClass("esriCTNotFilteredBySearch"),this._handleParentCheckBoxState(E)},_handleParentCheckBoxState:function(q){var k=!0,E=!0,N=!0,l,z,L;q||(q=n("tr.esriCTSmartActionGroupRow",this.tableParentContainer));K.forEach(q,y.hitch(this,function(V){l=n("[action\x3d'Hide']",V);z=n("[action\x3d'Required']",V);L=n("[action\x3d'Disabled']",V);0<l.length&&0<z.length&&0<L.length&&(l=S.byNode(l[0]),z=S.byNode(z[0]),L=S.byNode(L[0]),l.getValue()||(k=!1),z.getValue()||
(E=!1),L.getValue()||(N=!1))}));q=S.byNode(n(".esriCTTableTH [action\x3d'Hide']",this.tableParentContainer)[0]);var R=S.byNode(n(".esriCTTableTH [action\x3d'Required']",this.tableParentContainer)[0]);var Q=S.byNode(n(".esriCTTableTH [action\x3d'Disabled']",this.tableParentContainer)[0]);k?q.check(!0):q.uncheck(!0);E?R.check(!0):R.uncheck(!0);N?Q.check(!0):Q.uncheck(!0)},_createHeaders:function(q){var k=[{title:"",icon:"",width:"41%"},{title:this.nls.actionPage.actions.hide,width:"13%",headerIcon:"esriCTHide"},
{title:this.nls.actionPage.actions.required,width:"13%",headerIcon:"esriCTRequired"},{title:this.nls.actionPage.actions.disabled,width:"13%",headerIcon:"esriCTDisabled"},{title:this.nls.smartActionsPage.priorityColumnText,icon:"",width:"20%"}];var E=t.create("thead",{});var N=E.insertRow(0);a.add(N,"esriCTTableRow");K.forEach(k,y.hitch(this,function(l,z){this._createHeaderObj(l,N,z)}));q.appendChild(E)},_setMaxWidth:function(){var q=n(".esriCTTableHeaderTitle");K.forEach(q,y.hitch(this,function(k){var E=
f.getComputedStyle(k).width;f.set(k,"max-width",E)}))},_createPriorityIcons:function(q,k){var E=k.Priority;q=t.create("td",{style:{width:"20%"}},q);var N=t.create("div",{"class":"esriCTPriorityIconMainDiv"},q);K.forEach(E,y.hitch(this,function(l){t.create("div",{"class":"esriCTPriorityIcons esriCT"+l,title:this.nls.actionPage.actions[l.toLowerCase()]},N)}));E=t.create("div",{"class":"jimu-icon jimu-icon-edit esriCTPriorityEditIcon",title:this.nls.smartActionsPage.priorityPopupTitle},N);this.own(h(E,
"click",y.hitch(this,function(l){this._createPriorityTable(l.currentTarget.parentNode);this._createPriorityPopup(l.currentTarget.parentNode,k)})))},_createPriorityTable:function(q){this._priorityTable=new x({fields:[{name:"priorityName",title:this.nls.smartActionsPage.priorityPopupColumnTitle,type:"empty",width:"80%"},{name:"actions",title:this.nls.intersectionPage.actionsText,type:"actions",width:"20%",actions:["up","down"],"class":"actions"}],selectable:!1});this._priorityTable.startup();this._populatePriorityTable(q)},
_getExistingPriority:function(q){var k={esriCTHide:"Hide",esriCTRequired:"Required",esriCTDisabled:"Disabled"},E=[];K.forEach(q.childNodes,y.hitch(this,function(N,l){if(3>l)for(var z in k)a.contains(N,z)&&E.push(k[z])}));return E},_populatePriorityTable:function(q){q=this._getExistingPriority(q);K.forEach(q,y.hitch(this,function(k){var E=t.create("div",{innerHTML:this.nls.actionPage.actions[k.toLowerCase()],title:this.nls.actionPage.actions[k.toLowerCase()]});a.add(E,"esriCTTablePriorityTitle");b.set(E,
"priority",k);var N=t.create("div",{title:this.nls.actionPage.actions[k.toLowerCase()]});a.add(N,"esriCTPriorityPopupIcon esriCT"+k);k=this._priorityTable.addRow({}).tr;k=n(".simple-table-cell",k)[0];k.appendChild(N);k.appendChild(E)}))},_fetchPriority:function(){var q=this._priorityTable.getRows(),k=[];K.forEach(q,y.hitch(this,function(E){k.push(b.get(E.childNodes[0].childNodes[1],"priority"))}));return k},_changePriority:function(q,k){K.forEach(q,y.hitch(this,function(E,N){K.forEach(k.childNodes,
y.hitch(this,function(l,z){N===z&&(K.forEach(["Hide","Required","Disabled"],y.hitch(this,function(L){a.remove(l,"esriCT"+L)})),a.add(l,"esriCT"+E),b.set(l,"title",this.nls.actionPage.actions[E.toLowerCase()]))}))}))},_createPriorityPopup:function(q,k){var E=new B({titleLabel:this.nls.smartActionsPage.priorityPopupTitle,width:450,maxHeight:445,autoHeight:!0,content:this._priorityTable,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var N=this._fetchPriority();this._changePriority(N,
q);k.Priority=N;E.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){E.close()})}],onClose:y.hitch(this,function(){})})},_createLayerName:function(q,k){var E=k,N=t.create("td"),l=t.create("div",{"class":"esriCTLayerNameRowParent"},N);this._jimuLayerInfos.getLayerInfoById(k)?E=this._jimuLayerInfos.getLayerInfoById(k).layerObject.name:this._jimuLayerInfos.getTableInfoById(k)&&(E=this._jimuLayerInfos.getTableInfoById(k).layerObject.name);var z=t.create("div",
{"class":"esriCTToggleLayerIcon esriCTToggleLayerCollapsed esriCTToggleLayerExpanded",style:{"margin-top":"5px"}},l);t.create("div",{"class":"esriCTLayerTitle",innerHTML:E,title:E},l);b.set(z,"rootnodelayerid",k);this.own(h(z,"click",y.hitch(this,function(L){var R=!0,Q=n(".esriCTToggleLayerIcon.esriCTToggleLayerCollapsed",this.layerAndFieldsMainDiv);a.toggle(L.currentTarget,"esriCTToggleLayerExpanded");L=b.get(L.currentTarget,"rootnodelayerid");n('tr[layerid\x3d"'+L+'"]').toggleClass("esriCTHidden");
K.some(Q,y.hitch(this,function(V){if(a.contains(V,"esriCTToggleLayerExpanded"))return R=!1,!0}));this._expandAllCheckBox.set("checked",R,!1)})));q.appendChild(N)},_createFieldNameTd:function(q,k){var E=t.create("td",{innerHTML:k,"class":"esriCTLayerFields"});q.appendChild(E);b.set(q,"searchstring",k.toLowerCase())},_addRows:function(q,k){var E=k.layerDetails;k=k.fieldLabels;var N=[],l;for(l in E){var z=E[l],L=t.create("tr",{"class":"esriCTSmartActionGroupRow esriCTLayerNameRow"});this._createLayerName(L,
l);b.set(L,"layermaindivid",l);q.appendChild(L);for(var R in z){L=t.create("tr",{"class":"esriCTSmartActionGroupRow esriCTLayerFieldRow esriCTHidden"});b.set(L,"layerid",l);b.set(L,"field",R);this._createFieldNameTd(L,k[l][R]);var Q={layerid:l,field:R,action:"Hide"},V="";z[R].ExistingExpressions.hasOwnProperty("Hide")&&(V=z[R].ExistingExpressions.Hide);this._createCheckBox(L,Q,z[R].Hide,V);Q.action="Required";V="";z[R].ExistingExpressions.hasOwnProperty("Required")&&(V=z[R].ExistingExpressions.Required);
this._createCheckBox(L,Q,z[R].Required,V);Q.action="Disabled";V="";z[R].ExistingExpressions.hasOwnProperty("Disabled")&&(V=z[R].ExistingExpressions.Disabled);this._createCheckBox(L,Q,z[R].Disabled,V);-1===N.indexOf(l)&&(z[R].Hide||z[R].Required||z[R].Disabled)&&N.push(l);this._createPriorityIcons(L,z[R]);q.appendChild(L)}}0<N.length&&setTimeout(y.hitch(this,function(){K.forEach(N,function(W){n('div[rootnodelayerid\x3d"'+W+'"]').toggleClass("esriCTToggleLayerExpanded");n('tr[layerid\x3d"'+W+'"]').toggleClass("esriCTHidden")})}),
100)},_createCheckBox:function(q,k,E,N){var l=t.create("td",{style:{width:"13%"}}),z=!0,L,R;a.add(l,"esriCTCheckBoxTD");var Q=t.create("div");E&&N&&(E=!1);var V=t.create("div");a.add(V,"esriCTCheckBoxMainDiv");var W=t.create("div");E=new m({checked:E},W);b.set(W,"action",k.action);b.set(W,"field",k.field);b.set(W,"layerid",k.layerid);var Y=this.appliedOn[k.layerid][k.field];this.own(h(E,"change",y.hitch(this,function(I){var P=b.get(W,"action");z=!0;Y[P]=I;fieldsMatchingNodes=""!==this.searchTextBox.get("value")?
n("tr[searchstring^\x3d'"+this.searchTextBox.get("value").toLowerCase()+"']",this.tableParentContainer):n("tr.esriCTSmartActionGroupRow",this.tableParentContainer);0<fieldsMatchingNodes.length?K.some(fieldsMatchingNodes,y.hitch(this,function(X){if((X=n("[action\x3d"+P+"]",X))&&X[0]&&(L=S.byNode(X[0]))&&!L.getValue())return z=!1,!0})):z=!1;R=S.byNode(n(".esriCTTableTH [action\x3d"+P+"]",this.tableParentContainer)[0]);z&&!R.getValue()?R.check(!0):R.uncheck(!0)})));V.appendChild(W);Q.appendChild(V);
N&&(k=t.create("div",{title:N}),a.add(k,"esriCTExistingExpressionDiv"),Q.appendChild(k));l.appendChild(Q);q.appendChild(l)},_createTable:function(q){var k=t.create("table");a.add(k,"esriCTTableMainNode tableBodyScroll");this._createHeaders(k);this.tableParentContainer.appendChild(k);var E=t.create("tbody",{style:"width: 808px"});(q=this._createLayerDetails(y.clone(q)))&&q.layerDetails&&q.fieldLabels&&(this.appliedOn=q.layerDetails,this._addRows(E,q));k.appendChild(E)},_validateIfLayerHaveUsedFields:function(q,
k){if(k){var E=k.length;K.forEach(q,function(N){K.forEach(k,function(l){N.name===l.fieldObj.name&&N.type===l.fieldObj.type&&E--})},this)}return 0===E?!0:!1},_mergeActions:function(q,k){for(var E=0;E<q.length;E++)for(var N=0;N<k.length;N++)if(k[N].filter&&k[N].actionName===q[E].actionName){q[E]=y.clone(k[N]);break}return q},_mergeFieldValidations:function(q){var k={};K.forEach(q,function(E){for(var N in E)k.hasOwnProperty(N)?k[N]=this._mergeActions(k[N],E[N]):k[N]=y.clone(E[N])},this);return k},_getLayersFieldValidations:function(q,
k,E){K.forEach(k,function(N){N.featureLayer&&N.featureLayer.id===E&&N.fieldValidations&&(q||(q=[]),q.push(N.fieldValidations));N.relationshipInfos&&(q=this._getLayersFieldValidations(q,N.relationshipInfos,E))},this);return q},_getPartsInExpression:function(q,k){k&&K.forEach(k,y.hitch(this,function(E){E.parts?this._getPartsInExpression(q,E.parts):q.push(E)}));return q},_createLayerDetails:function(q){var k;var E=null;this.filterInfo&&this.filterInfo.filter&&(k=this._getPartsInExpression([],this.filterInfo.filter.parts));
E={};var N={};K.forEach(this._totalLayers,function(l){if(!l.isTable||l.isTable&&0<l.layerObject.relationships.length){var z=[];var L=!1;var R={};L=this._jimuLayerInfos.getLayerOrTableInfoById(l.id);R.allFields=L.layerObject.fields;L&&(L=this.editUtils.getConfigInfo(L,{}),R.fieldInfos=L.fieldInfos);L=this._validateIfLayerHaveUsedFields(R.allFields,k);R&&R.fieldInfos&&(L||!k)&&(z=this._getLayersFieldValidations(z,this._configInfos,l.id),R.fieldValidations=this._mergeFieldValidations(z),E[l.id]={},N[l.id]=
{},K.forEach(R.fieldInfos,function(Q){var V=M.getDefaultPortalFieldInfo(Q);"esriFieldTypeGeometry"!==Q.type&&"esriFieldTypeOID"!==Q.type&&"esriFieldTypeBlob"!==Q.type&&"esriFieldTypeGlobalID"!==Q.type&&"esriFieldTypeRaster"!==Q.type&&"esriFieldTypeXML"!==Q.type&&(N[l.id][Q.name]=V.label,E[l.id][Q.name]=q&&q[l.id]&&q[l.id][Q.name]?q[l.id][Q.name]:{Hide:!1,Required:!1,Disabled:!1},R.fieldValidations&&R.fieldValidations[Q.name]?(V=this._getPriorites(R.fieldValidations[Q.name]),E[l.id][Q.name].Priority=
V.Priority,E[l.id][Q.name].ExistingExpressions=V.ExistingExpressions):(E[l.id][Q.name].Priority=["Hide","Required","Disabled"],E[l.id][Q.name].ExistingExpressions=[]))},this))}},this);return{layerDetails:E,fieldLabels:N}},_getPriorites:function(q){var k=[],E={};K.forEach(q,function(N){k.push(N.actionName);N.filter&&N.filter.displaySQL&&(!N.filter.hasOwnProperty("smartActionGroupName")||!this.prevName||N.filter.hasOwnProperty("smartActionGroupName")&&this.prevName&&this.prevName!==N.filter.smartActionGroupName)&&
(E[N.actionName]=N.filter.displaySQL)},this);return{Priority:k,ExistingExpressions:E}},_getVaidationForAction:function(q,k){var E=null;K.some(q,function(N){if(N.actionName===k&&N.filter&&N.filter.displaySQL)return E=N,!0});return E},_applysettingsToField:function(q,k){var E=[];E=this._getLayersFieldValidations(E,this._configInfos,q);var N=k.appliedOn[q];for(var l=0;l<E.length;l++){var z=E[l];if(z)for(var L in N){for(var R=N[L],Q=[],V=!1,W=0;W<R.Priority.length;W++){var Y=R.Priority[W],I={};I.actionName=
Y;I.submitWhenHidden=!1;if(R[Y])V=!0,"Hide"===Y&&(I.submitWhenHidden=k.submitWhenHidden),I.expression=k.filterInfo.expression,I.filter=y.clone(k.filterInfo).filter,I.filter.smartActionGroupName=k.name,this._removeSettingsFromOtherGroups(k.name,q,L,Y);else if(z&&z[L]){var P=this._getVaidationForAction(z[L],Y);P&&P.filter&&!R[Y]&&P.filter.hasOwnProperty("smartActionGroupName")&&P.filter.smartActionGroupName===this.prevName?V=!0:P&&(I.expression=P.filter.expr,I.filter=P.filter)}Q.push(I)}V&&(z||(z={}),
z[L]=Q)}}},_removePrevSettingsFromLayerFields:function(q){var k=[];if(k=this._getLayersFieldValidations(k,this._configInfos,q))for(var E=0;E<k.length;E++)if(q=k[E])for(var N in q)q&&q[N]&&K.forEach(q[N],function(l){l&&l.filter&&l.filter.hasOwnProperty("smartActionGroupName")&&l.filter.smartActionGroupName===this.prevName&&(l.submitWhenHidden=!1,l.hasOwnProperty("expression")&&delete l.expression,delete l.filter)},this)},_removeSettingsFromOtherGroups:function(q,k,E,N){var l;if(this.existingGroups)for(var z in this.existingGroups)z!==
q&&z!==this.prevName&&(l=this.existingGroups[z].appliedOn)&&l.hasOwnProperty(k)&&l[k].hasOwnProperty(E)&&l[k][E].hasOwnProperty(N)&&(l[k][E][N]=!1)},_applySettingsInLayer:function(q){for(var k in q.appliedOn){if(this._prevAppliedOnLayers&&-1<this._prevAppliedOnLayers.indexOf(k)){var E=this._prevAppliedOnLayers.indexOf(k);this._prevAppliedOnLayers.splice(E,1)}this._applysettingsToField(k,q)}this.deleteGroup()},deleteGroup:function(){this._prevAppliedOnLayers&&K.forEach(this._prevAppliedOnLayers,function(q){this._removePrevSettingsFromLayerFields(q)},
this)}})})},"widgets/SmartEditor/utils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array esri/geometry/Extent jimu/utils esri/dijit/AttributeInspector".split(" "),function(F,J,y,K,t,a){var f={};f.ATI=F([a],{constructor:function(){this._aiConnects=[];this._selection=[];this._toolTips=[]}});f.checkIfFieldAliasAlreadyExists=function(b,c){return 0<=b.split(",").indexOf(c)};f.pointToExtent=function(b,c,h){var n=b.extent.getWidth()/b.width;h*=n;return new K(c.x-h,c.y-h,c.x+h,c.y+h,
b.spatialReference)};f.filterOnlyUpdatedAttributes=function(b,c,h){if(null===c||void 0===c)return b;var n={},p;for(p in b)b.hasOwnProperty(p)&&(p===h.objectIdField||p===h.globalIdField?n[p]=b[p]:(null!==b[p]||""!==c[p])&&b[p]!==c[p]&&(n[p]=b[p]));return n};f.mergeFieldInfosWithConfiguration=function(b,c){var h=[],n=this.getDefaultEditableFieldInfos(b,!1);c&&c.fieldInfos?(y.forEach(c.fieldInfos,function(G){y.some(n,function(D){if(G.fieldName===D.fieldName)return h.push(this.mergeLastToFirst(D,G)),
!0},this)},this),y.forEach(n,function(G){0===y.filter(h,function(D){return D.fieldName===G.fieldName},this).length&&h.push(G)},this)):h=n;var p=[];b.layerObject.hasOwnProperty("globalIdField")&&void 0!==b.layerObject.globalIdField&&null!==b.layerObject.globalIdField&&p.push(b.layerObject.globalIdField);b.layerObject.hasOwnProperty("objectIdField")&&void 0!==b.layerObject.objectIdField&&null!==b.layerObject.objectIdField&&p.push(b.layerObject.objectIdField);if(b.layerObject.hasOwnProperty("editFieldsInfo")&&
void 0!==b.layerObject.editFieldsInfo&&null!==b.layerObject.editFieldsInfo)for(var v in b.layerObject.editFieldsInfo)b.layerObject.editFieldsInfo.hasOwnProperty(v)&&p.push(b.layerObject.editFieldsInfo[v]);return h=h.filter(function(G){return-1!==y.indexOf(p,G.fieldName)?!1:G.isEditableOnLayer})};f.getDefaultEditableFieldInfos=function(b,c){var h=[],n=this.getFieldInfosFromWebmap(b);b=this.getFieldInfosLayer(b);if(void 0===n||null===n)n=b;else{var p=[];y.forEach(b,function(v){0===y.filter(n,function(G){return G.name===
v.fieldName}).length&&(v.isEditableOnLayer=v.editable,p.push(v))});0<p.length&&(n=n.concat(p))}y.forEach(n,function(v){!1===v.hasOwnProperty("isEditableOnLayer")&&(v.isEditableOnLayer=v.editable);!1===v.editable&&(v.isEditable=v.editable);!1===v.isEditable&&(v.editable=v.isEditable);!0===v.editable&&(v.visible=!0);v.fieldName=v.name;!0===v.editable&&!0===c?h.push(J.clone(v)):!1===c&&h.push(J.clone(v))});return h};f.updatePopupDateFormat=function(b){var c={shortDate:{datePattern:"M/d/y"},shortDateLE:{datePattern:"d/M/y"},
longMonthDayYear:{datePattern:"MMMM d, y"},dayShortMonthYear:{datePattern:"d MMM y"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",timeEnabled:!0},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",timeEnabled:!0},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",timeEnabled:!0},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",timeEnabled:!0},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",
timeEnabled:!0},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",timeEnabled:!0},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",timeEnabled:!0},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",timeEnabled:!0},longMonthYear:{datePattern:"MMMM y"},shortMonthYear:{datePattern:"MMM y"},year:{datePattern:"y"}},h="",n;for(n in c)if(t.isEqual(b,c[n])){h=n;break}return h};f.getFieldInfosFromWebmap=function(b){var c=null,h=b.getPopupInfo();h&&h.fieldInfos&&(c=
[],y.forEach(h.fieldInfos,function(n){y.some(b.layerObject.fields,function(p){if(p.name===n.fieldName)return p=this.mergeFirstToLast(n,p),p.format&&p.format.dateFormat&&(p.format.dateFormat.hasOwnProperty("datePattern")||p.format.dateFormat.hasOwnProperty("timePattern"))&&(p.format.dateFormat=this.updatePopupDateFormat(p.format.dateFormat)),p.format&&p.format.dateFormat&&p.format.dateFormat.toLowerCase()&&0<=p.format.dateFormat.toLowerCase().indexOf("time")&&(p.format.time=!0),c.push(p),!0},this)},
this));return c};f.getFieldInfosLayer=function(b){var c=[];b&&b.layerObject&&y.forEach(b.layerObject.fields,function(h){var n=t.getDefaultPortalFieldInfo(h);n=this.mergeFirstToLast(n,h);n.format&&n.format.dateFormat&&(n.format.dateFormat.hasOwnProperty("datePattern")||n.format.dateFormat.hasOwnProperty("timePattern"))&&(n.format.dateFormat=this.updatePopupDateFormat(n.format.dateFormat));n.format&&n.format.dateFormat&&n.format.dateFormat.toLowerCase()&&0<=n.format.dateFormat.toLowerCase().indexOf("time")&&
(n.format.time=!0);n.visible=!0;c.push(n)},this);return c};f.getConfigInfos=function(b,c,h,n,p){var v=[],G=b.getLayerInfoArrayOfWebmap(),D=[];p&&(D=b.getTableInfoArrayOfWebmap(),G=G.concat(D));y.forEach(G,function(e){var g=!1;"Table"!==e.layerObject.type&&"Feature Layer"!==e.layerObject.type||!e.layerObject.url||(e.layerObject.isEditable&&e.layerObject.isEditable()&&h?g=!0:void 0!==h&&!1===h&&(g=!0));if(!0===g){var x=this.getConfigInfo(e,c);x.layerInfo=e;!0===x.featureLayer.layerAllowsDelete&&!1===
x.featureLayer.layerAllowsCreate&&!1===x.featureLayer.layerAllowsUpdate?console.warn(x.layerInfo.title+" delete only not supported"):n&&!0===n?!0===y.some(c,function(B){return B.featureLayer.id===x.featureLayer.id})&&v.push(x):v.push(x)}},this);return v};f.getConfigInfo=function(b,c){var h=null,n=this.createDefaultConfigInfo(b);!1===y.some(c,function(p){return p.featureLayer&&p.featureLayer.id===b.layerObject.id?(h=J.clone(p),h.fieldInfos=this.mergeFieldInfosWithConfiguration(b,h),h=this.mergeDefaultWithConfig(h,
n),!0):!1},this)&&(h=n);return h};f.mergeDefaultWithConfig=function(b,c){b.featureLayer=c.featureLayer;!0===b.allowDelete&&!1===b.featureLayer.layerAllowsDelete&&(b.allowDelete=!1);!1===b.disableGeometryUpdate&&!1===b.featureLayer.layerAllowGeometryUpdates&&(b.disableGeometryUpdate=!0);!1===b.featureLayer.layerAllowsCreate&&!0===b.featureLayer.layerAllowsUpdate&&(b.allowUpdateOnly=!0);return b};f.createDefaultConfigInfo=function(b){var c=!1,h=!1,n=!1,p=!1;try{var v=b.layerObject.getEditCapabilities();
v.canCreate&&(c=!0);v.canUpdate&&(p=h=!0);v.canDelete&&(n=!0)}catch(G){b.layerObject.hasOwnProperty("capabilities")&&(-1===String(b.layerObject.capabilities).indexOf("Update")&&-1===String(b.layerObject.capabilities).indexOf("Delete")&&-1===String(b.layerObject.capabilities).indexOf("Create")&&-1!==String(b.layerObject.capabilities).indexOf("Editing")?c=n=h=!0:(-1!==String(b.layerObject.capabilities).indexOf("Update")&&(p=h=!0),-1!==String(b.layerObject.capabilities).indexOf("Delete")&&(n=!0),-1!==
String(b.layerObject.capabilities).indexOf("Create")&&(c=!0)))}b.layerObject.hasOwnProperty("allowGeometryUpdates")&&(p=b.layerObject.allowGeometryUpdates);"Table"===b.layerObject.type&&b.layerObject.url&&b.getCapabilitiesOfWebMap()&&(h=b.getCapabilitiesOfWebMap(),b.layerObject.isEditable&&b.layerObject.isEditable()&&h&&-1<h.toLowerCase().indexOf("editing")?h=!0:n=h=c=!1,p=!1);p=p&&h;return{featureLayer:{id:b.layerObject.id,layerAllowsCreate:c,layerAllowsUpdate:h,layerAllowsDelete:n,layerAllowGeometryUpdates:p},
disableGeometryUpdate:!p,allowUpdateOnly:!c,allowDelete:!1,fieldInfos:this.mergeFieldInfosWithConfiguration(b,null),_editFlag:c||h?!0:!1}};f.mergeLastToFirst=function(){for(var b={},c=0,h=arguments.length,n;c<h;c++)for(n in arguments[c])arguments[c].hasOwnProperty(n)&&(b[n]=arguments[c][n]);return b};f.mergeFirstToLast=function(){for(var b={},c=arguments.length-1,h;0<=c;c--)for(h in arguments[c])arguments[c].hasOwnProperty(h)&&(b[h]=arguments[c][h]);return b};f.isObjectEmpty=function(b){if(b)for(var c in b)if(b.hasOwnProperty(c))return!1;
return!0};f.addDateTimeFormat=function(b){b&&b.format&&null!==b.format&&b.format.dateFormat&&null!==b.format.dateFormat&&0<=b.format.dateFormat.toString().toUpperCase().indexOf("TIME")&&(b.format.time=!0)};f.isDuplicateGroupName=function(b,c){var h=!1;y.some(c,J.hitch(this,function(n){if(b.toLowerCase()===n.toLowerCase())return h=!0}));return h};return f})},"esri/dijit/AttributeInspector":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/sniff dojo/_base/kernel dojo/has dojo/dom-style dojo/dom-construct ../kernel ../lang ../domUtils ../layers/InheritedDomain ../layers/FeatureLayer dojo/i18n!../nls/jsapi dojo/fx dojox/gfx dijit/_Widget dijit/_Templated dijit/Editor dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/TextColor ./_EventedWidget ./editing/AttachmentEditor ./editing/Util ../tasks/query dijit/form/DateTextBox dijit/form/TextBox dijit/form/NumberTextBox dijit/form/FilteringSelect dijit/form/NumberSpinner dijit/form/Button dijit/form/SimpleTextarea dijit/form/ValidationTextBox dijit/form/TimeTextBox dijit/Tooltip dojo/data/ItemFileReadStore dojox/date/islamic dojox/date/islamic/Date dojox/date/islamic/locale dojo/text!./templates/AttributeInspector.html".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S,q,k,E,N,l,z,L,R,Q,V,W,Y,I,P,X){var A=F([C,x,B],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:!0,templateString:X,onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},_navMessage:"( ${idx} ${of} ${numFeatures} )",_currentAttributeFieldName:null,_aiConnects:[],_selection:[],_toolTips:[],_numFeatures:0,_featureIdx:0,_currentLInfo:null,_currentFeature:null,
_rollbackInfo:null,_eventMap:{update:!0,"delete":["feature"],"attribute-change":["feature","fieldName","fieldValue"],next:["feature"],reset:!0,cancel:!0},_defaultRichTextPlugins:"bold italic underline foreColor hiliteColor | justifyLeft justifyCenter justifyRight justifyFull | insertOrderedList insertUnorderedList indent outdent | createLink".split(" "),css:{label:"atiLabel",field:"atiField",textArea:"atiTextAreaField",richText:"atiRichTextField",attachmentEditor:"atiAttachmentEditor",red:"atiRequiredField"},
constructor:function(r,w){J.mixin(this,D.widgets.attributeInspector);r=r||{};r.featureLayer||r.layerInfos||console.error("esri.AttributeInspector: please provide correct parameter in the constructor");this._datePackage=this._getDatePackage(r);this._layerInfos=r.layerInfos||[{featureLayer:r.featureLayer,options:r.options||[]}];this._layerInfos=y.filter(this._layerInfos,function(H){return!H.disableAttributeUpdate});this._hideNavButtons=r.hideNavButtons||!1},postCreate:function(){if(y.every(this._layerInfos,
function(w){return w.featureLayer.loaded}))this._initLayerInfos(),this._createAttachmentEditor(),this.onFirstFeature();else{var r=this._layerInfos.length;y.forEach(this._layerInfos,function(w){w=w.featureLayer;if(w.loaded)r--;else var H=K.connect(w,"onLoad",this,function(T){K.disconnect(H);H=null;r--;r||(this._initLayerInfos(),this._createAttachmentEditor(),this.onFirstFeature())})},this)}},destroy:function(){this._destroyAttributeTable();y.forEach(this._aiConnects,K.disconnect);delete this._aiConnects;
this._attachmentEditor&&(this._attachmentEditor.destroy(),delete this._attachmentEditor);delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments)},refresh:function(){this._updateSelection()},first:function(){this.onFirstFeature()},last:function(){this.onLastFeature()},next:function(){this.onNextFeature()},previous:function(){this.onPreviousFeature()},showFeature:function(r,w){w&&(this._createOnlyFirstTime=!0);
this._updateSelection([r],w);this._updateUI()},onLayerSelectionChange:function(r,w,H){this._createOnlyFirstTime=!1;this._featureIdx=H===G.SELECTION_NEW?0:this._featureIdx;this._updateSelection();this._updateUI()},onLayerSelectionClear:function(){!this._selection||0>=this._selection.length||(this._featureIdx=this._numFeatures=0,this._selection=[],this._currentLInfo=this._currentFeature=null,this._updateUI())},onLayerUpdateEnd:function(r,w,H,T){},onLayerError:function(r,w,H,T){},onLayerEditsError:function(r,
w,H,T){},onLayerEditsComplete:function(r,w,H,T){T=T||[];if(T.length){var U=this._selection,Z=r.featureLayer.objectIdField;y.forEach(T,J.hitch(this,function(fa){y.some(U,J.hitch(this,function(ca,ea){if(ca.attributes[Z]!==fa.objectId)return!1;this._selection.splice(ea,1);return!0}))}))}w=w||[];w.length&&(this._selection=M.findFeatures(w,r.featureLayer),this._featureIdx=0);T=this._numFeatures=(this._selection=M.sortFeaturesById(this._layerInfos,this._selection))?this._selection.length:0;if(w.length){if(w=
T?this._selection[this._featureIdx]:null)T=w.getLayer().getEditCapabilities(),T.canCreate&&!T.canUpdate||this._showFeature(w);this._updateUI()}H=H||[];if(H.length){var aa=this._rollbackInfo;y.forEach(H,function(fa){var ca=M.findFeatures(H,r.featureLayer)[0];if(!fa.success&&ca.attributes[r.featureLayer.objectIdField]===fa.objectId&&aa){var ea=aa.field;fa=aa.graphic.attributes[ea.name];var ba=y.filter(this._currentLInfo.fieldInfos,function(ja){return ja.fieldName===ea.name},this)[0].dijit;ca.attributes[ea.name]=
fa;"esriFieldTypeDate"===ea.type&&(fa=new Date(fa));this._setValue(ba,fa)}},this)}this._rollbackInfo=null},onFieldValueChange:function(r,w){var H=r.field,T=r.dijit,U=this._currentFeature,Z=this._currentLInfo,aa=H.name;r=this._isFieldRequired(H,r);if(""===T.displayedValue||"dijit.form.ValidationTextBox"!==T.declaredClass||T.isValid())if(""!==T.displayedValue&&T.displayedValue!==w&&T.isValid&&!T.isValid())this._setValue(T,U.attributes[H.name]);else{var fa=!("esriFieldTypeInteger"!==H.type&&"esriFieldTypeSmallInteger"!==
H.type&&"esriFieldTypeSingle"!==H.type&&"esriFieldTypeDouble"!==H.type);if(r&&(null===w||""===w||"undefined"===typeof w||fa&&isNaN(w))){aa=U.attributes[H.name];if("esriFieldTypeDate"===H.type&&(aa=new Date(aa),T instanceof Array)){this._setValue(T[0],aa);this._setValue(T[1],aa);return}this._setValue(T,aa)}else{if(fa){if(isNaN(w)||""===w)w=null;fa&&null!==w&&(w=Number(w))}"esriFieldTypeDate"===H.type&&(T instanceof Array?(w=T[0].getValue(),T=T[1].getValue(),w=w&&T?new Date(w.getFullYear(),w.getMonth(),
w.getDate(),T.getHours(),T.getMinutes(),T.getSeconds(),T.getMilliseconds()):w||T||null):(w=T.getValue(),H.domain&&(w=Number(w))),w=w&&w.getTime?w.getTime():w&&w.toGregorian?w.toGregorian().getTime():w);if(this._currentFeature.attributes[H.name]!==w){if(aa===Z.typeIdField){var ca=this._findFirst(Z.types,"id",w);y.forEach(Z.fieldInfos,function(ea){(H=ea.field)&&H.name!==Z.typeIdField&&(ea=ea.dijit,this._setFieldDomain(ea,ca,H)&&ea&&(this._setValue(ea,U.attributes[H.name]+""),!1===ea.isValid()&&this._setValue(ea,
null)))},this)}this.onAttributeChange(U,aa,w)}}}else this._setValue(T,U.attributes[H.name])},onDeleteBtn:function(r){this._deleteFeature()},onNextFeature:function(r){this._onNextFeature(1)},onPreviousFeature:function(r){this._onNextFeature(-1)},onFirstFeature:function(r){this._onNextFeature(-1*this._featureIdx)},onLastFeature:function(r){this._onNextFeature(this._numFeatures-1-this._featureIdx)},_initLayerInfos:function(){var r=this._layerInfos;this._editorTrackingInfos={};y.forEach(r,this._initLayerInfo,
this)},_initLayerInfo:function(r){var w=r.featureLayer,H;this._userIds={};var T=w.id;w.credential&&(this._userIds[T]=w.credential.userId);r.userId&&(this._userIds[T]=r.userId);this._connect(w,"onSelectionComplete",J.hitch(this,"onLayerSelectionChange",r));this._connect(w,"onSelectionClear",J.hitch(this,"onLayerSelectionClear",r));this._connect(w,"onEditsComplete",J.hitch(this,"onLayerEditsComplete",r));this._connect(w,"error",J.hitch(this,"onLayerError",r));this._connect(w,"onUpdateEnd",J.hitch(this,
"onLayerUpdateEnd",r));r.showAttachments=w.hasAttachments?n.isDefined(r.showAttachments)?r.showAttachments:!0:!1;r.hideFields=r.hideFields||[];r.htmlFields=r.htmlFields||[];r.isEditable=w.isEditable()?n.isDefined(r.isEditable)?r.isEditable:!0:!1;r.typeIdField=w.typeIdField;r.layerId=w.id;r.types=w.types;w.globalIdField&&((H=this._findFirst(r.fieldInfos,"fieldName",w.globalIdField))||r.showGlobalID||r.hideFields.push(w.globalIdField));(T=this._findFirst(r.fieldInfos,"fieldName",w.objectIdField))||
r.showObjectID||r.hideFields.push(w.objectIdField);var U=this._getFields(r.featureLayer);if(U){var Z=r.fieldInfos||[];Z=y.map(Z,function(aa){return J.mixin({},aa)});Z.length?r.fieldInfos=y.filter(y.map(Z,J.hitch(this,function(aa){var fa=aa.stringFieldOption||(this._isInFields(aa.fieldName,r.htmlFields)?A.STRING_FIELD_OPTION_RICHTEXT:A.STRING_FIELD_OPTION_TEXTBOX);return J.mixin(aa,{field:this._findFirst(U,"name",aa.fieldName),stringFieldOption:fa})})),"return item.field;"):(U=y.filter(U,J.hitch(this,
function(aa){return!this._isInFields(aa.name,r.hideFields)})),r.fieldInfos=y.map(U,J.hitch(this,function(aa){var fa=this._isInFields(aa.name,r.htmlFields)?A.STRING_FIELD_OPTION_RICHTEXT:A.STRING_FIELD_OPTION_TEXTBOX;return{fieldName:aa.name,field:aa,stringFieldOption:fa}})));r.showGlobalID&&!H&&Z.push(this._findFirst(U,"name",w.globalIdField));r.showObjectID&&!T&&Z.push(this._findFirst(U,"name",w.objectIdField));H=[];w.editFieldsInfo&&(w.editFieldsInfo.creatorField&&H.push(w.editFieldsInfo.creatorField),
w.editFieldsInfo.creationDateField&&H.push(w.editFieldsInfo.creationDateField),w.editFieldsInfo.editorField&&H.push(w.editFieldsInfo.editorField),w.editFieldsInfo.editDateField&&H.push(w.editFieldsInfo.editDateField));this._editorTrackingInfos[w.id]=H}},_createAttachmentEditor:function(){this._attachmentEditor=null;var r=y.filter(this._layerInfos,function(w){return w.showAttachments});r&&r.length&&(this._attachmentEditor=new O({"class":this.css.attachmentEditor},this.attachmentEditor),this._attachmentEditor.startup())},
_setCurrentLInfo:function(r){var w=this._currentLInfo?this._currentLInfo.featureLayer:null,H=r.featureLayer;if(w&&w.id===H.id&&!w.ownershipBasedAccessControlForFeatures&&(w=H.getEditCapabilities(),!w.canCreate||w.canUpdate))return;this._currentLInfo=r;this._createTable()},_updateSelection:function(r,w){this._selection=r||[];y.forEach(this._layerInfos,this._getSelection,this);this._selection=M.sortFeaturesById(this._layerInfos,this._selection);this._numFeatures=this._selection.length;this._showFeature(this._numFeatures?
this._selection[this._featureIdx]:null,w)},_getSelection:function(r){r=r.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(r)},_updateUI:function(){var r=this._numFeatures,w=this._currentLInfo;this.layerName.innerHTML=w&&0!==r?w.featureLayer?w.featureLayer.name:"":this.NLS_noFeaturesSelected;b.set(this.attributeTable,"display",r?"":"none");b.set(this.editButtons,"display",r?"":"none");b.set(this.navButtons,"display",!this._hideNavButtons&&1<r?"":"none");this.navMessage.innerHTML=
n.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);this._attachmentEditor&&b.set(this._attachmentEditor.domNode,"display",w&&w.showAttachments&&r?"":"none");b.set(this.deleteBtn.domNode,"display",w&&!1===w.showDeleteButton||!this._canDelete?"none":"");this.domNode.parentNode&&0<this.domNode.parentNode.scrollTop&&(this.domNode.parentNode.scrollTop=0)},_onNextFeature:function(r){this._featureIdx+=r;0>this._featureIdx?this._featureIdx=this._numFeatures-
1:this._featureIdx>=this._numFeatures&&(this._featureIdx=0);r=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(r);this._updateUI();this.onNext(r)},_deleteFeature:function(){this.onDelete(this._currentFeature)},_showFeature:function(r,w){if(r){this._currentFeature=r;w=w?w:r.getLayer();var H=w.getEditCapabilities({feature:r,userId:this._userIds[w.id]});this._canUpdate=H.canUpdate;this._canDelete=H.canDelete;if(H=this._getLInfoFromFeatureLayer(w)){this._setCurrentLInfo(H);
var T=r.attributes,U=this._findFirst(H.types,"id",T[H.typeIdField]),Z=null;y.forEach(H.fieldInfos,function(aa){Z=aa.field;var fa=[];aa.dijit&&1<aa.dijit.length?y.forEach(aa.dijit,function(ca){fa.push(ca)}):fa.push(aa.dijit);y.forEach(fa,J.hitch(this,function(ca){if(ca){var ea=this._setFieldDomain(ca,U,Z),ba=T[Z.name];ba=ba&&ea&&ea.codedValues&&ea.codedValues.length?ea.codedValues[ba]?ea.codedValues[ba].name:ba:ba;n.isDefined(ba)||(ba="");"dijit.form.DateTextBox"===ca.declaredClass||"dijit.form.TimeTextBox"===
ca.declaredClass?ba=""===ba?null:new Date(ba):"dijit.form.FilteringSelect"===ca.declaredClass&&(ca._lastValueReported=null,ba=T[Z.name]+"");try{this._setValue(ca,ba),"dijit.form.FilteringSelect"===ca.declaredClass&&!1===ca.isValid()&&this._setValue(ca,null)}catch(ja){ca.set("displayedValue",this.NLS_errorInvalid,!1)}}}))},this);this._attachmentEditor&&H.showAttachments&&this._attachmentEditor.showAttachments(this._currentFeature,w);(r=w.getEditSummary(r))?(this.editorTrackingInfoDiv.innerHTML=r,p.show(this.editorTrackingInfoDiv)):
p.hide(this.editorTrackingInfoDiv)}}},_setFieldDomain:function(r,w,H){if(!r)return null;var T=H.domain;w&&w.domains&&w.domains[H.name]&&!1===w.domains[H.name]instanceof v&&(T=w.domains[H.name]);if(!T)return null;T.codedValues&&0<T.codedValues.length?(r.set("store",this._toStore(y.map(T.codedValues,function(U){return{id:U.code+="",name:U.name}}))),this._setValue(r,T.codedValues[0].code)):(r.constraints={min:n.isDefined(T.minValue)?T.minValue:Number.MIN_VALUE,max:n.isDefined(T.maxValue)?T.maxValue:
Number.MAX_VALUE},this._setValue(r,r.constraints.min));return T},_setValue:function(r,w){r.set&&(r._onChangeActive=!1,r.set("value",w,!0),r._onChangeActive=!0)},_getFields:function(r){var w=r._getOutFields();if(!w)return null;r=r.fields;return"*"==w?r:y.filter(y.map(w,J.hitch(this,"_findFirst",r,"name")),n.isDefined)},_isInFields:function(r,w){return r&&(w||w.length)?y.some(w,function(H){return H.toLowerCase()===r.toLowerCase()}):!1},_isFieldNullable:function(r,w){return!(!1===r.nullable||w.field&&
!1===w.field.nullable)},_isFieldRequired:function(r,w){return!1!==r.editable&&!1!==w.isEditable&&!this._isFieldNullable(r,w)},_findFirst:function(r,w,H){return(r=y.filter(r,function(T){return T.hasOwnProperty(w)&&T[w]===H}))&&r.length?r[0]:null},_getLInfoFromFeatureLayer:function(r){return this._findFirst(this._layerInfos,"layerId",r?r.id:null)},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=c.create("table",{cellspacing:"0",cellpadding:"0"},
this.attributeTable);var r=c.create("tbody",null,this._attributes),w=this._currentLInfo,H=this._findFirst(w.types,"id",this._currentFeature.attributes[w.typeIdField]);y.forEach(w.fieldInfos,J.hitch(this,"_createField",H,r),this);this._createOnlyFirstTime=!1},_createField:function(r,w,H){var T=this._currentLInfo,U=H.field;if(!this._isInFields(U.name,T.hideFields)&&!this._isInFields(U.name,this._editorTrackingInfos[T.featureLayer.id])){var Z=!1,aa;w=c.create("tr",null,w);var fa=c.create("td",{innerHTML:H.label||
U.alias||U.name,"class":this.css.label,"data-fieldname":U.name},w);this._isFieldRequired(U,H)&&c.create("span",{"class":this.css.red,innerHTML:" *"},fa);w=c.create("td",null,w);if(H.customField){c.place(H.customField.domNode||H.customField,c.create("div",null,w),"first");var ca=H.customField}else if(!1===T.isEditable||!1===U.editable||!1===H.isEditable||"esriFieldTypeOID"===U.type||"esriFieldTypeGlobalID"===U.type||!this._canUpdate&&!this._createOnlyFirstTime)Z=!0;T=T.typeIdField&&U.name.toLowerCase()==
T.typeIdField.toLowerCase();fa=!!this._getDomainForField(U,r);!ca&&T?ca=this._createTypeField(U,H,w):!ca&&fa&&(ca=this._createDomainField(U,H,r,w));if(!ca)switch(U.type){case "esriFieldTypeString":ca=this._createStringField(U,H,w);break;case "esriFieldTypeDate":ca=this._createDateField(U,H,w);H.format&&H.format.time&&(aa=this._createTimeField(U,H,w));break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":ca=this._createIntField(U,H,w);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":ca=
this._createFltField(U,H,w);break;default:ca=this._createStringField(U,H,w)}H.tooltip&&H.tooltip.length&&this._toolTips.push(new V({connectId:[ca.id],label:H.tooltip}));ca.onChange=J.hitch(this,"onFieldValueChange",H);ca.set("disabled",Z);aa?(H.dijit=[ca,aa],aa.onChange=J.hitch(this,"onFieldValueChange",H),aa.set("disabled",Z)):H.dijit=ca}},_createTypeField:function(r,w,H){H=c.create("div",null,H);var T=r.domain;return T&&"range"===T.type&&T.minValue===T.maxValue?new R({"class":this.css.field,trim:!0,
maxLength:r.length,name:r.alias||r.name,required:this._isFieldRequired(r,w)},H):new N({"class":this.css.field,name:r.alias||r.name,required:this._isFieldRequired(r,w),store:this._toStore(y.map(this._currentLInfo.types,function(U){return{id:U.id,name:U.name}})),searchAttr:"name"},H)},_getDomainForField:function(r,w){var H=r.domain;(r=r.name)&&w&&w.domains&&w.domains[r]&&!1===w.domains[r]instanceof v&&(H=w.domains[r]);return H||null},_createDomainField:function(r,w,H,T){H=this._getDomainForField(r,
H);T=c.create("div",null,T);return H.codedValues?new N({"class":this.css.field,name:r.alias||r.name,searchAttr:"name",required:this._isFieldRequired(r,w)},T):new l({"class":this.css.field},T)},_createStringField:function(r,w,H){H=c.create("div",null,H);var T={trim:!0,maxLength:r.length,required:this._isFieldRequired(r,w)};if(w.stringFieldOption===A.STRING_FIELD_OPTION_TEXTAREA)return T["class"]=this.css.field+" "+this.css.textArea,new L(T,H);if(w.stringFieldOption===A.STRING_FIELD_OPTION_RICHTEXT)return T["class"]=
this.css.field+" "+this.css.richText,T.height="100%",T.width="100%",T.plugins=w.richTextPlugins||this._defaultRichTextPlugins,H=new d(T,H),H.startup(),H;var U=this;T.validator=function(Z,aa){this._maskValidSubsetError=!1;this._hasBeenBlurred=!0;return U._isFieldNullable(r,w)||!(""===Z||null===Z)};return new R(T,H)},_createTimeField:function(r,w,H){H=c.create("div",null,H);r={"class":this.css.field,trim:!0,required:this._isFieldRequired(r,w),constraints:{formatLength:"medium"}};this._datePackage&&
(r.datePackage=this._datePackage);return new Q(r,H)},_createDateField:function(r,w,H){H=c.create("div",null,H);r={"class":this.css.field,trim:!0,required:this._isFieldRequired(r,w)};this._datePackage&&(r.datePackage=this._datePackage);return new q(r,H)},_createIntField:function(r,w,H){H=c.create("div",null,H);return new E({"class":this.css.field,constraints:"esriFieldTypeSmallInteger"===r.type?{min:-32768,max:32767,places:0}:{places:0},trim:!0,invalidMessage:this.NLS_validationInt,required:this._isFieldRequired(r,
w)},H)},_createFltField:function(r,w,H){H=c.create("div",null,H);return new E({"class":this.css.field,constraints:{max:Infinity,min:-Infinity,places:"0,20"},trim:!0,invalidMessage:this.NLS_validationFlt,required:this._isFieldRequired(r,w)},H)},_toStore:function(r){return new W({data:{identifier:"id",label:"name",items:r}})},_connect:function(r,w,H){this._aiConnects.push(K.connect(r,w,H))},_getDatePackage:function(r){return null===r.datePackage?null:r.datePackage?r.datePackage:"ar"===a.locale?"dojox.date.islamic":
null},_destroyAttributeTable:function(){y.forEach(this._layerInfos,function(r){y.forEach(r.fieldInfos,function(w){var H=w.dijit;if(H){H._onChangeHandle=null;if(w.customField)return;H instanceof Array?y.forEach(H,J.hitch(this,function(T){T.destroyRecursive?T.destroyRecursive():T.destroy&&T.destroy();T._onChangeHandle=null})):H.destroyRecursive?H.destroyRecursive():H.destroy&&H.destroy()}w.dijit=null},this)},this);y.forEach(this._toolTips,function(r){r.destroy()});this._toolTips=[];this._attributes&&
c.destroy(this._attributes)}});J.mixin(A,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});f("extend-esri")&&J.setObject("dijit.AttributeInspector",A,h);return A})},"esri/dijit/editing/AttachmentEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/kernel dojo/has dojo/query dojo/io-query dojo/dom-attr dijit/_Widget dijit/_Templated dijit/ProgressBar ../../kernel ../../lang ../../domUtils dojo/text!./templates/AttachmentEditor.html dojo/i18n!../../nls/jsapi dojo/NodeList-dom".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g){F=F([h,n],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:!0,templateString:e,_listHtml:"\x3cspan id\x3d'node_${oid}_${attid}' style\x3d'display: flex;'\x3e\x3ca href\x3d'${href}' target\x3d'_blank'\x3e${name}\x3c/a\x3e",_deleteBtnHtml:"\x3cspan style\x3d'cursor:pointer;color:red;font-weight:bold;padding:0 2px;' class\x3d'deleteAttachment' id\x3d'${attid}');'\x3eX\x3c/span\x3e",_endHtml:"\x3cbr/\x3e\x3c/span\x3e",_aeConnects:[],_layerEditingCapChecked:{},
_layerEditingCap:{},constructor:function(x,B){J.mixin(this,g.widgets.attachmentEditor)},startup:function(){this.inherited(arguments);this._uploadField_connect=y.connect(this._uploadField,"onchange",this,function(){0<this._uploadField.value.length&&this._addAttachment()});this._uploadFieldFocus_connect=y.connect(this._uploadField,"onfocus",J.hitch(this,function(x){D.hide(this._attachmentError)}))},destroy:function(){K.forEach(this._aeConnects,y.disconnect);y.disconnect(this._uploadField_connect);y.disconnect(this._uploadFieldFocus_connect);
this.inherited(arguments)},showAttachments:function(x,B){this._attachmentList.innerHTML=this.NLS_none;this._uploadField.value="";K.forEach(this.domNode.children,function(d,m){D.show(d)});D.hide(this._attachmentError);x&&(this._featureLayer=x.getLayer()||B)&&("esri.layers.FeatureLayer"===this._featureLayer.declaredClass&&this._featureLayer.getEditCapabilities?(this._currentLayerId=this._featureLayer.id,this._layerEditingCapChecked[this._currentLayerId]||(this._layerEditingCap[this._currentLayerId]=
this._featureLayer.getEditCapabilities(),this._layerEditingCapChecked[this._currentLayerId]=!0),this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:x}).canUpdate,this._oid=x.attributes[this._featureLayer.objectIdField],this._getAttachments(x)):B&&B.getEditCapabilities()||(D.hide(this._uploadForm),K.forEach(this.domNode.children,function(d,m){D.hide(d)})))},_getAttachments:function(x){this._featureLayer&&this._featureLayer.queryAttachmentInfos&&this._featureLayer.queryAttachmentInfos(this._oid,
J.hitch(this,"_onQueryAttachmentInfosComplete"))},_addAttachment:function(){D.hide(this._attachmentError);this._featureLayer&&this._featureLayer.addAttachment?(D.show(this._attachmentProgress),this._featureLayer.addAttachment(this._oid,this._uploadForm,J.hitch(this,"_onAddAttachmentComplete"),J.hitch(this,"_onAddAttachmentError"))):this._tempUpload=this._uploadForm},_chainAttachment:function(x,B){this._tempUpload&&(D.show(this._attachmentProgress),B.addAttachment(x,this._tempUpload,J.hitch(this,"_onAddAttachmentComplete"),
J.hitch(this,"_onAddAttachmentError")));this._tempUpload=null},_deleteAttachment:function(x,B){D.show(this._attachmentProgress);this._featureLayer.deleteAttachments(x,[B],J.hitch(this,"_onDeleteAttachmentComplete"))},_onQueryAttachmentInfosComplete:function(x){var B=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate||!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate?
(B=this._listHtml+this._endHtml,this._uploadForm.style.display="none"):this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate&&(B=this._listHtml+this._endHtml);var d=this._attachmentList;x=K.map(x,J.hitch(this,function(m){return G.substitute({href:m.url,name:m.name,oid:m.objectId,attid:m.id},B)}));d.innerHTML=x.join("")||this.NLS_none;this._updateConnects()},_onAddAttachmentComplete:function(x){D.hide(this._attachmentProgress.domNode);var B=this._attachmentList,
d=this._uploadField,m=d.value,u=m.lastIndexOf("\\");-1<u&&(m=m.substring(u+1,m.length));m=m.replace(/ /g,"_");u=b.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var C=this._listHtml+this._deleteBtnHtml+this._endHtml;this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate&&(C=this._listHtml+this._endHtml);x=G.substitute({href:this._featureLayer._url.path+"/"+x.objectId+"/attachments/"+x.attachmentId+
(u?"?"+u:""),name:m,oid:x.objectId,attid:x.attachmentId},C);B.innerHTML=B.innerHTML==this.NLS_none?x:B.innerHTML+x;this._updateConnects();d.value=""},_onAddAttachmentError:function(x){D.hide(this._attachmentProgress.domNode);if(x&&G.isDefined(x.code)){var B=this._attachmentError;c.set(B,"innerHTML",(400===x.code?this.NLS_fileNotSupported:x.message||x.details&&x.details.length&&x.details[0])||this.NLS_error);D.show(B)}},_onDeleteAttachmentComplete:function(x){D.hide(this._attachmentProgress.domNode);
var B=this._attachmentList;K.every(x,function(d){return d.success})&&(t.query("#node_"+x[0].objectId+"_"+x[0].attachmentId).orphan(),B.children&&B.children.length||(B.innerHTML=this.NLS_none))},_updateConnects:function(){K.forEach(this._aeConnects,y.disconnect);t.query(".deleteAttachment").forEach(function(x){this._aeConnects.push(y.connect(x,"onclick",J.hitch(this,"_deleteAttachment",this._oid,x.id)))},this)}});a("extend-esri")&&J.setObject("dijit.editing.AttachmentEditor",F,v);return F})},"dijit/ProgressBar":function(){define("require dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/number ./_Widget ./_TemplatedMixin dojo/text!./templates/ProgressBar.html".split(" "),
function(F,J,y,K,t,a,f,b){return J("dijit.ProgressBar",[a,f],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:b,_indeterminateHighContrastImagePath:F.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);this.params&&"value"in this.params||(this.value=this.indeterminate?Infinity:this.progress)},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());
this.update()},_setDirAttr:function(c){var h="rtl"==c.toLowerCase();y.toggle(this.domNode,"dijitProgressBarRtl",h);y.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&h);this.inherited(arguments)},update:function(c){K.mixin(this,c||{});c=this.internalProgress;var h=this.domNode,n=1;this.indeterminate?h.removeAttribute("aria-valuenow"):(-1!=String(this.progress).indexOf("%")?(n=Math.min(parseFloat(this.progress)/100,1),this.progress=n*this.maximum):(this.progress=Math.min(this.progress,
this.maximum),n=this.maximum?this.progress/this.maximum:0),h.setAttribute("aria-valuenow",this.progress));h.setAttribute("aria-labelledby",this.labelNode.id);h.setAttribute("aria-valuemin",0);h.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(n);y.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);y.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());c.style.width=100*n+"%";this.onChange()},_setValueAttr:function(c){this._set("value",
c);Infinity==c?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:c})},_setLabelAttr:function(c){this._set("label",c);this.update()},_setIndeterminateAttr:function(c){this._set("indeterminate",c);this.update()},report:function(c){return this.label?this.label:this.indeterminate?"\x26#160;":t.format(c,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],
function(F,J,y,K){var t={};t={findFeatures:function(a,f,b){var c=f.objectIdField;f=J.filter(f.graphics,function(h){return J.some(a,function(n){return h.attributes[c]===n.objectId})});if(b)b(f);else return f},getSelection:function(a){var f=[];J.forEach(a,function(b){b=b.getSelectedFeatures();J.forEach(b,function(c){f.push(c)})});return f},sortFeaturesById:function(a,f){var b=J.map(a,function(c){return c.featureLayer});f.sort(function(c,h){var n=c.getLayer(),p=h.getLayer();if(!n)return-1;if(!p)return 1;
var v=J.indexOf(b,n);p=J.indexOf(b,p);v-=p;v||(n=n.objectIdField,v=c.attributes[n]-h.attributes[n]);return v});return f}};y("extend-esri")&&F.setObject("dijit.editing.Util.LayerHelper",t,K);return t})},"dojox/date/islamic":function(){define(["dojox/main","dojo/_base/lang","dojo/date","./islamic/Date"],function(F,J,y,K){var t=J.getObject("date.islamic",!0,F);t.getDaysInMonth=function(a){return a.getDaysInIslamicMonth(a.getMonth(),a.getFullYear())};t.compare=function(a,f,b){a instanceof K&&(a=a.toGregorian());
f instanceof K&&(f=f.toGregorian());return y.compare.apply(null,arguments)};t.add=function(a,f,b){var c=new K(a);switch(f){case "day":c.setDate(a.getDate()+b);break;case "weekday":var h=a.getDay();if(5>h+b&&0<h+b)c.setDate(a.getDate()+b);else{var n=f=0;5==h?(h=4,n=0<b?-1:1):6==h&&(h=4,n=0<b?-2:2);h=0<b?5-h-1:-h;var p=b-h,v=parseInt(p/5);0!=p%5&&(f=0<b?2:-2);f=f+7*v+p%5+h;c.setDate(a.getDate()+f+n)}break;case "year":c.setFullYear(a.getFullYear()+b);break;case "week":b*=7;c.setDate(a.getDate()+b);break;
case "month":a=a.getMonth();c.setMonth(a+b);break;case "hour":c.setHours(a.getHours()+b);break;case "minute":c._addMinutes(b);break;case "second":c._addSeconds(b);break;case "millisecond":c._addMilliseconds(b)}return c};t.difference=function(a,f,b){f=f||new K;b=b||"day";var c=f.getFullYear()-a.getFullYear(),h=1;switch(b){case "weekday":c=Math.round(t.difference(a,f,"day"));h=parseInt(t.difference(a,f,"week"));if(0==c%7)c=5*h;else{b=0;var n=a.getDay(),p=f.getDay();h=parseInt(c/7);f=c%7;a=new K(a);
a.setDate(a.getDate()+7*h);a=a.getDay();if(0<c)switch(!0){case 5==n:b=-1;break;case 6==n:b=0;break;case 5==p:b=-1;break;case 6==p:b=-2;break;case 5<a+f:b=-2}else if(0>c)switch(!0){case 5==n:b=0;break;case 6==n:b=1;break;case 5==p:b=2;break;case 6==p:b=1;break;case 0>a+f:b=2}c=c+b-2*h}h=c;break;case "year":h=c;break;case "month":b=f.toGregorian()>a.toGregorian()?f:a;n=f.toGregorian()>a.toGregorian()?a:f;h=b.getMonth();p=n.getMonth();if(0==c)h=b.getMonth()-n.getMonth();else for(h=12-p+h,c=n.getFullYear()+
1,b=b.getFullYear(),c;c<b;c++)h+=12;f.toGregorian()<a.toGregorian()&&(h=-h);break;case "week":h=parseInt(t.difference(a,f,"day")/7);break;case "day":h/=24;case "hour":h/=60;case "minute":h/=60;case "second":h/=1E3;case "millisecond":h*=f.toGregorian().getTime()-a.toGregorian().getTime()}return Math.round(h)};return t})},"dojox/date/islamic/Date":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(F,J,y){var K=J("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,
_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var t=arguments.length;t?1==t?(t=arguments[0],"number"==typeof t&&(t=new Date(t)),t instanceof Date?this.fromGregorian(t):""==t?this._date=new Date(""):(this._year=t._year,this._month=t._month,this._date=t._date,this._hours=t._hours,this._minutes=t._minutes,this._seconds=t._seconds,this._milliseconds=t._milliseconds)):3<=t&&(this._year+=arguments[0],this._month+=arguments[1],this._date+=
arguments[2],this._hours+=arguments[3]||0,this._minutes+=arguments[4]||0,this._seconds+=arguments[5]||0,this._milliseconds+=arguments[6]||0):this.fromGregorian(new Date)},getDate:function(){return this._date},getMonth:function(){return this._month},getFullYear:function(){return this._year},getDay:function(){return this.toGregorian().getDay()},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},
setDate:function(t){t=parseInt(t);if(!(0<t&&t<=this.getDaysInIslamicMonth(this._month,this._year))){var a;if(0<t)for(a=this.getDaysInIslamicMonth(this._month,this._year);t>a;t-=a,a=this.getDaysInIslamicMonth(this._month,this._year))this._month++,12<=this._month&&(this._year++,this._month-=12);else for(a=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:this._year-1);0>=t;a=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:
this._year-1))this._month--,0>this._month&&(this._year--,this._month+=12),t+=a}this._date=t;return this},setFullYear:function(t){this._year=+t},setMonth:function(t){this._year+=Math.floor(t/12);this._month=0<t?Math.floor(t%12):Math.floor((t%12+12)%12)},setHours:function(){var t=arguments.length,a=0;1<=t&&(a=parseInt(arguments[0]));2<=t&&(this._minutes=parseInt(arguments[1]));3<=t&&(this._seconds=parseInt(arguments[2]));4==t&&(this._milliseconds=parseInt(arguments[3]));for(;24<=a;)this._date++,t=this.getDaysInIslamicMonth(this._month,
this._year),this._date>t&&(this._month++,12<=this._month&&(this._year++,this._month-=12),this._date-=t),a-=24;this._hours=a},_addMinutes:function(t){t+=this._minutes;this.setMinutes(t);this.setHours(this._hours+parseInt(t/60));return this},_addSeconds:function(t){t+=this._seconds;this.setSeconds(t);this._addMinutes(parseInt(t/60));return this},_addMilliseconds:function(t){t+=this._milliseconds;this.setMilliseconds(t);this._addSeconds(parseInt(t/1E3));return this},setMinutes:function(t){this._minutes=
t%60;return this},setSeconds:function(t){this._seconds=t%60;return this},setMilliseconds:function(t){this._milliseconds=t%1E3;return this},toString:function(){if(isNaN(this._date))return"Invalidate Date";var t=new Date;t.setHours(this._hours);t.setMinutes(this._minutes);t.setSeconds(this._seconds);t.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+t.toTimeString()},toGregorian:function(){var t=this._year;t=Math.floor(this._date+Math.ceil(29.5*this._month)+354*
(t-1)+Math.floor((3+11*t)/30)+this._ISLAMIC_EPOCH-1-.5)+.5;var a=t-this._GREGORIAN_EPOCH,f=Math.floor(a/146097),b=this._mod(a,146097);a=Math.floor(b/36524);var c=this._mod(b,36524);b=Math.floor(c/1461);c=this._mod(c,1461);c=Math.floor(c/365);f=400*f+100*a+4*b+c;4!=a&&4!=c&&f++;a=t-(this._GREGORIAN_EPOCH+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-1)/400));b=this._GREGORIAN_EPOCH-1+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-1)/400)+Math.floor(739/12+(y.isLeapYear(new Date(f,
3,1))?-1:-2)+1);b=t<b?0:y.isLeapYear(new Date(f,3,1))?1:2;a=Math.floor((12*(a+b)+373)/367);b=this._GREGORIAN_EPOCH-1+365*(f-1)+Math.floor((f-1)/4)-Math.floor((f-1)/100)+Math.floor((f-1)/400)+Math.floor((367*a-362)/12+(2>=a?0:y.isLeapYear(new Date(f,a-1,1))?-1:-2)+1);return new Date(f,a-1,t-b+1,this._hours,this._minutes,this._seconds,this._milliseconds)},fromGregorian:function(t){t=new Date(t);var a=t.getFullYear(),f=t.getMonth(),b=t.getDate();a=this._GREGORIAN_EPOCH-1+365*(a-1)+Math.floor((a-1)/4)+
-Math.floor((a-1)/100)+Math.floor((a-1)/400)+Math.floor((367*(f+1)-362)/12+(2>=f+1?0:y.isLeapYear(t)?-1:-2)+b);a=Math.floor(a)+.5;a-=this._ISLAMIC_EPOCH;f=Math.floor((30*a+10646)/10631);b=Math.ceil((a-29-this._yearStart(f))/29.5);b=Math.min(b,11);this._date=Math.ceil(a-this._monthStart(f,b))+1;this._month=b;this._year=f;this._hours=t.getHours();this._minutes=t.getMinutes();this._seconds=t.getSeconds();this._milliseconds=t.getMilliseconds();this._day=t.getDay();return this},valueOf:function(){return this.toGregorian().valueOf()},
_yearStart:function(t){return 354*(t-1)+Math.floor((3+11*t)/30)},_monthStart:function(t,a){return Math.ceil(29.5*a)+354*(t-1)+Math.floor((3+11*t)/30)},_civilLeapYear:function(t){return 11>(14+11*t)%30},getDaysInIslamicMonth:function(t,a){var f=0;f=29+(t+1)%2;11==t&&this._civilLeapYear(a)&&f++;return f},_mod:function(t,a){return t-a*Math.floor(t/a)}});K.getDaysInIslamicMonth=function(t){return(new K).getDaysInIslamicMonth(t.getMonth(),t.getFullYear())};return K})},"dojox/date/islamic/locale":function(){define("dojox/main dojo/_base/lang dojo/_base/array dojo/date dojo/i18n dojo/regexp dojo/string ./Date dojo/i18n!dojo/cldr/nls/islamic".split(" "),
function(F,J,y,K,t,a,f,b,c){function h(D,e,g,x,B){return B.replace(/([a-z])\1*/ig,function(d){var m=d.charAt(0);d=d.length;var u=["abbr","wide","narrow"];switch(m){case "G":var C=e.eraAbbr[0];break;case "y":C=String(D.getFullYear());break;case "M":C=D.getMonth();if(3>d){C+=1;var O=!0}else m=["months-format",u[d-3]].join("-"),C=e[m][C];break;case "d":C=D.getDate(!0);O=!0;break;case "E":C=D.getDay();3>d?(C+=1,O=!0):(m=["days-format",u[d-3]].join("-"),C=e[m][C]);break;case "a":C=12>D.getHours()?"am":
"pm";C=e["dayPeriods-format-wide-"+C];break;case "h":case "H":case "K":case "k":O=D.getHours();switch(m){case "h":C=O%12||12;break;case "H":C=O;break;case "K":C=O%12;break;case "k":C=O||24}O=!0;break;case "m":C=D.getMinutes();O=!0;break;case "s":C=D.getSeconds();O=!0;break;case "S":C=Math.round(D.getMilliseconds()*Math.pow(10,d-3));O=!0;break;case "z":if(C=K.getTimezoneName(D.toGregorian()))break;d=4;case "Z":C=D.toGregorian().getTimezoneOffset();C=[0>=C?"+":"-",f.pad(Math.floor(Math.abs(C)/60),2),
f.pad(Math.abs(C)%60,2)];4==d&&(C.splice(0,0,"GMT"),C.splice(3,0,":"));C=C.join("");break;default:throw Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+B);}O&&(C=f.pad(C,d));return C})}function n(D,e,g,x){var B=function(u){return u};e=e||B;g=g||B;x=x||B;var d=D.match(/(''|[^'])+/g),m="'"==D.charAt(0);y.forEach(d,function(u,C){u?(d[C]=(m?g:e)(u),m=!m):d[C]=""});return x(d.join(""))}function p(D,e,g,x){x=a.escapeString(x);t.normalizeLocale(g.locale);return x.replace(/([a-z])\1*/ig,
function(B){var d=B.charAt(0);var m=B.length,u="";g.strict?1<m&&(u="0{"+(m-1)+"}"):u="0?";switch(d){case "y":d="\\d+";break;case "M":d=2<m?"\\S+ ?\\S+":u+"[1-9]|1[0-2]";break;case "d":d="[12]\\d|"+u+"[1-9]|3[01]";break;case "E":d="\\S+";break;case "h":d=u+"[1-9]|1[0-2]";break;case "k":d=u+"\\d|1[01]";break;case "H":d=u+"\\d|1\\d|2[0-3]";break;case "K":d=u+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":d=u+"\\d|[0-5]\\d";break;case "S":d="\\d{"+m+"}";break;case "a":m=g.am||e["dayPeriods-format-wide-am"];
u=g.pm||e["dayPeriods-format-wide-pm"];g.strict?d=m+"|"+u:(d=m+"|"+u,m!=m.toLowerCase()&&(d+="|"+m.toLowerCase()),u!=u.toLowerCase()&&(d+="|"+u.toLowerCase()));break;default:d=".*"}D&&D.push(B);return"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var v=J.getObject("date.islamic.locale",!0,F);v.format=function(D,e){e=e||{};var g=t.normalizeLocale(e.locale),x=e.formatLength||"short",B=v._getIslamicBundle(g),d=[];g=J.hitch(this,h,D,B,g,e.fullYear);if("year"==e.selector)return D.getFullYear();"time"!=e.selector&&
(D=e.datePattern||B["dateFormat-"+x])&&d.push(n(D,g));"date"!=e.selector&&(e=e.timePattern||B["timeFormat-"+x])&&d.push(n(e,g));return d.join(" ")};v.regexp=function(D){return v._parseInfo(D).regexp};v._parseInfo=function(D){D=D||{};var e=t.normalizeLocale(D.locale);e=v._getIslamicBundle(e);var g=D.formatLength||"short",x=D.datePattern||e["dateFormat-"+g];g=D.timePattern||e["timeFormat-"+g];var B=[];return{regexp:n("date"==D.selector?x:"time"==D.selector?g:"undefined"==typeof g?x:x+" "+g,J.hitch(this,
p,B,e,D)),tokens:B,bundle:e}};v.parse=function(D,e){D=D.replace(/[\u200E\u200F\u202A\u202E]/g,"");e||(e={});var g=v._parseInfo(e),x=g.tokens,B=g.bundle;g=g.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");D=(new RegExp("^"+g+"$")).exec(D);t.normalizeLocale(e.locale);if(!D)return null;var d=[1389,0,1,0,0,0,0],m="",u=["abbr","wide","narrow"];y.every(D,function(C,O){if(!O)return!0;O=x[O-1];var M=O.length;switch(O.charAt(0)){case "y":d[0]=Number(C);break;case "M":if(2<M){if(O=B["months-format-"+u[M-3]].concat(),
e.strict||(C=C.replace(".","").toLowerCase(),O=y.map(O,function(q){return q?q.replace(".","").toLowerCase():q})),C=y.indexOf(O,C),-1==C)return!1}else C--;d[1]=Number(C);break;case "D":d[1]=0;case "d":d[2]=Number(C);break;case "a":O=e.am||B["dayPeriods-format-wide-am"];M=e.pm||B["dayPeriods-format-wide-pm"];if(!e.strict){var S=/\./g;C=C.replace(S,"").toLowerCase();O=O.replace(S,"").toLowerCase();M=M.replace(S,"").toLowerCase()}if(e.strict&&C!=O&&C!=M)return!1;m=C==M?"p":C==O?"a":"";break;case "K":24==
C&&(C=0);case "h":case "H":case "k":d[3]=Number(C);break;case "m":d[4]=Number(C);break;case "s":d[5]=Number(C);break;case "S":d[6]=Number(C)}return!0});D=+d[3];"p"===m&&12>D?d[3]=D+12:"a"===m&&12==D&&(d[3]=0);return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6])};var G=[];v.addCustomFormats=function(D,e){G.push({pkg:D,name:e})};v._getIslamicBundle=function(D){var e={};y.forEach(G,function(g){g=t.getLocalization(g.pkg,g.name,D);e=J.mixin(e,g)},this);return e};v.addCustomFormats("dojo.cldr","islamic");v.getNames=
function(D,e,g,x,B){x=v._getIslamicBundle(x);D=[D,g,e];if("standAlone"==g){g=D.join("-");var d=x[g];1==d[0]&&(d=void 0)}D[1]="format";return(d||x[D.join("-")]).concat()};v.weekDays=v.getNames("days","wide","format");v.months=v.getNames("months","wide","format");return v})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(F,J,y){return F([J],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services",
"http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(K){return new y(K)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D){return F([J,y,K,a],{templateString:t,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=h.mixin({},window.jimuNls.common);this.nls=h.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
b.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(e){var g=new f;(this.url=e)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),g=this._onBtnValidateClick()):g.reject();return g},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?c.forEach(this._examples,h.hitch(this,function(g){b.create("div",{innerHTML:g,
"class":"example-url"},this.exampleTd)})):b.setStyle(this.exampleTr,"display","none");var e={multiple:this.multiple,_onTreeClick:h.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(e);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(p.after(this.urlInput,"validator",h.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(n(this.serviceBrowser,"error",h.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(e){},_validateUrl:function(e){e=e.replace(/\/*$/g,"");if((e=e.match(/\/rest\/services\/*(.*)/gi))&&0<e.length)if(e=e[0].replace(/\/rest\/services\/*/,"")){var g=e.split("/");if(1===g.length)return!0;if(2===g.length)return this.serviceBrowser.isServiceTypeSupported(g[1]);if(3<=g.length)return e=this.serviceBrowser.isServiceTypeSupported(g[1]),g=this.serviceBrowser.isServiceTypeSupported(g[2]),e||g}else return!0;else return!1},_afterUrlValidate:function(e){e&&
(e=this.urlInput.get("value"),e=this._validateUrl(e));e?b.removeClass(this.btnValidate,"jimu-state-disabled"):b.addClass(this.btnValidate,"jimu-state-disabled");return e},_onServiceBrowserError:function(e){this._showErrorMessage(e)},_showErrorMessage:function(e){e&&"string"===typeof e?(this.errorNode.innerHTML=e,b.addClass(this.errorSection,"visible")):b.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";b.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var e=new f;if(this.urlInput.validate()){var g=this.urlInput.get("value");this.serviceBrowser.setUrl(g).then(h.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();e.resolve()}),h.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();e.reject()}));this.emit("validate-click")}else e.reject();return e},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):
b.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var e=this.getSelectedItems();0<e.length&&this.emit("ok",e)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(F,J,y,K,t){return F([J],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=t.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=K.map(a,y.hitch(this,function(f){return{name:f.name,url:f.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D){return F([J,y,K,t],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(e){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new c;e&&"string"===typeof e&&e.replace(/\/*$/g,"")||this._def.reject();e=e.replace(/\/*$/g,"");e=a.trim(e);var g=e.match(/^http(s?):\/\//gi);g&&0<g.length||
(e="http://"+e);if(!(0>=e.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=e))return e=this._getRootItem(),e=G.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,e):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,e):this._searchFolderServiceUrl(this._currentUrl,e),this.shelter.show(),e.then(a.hitch(this,function(x){this.domNode&&this.shelter.hide();var B=this.tree.getAllLeafTreeNodeWidgets();1===B.length&&
B[0].select();this._def.resolve(x)}),a.hitch(this,function(x){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(x)})),this._def;this._def.reject()},_getItem:function(e){return this.rule.getItem(e)},_getSubItemUrls:function(e){return this.rule.getSubItemUrls(e)},_getSubItems:function(e){var g=new c;this._getSubItemUrls(e).then(a.hitch(this,function(x){x=b.map(x,a.hitch(this,function(B){return this._getItem(B)}));h(x).then(a.hitch(this,function(B){B=b.filter(B,a.hitch(this,
function(d){return d&&"object"===typeof d}));g.resolve(B)}),a.hitch(this,function(B){g.reject(B)}))}),a.hitch(this,function(x){g.reject(x)}));return g},_selectFirstLeafTreeNodeWidget:function(){var e=this.tree.getAllLeafTreeNodeWidgets();1===e.length&&e[0].select()},isLeafItem:function(e){return 0<=this.rule.leafTypes.indexOf(e.type)},isServiceTypeSupported:function(e){return this.rule.isServiceTypeSupported(e)},_getStringEndWith:function(e,g){var x="",B=e.indexOf(g);0<=B&&(x=e.slice(0,B+g.length));
return x},_isUrlContainsServiceType:function(e){return this.rule.isUrlContainsServiceType(e)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(e){var g="";e=e.split("/");return g=e[e.length-1]},_searchBaseServiceUrl:function(e,g){var x=new c;this._getRestInfo(e).then(a.hitch(this,function(B){if(this.domNode){var d=[];b.map(B.folders,a.hitch(this,function(m){var u={name:m,type:"folder",url:e+"/"+m,parent:g.id};this._addItem(u);
var C=new c;this._doSearchFolderServiceUrl(u.url,u.id).then(a.hitch(this,function(O){0<O.length?b.forEach(O,a.hitch(this,function(M){M.parent=u.id;this._addItem(M)})):this._removeItem(u.id);C.resolve()}),a.hitch(this,function(O){C.reject(O)}));d.push(C);return C}));b.forEach(B.services,a.hitch(this,function(m){if(this.isServiceTypeSupported(m.type)){m=e+"/"+m.name+"/"+m.type;var u=new c;this.rule.getItem(m).then(a.hitch(this,function(C){C&&(C.parent=g.id,this._addItem(C));u.resolve()}),a.hitch(this,
function(C){console.error(C);u.reject(C)}));d.push(u)}}));h(d).then(a.hitch(this,function(){this.domNode&&x.resolve()}),a.hitch(this,function(m){console.error(m);this.domNode&&x.reject(m)}))}}),a.hitch(this,function(B){console.error(B);this.domNode&&x.reject({errorCode:"NETWORK_ERROR",error:B})}));return x},_searchFolderServiceUrl:function(e,g){var x=new c;this._doSearchFolderServiceUrl(e,g).then(a.hitch(this,function(B){this.domNode&&(b.forEach(B,a.hitch(this,function(d){d.parent=g.id;this._addItem(d)})),
x.resolve())}),a.hitch(this,function(B){console.error(B);this.domNode&&x.reject({errorCode:"NETWORK_ERROR",error:B})}));return x},_doSearchFolderServiceUrl:function(e){var g=new c,x=this._getBaseServiceUrl();this._getRestInfo(e).then(a.hitch(this,function(B){B=B.services;var d=[];B&&0<B.length&&b.forEach(B,a.hitch(this,function(m){this.isServiceTypeSupported(m.type)&&(m=this.rule.getItem(x+"/"+m.name+"/"+m.type),d.push(m))}));h(d).then(a.hitch(this,function(m){m=b.filter(m,a.hitch(this,function(u){return u}));
g.resolve(m)}),a.hitch(this,function(m){console.error(m);g.reject(m)}))}),a.hitch(this,function(B){console.error(B);g.reject(B)}));return g},_searchServiceUrl:function(e,g){var x=new c;this._getSubItems(e).then(a.hitch(this,function(B){B&&0<B.length?(b.forEach(B,a.hitch(this,function(d){d.parent=g.id;this._addItem(d)})),x.resolve()):this._getItem(e).then(a.hitch(this,function(d){d&&(d.parent=g.id,this._addItem(d));x.resolve()}),a.hitch(this,function(d){x.reject(d)}))}),a.hitch(this,function(B){x.reject(B)}));
return x},_getRestInfo:function(e){var g=new c;this.rule.getRestInfo(e).then(a.hitch(this,function(x){this.domNode&&g.resolve(x)}),a.hitch(this,function(x){this.domNode&&g.reject(x)}));return g},_clear:function(){var e=this._store.query({parent:"root"});b.forEach(e,a.hitch(this,function(g){g&&"root"!==g.id&&this._store.remove(g.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(e){this._id++;e.id=this._id.toString();this._store.add(e);return e},_removeItem:function(e){this._store.remove(e)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var e=this._getRootItem();e=new n({data:[e],getChildren:function(g){return this.query({parent:g.id})}});this._store=new p(e);e=new v({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new D({multiple:this.multiple,model:e,showRoot:!1,style:{width:"100%"},isLeafItem:a.hitch(this,this.isLeafItem),onOpen:a.hitch(this,function(g,x){this._onTreeOpen(g,x);
this.emit("tree-open",g,x)}),onClick:a.hitch(this,function(g,x,B){this._onTreeClick(g,x,B);this.emit("tree-click",g,x,B)}),getIconStyle:a.hitch(this,function(g,x){var B=null;if(!g)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},m=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),u=this._getIconImageName(g,x);u||("folder"===g.type?u=x?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(g.type)&&
(u=x?"folder_open_default.png":"folder_close_default.png"));u&&(d.backgroundImage="url("+m+"/css/images/"+u+")",B=d);return B})});f.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(e,g){var x="";"function"===typeof this.rule.getIconImageName&&(x=this.rule.getIconImageName(e,g));return x},_mayHaveChildren:function(e){return"root"===e.type?!0:!this.isLeafItem(e)},_onTreeOpen:function(e,g){"root"===e.id||0<this._store.query({parent:e.id}).length||
e.checking||e.checked||(e.checking=!0,this._getSubItems(e.url).then(a.hitch(this,function(x){b.forEach(x,a.hitch(this,function(B){B.parent=e.id;this._addItem(B)}));e.checking=!1;e.checked=!0}),a.hitch(this,function(x){console.error(x);e.checking=!1;e.checked=!0})))},_onTreeClick:function(e,g,x){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(F,J,y,K,t){var a={combineRules:function(f){var b=new t;J.forEach(f,function(c){J.forEach(c.leafTypes,function(h){0>b.leafTypes.indexOf(h)&&b.leafTypes.push(h)});J.forEach(c.serviceTypes,function(h){0>b.serviceTypes.indexOf(h)&&b.serviceTypes.push(h)})});b.getMatchedRule=function(c){var h=null;J.some(f,function(n){return n.isUrlContainsServiceType(c)?(h=n,!0):!1});return h};b.getItem=function(c){var h=null;return h=(h=b.getMatchedRule(c))?h.getItem(c):
b.defaultGetItem(c)};b.getSubItemUrls=function(c){var h=null;return h=(h=b.getMatchedRule(c))?h.getSubItemUrls(c):b.defaultGetSubItemUrls(c)};b.getIconImageName=function(c,h){var n="";if(c.url){var p=b.getMatchedRule(c.url);p&&"function"===typeof p.getIconImageName&&(n=p.getIconImageName(c,h))}return n};return b},getFeaturelayerServiceBrowserRule:function(f,b,c){f=F.clone(f);var h=["point","polyline","polygon"];F.isArrayLike(f)&&0<f.length?(f=J.filter(f,function(n){return 0<=h.indexOf(n)}),0===f.length&&
(f=h)):f=h;return a._getFeaturelayerServiceBrowserRule(f,b,c)},_getFeaturelayerServiceBrowserRule:function(f,b,c){return new t({types:f,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(h){var n=new y;this.isUrlEndWithServiceType(h,this.serviceTypes)?n=this.defaultGetItem(h):this.getRestInfo(h).then(F.hitch(this,function(p){p=this._getItemByLayerDefinition(h,p);n.resolve(p)}),
F.hitch(this,function(p){n.reject(p)}));return n},getSubItemUrls:function(h){var n=new y;return n=this.isUrlEndWithServiceType(h)?this._getSubUrlsByServiceUrl(h):this._getSubUrlsByGroupUrl(h)},getIconImageName:function(h,n){var p="";"MapServer"===h.type||"FeatureServer"===h.type?p=n?"mapserver_open.png":"mapserver_close.png":h.type===this._groupLayerType?p=n?"group_layer2.png":"group_layer1.png":h.type===this._featureLayerType?(h=K.getTypeByGeometryType(h.definition&&h.definition.geometryType),"point"===
h?p="point_layer1.png":"polyline"===h?p="line_layer1.png":"polygon"===h&&(p="polygon_layer1.png")):h.type===this._tableType?p="table.png":"root"===h.type&&this._currentUrl&&J.some(this.serviceTypes,F.hitch(this,function(v){return K.isStringEndWith(this._currentUrl,"/"+v)}))&&(p=n?"mapserver_open.png":"mapserver_close.png");return p},_getSubUrlsByServiceUrl:function(h){var n=new y;this.getRestInfo(h).then(F.hitch(this,function(p){var v=[];J.forEach(p.layers,F.hitch(this,function(G){0<=G.parentLayerId||
v.push(h+"/"+G.id)}));c&&J.forEach(p.tables,F.hitch(this,function(G){0<=G.parentLayerId||v.push(h+"/"+G.id)}));n.resolve(v)}),F.hitch(this,function(p){n.reject(p)}));return n},_getSubUrlsByGroupUrl:function(h){var n=new y;this.getRestInfo(h).then(F.hitch(this,function(p){var v=[];if(p.type===this._groupLayerType){var G=this._getServiceUrlByLayerUrl(h);v=J.map(p.subLayers||[],F.hitch(this,function(D){return G+"/"+D.id}))}n.resolve(v)}),F.hitch(this,function(p){n.reject(p)}));return n},_getItemByLayerDefinition:function(h,
n){var p=null,v=n.type;if(v===this._groupLayerType)p={name:n.name,type:v,url:h,definition:n};else if(v===this._featureLayerType||v===this._tableType){var G=!1;v===this._featureLayerType?G=this._validateEsriGeometryType(n.geometryType):v===this._tableType&&(G=!0);G&&(G=!1,(G=b?K.isFeaturelayerUrlSupportQuery(h,n.capabilities):!0)&&(p={name:n.name,type:v,url:h,definition:n}))}return p},_validateEsriGeometryType:function(h){h=K.getTypeByGeometryType(h);return 0<=this.types.indexOf(h)},_getServiceUrlByLayerUrl:function(h){for(var n=
"",p=0;p<this.serviceTypes.length;p++){var v=this.serviceTypes[p].toLowerCase(),G=h.toLowerCase().lastIndexOf("/"+v+"/");if(0<=G){n=h.slice(0,G+v.length+1);break}}return n}})},getGeocodeServiceBrowserRule:function(){return new t({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new t({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(f){var b=new y;this.isUrlEndWithServiceType(f)?b=this.defaultGetItem(f):this.getRestInfo(f).then(F.hitch(this,
function(c){b.resolve({name:c.displayName||c.name,type:"GPTask",url:f,definition:c})}),F.hitch(this,function(c){b.reject(c)}));return b},getSubItemUrls:function(f){var b=new y;this.isUrlEndWithServiceType(f)?this.getRestInfo(f).then(F.hitch(this,function(c){c=J.map(c.tasks||[],F.hitch(this,function(h){return f+"/"+h}));b.resolve(c)}),F.hitch(this,function(c){b.reject(c)})):b.resolve([]);return b},getIconImageName:function(f,b){b="";"GPServer"===f.type?b="toolbox.png":"GPTask"===f.type&&(b="tool.png");
return b}})},getImageServiceBrowserRule:function(f){return new t({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(b){var c=new y;this.isUrlEndWithServiceType(b)?this.defaultGetItem(b).then(F.hitch(this,function(h){f?K.isImageServiceSupportQuery(h.definition.capabilities)?c.resolve(h):c.resolve(null):c.resolve(h)}),F.hitch(this,function(h){c.reject(h)})):c.resolve(null);return c},getIconImageName:function(b,c){c="";"ImageServer"===b.type&&(c="image_layer.png");return c}})},
getQueryableServiceBrowserRule:function(){var f=a.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),b=a.getImageServiceBrowserRule(!0);return a.combineRules([f,b])}};return a})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(F,J,y,K,t,a,f){return F([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(b){J.mixin(this,b);J.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);J.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(b){return this.defaultGetItem(b)},getSubItemUrls:function(b){return this.defaultGetSubItemUrls(b)},getIconImageName:function(b,c){return""},defaultGetItem:function(b){var c=new K;b=b.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(b)){var h=b.split("/"),n=h[h.length-1],p=h[h.length-2];this.getRestInfo(b).then(J.hitch(this,function(v){c.resolve({name:p,type:n,url:b,definition:v})}),J.hitch(this,function(v){console.error(v);
c.reject({errorCode:"NETWORK_ERROR",error:v})}))}else c.resolve(null);return c},defaultGetSubItemUrls:function(b){b=new K;b.resolve([]);return b},getRestInfo:function(b){var c=new K;b=b.replace(/\/*$/g,"");var h=this._restInfoCache[b];if(h)c.resolve(h);else{h={url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var n=f.findCredential(b);n&&n.token&&(h.content.token=n.token);a(h).then(J.hitch(this,function(p){this._restInfoCache[b]=p;c.resolve(p)}),function(p){c.reject(p)})}return c},
isServiceTypeSupported:function(b){b=b.toLowerCase();return y.some(this.serviceTypes,J.hitch(this,function(c){return c.toLowerCase()===b}))},isUrlEndWithServiceType:function(b){return y.some(this.serviceTypes,J.hitch(this,function(c){return t.isStringEndWith(b,"/"+c)}))},isUrlContainsServiceType:function(b){b=b.toLowerCase();return y.some(this.serviceTypes,J.hitch(this,function(c){c=c.toLowerCase();return 0<=b.indexOf("/"+c)}))}})})},"widgets/SmartEditor/setting/Preset":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on dojo/string dojo/mouse dojo/text!./Preset.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/Message dijit/form/Select dijit/form/ValidationTextBox ./ChooseFromLayer ./RelativeDates ./RelativeDomains dojo/dom-class dijit/form/NumberTextBox ./layersAndFieldsApplyOn ../presetUtils jimu/utils".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O){return F([n,J,h],{baseClass:"jimu-widget-smartEditor-setting-presetPopup",templateString:c,groupNameTextBox:null,dataTypeDropdown:null,hasDomainField:null,presetValueDijitNode:null,presetValueTimeNode:null,_selectedRelativeDate:null,_selectedRelativeDomains:null,_selectedDomainFields:[],ValidFieldsByTypeToApplyOn:{esriFieldTypeInteger:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID"],
esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString"]},postCreate:function(){this.inherited(arguments);this._isDomainField();this._initControls();this.isDelete||this.showDialog()},_initControls:function(){this.groupNameTextBox=new e({required:!0,trim:!0,style:{width:"100%"}});this.groupNameTextBox.placeAt(this.groupNameDiv);this.groupNameTextBox.validator=y.hitch(this,function(M){return M?M!==this.prevName&&this.editUtils.isDuplicateGroupName(M,this.existingGroupNames)?
(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.groupNameTextBox.startup();this.name&&this.groupNameTextBox.set("value",this.name);this.dataTypeDropdown=new D({options:this._addDataTypeOptions(),style:{width:"100%"}});this.own(a(this.dataTypeDropdown,"change",y.hitch(this,function(M){var S;this.chooseFromLayerInfo&&(this.chooseFromLayerInfo=null);
this.showOnlyDomainFieldsCB.getValue()||"esriFieldTypeDate"!==M||(this._selectedRelativeDate=S={dateType:"fixed"});this._createValueDijit(M,S,!0);this._domainTableData=[];this._enableDisablePresetValueDijit()})));this.dataTypeDropdown.placeAt(this.dataTypeDropdownDiv);this.dataTypeDropdown.startup();this.showOnlyDomainFieldsCB=new v({label:this.nls.presetPage.showOnlyDomainFields},t.create("div",{},this.showOnlyDomainFieldsNode));this.showOnlyDomainFields&&this.showOnlyDomainFieldsCB.setValue(!0);
this.own(a(this.showOnlyDomainFieldsCB,"change",y.hitch(this,function(M){var S,q=this.dataTypeDropdown.get("value");M||"esriFieldTypeDate"!==q||(this._selectedRelativeDate=S={dateType:"fixed"});this._createValueDijit(q,S,!0);this._createLayersAndFields(q,M)})));this.dataType&&(this.dataTypeDropdown.set("value",this.dataType,!1),this.showOnlyDomainFields?this._selectedRelativeDomains=this._domainTableData=this.presetValue:"esriFieldTypeDate"===this.dataType&&(this._selectedRelativeDate=this.presetValue),
this._createValueDijit(this.dataType,this.presetValue,!0));this.hideInPresetDisplayCB=new v({label:this.nls.presetPage.hideInPresetDisplay},t.create("div",{},this.hideInPresetDisplayNode));this.hideInPresetDisplay&&this.hideInPresetDisplayCB.setValue(!0)},_createValueDijit:function(M,S,q){var k;if(k=this.createDijitOnDataTypeChange(M))this.presetValueDijitNode=k,this.own(a(this.presetValueDijitNode.domNode,b.enter,y.hitch(this,function(){if(this._selectedRelativeDate&&"esriFieldTypeDate"===this.dataTypeDropdown.get("value")&&
!this._checkIfDomainFieldSelected()){var E=C.getDateFromRelativeInfo(this._selectedRelativeDate,!0);""===E&&(E=this.nls.relativeDates.noDateDefinedTooltip);this.presetValueDijitNode.set("title",E)}else""!==this.presetValueDijitNode.get("value")?this.presetValueDijitNode.set("title",this.presetValueDijitNode.get("value")):this.presetValueDijitNode.set("title",this.nls.relativeDates.noDateDefinedTooltip)}))),this.presetValueDijitNode.placeAt(this.presetValueDiv),this.presetValueDijitNode.startup(),
S&&(this.showOnlyDomainFields?this.presetValueDijitNode.set("value",this._getDefaultDomain(S)):"esriFieldTypeDate"===M&&S.dateType?"fixed"===S.dateType?S.dateTime?this.presetValueDijitNode.set("value",C.getDateFromRelativeInfo(S,!0)):this.presetValueDijitNode.set("value",""):this.presetValueDijitNode.set("value",this.nls.relativeDates[S.dateType]):this.presetValueDijitNode.set("value",S)),q&&this._createLayersAndFields(M,!1)},_addDataTypeOptions:function(){return[{label:this.nls.dataType.esriFieldTypeString,
value:"esriFieldTypeString"},{label:this.nls.dataType.esriFieldTypeInteger,value:"esriFieldTypeInteger"},{label:this.nls.dataType.esriFieldTypeDate,value:"esriFieldTypeDate"},{label:this.nls.dataType.esriFieldTypeGUID,value:"esriFieldTypeGUID"}]},_isDomainField:function(){K.forEach(this._totalLayers,y.hitch(this,function(M){K.some(M.layerObject.fields,y.hitch(this,function(S){if(S.domain&&"codedValue"===S.domain.type)return this.hasDomainField=!0}))}))},_createLayerFieldsFilter:function(M,S){var q=
[],k={};K.forEach(this._totalLayers,y.hitch(this,function(E){(!E.isTable||E.isTable&&0<E.layerObject.relationships.length)&&K.forEach(E.layerObject.fields,y.hitch(this,function(N){this.ValidFieldsByTypeToApplyOn[M]&&(q=this.ValidFieldsByTypeToApplyOn[M],-1<q.indexOf(N.type)&&N.editable&&(!S||N.domain&&(!N.domain||"range"!==N.domain.type))&&(k[E.id]||(k[E.id]={}),k[E.id][N.name]=N))}))}));return k},_createLayersAndFields:function(M,S){this._layerAndFieldsApplyOnObj=new u({map:this.map,showDomainFieldIndicator:!0,
layerInfos:this.layerInfos,_configInfos:this._configInfos,actionName:"Preset",nls:this.nls,prevName:this.prevName,existingGroups:this.existingGroups,_configuredPresetInfos:this._configuredPresetInfos,layerDetails:this._createLayerFieldsFilter(M,S),appliedOn:this.appliedOn});t.empty(this.tableParentContainer);this._layerAndFieldsApplyOnObj.placeAt(this.tableParentContainer);this._layerAndFieldsApplyOnObj.startup();d.add(this._layerAndFieldsApplyOnObj.layerAndFieldsMainDiv,"esriCTOverrideForPreset");
a(this._layerAndFieldsApplyOnObj,"layerFieldsUpdated",y.hitch(this,function(q){this._fieldsToAppliedUpdated=!0;this.tableDomains=this._consolidateLayerDomains();this._domainTableData=this._createDomainData();this._checkIfDomainFieldSelected()||q||this._createValueDijit(this.dataTypeDropdown.get("value"),this.presetValueDijitNode.get("value"),!1);this._enableDisablePresetValueDijit(q)}))},_enableDisablePresetValueDijit:function(M){var S=this._checkIfDomainFieldSelected();this.presetValueDijitNode&&
(S||"esriFieldTypeDate"===this.dataTypeDropdown.get("value")?(this.presetValueDijitNode.set("disabled",!0),M=M?this.presetValue:this._domainTableData,M=this._getDefaultDomain(M),S&&this.presetValueDijitNode.set("value",M)):(this.presetValueDijitNode.set("disabled",!1),this.presetValueDijitNode.isValid()||this.presetValueDijitNode.set("value","")))},_isDomainValueSelected:function(){var M=!1,S;K.some(this._domainTableData,y.hitch(this,function(q){if(q.isDefault)return M=!0,S=q,!0}));return{isDomainSelected:M,
selectedDomain:S}},deleteGroup:function(){this._layerAndFieldsApplyOnObj.deleteGroup()},showDialog:function(){this.presetPopup=new p({titleLabel:this.nls.fieldsPage.fieldsSettingsTable.canPresetValue,width:950,maxHeight:600,autoHeight:!1,"class":this.baseClass,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var M=!0;var S={};if(this.groupNameTextBox.isValid()){S.name=O.stripHTML(this.groupNameTextBox.get("value"));S.dataType=this.dataTypeDropdown.get("value");"esriFieldTypeGUID"===
S.dataType&&""===this.presetValueDijitNode.get("value")&&(M=!1);var q=this._checkIfDomainFieldSelected();!M||this.presetValueDijitNode.isValid()||q?(S.showOnlyDomainFields=q,S.hideInPresetDisplay=this.hideInPresetDisplayCB.getValue(),q&&this._domainTableData?S.presetValue=y.clone(this._domainTableData):"esriFieldTypeDate"===S.dataType?S.presetValue=y.clone(this._selectedRelativeDate):this.presetValueDijitNode&&(S.presetValue=this.presetValueDijitNode.get("value")),this.chooseFromLayerInfo&&(S.chooseFromLayerInfo=
this.chooseFromLayerInfo),S.appliedOn=this._layerAndFieldsApplyOnObj.getCheckedFields(S),this._hasFieldsInPresetGroup(S)?(this.emit("groupInfoUpdated",S),this.presetPopup.close()):G({message:f.substitute(this.nls.attributeActionsPage.presetNoFieldWarningMsg,{groupName:S.name})})):this.presetValueDijitNode.focus()}else this.groupNameTextBox.focus()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){this.presetPopup.close()})}]});this.groupNameTextBox.focus()},
_hasFieldsInPresetGroup:function(M){var S=!1,q;for(q in M.appliedOn)if(0<M.appliedOn[q].length){S=!0;break}return S},createDijitOnDataTypeChange:function(M){t.empty(this.presetValueDiv);this.presetValueDijitNode=this.presetValueTimeNode=null;if(this._checkIfDomainFieldSelected()||"esriFieldTypeDate"===M)M=new e({required:!1,disabled:!0,trim:!0,style:{width:"100%"}});else switch(M){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":case "esriFieldTypeSingle":case "esriFieldTypeDouble":M=
new m({style:"width:100%"});break;case "esriFieldTypeGUID":M=new e({style:"width:100%"});M.validator=y.hitch(this,function(S){return""===S?!0:C.isGuid(S)});break;default:M=new e({required:!1,trim:!0,style:{width:"100%"}})}return M},_onSelectPresetValueButtonClick:function(){var M=this.dataTypeDropdown.get("value");this._checkIfDomainFieldSelected()?(this._relativeDomainsObj=new B({nls:this.nls,layerInfos:this.layerInfos,domainTableData:this._domainTableData,dataType:this.dataTypeDropdown.get("value"),
_selectedRelativeDomains:this._selectedRelativeDomains,selectedDomainFields:this._selectedDomainFields}),this.own(a(this._relativeDomainsObj,"updatePresetValue",y.hitch(this,function(S){this._selectedRelativeDomains=this._domainTableData=S.domainData;this.presetValueDijitNode.set("value",S.defaultValue)})))):"esriFieldTypeDate"===M?(this._relativeDatesObj=new x({nls:this.nls,relativeDates:this._selectedRelativeDate,map:this.map,layerInfos:this.layerInfos,selectedPresetValue:this._selectedRelativeDate&&
this._selectedRelativeDate.chooseFromLayerInfo?this._selectedRelativeDate.chooseFromLayerInfo.selectedValue:""}),this.own(a(this._relativeDatesObj,"updatePresetValue",y.hitch(this,function(S){this._selectedRelativeDate=S;"fixed"===this._selectedRelativeDate.dateType?this._selectedRelativeDate.dateTime?this.presetValueDijitNode.set("value",C.getDateFromRelativeInfo(this._selectedRelativeDate,!0)):this.presetValueDijitNode.set("value",""):this.presetValueDijitNode.set("value",this.nls.relativeDates[S.dateType])})))):
(this.ChooseFromLayerObj=new g({map:this.map,nls:this.nls,allLayers:this._totalLayers,dataType:this.dataTypeDropdown.get("value"),layerInfos:this.layerInfos,chooseFromLayerInfo:this.chooseFromLayerInfo?this.chooseFromLayerInfo:null,selectedPresetValue:this.chooseFromLayerInfo?this.chooseFromLayerInfo.selectedValue:""}),a(this.ChooseFromLayerObj,"updatePresetValue",y.hitch(this,function(S){var q=S.selectedValue,k=this.layerInfos.getLayerOrTableInfoById(S.layerId).layerObject.getField(S.field);k.domain&&
"esriFieldTypeString"===this.dataTypeDropdown.get("value")&&K.some(k.domain.codedValues,y.hitch(this,function(E){E.code.toString()===S.selectedValue.toString()&&(q=E.name)}));this.chooseFromLayerInfo=S;this.presetValueDijitNode.set("value",q)})),a(this.ChooseFromLayerObj,"cancelButtonClicked",y.hitch(this,function(){})))},_getDefaultDomain:function(M){var S="";K.some(M,y.hitch(this,function(q){if(q.isDefault)return S=q.label,!0}));return S},_consolidateLayerDomains:function(){var M=[],S,q={};var k=
this._layerAndFieldsApplyOnObj.getOnlyCheckedFields();this._selectedDomainFields=[];for(var E in k){var N=this.layerInfos.getLayerOrTableInfoById(E);K.forEach(k[E],y.hitch(this,function(z){(S=N.layerObject.getField(z))&&S.domain&&S.domain.codedValues&&(z=O.getDefaultPortalFieldInfo(S),this._selectedDomainFields.push(z.label),K.forEach(S.domain.codedValues,y.hitch(this,function(L){q.hasOwnProperty(L.code)?0>q[L.code].indexOf(L.name)&&q[L.code].push(L.name):(q[L.code]=[],q[L.code].push(L.name))})))}))}for(var l in q)M.push({value:l,
displayedLabel:q[l].join(" | ")});return M},_createDomainData:function(){var M=[];K.forEach(this._selectedRelativeDomains,y.hitch(this,function(S){for(var q,k=this.tableDomains.length-1;0<=k;k--)if(q=this.tableDomains[k].value,"esriFieldTypeString"!==this.dataTypeDropdown.get("value")&&(q=Number(q)),S.value.toString()===q.toString()){M.push({showInList:S.showInList,value:this.tableDomains[k].value,label:this.tableDomains[k].displayedLabel,isDefault:S.isDefault});this.tableDomains.splice(k,1);break}}));
K.forEach(this.tableDomains,y.hitch(this,function(S,q){M.push({showInList:!0,value:""+S.value,label:S.displayedLabel,isDefault:!1})}));return M},_checkIfDomainFieldSelected:function(){var M=!1;this._domainTableData&&(M=0<this._domainTableData.length?!0:!1);return M}})})},"widgets/SmartEditor/setting/ChooseFromLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/string dojo/dom-attr dojo/dom-style dojo/text!./ChooseFromLayer.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup dijit/form/Select jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox jimu/dijit/_filter/ValueProviderFactory dojo/Evented".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e){return F([h,e,c],{baseClass:"jimu-widget-smartEditor-setting-chooseFromLayer",templateString:b,layerSelector:null,fieldsDropdown:null,chooseFromLayerPopup:null,valueProviderFactory:null,valueProvider:null,_isFirsTime:!0,postCreate:function(){this.inherited(arguments);this._createPopUp()},_addLayerSelectors:function(){var g=this._createLayerChooserMapArgs();g=new v(g);g.startup();this.layerSelector=new G({layerChooser:g});this.layerSelector.placeAt(this.layerSelectorDiv);
this.layerSelector.startup();if(0<this.layerSelector.layerChooser.getAllItems().length)var x=this.layerSelector.layerChooser.getAllItems()[0].layerInfo.layerObject;this.chooseFromLayerInfo&&this.chooseFromLayerInfo.layerId&&this._isFirsTime&&this.chooseFromLayerInfo.selectedValue==this.selectedPresetValue&&(g=this.layerInfos.getLayerInfoById(this.chooseFromLayerInfo.layerId))&&(x=g.layerObject);this.layerSelector.setSelectedLayer(x);this._addLayerFieldsOptions()},_createLayerChooserMapArgs:function(){return{multiple:!1,
createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},_createFiltersForLayerSelector:function(){var g=v.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);var x=v.createImageServiceLayerFilter(!0);return v.orCombineFilters([g,x])},_addLayerFieldsOptions:function(){this.fieldsDropdown&&this.fieldsDropdown.destroy();this.valueProviderFactory&&(this.valueProviderFactory=null);this.valueProvider&&this.valueProvider.destroy();this.fieldsDropdown=new p({style:{width:"100%"}});
this.fieldsDropdown.placeAt(this.fieldsDropdownDiv);this.fieldsDropdown.startup();this.fieldsDropdown.set("options",this._createFieldsDropDownOpt());this.fieldsDropdown.options&&0<this.fieldsDropdown.options.length&&(this.fieldsDropdown.set("value",this.fieldsDropdown.options[0],!1),this.chooseFromLayerInfo&&this.chooseFromLayerInfo.field&&this._isFirsTime&&this.chooseFromLayerInfo.selectedValue==this.selectedPresetValue&&this.fieldsDropdown.set("value",this.chooseFromLayerInfo.field,!1),this._updateLabelForDomainField(this.selectedPresetValue),
this._createValueProvider());this.own(K(this.fieldsDropdown,"change",J.hitch(this,function(){f.set(this.domainFieldHint,"display","none");this._createValueProvider();this._updateLabelForDomainField("")})))},_createFieldsDropDownOpt:function(){var g=[];if(this.layerSelector.getSelectedItem()){var x=this.layerSelector.getSelectedItem().layerInfo.layerObject;y.forEach(x.fields,J.hitch(this,function(B){"esriFieldTypeString"!==this.dataType&&("esriFieldTypeGUID"!==this.dataType||B.type!==this.dataType&&
"esriFieldTypeGlobalID"!==B.type)&&("esriFieldTypeInteger"!==this.dataType||"esriFieldTypeSmallInteger"!==B.type&&"esriFieldTypeInteger"!==B.type&&"esriFieldTypeDouble"!==B.type&&"esriFieldTypeSingle"!==B.type&&"esriFieldTypeOID"!==B.type)||g.push({label:B.alias||B.name,value:B.name})}))}return g},_createValueProvider:function(){var g;this.layerSelector&&(g=this.layerSelector.getSelectedItem());if(g&&g.layerInfo&&g.layerInfo.layerObject){g=g.layerInfo;var x=g.layerObject;this.valueProviderFactory&&
(this.valueProviderFactory=null);this.valueProvider&&this.valueProvider.destroy();this.valueProviderFactory=new D({url:x.url,layerDefinition:x,featureLayerId:g.id});var B;var d=this.fieldsDropdown.getValue();y.some(x.fields,J.hitch(this,function(m){if(m.name===d)return B=m,!0}));if(d&&B){switch(B.type){case "esriFieldTypeString":g="string";x="stringOperatorIs";break;case "esriFieldTypeDate":g="date";x="dateOperatorIsOn";break;default:g="number",x="numberOperatorIs"}g={fieldObj:{name:d,label:d,dateFormat:"",
shortType:g,type:B.type},operator:x,interactiveObj:"",caseSensitive:!1,valueObj:{type:"unique"}};this.valueProvider=this.valueProviderFactory.getValueProvider(g,!1);this.own(K(this.valueProvider,"change",J.hitch(this,function(){var m=this.valueProvider.getPartObject()&&this.valueProvider.getPartObject().valueObj.value;this._updateLabelForDomainField(m)})));this.valueProvider&&(this.valueProvider.placeAt(this.valueProviderContainer),this.chooseFromLayerInfo&&this.chooseFromLayerInfo.selectedValue&&
this._isFirsTime&&this.chooseFromLayerInfo.selectedValue==this.selectedPresetValue&&(g.valueObj.value=this.chooseFromLayerInfo.selectedValue,this._isFirsTime=!1),this.valueProvider.setValueObject(g.valueObj),this.initialValue=g.valueObj.value?g.valueObj.value:"")}}},_updateLabelForDomainField:function(g){var x,B;(B=this.layerSelector?this.layerSelector.getSelectedItem():null)&&B.layerInfo&&B.layerInfo.layerObject&&(B=B.layerInfo.layerObject,B=B.getField(this.fieldsDropdown.getValue()),B.domain&&"esriFieldTypeString"!==
this.dataType&&y.some(B.domain.codedValues,J.hitch(this,function(d){if(g===d.code)return x=t.substitute(this.nls.chooseFromLayer.domainFieldHintLabel,{domainValue:d.code}),!0})));x?(a.set(this.domainFieldHint,"innerHTML",x),f.set(this.domainFieldHint,"display","block")):f.set(this.domainFieldHint,"display","none")},_createPopUp:function(){this._addLayerSelectors();this.chooseFromLayerPopup=new n({titleLabel:this.nls.chooseFromLayer.selectValueLabel,width:500,maxHeight:300,autoHeight:!0,"class":this.baseClass,
content:this,buttons:[{label:this.nls.ok,onClick:J.hitch(this,function(){this._getSelectedFieldValue();this.chooseFromLayerPopup.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:J.hitch(this,function(){this.emit("cancelButtonClicked");this.chooseFromLayerPopup.close()})}]});this.own(K(this.layerSelector,"selection-change",J.hitch(this,function(){this._addLayerFieldsOptions()})))},_getSelectedFieldValue:function(){if(this.valueProvider&&this.valueProvider.checkedNameDiv){var g=
this.valueProvider.getPartObject()?this.valueProvider.getPartObject().valueObj.value:"- empty -"!==this.valueProvider.checkedNameDiv.innerHTML&&this.initialValue?this.initialValue:"";this.emit("updatePresetValue",{layerId:this.layerSelector.getSelectedItem().layerInfo.layerObject.id,field:this.fieldsDropdown.getValue(),selectedValue:g})}}})})},"widgets/SmartEditor/setting/RelativeDates":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/on dojo/text!./RelativeDates.html dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/Popup dojo/dom-class jimu/utils dojo/query dijit/focus ../presetUtils dijit/form/Select jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox jimu/dijit/_filter/ValueProviderFactory dojo/_base/array dojo/dom-style dojo/string dojo/dom-attr dijit/form/DateTextBox dijit/form/TimeTextBox dijit/form/NumberTextBox jimu/dijit/RadioBtn".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m){return F([f,J,a],{baseClass:"jimu-widget-smartEditor-setting-relativeDates",templateString:t,selectValuePopup:null,_isFirsTime:!0,initialValue:null,postCreate:function(){this._addLayerSelectors();this._eventListener();this._createSelectValuePopUp();this._support508ForSelectValuePopUp();K(window,"resize",y.hitch(this,function(){setTimeout(y.hitch(this,function(){this._setFieldPopupDimensions()}),1E3)}))},_eventListener:function(){this.fixedRadioButton.onStateChange=
y.hitch(this,function(){this.dateTypeChanged()});this.currentRadioButton.onStateChange=y.hitch(this,function(){this.dateTypeChanged()});this.PastRadioButton.onStateChange=y.hitch(this,function(){this.dateTypeChanged()});this.futureRadioButton.onStateChange=y.hitch(this,function(){this.dateTypeChanged()});this.own(K(this.yearsTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));this.own(K(this.monthsTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));
this.own(K(this.daysTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));this.own(K(this.minutesTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));this.own(K(this.hoursTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));this.own(K(this.secondsTextBox,"change",y.hitch(this,function(){this._showOrHideWarningContainer()})));this.customRadioButton.onStateChange=y.hitch(this,function(){this._dateValueOptionChange()});this.selectValueRadioButton.onStateChange=
y.hitch(this,function(){this._dateValueOptionChange()})},dateTypeChanged:function(){c.add(this.fixedDateContent,"esriCTHidden");c.add(this.currentDateContent,"esriCTHidden");c.add(this.pastOrFutureDateContent,"esriCTHidden");c.remove(this.valueLabel,"esriCTHidden");c.add(this.relativeDateWarningContainer,"esriCTHidden");this.fixedRadioButton.checked?(c.remove(this.fixedDateContent,"esriCTHidden"),this.hintForDateType.innerHTML=this.nls.relativeDates.hintForFixedDateType):this.currentRadioButton.checked?
(c.add(this.valueLabel,"esriCTHidden"),c.remove(this.currentDateContent,"esriCTHidden"),this.hintForDateType.innerHTML=this.nls.relativeDates.hintForCurrentDateType):this.PastRadioButton.checked?(c.remove(this.pastOrFutureDateContent,"esriCTHidden"),this.hintForDateType.innerHTML=this.nls.relativeDates.hintForPastDateType):this.futureRadioButton.checked&&(c.remove(this.pastOrFutureDateContent,"esriCTHidden"),this.hintForDateType.innerHTML=this.nls.relativeDates.hintForFutureDateType)},_createSelectValuePopUp:function(){this.selectValuePopup=
new b({titleLabel:this.nls.relativeDates.popupTitle,width:500,maxHeight:450,autoHeight:!0,"class":this.baseClass,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var u=this._getValues();u&&(!c.contains(this.pastOrFutureDateContent,"esriCTHidden")&&this._checkTextboxesWithZeroValue()?c.remove(this.relativeDateWarningContainer,"esriCTHidden"):(c.add(this.relativeDateWarningContainer,"esriCTHidden"),this.emit("updatePresetValue",u),this.selectValuePopup.close()))})},{label:this.nls.cancel,
classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){this.selectValuePopup.close()})}]});this.relativeDates&&this._setValue();this._setFieldPopupDimensions()},_setFieldPopupDimensions:function(){this.selectValuePopup&&(window.appInfo.isRunInMobile&&600>window.innerWidth?this.selectValuePopup.set("width",window.innerWidth-100):this.selectValuePopup.set("width",750))},_validateFixedDate:function(){return this.dateTextBox.isValid()?this.timeTextBox.isValid()?!0:(this.timeTextBox.focus(),
!1):(this.dateTextBox.focus(),!1)},_validatePastOrFutureDate:function(){return this.yearsTextBox.isValid()?this.monthsTextBox.isValid()?this.daysTextBox.isValid()?this.hoursTextBox.isValid()?this.minutesTextBox.isValid()?this.secondsTextBox.isValid()?!0:(this.secondsTextBox.focus(),!1):(this.minutesTextBox.focus(),!1):(this.hoursTextBox.focus(),!1):(this.daysTextBox.focus(),!1):(this.monthsTextBox.focus(),!1):(this.yearsTextBox.focus(),!1)},_getValues:function(){var u=!0,C={value:{}};if(this.fixedRadioButton.checked){if(this.customRadioButton.checked&&
(u=this._validateFixedDate())&&(C.dateType="fixed",C.dateTime=v.getDateFieldValue({type:"esriFieldTypeDate"},[this.dateTextBox,this.timeTextBox])),this.selectValueRadioButton.checked&&(C.dateType="fixed",this._getChooseFromLayerInfo()?C.chooseFromLayerInfo=this._getChooseFromLayerInfo():C.chooseFromLayerInfo=null,C.chooseFromLayerInfo&&C.chooseFromLayerInfo.selectedValue)){var O=C.chooseFromLayerInfo.selectedValue;C.dateTime="Invalid Date"!=new Date(O)?this._convertToEpoch(new Date(O)):parseInt(O)}}else if(this.currentRadioButton.checked)C.dateType=
"current";else if(this.PastRadioButton.checked){if(u=this._validatePastOrFutureDate())C=this._getValuesOfPastOrFutureDijits(),C.dateType="past"}else this.futureRadioButton.checked&&(u=this._validatePastOrFutureDate())&&(C=this._getValuesOfPastOrFutureDijits(),C.dateType="future");return u?C:u},_support508ForSelectValuePopUp:function(){var u=n(".jimu-btn-vacation",this.selectValuePopup.domNode)[0];h.initFirstFocusNode(this.selectValuePopup.domNode,this.selectValuePopup.closeBtnNode);p.focus(this.selectValuePopup.closeBtnNode);
h.initLastFocusNode(this.selectValuePopup.domNode,u)},_setValue:function(){if("fixed"===this.relativeDates.dateType)if(this.fixedRadioButton.domNode.click(),this.relativeDates.hasOwnProperty("chooseFromLayerInfo"))this.selectValueRadioButton.domNode.click();else{this.customRadioButton.domNode.click();var u=new Date(parseInt(this.relativeDates.dateTime,10));this.dateTextBox.set("value",u);this.timeTextBox.set("value",u)}"current"===this.relativeDates.dateType&&this.currentRadioButton.domNode.click();
"past"===this.relativeDates.dateType&&(this.PastRadioButton.domNode.click(),this._setValuesOfPastOrFutureDijits());"future"===this.relativeDates.dateType&&(this.futureRadioButton.domNode.click(),this._setValuesOfPastOrFutureDijits())},_setValuesOfPastOrFutureDijits:function(){this.yearsTextBox.set("value",this.relativeDates.year);this.monthsTextBox.set("value",this.relativeDates.month);this.daysTextBox.set("value",this.relativeDates.day);this.hoursTextBox.set("value",this.relativeDates.hour);this.minutesTextBox.set("value",
this.relativeDates.minute);this.secondsTextBox.set("value",this.relativeDates.second)},_getValuesOfPastOrFutureDijits:function(){var u={};u.year=this.yearsTextBox.value;u.month=this.monthsTextBox.value;u.day=this.daysTextBox.value;u.hour=this.hoursTextBox.value;u.minute=this.minutesTextBox.value;u.second=this.secondsTextBox.value;return u},_checkTextboxesWithZeroValue:function(){return 0!==this.yearsTextBox.value||0!==this.monthsTextBox.value||0!==this.daysTextBox.value||0!==this.hoursTextBox.value||
0!==this.minutesTextBox.value||0!==this.secondsTextBox.value?!1:!0},_showOrHideWarningContainer:function(){this._checkTextboxesWithZeroValue()?c.remove(this.relativeDateWarningContainer,"esriCTHidden"):c.add(this.relativeDateWarningContainer,"esriCTHidden")},_addLayerSelectors:function(){var u=this._createLayerChooserMapArgs();u=new D(u);u.startup();this.layerSelector=new e({layerChooser:u});this.layerSelector.placeAt(this.layerSelectorDiv);this.layerSelector.startup();if(0<this.layerSelector.layerChooser.getAllItems().length)var C=
this.layerSelector.layerChooser.getAllItems()[0].layerInfo.layerObject;this.relativeDates&&this.relativeDates.chooseFromLayerInfo&&this.relativeDates.chooseFromLayerInfo.layerId&&this._isFirsTime&&(u=this.layerInfos.getLayerInfoById(this.relativeDates.chooseFromLayerInfo.layerId))&&(C=u.layerObject);this.layerSelector.setSelectedLayer(C);this._addLayerFieldsOptions()},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},
_createFiltersForLayerSelector:function(){var u=D.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);var C=D.createImageServiceLayerFilter(!0);u=D.orCombineFilters([u,C]);dateLayerfilter=this._createDateLayerfilter();return D.andCombineFilters([u,dateLayerfilter])},_createDateLayerfilter:function(){return function(u){var C=!1;u.getLayerObject().then(function(O){O&&O.fields&&x.some(O.fields,function(M){if("esriFieldTypeDate"===M.type)return C=!0})});return C}},_addLayerFieldsOptions:function(){this.fieldsDropdown&&
this.fieldsDropdown.destroy();this.valueProviderFactory&&(this.valueProviderFactory=null);this.valueProvider&&this.valueProvider.destroy();this.fieldsDropdown=new G({style:{width:"100%"}});this.fieldsDropdown.placeAt(this.fieldsDropdownDiv);this.fieldsDropdown.startup();this.fieldsDropdown.set("options",this._createFieldsDropDownOpt());this.fieldsDropdown.options&&0<this.fieldsDropdown.options.length&&this.fieldsDropdown.set("value",this.fieldsDropdown.options[0]);this.relativeDates&&this.relativeDates.chooseFromLayerInfo&&
this.relativeDates.chooseFromLayerInfo.field&&this._isFirsTime&&this.fieldsDropdown.set("value",this.relativeDates.chooseFromLayerInfo.field);this._updateLabelForDomainField(this.selectedPresetValue);this.own(K(this.layerSelector,"selection-change",y.hitch(this,function(){this._addLayerFieldsOptions()})));this.own(K(this.fieldsDropdown,"change",y.hitch(this,function(){B.set(this.domainFieldHint,"display","none");this._createValueProvider();this._updateLabelForDomainField("")})))},_createFieldsDropDownOpt:function(){var u=
[];validFieldSet=[];if(this.layerSelector.getSelectedItem()){var C=this.layerSelector.getSelectedItem().layerInfo.layerObject;x.forEach(C.fields,y.hitch(this,function(O){"esriFieldTypeDate"===O.type&&u.push({label:O.alias||O.name,value:O.name})}))}return u},_createValueProvider:function(){var u;this.layerSelector&&(u=this.layerSelector.getSelectedItem());if(u&&u.layerInfo&&u.layerInfo.layerObject){u=u.layerInfo;var C=u.layerObject;this.valueProviderFactory&&(this.valueProviderFactory=null);this.valueProvider&&
this.valueProvider.destroy();this.valueProviderFactory=new g({url:C.url,layerDefinition:C,featureLayerId:u.id});var O;var M=this.fieldsDropdown.getValue();x.some(C.fields,y.hitch(this,function(k){if(k.name===M)return O=k,!0}));if(M&&O){if("esriFieldTypeDate"===O.type){var S="date";var q="dateOperatorIsOn"}S={fieldObj:{name:M,label:M,dateFormat:"",shortType:S,type:O.type},operator:q,interactiveObj:"",caseSensitive:!1,valueObj:{type:"unique"}};this.valueProvider=this.valueProviderFactory.getValueProvider(S,
!1);this.own(K(this.valueProvider,"change",y.hitch(this,function(){var k=this.valueProvider.getPartObject()&&this.valueProvider.getPartObject().valueObj.value;this._updateLabelForDomainField(k)})));this.valueProvider&&(this.valueProvider.placeAt(this.valueProviderContainer),this.relativeDates&&this.relativeDates.chooseFromLayerInfo&&this.relativeDates.chooseFromLayerInfo.selectedValue&&this._isFirsTime&&(S.valueObj.value=this.relativeDates.chooseFromLayerInfo.selectedValue,this._isFirsTime=!1),this.valueProvider.setValueObject(S.valueObj),
this.initialValue=S.valueObj.value?S.valueObj.value:"")}}},_dateValueOptionChange:function(){this.customRadioButton.checked&&(c.remove(this.customOptionContentNode,"esriCTHidden"),c.add(this.selectValueOptionContentNode,"esriCTHidden"),c.add(this.noValidLayerContentNode,"esriCTHidden"));this.selectValueRadioButton.checked&&(0<this.layerSelector.layerChooser.getAllItems().length?(c.remove(this.selectValueOptionContentNode,"esriCTHidden"),c.add(this.customOptionContentNode,"esriCTHidden"),c.add(this.noValidLayerContentNode,
"esriCTHidden")):(c.add(this.customOptionContentNode,"esriCTHidden"),c.remove(this.noValidLayerContentNode,"esriCTHidden")))},_getChooseFromLayerInfo:function(){if(this.valueProvider&&this.valueProvider.checkedNameDiv){var u=this.valueProvider.getPartObject()?this.valueProvider.getPartObject().valueObj.value:"- empty -"!==this.valueProvider.checkedNameDiv.innerHTML&&this.initialValue?this.initialValue:"";return{layerId:this.layerSelector.getSelectedItem().layerInfo.layerObject.id,field:this.fieldsDropdown.getValue(),
selectedValue:u}}},_convertToEpoch:function(u){return u=(u=u?new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()):u||null)&&u.getTime?u.getTime():u&&u.toGregorian?u.toGregorian().getTime():u},_updateLabelForDomainField:function(u){var C,O,M={dateType:"fixed",dateTime:""};(O=this.layerSelector?this.layerSelector.getSelectedItem():null)&&O.layerInfo&&O.layerInfo.layerObject&&(O=O.layerInfo.layerObject,O=O.getField(this.fieldsDropdown.getValue()),
O.domain&&"esriFieldTypeDate"===O.type&&x.some(O.domain.codedValues,y.hitch(this,function(S){if(u==S.code)return S=new Date(u),M.dateTime="Invalid Date"!=S?this._convertToEpoch(S):parseInt(u),C=d.substitute(this.nls.chooseFromLayer.domainFieldHintLabel,{domainValue:v.getDateFromRelativeInfo(M,!0)}),!0})));C?(m.set(this.domainFieldHint,"innerHTML",C),B.set(this.domainFieldHint,"display","block")):B.set(this.domainFieldHint,"display","none")}})})},"widgets/SmartEditor/presetUtils":function(){define("dojo/_base/lang jimu/utils dojo/date dojo/_base/array dojo/dom-construct dijit/form/DateTextBox dijit/form/NumberSpinner dijit/form/NumberTextBox dijit/form/FilteringSelect dijit/form/TextBox dijit/form/ValidationTextBox dijit/form/TimeTextBox dijit/Editor dijit/form/SimpleTextarea dojo/store/Memory dojo/query dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/TextColor jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e){return{integerFields:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],getFieldInfoByFieldName:function(g,x){var B={};K.some(g,function(d){if(d.name===x)return F.mixin(B,d),!0});return B},getDateFromRelativeInfo:function(g,x){var B=new Date;"fixed"===g.dateType?B=g.dateTime?new Date(g.dateTime):"":"future"===g.dateType?(B=y.add(B,"year",g.year),B=y.add(B,"month",g.month),B=y.add(B,"day",g.day),B=y.add(B,"hour",
g.hour),B=y.add(B,"minute",g.minute),B=y.add(B,"second",g.second)):"past"===g.dateType&&(g.year&&(B=y.add(B,"year",-1*g.year)),g.month&&(B=y.add(B,"month",-1*g.month)),g.day&&(B=y.add(B,"day",-1*g.day)),g.hour&&(B=y.add(B,"hour",-1*g.hour)),g.minute&&(B=y.add(B,"minute",-1*g.minute)),g.second&&(B=y.add(B,"second",-1*g.second)));return x&&""!==B?J.localizeDate(B):B},getDateFieldValue:function(g,x){if("esriFieldTypeDate"===g.type){if(x instanceof Array){var B,d;0<x.length&&x[0]&&(B=x[0].getValue());
1<x.length&&x[1]&&(d=x[1].getValue());var m=B&&d?new Date(B.getFullYear(),B.getMonth(),B.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()):B||d||null}else m=x.getValue(),g.domain&&(m=Number(m));m=m&&m.getTime?m.getTime():m&&m.toGregorian?m.toGregorian().getTime():m}return m},isGuid:function(g){"{"===g[0]&&(g=g.substring(1,g.length-1));return/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/gi.test(g)},validateGUID:function(g,
x){return this.isGuid(g)},isValidPresetValue:function(g){var x=!0;K.some(g,function(B){if(B.isValid&&!B.isValid())return x=!1,!0});return x},createPresetFieldContentNode:function(g){var x=[];if(g.domain){if("codedValue"===g.domain.type){var B=[];K.forEach(g.domain.codedValues,function(C){B.push({name:C.name,id:C.code})});var d=new c({"class":"ee-inputField",name:g.fieldName,store:new D({data:B}),searchAttr:"name",required:!0},t.create("div"))}else{d=null;switch(g.type){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":d=
{min:g.domain.minValue,max:g.domain.maxValue,places:0};break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":d={min:g.domain.minValue,max:g.domain.maxValue}}d=new f({"class":"ee-inputField",name:g.fieldName,smallDelta:1,constraints:d,required:!0},t.create("div"))}x.push(d)}else switch(g.type){case "esriFieldTypeGUID":d=new n({"class":"ee-inputField",name:g.fieldName,required:!0,trim:!0},t.create("div"));d.validator=F.hitch(this,this.validateGUID);x.push(d);break;case "esriFieldTypeDate":d=new a({"class":"ee-inputField",
name:g.fieldName,required:!0,fieldType:"date"},t.create("div"));x.push(d);g.format&&g.format.time&&!0===g.format.time&&(g=new p({"class":"ee-inputField",style:"margin-top:2px;",required:!0},t.create("div")),x.push(g));break;case "esriFieldTypeString":d=null;g.length&&Number(g.length)&&0<Number(g.length)&&(d=g.length);if(g.hasOwnProperty("stringFieldOption"))if("richtext"===g.stringFieldOption){var m=document.getElementsByTagName("head")[0];var u=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";
e('link[href\x3d"'+u+'"]',m)[0]||J.loadStyleLink("editor_plugins_resources_TextColor",u);u=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";e('link[href\x3d"'+u+'"]',m)[0]||J.loadStyleLink("editor_plugins_resources_editorPlugins",u);u=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";e('link[href\x3d"'+u+'"]',m)[0]||J.loadStyleLink("editor_plugins_resources_PasteFromWord",u);d={"class":"ee-inputField ee-inputFieldRichText",trim:!0,maxLength:d,fieldType:"richtext",
required:!0};d["class"]+=" atiRichTextField";d.height="100%";d.width="100%";d.name=g.fieldName;d.plugins=["bold","italic","underline",J.getEditorTextColor("smartEditor"),J.getEditorBackgroundColor("smartEditor"),"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];d=new v(d,t.create("div"))}else d="textarea"===g.stringFieldOption?new G({"class":"ee-inputField ee-inputFieldTextArea",name:g.fieldName,maxlength:d,
fieldType:"textarea",required:!0},t.create("div")):new n({"class":"ee-inputField",name:g.fieldName,maxlength:d,required:!0,trim:!0},t.create("div"));else d=new n({"class":"ee-inputField",name:g.fieldName,maxlength:d,required:!0,trim:!0},t.create("div"));x.push(d);break;case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":d=new b({"class":"ee-inputField",name:g.fieldName,required:!0,constraints:{places:0}},t.create("div"));x.push(d);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":d=
new b({"class":"ee-inputField",name:g.fieldName,required:!0},t.create("div"));x.push(d);break;default:d=new h({"class":"ee-unsupportField",name:g.fieldName,value:"N/A",readOnly:!0},t.create("div")),x.push(d)}return x},changeFieldToMostRestrictive:function(g,x){if(!g.hasOwnProperty("type")&&x.hasOwnProperty("type"))return x;x.length&&Number(x.length)&&0<Number(x.length)&&(g.length&&Number(g.length)?x.length<g.length&&(g.length=x.length):g.length=x.length);if(g.type===x.type)switch(x.type){case "esriFieldTypeString":g.hasOwnProperty("stringFieldOption")&&
x.hasOwnProperty("stringFieldOption")&&("richtext"===g.stringFieldOption&&"richtext"!==x.stringFieldOption?g.stringFieldOption=x.stringFieldOption:"textarea"===g.stringFieldOption&&"textbox"===x.stringFieldOption&&(g.stringFieldOption=x.stringFieldOption))}return g}}})},"widgets/SmartEditor/setting/RelativeDomains":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/on dojo/text!./RelativeDomains.html dijit/_WidgetsInTemplateMixin dojo/_base/array jimu/BaseWidgetSetting jimu/dijit/Popup jimu/dijit/SimpleTable jimu/dijit/Message jimu/utils dojo/query dijit/focus dojo/string dojo/dom-attr dijit/form/DateTextBox dijit/form/TimeTextBox dijit/form/NumberTextBox".split(" "),
function(F,J,y,K,t,a,f,b,c,h,n,p,v,G,D,e){return F([b,J,a],{baseClass:"jimu-widget-smartEditor-setting-relativeDomains",templateString:t,domainObj:[],selectDomainValuePopup:null,validNumericData:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],postCreate:function(){this.domainObj=[];this.selectDomainValuePopup=null;this._createDomainTable();this._createSelectValuePopUp();if(this.selectedDomainFields&&0<this.selectedDomainFields.length){var g=D.substitute(this.nls.relativeDomains.selectedDomainFieldsHint,
{domainFields:this.selectedDomainFields.join(", ")});e.set(this.domainFieldsHint,"innerHTML",g)}},postMixInProperties:function(){this.nls=y.mixin(this.nls,window.jimuNls.common)},_createDomainTable:function(){this._domainTable=new h({fields:[{name:"selectDomain",title:"",type:"checkbox",width:"10%"},{name:"domainValue",title:this.nls.relativeDomains.valueText,type:"text",width:"15%"},{name:"label",title:this.nls.label,type:"text",width:"55%"},{name:"defaultDomain",title:this.nls.relativeDomains.defaultText,
type:"radio",width:"10%"},{name:"actions",title:this.nls.action,type:"actions",width:"10%%",actions:["up","down"],"class":"actions"}],selectable:!1});this._domainTable.startup();this._domainTable.placeAt(this.tableParentContainer);this._setValues()},_createSelectValuePopUp:function(){this.selectDomainValuePopup=new c({titleLabel:this.nls.chooseFromLayer.selectValueLabel,width:800,height:500,autoHeight:!0,"class":this.baseClass,content:this,buttons:[{label:this.nls.ok,onClick:y.hitch(this,function(){var g=
this._getValue();g&&(this.emit("updatePresetValue",g),this.selectDomainValuePopup.close())})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:y.hitch(this,function(){this.selectDomainValuePopup.close()})}]})},_getValue:function(){var g="",x=[],B=this._domainTable.getData();if(this._isValidConfiguration(B))return f.forEach(B,y.hitch(this,function(d){var m={};m.showInList=d.selectDomain;m.value="esriFieldTypeString"!==this.dataType?Number(d.domainValue):d.domainValue;m.label=d.label;
m.isDefault=d.defaultDomain;m.isDefault&&(g=d.label);x.push(m)})),{domainData:x,defaultValue:g};new n({message:this.nls.relativeDomains.selectDefaultDomainMsg})},_setValues:function(){f.forEach(this.domainTableData,y.hitch(this,function(g){var x=this._domainTable.addRow({selectDomain:g.showInList,domainValue:""+g.value,label:g.label,defaultDomain:g.isDefault}).tr.cells[3].childNodes[0];var B=x.checked;this.own(K(x,"click",y.hitch(this,function(){B=B?x.checked=!1:x.checked=!0})))}))},_isValidConfiguration:function(g){var x=
!1,B=!1,d=!1;f.some(g,y.hitch(this,function(m){m.defaultDomain&&(d=!0,m.selectDomain&&(B=!0));m.selectDomain&&(x=!0)}));return d?d&&B:x?x:!1},_support508ForSelectValuePopUp:function(){var g=v(".jimu-btn-vacation",this.selectDomainValuePopup.domNode)[0];p.initFirstFocusNode(this.selectDomainValuePopup.domNode,this.selectDomainValuePopup.closeBtnNode);G.focus(this.selectDomainValuePopup.closeBtnNode);p.initLastFocusNode(this.selectDomainValuePopup.domNode,g)}})})},"widgets/SmartEditor/presetBuilderBackwardCompatibility":function(){define(["dojo/_base/lang",
"dojo/_base/array","jimu/utils","./presetUtils"],function(F,J,y,K){var t={createPresetGroups:function(a,f){t.config=a;t._jimuLayerInfos=f;if(a.editor.presetInfos&&0<Object.keys(a.editor.presetInfos).length&&(a.attributeActionGroups?a.attributeActionGroups&&!a.attributeActionGroups.hasOwnProperty("Preset")&&(a.attributeActionGroups.Preset={}):a.attributeActionGroups={Intersection:{},Address:{},Coordinates:{},Preset:{}},!(a.attributeActionGroups&&a.attributeActionGroups.Preset&&0<Object.keys(a.attributeActionGroups.Preset).length)))for(var b in a.editor.presetInfos)t._addPresetGroupForField(a.editor.configInfos||
a.editor.layerInfos,b)},_getDomainListForPresetGroup:function(a,f,b){var c=[];J.forEach(f.domain.codedValues,F.hitch(this,function(h){var n={showInList:!0,value:h.code,label:h.name,isDefault:!1};a.showOnlyDomainFields=!0;var p=t.config.editor.presetInfos[b][0];"esriFieldTypeInteger"===a.dataType&&(p=Number(p));0<t.config.editor.presetInfos[b].length?h.code===p&&(n.isDefault=!0):0===c.length&&(n.isDefault=!0);c.push(n)}));return c},_addPresetGroupForField:function(a,f){var b;J.some(a,F.hitch(this,
function(c){if(b)return!0;if(c.fieldValues&&c.fieldValues[f])for(var h=c.fieldValues[f],n=0;n<h.length;n++)if("Preset"===h[n].actionName&&h[n].enabled){h[n].attributeActionGroupName=f;var p=t._jimuLayerInfos.getLayerOrTableInfoById(c.featureLayer.id);if(p&&p.layerObject&&p.layerObject.fields){n=K.getFieldInfoByFieldName(p.layerObject.fields,f);p=y.getDefaultPortalFieldInfo(n).label+" ("+f+")";h={};h.name=p;0<["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"].indexOf(n.type)?h.dataType="esriFieldTypeInteger":h.dataType=n.type;h.showOnlyDomainFields=!1;h.hideInPresetDisplay=!1;h.appliedOn=t._getPresetFieldsForAppliedOn(n,h);if(n.domain&&"range"!==n.domain.type)h.presetValue=t._getDomainListForPresetGroup(h,n,f);else if("esriFieldTypeDate"===n.type){var v,G;0<t.config.editor.presetInfos[f].length?(isNaN(t.config.editor.presetInfos[f][0])||""===t.config.editor.presetInfos[f][0]||(G=new Date(t.config.editor.presetInfos[f][0])),t.config.editor.presetInfos[f][1]&&
!isNaN(t.config.editor.presetInfos[f][1])&&(v=new Date(t.config.editor.presetInfos[f][1])),v=G&&v?new Date(G.getFullYear(),G.getMonth(),G.getDate(),v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()):G,h.presetValue=v?{dateType:"fixed",dateTime:v.getTime()}:{dateType:"fixed",dateTime:""}):h.presetValue={dateType:"fixed",dateTime:""}}else h.presetValue=0<t.config.editor.presetInfos[f].length?t.config.editor.presetInfos[f][0]:null;t.config.attributeActionGroups.Preset[h.name]=h;b=!0;break}}!b&&
c.relationshipInfos&&0<c.relationshipInfos.length&&(b=t._addPresetGroupForField(c.relationshipInfos,f))}));return b},_isPresetEnabledForLayer:function(a,f,b,c){if(a.fieldValues[f.name])for(var h=a.fieldValues[f.name],n=0;n<h.length;n++)if("Preset"===h[n].actionName&&h[n].enabled){var p=t._jimuLayerInfos.getLayerOrTableInfoById(a.featureLayer.id).layerObject.fields;K.getFieldInfoByFieldName(p,f.name).type===f.type&&(h[n].attributeActionGroupName=c.name,b.hasOwnProperty(a.featureLayer.id)?b[a.featureLayer.id].push(f.name):
b[a.featureLayer.id]=[f.name])}return b},_getPresetFieldsForAppliedOn:function(a,f){var b={};J.forEach(t.config.editor.configInfos||t.config.editor.layerInfos,F.hitch(this,function(c){c.fieldValues&&c.fieldValues[a.name]&&(b=t._isPresetEnabledForLayer(c,a,b,f));c.relationshipInfos&&0<c.relationshipInfos.length&&J.forEach(c.relationshipInfos,F.hitch(this,function(h){h.fieldValues&&h.fieldValues[a.name]&&(b=t._isPresetEnabledForLayer(h,a,b,f))}))}));return b}};return t})},"widgets/SmartEditor/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/SmartEditor/setting/EditFields.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"settingsDesc" data-dojo-attach-point\x3d"fieldsDesc"\x3e${nls.fieldsPage.description}\x3c/div\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"fieldsTable"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"settingsNotes" data-dojo-attach-point\x3d"fieldsNotes"\x3e${nls.fieldsPage.fieldsNotes}\x3c/div\x3e\r\n    \x3cdiv class\x3d"attachmentsDesc" data-dojo-attach-point\x3d"attachmentsValidation"\x3e${nls.fieldsPage.smartAttachmentText}\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/FieldValidation.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"settingsDesc" data-dojo-attach-point\x3d"validationDesc"\x3e${nls.actionPage.description}\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"validationTable"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/SmartEditor/setting/FilterPage.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"submitWhenHidden"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"filterControl"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/CopyAttributes.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"settingsDesc" data-dojo-attach-point\x3d"validationDesc"\x3e${nls.actionPage.description}\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"copyAttributeTable"\x3e\x3c/div\x3e\r\n  \x3cdiv style\x3d"color:red; display: none;" class\x3d"settingsNotes" data-dojo-attach-point\x3d"warningNote"\x3e${nls.actionPage.copyAttributesNote}\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/SmartEditor/setting/Intersection.html":'\x3cdiv class\x3d"esriCTIntersectionMainContainer"\x3e\r\n    \x3cdiv syle\x3d"width:100%"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupInfoNode1"\x3e\r\n          \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTIntersectionGroupName"\x3e\r\n              \x3cdiv class\x3d"esriCTlabel"\x3e\r\n                ${nls.intersectionPage.groupNameLabel}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n                \x3cdiv style\x3d"width: 75%;" data-dojo-attach-point\x3d"groupNameTextBoxNode"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTIntersectionDatatype"\x3e\r\n              \x3cdiv class\x3d"esriCTlabel"\x3e\r\n                ${nls.intersectionPage.dataTypeLabel}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n                \x3cdiv style\x3d"width: 75%;" data-dojo-attach-point\x3d"dataTypeDropDownNode"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"ignoreLayerRankingNode" class\x3d"esriCTlabel esriCTIgnoreLayerRankingLabel"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.intersectionPage.intersectingLayersLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"addLayerLink"\x3e\r\n        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addLayer"\x3e\r\n          \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\x3cspan class\x3d"add-label"\x3e\r\n            ${nls.intersectionPage.addLayerLinkText}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTIntersectionHint"\x3e${nls.intersectionPage.intersectionLayerHint}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"layerTableNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"  data-dojo-attach-point\x3d"groupInfoNode2"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.intersectionPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/SmartEditor/setting/layerAndFieldsApplyOn.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"esriCTSearchFieldNode" data-dojo-attach-point \x3d "searchNode"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point \x3d "layerAndFieldsMainDiv"\x3e\x3c/div\x3e\r\n  \x3cdiv style\x3d"margin-top: 5px;" class\x3d"esriCTHidden" data-dojo-attach-point \x3d "domainFieldHintMsg"\x3e\r\n    \x3cdiv class\x3d"esriCTDomainlistDiv"\x3e*\x3c/div\x3e\r\n    \x3cdiv\x3e${nls.actionPage.domainListTitle}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/Coordinates.html":'\x3cdiv style\x3d"max-height: 445px;padding: 0 5px;"\x3e\r\n  \x3cdiv class\x3d"esriCTCoordinateWidth" data-dojo-attach-point\x3d"coordianteDijitMainWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode1"\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopUpLabel"\x3e${nls.intersectionPage.groupNameLabel}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopupdijitWrapper"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupNameTextBoxNode"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- hide coordinate source dropdown --\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper esriCTHidden"\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopUpLabel" title\x3d"${nls.coordinatesPage.coordinatesSourceTitle}"\x3e\r\n        ${nls.coordinatesPage.coordinatesSourceTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopupdijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTCoordinatePopupdijit" style\x3d"width: 100%;" data-dojo-attach-point\x3d"coordinatesSourceNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopUpLabel" title\x3d"${nls.coordinatesPage.coordinatesSelectTitle}"\x3e${nls.coordinatesPage.coordinatesSelectTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopupdijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTCoordinatePopupdijit" style\x3d"width: 100%" data-dojo-attach-point\x3d"selectCoordinateNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopUpLabel" title\x3d"${nls.coordinatesPage.coordinatesAttributeTitle}"\x3e${nls.coordinatesPage.coordinatesAttributeTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTCoordinatePopupdijitWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTCoordinatePopupdijit" style\x3d"width: 100%" data-dojo-attach-point\x3d"selectAttributeNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode2"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.intersectionPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/Address.html":'\x3cdiv style\x3d"max-height: 445px;padding: 0 5px;"\x3e\r\n  \x3cdiv class\x3d"esriCTAddressWidth" data-dojo-attach-point\x3d"addressDijitMainWrapper"\x3e \r\n      \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode1"\x3e\r\n        \x3cdiv  class\x3d"esriCTlabel"\x3e\r\n          ${nls.intersectionPage.groupNameLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"groupNameTextBoxNode" style\x3d"width: 95%"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.addressPage.selectFieldTitle}"\x3e${nls.addressPage.selectFieldTitle}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTSelectAttributeNode jimu-float-leading" data-dojo-attach-point\x3d"selectNode" style\x3d"width: 95%"\x3e\x3c/div\x3e\r\n      \x3ca data-dojo-attach-point\x3d"attributeInfoNode" style\x3d"line-height: 30px;" class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocoding-service-output.htm"\x3e${nls.addressPage.questionMark}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHint"\x3e${nls.addressPage.geocoderHint}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode2"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.intersectionPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/EditDescription.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"editText"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/SmartEditor/setting/SmartActionGroup.html":'\x3cdiv class\x3d"esriCTSmartActionsGroupContainer"\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel"\x3e\r\n      ${nls.smartActionsPage.groupNameLabel}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"groupNameTextBoxNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabelParentContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel"\x3e\r\n        ${nls.smartActionsPage.layerForExpressionLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerFieldDropBox"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"layerSelectorDiv"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHintCheck"\x3e\r\n      ${nls.smartActionsPage.layerForExpressionNote}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel"\x3e${nls.smartActionsPage.expressionText}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTExpression"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"expressionTextBoxNode" class\x3d"esriCTExpressionTextBoxNode"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"editExpressionIconNode" title\x3d"${nls.smartActionsPage.editExpressionLabel}"\x3e\r\n        \x3cdiv class\x3d"jimu-icon jimu-icon-edit" data-dojo-attach-point\x3d"editExpressionIconNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"submitWhenHiddenNode" class\x3d"esriCTlabel esriCTSubmitAttributeDataText"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.smartActionsPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\r\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\r\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\r\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/dijit/editing/templates/AttachmentEditor.html":"\x3cdiv class\x3d\"attachmentEditor\"\x3e\r\n    \x3cbr /\x3e\r\n    \x3cdiv\x3e\r\n        \x3cb\x3e${NLS_attachments}\x3c/b\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv dojoAttachPoint\x3d\"_attachmentError\" style\x3d'color:red;display:none'\x3e\x3c/div\x3e\r\n        \x3cbr /\x3e\r\n        \x3cspan dojoAttachPoint\x3d'_attachmentList' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e\r\n        \x3cbr\x3e\x3cbr\x3e\r\n        \x3cdiv data-dojo-type\x3d\"dijit/ProgressBar\" dojoAttachPoint\x3d\"_attachmentProgress\" indeterminate\x3d\"true\" style\x3d'display:none'\x3e\x3c/div\x3e\r\n        \x3cbr /\x3e        \r\n        \x3cform dojoAttachPoint\x3d'_uploadForm'\x3e ${NLS_add}:\x26nbsp;\x26nbsp;\x3cinput type\x3d'file' name\x3d'attachment' dojoAttachPoint\x3d'_uploadField' /\x3e \x3c/form\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e",
"url:esri/dijit/templates/AttributeInspector.html":'\x3cdiv class\x3d"esriAttributeInspector"\x3e\r\n    \x3cdiv class\x3d"atiLayerName" dojoAttachPoint\x3d"layerName"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiAttributes" dojoAttachPoint\x3d"attributeTable"\x3e\x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"attachmentEditor"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiEditorTrackingInfo" dojoAttachPoint\x3d"editorTrackingInfoDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"atiButtons" dojoAttachPoint\x3d"editButtons"\x3e\r\n        \x3cbutton  dojoType\x3d"dijit.form.Button" class\x3d"atiButton atiDeleteButton"  dojoAttachPoint\x3d"deleteBtn" dojoAttachEvent\x3d"onClick: onDeleteBtn" showLabel\x3d"true" type\x3d"button"\x3e${NLS_deleteFeature}\x3c/button\x3e\r\n        \x3cdiv class\x3d"atiNavButtons" dojoAttachPoint\x3d"navButtons"\x3e\r\n            \x3cdiv class\x3d"atiNavMessage" dojoAttachPoint\x3d"navMessage"\x3e\x3c/div\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiFirstIcon" dojoAttachPoint\x3d"firstFeatureButton" dojoAttachEvent\x3d"onClick: onFirstFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_first}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiPrevIcon" dojoAttachPoint\x3d"prevFeatureButton" dojoAttachEvent\x3d"onClick: onPreviousFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiNextIcon" dojoAttachPoint\x3d"nextFeatureButton" dojoAttachEvent\x3d"onClick: onNextFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\r\n            \x3cbutton  dojoType\x3d"dijit.form.Button" iconClass\x3d"atiButton atiLastIcon" dojoAttachPoint\x3d"lastFeatureButton" dojoAttachEvent\x3d"onClick: onLastFeature" showLabel\x3d"false" type\x3d"button"\x3e${NLS_last}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/Preset.html":'\x3cdiv class\x3d"esriCTPresetPopUpDiv"\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv style\x3d"width:50%; float:left;"\x3e\r\n            \x3cdiv class\x3d"esriCTPresetPopUpLabel"\x3e${nls.intersectionPage.groupNameLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTPresetPopupdijitWrapper"\x3e\r\n                \x3cdiv class\x3d"esriCTPresetPopupdijit" style\x3d"width: 100%" data-dojo-attach-point\x3d"groupNameDiv"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv style\x3d"width:50%; float:left;"\x3e\r\n            \x3cdiv class\x3d"esriCTPresetPopUpLabel"\x3e${nls.intersectionPage.dataTypeLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTPresetPopupdijitWrapper"\x3e\r\n                \x3cdiv class\x3d"esriCTPresetPopupdijit" style\x3d"width: 100%" data-dojo-attach-point\x3d"dataTypeDropdownDiv"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTRowContainer row esriCTHidden"\x3e\r\n        \x3cdiv style\x3d"width: 100%;" data-dojo-attach-point\x3d"showOnlyDomainFieldsNode" class\x3d"esriCTPresetPopUpLabel"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n            \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.smartActionsPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTPresetPopUpLabel"\x3e${nls.presetPopup.presetValueLAbel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTPresetPopupdijitWrapper" data-dojo-attach-point\x3d"presetValuedijitWrapper"\x3e\r\n            \x3cdiv class\x3d"esriCTPresetPopupdijit" style\x3d"width: 100%" data-dojo-attach-point\x3d"presetValueDiv"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-btn esriCTSelectValueBtn" data-dojo-attach-point\x3d"selectPresetValueBtn"\r\n            data-dojo-attach-event\x3d"onClick:_onSelectPresetValueButtonClick"\x3e${nls.chooseFromLayer.selectValueLabel}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n        \x3cdiv style\x3d"width: 100%;" data-dojo-attach-point\x3d"hideInPresetDisplayNode" class\x3d"esriCTPresetPopUpLabel"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/ChooseFromLayer.html":'\x3cdiv data-dojo-attach-point\x3d"layerSelectorPopUpDiv" class\x3d"esriCTlayerSelectorPopUpDiv"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorWrapper" class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.layersPage.layerSettingsTable.label}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTPopupSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerSelect" style\x3d"width: 100%" data-dojo-attach-point\x3d"layerSelectorDiv"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.chooseFromLayer.fieldLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTPopupSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTlayerField" style\x3d"width: 100%" data-dojo-attach-point\x3d"fieldsDropdownDiv"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.chooseFromLayer.valueLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTPopupSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTlayerFieldvalue" style\x3d"width: 100%" data-dojo-attach-point\x3d"valueProviderContainer"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTDomainFieldHint esriCTHidden" data-dojo-attach-point\x3d"domainFieldHint"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/RelativeDates.html":'\x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTLabel"\x3e${nls.relativeDates.dateTypeLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTRadioButtonContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTDateTypeLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"fixedRadioButton" checked\r\n                    data-dojo-attach-point\x3d"fixedRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.dateTypeLabel}${nls.relativeDates.fixed}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"fixedRadioButton"\x3e\r\n                    ${nls.relativeDates.fixed}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTDateTypeLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"currentRadioButton"  data-dojo-attach-point\x3d"currentRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.dateTypeLabel}${nls.relativeDates.current}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"currentRadioButton"\x3e\r\n                    ${nls.relativeDates.current}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTDateTypeLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"PastRadioButton"  data-dojo-attach-point\x3d"PastRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.dateTypeLabel}${nls.relativeDates.past}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"PastRadioButton"\x3e\r\n                    ${nls.relativeDates.past}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTDateTypeLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn" id\x3d"futureRadioButton"  data-dojo-attach-point\x3d"futureRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.dateTypeLabel}${nls.relativeDates.future}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"futureRadioButton"\x3e\r\n                    ${nls.relativeDates.future}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTRelativeDatesHint" data-dojo-attach-point\x3d"hintForDateType"\x3e${nls.relativeDates.hintForFixedDateType}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTLabel" style\x3d"margin-top:10px;" data-dojo-attach-point\x3d"valueLabel"\x3e${nls.relativeDates.valueLabel}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFixedDateContent" data-dojo-attach-point\x3d"fixedDateContent"\x3e\r\n        \x3cdiv class\x3d"esriCTFixedContentWrappper"\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTselectValueLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g2\'" type\x3d"radio" name\x3d"jimuradiobtn2" id\x3d"customRadioButton" checked\r\n                data-dojo-attach-point\x3d"customRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.customLabel}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"customRadioButton"\x3e\r\n                    ${nls.relativeDates.customLabel}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTRadioBtn esriCTselectValueLabel"\x3e\r\n                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g2\'" type\x3d"radio" name\x3d"jimuradiobtn2" id\x3d"selectValueRadioButton"\r\n                data-dojo-attach-point\x3d"selectValueRadioButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.relativeDates.popupTitle}"\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"selectValueRadioButton"\x3e\r\n                    ${nls.relativeDates.popupTitle}\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"customOptionContentNode"\x3e\r\n        \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n            \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.date}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFixedContentDijit"\x3e\r\n                \x3cdiv style\x3d"width:95%" data-dojo-type\x3d"dijit/form/DateTextBox" required\x3d"false" data-dojo-attach-point\x3d"dateTextBox" tabindex\x3d"0" aria-label\x3d"${nls.date}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n            \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.time}\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFixedContentDijit"\x3e\r\n                \x3cdiv style\x3d"width: 95%" data-dojo-type\x3d"dijit/form/TimeTextBox" required\x3d"false" data-dojo-attach-point\x3d"timeTextBox" tabindex\x3d"0" aria-label\x3d"${nls.time}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden"  data-dojo-attach-point\x3d"selectValueOptionContentNode"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"layerSelectorWrapper" class\x3d"esriCTWrapper"\x3e\r\n                \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.layersPage.layerSettingsTable.label}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFixedContentDijit"\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerSelect" style\x3d"width: 95%" data-dojo-attach-point\x3d"layerSelectorDiv"\r\n                    aria-label\x3d"${nls.layersPage.layerSettingsTable.label}"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n                \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.chooseFromLayer.fieldLabel}\x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFixedContentDijit"\x3e\r\n                    \x3cdiv class\x3d"esriCTlayerField" style\x3d"width: 95%" data-dojo-attach-point\x3d"fieldsDropdownDiv"\r\n                    aria-label\x3d"${nls.chooseFromLayer.fieldLabel}"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n                \x3cdiv class\x3d"esriCTPopUpLabel"\x3e${nls.relativeDates.valueLabel}\x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFixedContentDijit"\x3e\r\n                    \x3cdiv class\x3d"esriCTlayerFieldvalue" style\x3d"width: 95%" data-dojo-attach-point\x3d"valueProviderContainer"\r\n                    aria-label\x3d"${nls.relativeDates.valueLabel}"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTDomainFieldHint esriCTHidden" data-dojo-attach-point\x3d"domainFieldHint"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden"  data-dojo-attach-point\x3d"noValidLayerContentNode" style\x3d"padding: 20px"\x3e\r\n            ${nls.actionPage.noValidFieldTypeMsg}\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden" style\x3d"width:100%" data-dojo-attach-point\x3d"currentDateContent"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTPastOrFutureDateContent" data-dojo-attach-point\x3d"pastOrFutureDateContent"\x3e\r\n        \x3cdiv class\x3d"esriCTMarginForLabel"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTMarginForLabel"\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.years}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"yearsTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.years}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.months}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"monthsTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.months}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.days}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"daysTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.days}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTMarginForLabel" style\x3d"margin-top: 5px;"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTMarginForLabel"\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.hours}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"hoursTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.hours}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.minutes}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"minutesTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.minutes}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTFloatLeft"\x3e\r\n                \x3cdiv class\x3d"esriCTValueLabel"\x3e${nls.seconds}\x3c/div\x3e\r\n                \x3cdiv style\x3d"width:112px" data-dojo-type\x3d"dijit/form/NumberSpinner" required\x3d"true" value\x3d"0"\r\n                    data-dojo-props\x3d"constraints:{min:0,places:0},intermediateChanges:true" data-dojo-attach-point\x3d"secondsTextBox" tabindex\x3d"0"\r\n                    aria-label\x3d"${nls.seconds}"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTDatesWarningContainer" data-dojo-attach-point\x3d"relativeDateWarningContainer"\x3e${nls.relativeDates.relativeDateWarning}\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/RelativeDomains.html":'\x3cdiv\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n    \x3cdiv class\x3d"esriCTDomainFieldsHint"data-dojo-attach-point\x3d"domainFieldsHint"\x3e\x3c/div\x3e\r\n    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.relativeDomains.fieldSetTitle}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',"url:widgets/SmartEditor/setting/Setting.html":'\x3cdiv style\x3d"width:100%; height:100%;"\x3e\r\n    \x3cdiv style\x3d"height:100%;" data-dojo-attach-point\x3d"tabDiv"\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"layerSettingTabNode" class\x3d"esriCTTabNode" style\x3d"height: 100%;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"layerSettingsContainer" class\x3d"" style\x3d"margin-bottom: 10px;"\x3e\r\n                \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n                    \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" id\x3d"webmapSettingsRadioBtn"\r\n                        data-dojo-props\x3d"group: \'g2\'" type\x3d"radio" name\x3d"jimusettingradiobtn"\r\n                        data-dojo-attach-point\x3d"webmapSettingsRadioBtn"\x3e\r\n                    \x3clabel class\x3d"esriCTRadioLabel" for\x3d"webmapSettingsRadioBtn"\x3e\r\n                        ${nls.layersPage.webmapSettingsRadioBtnLabel}\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n                    \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" id\x3d"customSettingsRadioBtn"\r\n                        data-dojo-props\x3d"group: \'g2\'" type\x3d"radio" name\x3d"jimusettingradiobtn"\r\n                        data-dojo-attach-point\x3d"customSettingsRadioBtn"\x3e\r\n                    \x3clabel class\x3d"esriCTRadioLabel" for\x3d"customSettingsRadioBtn"\x3e\r\n                        ${nls.layersPage.customSettingsRadioBtnLabel}\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"breadCrumbContainer" class\x3d"breadCrumbContainer"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"layerTable" data-dojo-attach-point\x3d"tableLayerInfos" style\x3d"clear: both;height:100%;"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTMainLayerCheckBox"\x3e\r\n                \x3cinput data-dojo-attach-point\x3d"expandMainLayerNode" id\x3d"expandMainTable" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                    title\x3d"${nls.layersPage.expandMainTable}"/\x3e\r\n                \x3clabel class\x3d"checkLabel" for\x3d"expandMainTable"\r\n                    title\x3d"${nls.layersPage.expandMainTable}"\x3e${nls.layersPage.expandMainTable}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTRelatedLayerCheckBox"\x3e\r\n                \x3cinput  data-dojo-attach-point\x3d"expandRelatedTableNode" id\x3d"expandRelatedTable"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.expandRelatedTable}" /\x3e\r\n                \x3clabel class\x3d"checkLabel" for\x3d"expandRelatedTable"\r\n                    title\x3d"${nls.layersPage.expandRelatedTable}"\x3e${nls.layersPage.expandRelatedTable}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"smartActionsTabNode" class\x3d"esriCTTabNode esriCTSmartActionsTabNode"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cfieldset style\x3d"padding:10px;" class\x3d"esriCTFieldSet"\x3e\r\n                    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.smartActionsPage.definedActions}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d""\x3e\r\n                        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addNewSmartAction" title\x3d"${nls.smartActionsPage.addNewSmartActionLinkText}"\x3e\r\n                            \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"add-label"\x3e\r\n                                ${nls.smartActionsPage.addNewSmartActionLinkText}\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTSmartActionsTableParent"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"smartActionsTableNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Attribute Actions Tab Settings Starts --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"attributeActionsTabNode" class\x3d"esriCTTabNode esriCTAttributeActionsTabNode"\x3e\r\n            \x3c!-- intersection actions Table starts --\x3e\r\n            \x3cdiv class\x3d"esriCTAttributeActions"\x3e\r\n                \x3cfieldset style\x3d"padding:10px;" class\x3d"esriCTFieldSet"\x3e\r\n                    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.actionPage.copyAction.intersection}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d""\x3e\r\n                        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addIntersectionAction" title\x3d"${nls.smartActionsPage.addNewSmartActionLinkText}"\r\n                            data-dojo-attach-event\x3d"onClick:_onIntersectionBtnClick"\x3e\r\n                            \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"add-label"\x3e\r\n                                ${nls.smartActionsPage.addNewSmartActionLinkText}\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAttributeActionsTableParent"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"intersectionActionsTableNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- intersection actions Table ends --\x3e\r\n            \x3c!-- Address actions Table starts --\x3e\r\n            \x3cdiv class\x3d"esriCTAttributeActions"\x3e\r\n                \x3cfieldset style\x3d"padding:10px;" class\x3d"esriCTFieldSet"\x3e\r\n                    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.actionPage.copyAction.address}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d""\x3e\r\n                        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addAddressAction" title\x3d"${nls.smartActionsPage.addNewSmartActionLinkText}"\r\n                        data-dojo-attach-event\x3d"onClick:_onAddressBtnClick"\x3e\r\n                            \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"add-label"\x3e\r\n                                ${nls.smartActionsPage.addNewSmartActionLinkText}\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAttributeActionsTableParent"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"addressActionsTableNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- Address actions Table ends --\x3e\r\n            \x3c!-- Coordinates actions Table starts --\x3e\r\n            \x3cdiv class\x3d"esriCTAttributeActions"\x3e\r\n                \x3cfieldset style\x3d"padding:10px;" class\x3d"esriCTFieldSet"\x3e\r\n                    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.actionPage.copyAction.coordinates}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d""\x3e\r\n                        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addCoordinateAction" title\x3d"${nls.smartActionsPage.addNewSmartActionLinkText}"\r\n                        data-dojo-attach-event\x3d"onClick:_onCoordinateBtnClick"\x3e\r\n                            \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"add-label"\x3e\r\n                                ${nls.smartActionsPage.addNewSmartActionLinkText}\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAttributeActionsTableParent"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"coordinatesActionsTableNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- Coordinates actions Table ends --\x3e\r\n            \x3c!-- Preset actions Table starts --\x3e\r\n            \x3cdiv class\x3d"esriCTAttributeActions"\x3e\r\n                \x3cfieldset style\x3d"padding:10px;" class\x3d"esriCTFieldSet"\x3e\r\n                    \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.actionPage.copyAction.preset}\x3c/legend\x3e\r\n                    \x3cdiv class\x3d""\x3e\r\n                        \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"addPresetAction" title\x3d"${nls.smartActionsPage.addNewSmartActionLinkText}"\r\n                            data-dojo-attach-event\x3d"onClick:_onPresetBtnClick"\x3e\r\n                            \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"add-label"\x3e\r\n                                ${nls.smartActionsPage.addNewSmartActionLinkText}\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAttributeActionsTableParent"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"presetActionsTableNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/fieldset\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- Preset actions Table starts --\x3e\r\n        \x3c/div\x3e\r\n            \x3c!-- Attribute Actions Tab Settings Ends --\x3e\r\n\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"generalSettingTabNode" class\x3d"esriCTTabNode esriCTGeneralSettingTabNode"\x3e\r\n                \x3cdiv class\x3d"buttonSection"\x3e\r\n                    \x3cdiv class\x3d"jimu-btn jimu-trailing-margin1" data-dojo-attach-point\x3d"geocoderSettings"\x3e${nls.layersPage.geocoderSettingsText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"overflow: hidden"\x3e\r\n                    \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n                        \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.layersPage.featureTemplateLegendLabel}\x3c/legend\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"displayShapeSelector" id\x3d"displayShapeSelector"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.displayShapeSelectorTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"displayShapeSelector" title\x3d"${nls.layersPage.displayShapeSelectorTip}"\x3e${nls.layersPage.displayShapeSelector}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"createNewFeaturesFromExisting" id\x3d"createNewFeaturesFromExisting"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.createNewFeaturesFromExistingTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"createNewFeaturesFromExisting" title\x3d"${nls.layersPage.createNewFeaturesFromExistingTip}"\x3e${nls.layersPage.createNewFeaturesFromExisting}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption" style\x3d"text-indent: 25px;"\x3e\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"overrideDefaultsByCopiedFeature" id\x3d"overrideDefaultsByCopiedFeature"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.copiedFeaturesOverrideDefaultsTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"overrideDefaultsByCopiedFeature" title\x3d"${nls.layersPage.copiedFeaturesOverrideDefaultsTip}"\x3e${nls.layersPage.copiedFeaturesOverrideDefaults}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"displayPresetTop" id\x3d"displayPresetTop"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.displayPresetTopTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"displayPresetTop" title\x3d"${nls.layersPage.displayPresetTopTip}"\x3e${nls.layersPage.displayPresetTop}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"useFilterEditor" id\x3d"useFilterEditor"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.useFilterEditorTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"useFilterEditor" title\x3d"${nls.layersPage.useFilterEditorTip}"\x3e${nls.layersPage.useFilterEditor}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"keepTemplateSelected" id\x3d"keepTemplateSelected"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.keepTemplateActiveTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"keepTemplateSelected" title\x3d"${nls.layersPage.keepTemplateActiveTip}"\x3e${nls.layersPage.keepTemplateActive}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"listenToGF" id\x3d"listenToGF" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                title\x3d"${nls.layersPage.listenToGroupFilterTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"listenToGF" title\x3d"${nls.layersPage.listenToGroupFilterTip}"\x3e${nls.layersPage.listenToGroupFilter}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n\r\n                    \x3c/fieldset\x3e\r\n                    \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n                        \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.layersPage.saveSettingsLegendLabel}\x3c/legend\x3e\r\n\r\n                        \x3cdiv class\x3d"esriCTButtonPositionsLabel"\x3e${nls.layersPage.buttonPositionsLabel}\x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTRadioBtnContainer"\x3e\r\n                            \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n                                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" id\x3d"positionOfSaveButtonBelow"\r\n                                    data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn" checked\x3d"true"\r\n                                    data-dojo-attach-point\x3d"positionOfSaveButtonBelow"\x3e\r\n                                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"positionOfSaveButtonBelow"\x3e\r\n                                    ${nls.layersPage.belowEditLabel}\r\n                                \x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n                                \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" id\x3d"positionOfSaveButtonAbove"\r\n                                    data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn"\r\n                                    data-dojo-attach-point\x3d"positionOfSaveButtonAbove"\x3e\r\n                                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"positionOfSaveButtonAbove"\x3e\r\n                                    ${nls.layersPage.aboveEditLabel}\r\n                                \x3c/label\x3e\r\n                            \x3c/div\x3e\r\n\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"displayPromptOnSave" id\x3d"displayPromptOnSave"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.promptOnSaveTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"displayPromptOnSave" title\x3d"${nls.layersPage.promptOnSaveTip}"\x3e${nls.layersPage.promptOnSave}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"displayPromptOnDelete" id\x3d"displayPromptOnDelete"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.promptOnDeleteTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"displayPromptOnDelete" title\x3d"${nls.layersPage.promptOnDeleteTip}"\x3e${nls.layersPage.promptOnDelete}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"autoSaveEdits" id\x3d"autoSaveEdits"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.autoSaveEdits}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"autoSaveEdits" title\x3d"${nls.layersPage.autoSaveEdits}"\x3e${nls.layersPage.autoSaveEdits}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"removeOnSave" id\x3d"removeOnSave" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                title\x3d"${nls.layersPage.removeOnSaveTip}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"removeOnSave" title\x3d"${nls.layersPage.removeOnSaveTip}"\x3e${nls.layersPage.removeOnSave}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption" style\x3d"display: inline-block;"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"switchToMultilineInput" id\x3d"multilineCheckBox" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                title\x3d"${nls.layersPage.switchToMultilineInput}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"multilineCheckBox" title\x3d"${nls.layersPage.switchToMultilineInput}"\x3e${nls.layersPage.switchToMultilineInput}\x3c/label\x3e\r\n                            \x3cdiv class\x3d"esriCTMaxCharacterLimitTextBox"\x3e\r\n                                \x3cdiv data-dojo-attach-point\x3d"maxCharacter" data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true"\r\n                                    value\x3d"35" data-dojo-props\x3d"constraints: {min:0}" required\x3d"true" style\x3d"width:100%"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n\r\n                    \x3c/fieldset\x3e\r\n                    \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n                        \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.layersPage.geometrySettingsLegendLabel}\x3c/legend\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"editGeometryDefault" id\x3d"editGeometryDefault"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.geometryEditDefault}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"editGeometryDefault" title\x3d"${nls.layersPage.geometryEditDefault}"\x3e${nls.layersPage.geometryEditDefault}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"enableLockingMapNavigation" id\x3d"enableLockingMapNavigation"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.enableLockingMapNavigation}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"enableLockingMapNavigation" title\x3d"${nls.layersPage.enableLockingMapNavigation}"\x3e${nls.layersPage.enableLockingMapNavigation}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"enableMovingSelectedFeatureToGPS" id\x3d"enableMovingSelectedFeatureToGPS"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.enableMovingSelectedFeatureToGPS}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"enableMovingSelectedFeatureToGPS" title\x3d"${nls.layersPage.enableMovingSelectedFeatureToGPS}"\x3e${nls.layersPage.enableMovingSelectedFeatureToGPS}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n\r\n\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"enableMovingSelectedFeatureToXY" id\x3d"enableMovingSelectedFeatureToXY"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.enableMovingSelectedFeatureToXY}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"enableMovingSelectedFeatureToXY" title\x3d"${nls.layersPage.enableMovingSelectedFeatureToXY}"\x3e${nls.layersPage.enableMovingSelectedFeatureToXY}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption" title\x3d"${nls.layersPage.featuresSelectionToleranceTooltip}"\x3e\r\n                            \x3cdiv class\x3d"esriCTGlobalTleranceParentDiv"\x3e\r\n                                \x3cdiv class\x3d"esriCTGlobalToleranceTextbox"\x3e\r\n                                    \x3cdiv data-dojo-attach-point\x3d"featuresSelectionTolerance" value\x3d"5"\r\n                                    data-dojo-type\x3d"dijit/form/NumberSpinner"\r\n                                    data-dojo-props\x3d"smallDelta:5, constraints:{min:0,max:1000,places:0}" style\x3d"width:100%"\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv style\x3d"width: 75%; margin-left: 10px; margin-right: 10px;" class\x3d"esriCTLabel"\x3e\r\n                                    ${nls.layersPage.featuresSelectionTolerance}\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/fieldset\x3e\r\n                    \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n                        \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.layersPage.actionsSettingsLegendLabel}\x3c/legend\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"valuePicker" id\x3d"valuePickerEnable" data-dojo-type\x3d"dijit/form/CheckBox"\r\n                                title\x3d"${nls.layersPage.enableValuePickerHint}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"valuePickerEnable" title\x3d"${nls.layersPage.enableValuePickerHint}"\x3e${nls.layersPage.enableValuePicker}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"enableAttributeUpdates" id\x3d"enableAttributeUpdates"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.enableAttributeUpdates}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"enableAttributeUpdates" title\x3d"${nls.layersPage.enableAttributeUpdates}"\x3e${nls.layersPage.enableAttributeUpdates}\x3c/label\x3e\r\n\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption" style\x3d"text-indent: 25px;"\x3e\r\n\r\n                            \x3cinput class\x3d"check" data-dojo-attach-point\x3d"enableAutomaticAttributeUpdates" id\x3d"enableAutomaticAttributeUpdates"\r\n                                data-dojo-type\x3d"dijit/form/CheckBox" title\x3d"${nls.layersPage.enableAutomaticAttributeUpdates}" /\x3e\r\n                            \x3clabel class\x3d"checkLabel" for\x3d"enableAutomaticAttributeUpdates" title\x3d"${nls.layersPage.enableAutomaticAttributeUpdates}"\x3e${nls.layersPage.enableAutomaticAttributeUpdates}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"checkOption"\x3e\r\n                            \x3cdiv class\x3d"esriCTGlobalTleranceParentDiv"\x3e\r\n                              \x3cdiv class\x3d"esriCTGlobalToleranceTextbox"\x3e\r\n                                  \x3cdiv data-dojo-attach-point\x3d"globalTolerance" data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true"\r\n                                      value\x3d"0" data-dojo-props\x3d"constraints: {min:0}" required\x3d"true" style\x3d"width:100%"\x3e\x3c/div\x3e\r\n                              \x3c/div\x3e\r\n  \r\n                              \x3cdiv class\x3d"esriCTGlobalToleranceDropbox"\x3e\r\n                                  \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"globalToleranceUnit" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                      \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n                                      \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                                      \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                                      \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n                                  \x3c/select\x3e\r\n                              \x3c/div\x3e\r\n  \r\n                              \x3cdiv class\x3d"esriCTLabel esriCTIntersectionToleranceLabel"\x3e${nls.intersectionTolerance.intersectionTitle}\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                          \x3c/div\x3e\r\n                          \x3cdiv class\x3d"checkOption"\x3e\r\n                            \x3cdiv class\x3d"esriCTGlobalTleranceParentDiv"\x3e\r\n                                \x3cdiv class\x3d"esriCTGlobalToleranceTextbox"\x3e\r\n                                    \x3cdiv data-dojo-attach-point\x3d"globalPixelsTolerance" data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true"\r\n                                        value\x3d"20" data-dojo-props\x3d"constraints: {min:0}" required\x3d"true" style\x3d"width:100%"\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv style\x3d"width: 75%; margin-left: 10px; margin-right: 10px;" class\x3d"esriCTLabel"\x3e\r\n                                    ${nls.intersectionTolerance.pixelsToleranceTitle}\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"edit-description-title" title\x3d"${nls.layersPage.editDescriptionTip}"\x3e${nls.layersPage.editDescription}\x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"edit-description-box"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"editorDescription"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n            \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n    \x3cdiv class\x3d"tableInfos-loading" data-dojo-attach-point\x3d"tableInfosLoading"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/SmartEditor/setting/css/style.css":".jimu-widget-smartEditor-setting-relativeDates .esriCTRadioBtn {width: 25%; float: left; text-indent: 20px; padding: 5px 0px 5px 0px;}.jimu-widget-smartEditor-setting-relativeDates .esriCTselectValueLabel {width: 50% !important;}.jimu-widget-smartEditor-setting-relativeDates .esriCTDateTypeLabel {min-width: fit-content;}.jimu-widget-smartEditor-setting-relativeDates .esriCTLabel,.jimu-widget-smartEditor-setting-relativeDates .esriCTFixedContentWrappper {padding: 5px 0px 5px 0px; width: 100%; overflow: hidden;}.jimu-widget-smartEditor-setting-relativeDates .esriCTValueLabel {margin-bottom: 5px;}.jimu-widget-smartEditor-setting-relativeDates .esriCTPastOrFutureDateContent {width: 100%; margin-left: 20px;}.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTPastOrFutureDateContent {margin-left: none; margin-right: 20px;}.jimu-widget-smartEditor-setting-relativeDates .esriCTFixedContentLabel {width: 25%; float: left;}.jimu-widget-smartEditor-setting-relativeDates .esriCTFixedContentDijit {width: 75%; float: right;}.jimu-widget-smartEditor-setting-relativeDates .esriCTFloatLeft {width: 33%; float: left;}.jimu-widget-smartEditor-setting-relativeDates .esriCTFloatRight {width: 33%; float: right;}.jimu-widget-smartEditor-setting-relativeDates .esriCTHidden {display: none;}.jimu-widget-smartEditor-setting-relativeDates .esriCTRadioButtonContainer {width: 100%; height: 30px; display: inline-table;}.jimu-widget-smartEditor-setting-relativeDates .esriCTMarginForLabel {width: 100%; padding: 2px 0px 1px 0px; overflow: hidden;}.jimu-widget-smartEditor-setting-relativeDates .esriCTFixedDateContent {width:100%;}.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTFloatRight,.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTFixedContentDijit {float:left;}.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTRadioBtn,.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTFixedContentLabel,.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTFloatLeft {float: right;}.jimu-widget-smartEditor-setting-relativeDates .esriCTRelativeDatesHint {font-size: 12px; color: #a0acbf; font-style: oblique; width: 100%; margin-top: 5px;}.jimu-widget-smartEditor-setting-relativeDates .esriCTDatesWarningContainer {font-size: 12px; color: red; width: 100%; margin-top: 5px; padding: 5px 0px 5px 0px; overflow: hidden; font-style: italic;}.jimu-widget-smartEditor-setting-relativeDates .esriCTRadioLabel {vertical-align: middle;}.jimu-widget-smartEditor-setting-relativeDates .esriCTPopUpLabel {width: 25%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; line-height: 30px; text-indent: 20px;}.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTPopUpLabel {float: right}.jimu-widget-smartEditor-setting-relativeDates .esriCTWrapper {width: 100%; overflow: hidden; margin-bottom: 5px; padding-bottom: 5px;}.jimu-rtl .jimu-widget-smartEditor-setting-relativeDates .esriCTPopupSelect{float: left;}@media (max-width: 600px) {.jimu-widget-smartEditor-setting-relativeDates .esriCTRadioBtn {width: 50%;} .jimu-widget-smartEditor-setting-relativeDates .esriCTFloatLeft {width: 50%;}}@media (max-width: 320px) {.jimu-widget-smartEditor-setting-relativeDates .esriCTRadioBtn {width: 100%;} .jimu-widget-smartEditor-setting-relativeDates .esriCTFloatLeft {width:100%;}}.jimu-widget-smartEditor-setting-relativeDates .esriCTDomainFieldHint {font-size: 13px; color: #a0acbf; font-style: oblique; margin-top: 5px;}.jimu-widget-smartEditor-setting {margin: 0; padding: 0; font-size: 15px; overflow: hidden;}.esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-smartEditor-setting-address .esriCTHint {margin-top: 10px; float: left; font-size: 13px; color: #a0acbf; font-style: oblique;}.jimu-widget-smartEditor-setting .esriCTHint {float: left; font-size: 12px; color: #a0acbf; font-style: oblique; width: 100%; margin-left: 40px; padding-bottom: 5px;}.jimu-widget-smartEditor-setting .edit-description-box {width: calc(100% - 4px); height: 215px; position: relative; padding-top: 5px;}.jimu-widget-smartEditor-setting .edit-description-title {padding-top: 10px; width: calc(100% - 4px);}.jimu-widget-smartEditor-setting .dijitEditorIFrameContainer {background-color: #ffffff; border: none !important; width: 100% !important; height: 145px !important;}.jimu-widget-smartEditor-setting .warningIcon {background-image: url(../images/warning.png); width: 18px; height: 18px; margin-right: 30px; float: right; background-size: 18px; margin-top: 7px; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting .warningIcon {margin-right: 0px; margin-left: 30px; float: left;}.jimu-widget-smartEditor-setting .table-field-icon {background-image: url(../images/table.png); width: 16px; height: 16px; margin-left: 5px;}.jimu-widget-smartEditor-setting .table-field-icon:hover {background-image: url(../images/tableHover.png);}.jimu-rtl .jimu-widget-smartEditor-setting .table-field-icon {margin-left: 0; margin-right: 5px;}.jimu-widget-smartEditor-setting .editable {width: 100px;}.jimu-widget-smartEditor-setting .layer {width: 200px;}.jimu-widget-smartEditor-setting .update {width: 135px; padding-left: 0px;}.jimu-widget-smartEditor-setting .disable {width: 220px; padding-left: 0px;}.jimu-widget-smartEditor-setting .actions {width: 75px; padding-right: 1px !important;}.jimu-widget-smartEditor-setting .layersTableAction {width: 70px;}.jimu-widget-smartEditor-setting .description {width: 90px;}.jimu-widget-smartEditor-setting-fields .required {width: 7px; color: red; padding-left: 0 !important; padding-right: 0 !important;}.jimu-widget-smartEditor-setting-fields .editable {width: 120px;}.jimu-widget-smartEditor-setting-fields .visible {width: 90px;}.jimu-widget-smartEditor-setting-fields .preset {width: 120px;}.jimu-widget-smartEditor-setting-fields .fieldName {width: 190px;}.jimu-widget-smartEditor-setting-fields .fieldLabel {}.jimu-widget-smartEditor-setting-fields .settingsDesc {padding-bottom: 10px; font-size: 14px;}.jimu-widget-smartEditor-setting-fields .settingsNotes {padding-top: 10px; font-size: 14px;}.jimu-widget-smartEditor-setting-fields .actions {width: 80px; padding-right: 2px !important;}.jimu-widget-smartEditor-setting-fields .attachmentsDesc {color: #24B5CC; font-size: small; max-width: 100%; cursor: pointer; padding-top: 10px; float: left;}.jimu-rtl .jimu-widget-smartEditor-setting-fields .attachmentsDesc {float: right;}.jimu-widget-smartEditor-rule-table .rule {width: 185px;}.jimu-widget-smartEditor-rule-table .expression {overflow: hidden;}.jimu-widget-smartEditor-rule-table .actions {width: 100px;}.jimu-widget-smartEditor-rule-table .settingsDesc {font-size: 14px; padding-bottom: 10px;}.jimu-widget-smartEditor-rule-table .settingsNotes {padding-top: 10px; font-size: 14px;}.jimu-widget-smartEditor-rule-table .editGroupHint {margin-top: 5px; padding-top: 5px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique; width: 100%; padding-bottom: 5px;}.jimu-widget-smartEditor-setting .setting-table {width: 100%;}.jimu-widget-smartEditor-setting .setting-table \x3e thead \x3e tr \x3e th, .jimu-widget-smartEditor-setting .setting-table \x3e tbody \x3e tr \x3e td {height: 40px; line-height: 40px; vertical-align: middle;}.jimu-widget-smartEditor-setting .input-table \x3e tbody \x3e tr \x3e .first {width: auto; min-width: 160px; text-align: left;}.jimu-rtl .jimu-widget-smartEditor-setting .input-table \x3e tbody \x3e tr \x3e .first {text-align: right;}.jimu-widget-smartEditor-setting .input-table \x3e tbody \x3e tr \x3e .second {width: auto;}.jimu-widget-smartEditor-setting .input-table \x3e tbody \x3e tr \x3e .second \x3e span {display: inline-block; height: 40px; line-height: 40px;}.jimu-widget-smartEditor-setting .dijitArrowButtonContainer {width: 17px;}.jimu-widget-smartEditor-setting .dijitSelect {height: 30px; width: 100%;}.jimu-widget-smartEditor-setting .checkOption {padding-top: 5px; padding-bottom: 5px; padding-left: 5px;}.jimu-widget-smartEditor-setting .check {margin-left: 15px; margin-right: 5px;}.jimu-widget-smartEditor-setting .esriCTRelatedLayerCheckBox {margin: 0; position: absolute; bottom: 0px;}.jimu-widget-smartEditor-setting .esriCTMainLayerCheckBox {margin: 0; position: absolute; bottom: 20px;}.jimu-widget-smartEditor-setting .esriCTFieldSet {height: auto; width: calc(100% - 4px); border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin: 10px 0px 10px 0px;}.jimu-widget-smartEditor-setting .esriCTFieldSetLegend {margin-left: 15px; font-weight: bold;}.jimu-widget-smartEditor-setting .esriCTButtonPositionsLabel {padding-left: 5px; padding-bottom: 5px; padding-top: 5px; margin-left: 15px; width: 100%;}.jimu-widget-smartEditor-setting .esriCTRadioBtnContainer {margin-left: 20px; display: inline-flex}.jimu-widget-smartEditor-setting .esriCTRadioLabel {vertical-align: top; padding-right: 40px;}.jimu-widget-smartEditor-setting .jimu-image-chooser {right: inherit !important;}.jimu-widget-smartEditor-setting .editor-container .uploaderInsideNode embed {display: none;}jimu-widget-smartEditor-edit-description .jimu-image-chooser {right: inherit !important;}jimu-widget-smartEditor-edit-description .editor-container .uploaderInsideNode embed {display: none;}.jimu-widget-smartEditor-setting a.attDescrip {width: 20px; height: 20px; display: block; background: transparent url(../images/desc.png) center center no-repeat; text-align: center; vertical-align: middle; z-index: 9999;}jimu-widget-smartEditor-setting a.attDescrip:hover {background-image: url(../images/descHover.png);}.jimu-widget-smartEditor-filter-page .submithide {padding-left: 4px; font-size: 12px;}.jimu-widget-smartEditor-filter-page {height: 100%;}.jimu-widget-smartEditor-filter-page \x3e div:nth-child(2) {height: calc(100% - 65px);}.jimu-widget-smartEditor-setting .nextArrowIcon {height: 20px; width: 20px; background-position: center; background-repeat: no-repeat; background-size: 20px; background-image: url(../images/nextArrow.png); float: left;}.jimu-widget-smartEditor-setting .breadCrumbTitle {float: left;}.jimu-rtl .jimu-widget-smartEditor-setting .nextArrowIcon {float: right; -webkit-transform: rotate(180deg); -moz-transform: rotate(180deg); -ms-transform: rotate(180deg); -o-transform: rotate(180deg); transform: rotate(180deg);}.jimu-rtl .jimu-widget-smartEditor-setting .breadCrumbTitle {float: right;}.jimu-widget-smartEditor-setting .breadCrumbTitleActive {color: #24B5CC; cursor: pointer;}.jimu-widget-smartEditor-setting .breadCrumbContainer {padding: 0 0 5px 0; width: 100%; float: left; color: #898989; font-family: \"Avenir Medium\";}.jimu-widget-smartEditor-setting .tableInfos-loading {top: 65px; position: relative;}.esriCTCopyAction {height: 15px; width: 15px; background-position: center; background-repeat: no-repeat; background-size: 15px; background-image: url(../images/copy.png); float: left; cursor: pointer; margin-left: 1px;}.esriCTCopyAction:hover {background-image: url(../images/copyHover.png);}.jimu-rtl .esriCTCopyAction {float: right; margin-right: 5px;}.jimu-widget-smartEditor-setting .buttonSection {margin-bottom: 10px;}.jimu-widget-smartEditor-setting-coordinates .esriCTSelectTitle {padding-top: 5px; padding-bottom: 5px;}.jimu-widget-smartEditor-setting-intersection .esriCTIntersectionMainContainer,.jimu-widget-smartEditor-setting-address .esriCTAddressMainContainer{max-height: 500px; padding: 0 5px;}.claro .jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer .dijitSelect {height: 27px; margin-top: 1px; width: 100%; float: left;}.jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer {float: left;}.jimu-widget-smartEditor-setting-intersection .esriCTIntersectionTableMaxHeight .jimu-simple-table{max-height: 200px;}.jimu-widget-smartEditor-setting-intersection .jimu-popup \x3e .content {overflow-y: hidden;}.jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer .dijitSelectLabel {overflow: hidden; width: 200px; float: left;}.jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer .dijitSelect .dijitInputField {overflow: hidden;}.jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer .dijitSelectLabel {text-align: left;}.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTDropDownContainer .dijitSelectLabel {text-align: right;}.jimu-widget-smartEditor-setting-address .esriCTRowContainer, .jimu-widget-smartEditor-setting-intersection .esriCTRowContainer {width: 100%; overflow: hidden; margin-bottom: 10px;}.jimu-widget-smartEditor-setting-address .esriCTlabel, .jimu-widget-smartEditor-setting-intersection .esriCTlabel {width: 30%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; font-size: 14px; color: #596679; line-height: 30px;}.jimu-widget-smartEditor-setting-address .esriCTGroupInfoContainer{padding-left: 25px; width: 70%; float: right; display: inline-block;}.jimu-widget-smartEditor-setting-intersection .esriCTGroupInfoContainer {padding-left: 25px; width: 70%; float: right;}.jimu-rtl .jimu-widget-smartEditor-setting-address .esriCTGroupInfoContainer {float: left}.jimu-widget-smartEditor-setting-intersection .esriCTDataTypeDropdown .dijitSelectLabel {width: 198px;}.claro .jimu-widget-smartEditor-setting-intersection .esriCTDataTypeDropdown .dijitSelect {height: 30px;}.jimu-widget-smartEditor-setting-intersection .esriCTIgnoreLayerRankingLabel {width: 100%; padding: 0px; float: none; line-height: normal;}.jimu-widget-smartEditor-setting-address .esriCTFieldset, .jimu-widget-smartEditor-setting-intersection .esriCTFieldset,.jimu-widget-smartEditor-setting-presetPopup .esriCTFieldset, .jimu-widget-smartEditor-setting-coordinates .esriCTFieldset, .jimu-widget-smartEditor-setting-address .esriCTFieldset, .jimu-widget-smartEditor-setting-relativeDomains .esriCTFieldset{height: auto; width: 100%; border: 1px solid #a0acbf! important; border-radius: 5px; font-size: 14px; color: #596679; min-width: 0px; padding: 10px;}.jimu-widget-smartEditor-setting-address .esriCTLegendTitle, .jimu-widget-smartEditor-setting-intersection .esriCTLegendTitle,.jimu-widget-smartEditor-setting-presetPopup .esriCTLegendTitle, .jimu-widget-smartEditor-setting .esriCTLegendTitle,.jimu-widget-smartEditor-setting-coordinates .esriCTLegendTitle, .jimu-widget-smartEditor-setting-address .esriCTLegendTitle {margin-left: 5px; font-weight: bold;}.jimu-rtl .jimu-widget-smartEditor-setting-address .esriCTLegendTitle, .jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTLegendTitle,.jimu-rtl .jimu-widget-smartEditor-setting-presetPopup .esriCTLegendTitle, .jimu-rtl .jimu-widget-smartEditor-setting .esriCTLegendTitle,.jimu-rtl .jimu-widget-smartEditor-setting-coordinates .esriCTLegendTitle, .jimu-rtl .jimu-widget-smartEditor-setting-address .esriCTLegendTitle {margin-left: 0px; margin-right: 5px;}.jimu-widget-smartEditor-setting-intersection .esriCTToleranceSettingsIcon {background-image: url(../images/settings.png); cursor: pointer; width: 16px; height: 16px; float: right;}.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTToleranceSettingsIcon {float: left;}.jimu-widget-smartEditor-setting-intersection .esriCTToleranceValueText {height: 25px; width: 85%; float: left; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTToleranceValueText {float: right;}.jimu-widget-smartEditor-setting-intersection .esriCTpopupFieldContent {height: auto; width: 200px; min-height: 160px;}.jimu-widget-smartEditor-setting-intersection .esriCTPopupLabels {font-size: 14px; color: #596679;}.jimu-widget-smartEditor-setting-intersection .esriCTMargin {margin-top: 10px;}.jimu-widget-smartEditor-setting-intersection .esriCTToleranceUnitDropdown {width: 100%;}.claro .jimu-widget-smartEditor-setting-intersection .esriCTToleranceParentDiv .dijitDropDownButton {margin: 0px;}.claro .jimu-widget-smartEditor-setting-intersection .esriCTToleranceParentDiv .dijitDropDownButton .dijitButtonNode {background: none; border: none; width: 25px; box-shadow: none; padding: 0;}.claro .jimu-widget-smartEditor-setting-intersection .esriCTToleranceParentDiv .dijitArrowButtonInner {display: none;}.jimu-widget-smartEditor-setting-intersection .esriCTIntersectionHint {font-size: 13px; color: #a0acbf; font-style: oblique; margin-bottom: 5px;}.jimu-widget-smartEditor-setting-preset .esriCTFieldTitle {padding-top: 5px; padding-bottom: 5px; float: left; width: calc(100% - 20px);}.jimu-rtl .jimu-widget-smartEditor-setting-preset .esriCTFieldTitle {float: right;}.jimu-widget-smartEditor-setting-preset .esriCTDeletePreset {float: right; margin-top: 7px;}.jimu-widget-smartEditor-setting-preset .ee-presetValue-label-header-field, .jimu-widget-smartEditor-setting-preset .field-alias-label {width: 40%;}.jimu-widget-smartEditor-setting-preset .ee-presetValue-value-header-field, .jimu-widget-smartEditor-setting-preset .preset-value-editable {width: 100%; margin-bottom: 6px;}.jimu-widget-smartEditor-setting-preset .ee-inputField {width: 100%;}.jimu-widget-smartEditor-setting-preset .ee-inputFieldTextArea {width: 100%!important; resize: vertical; overflow: auto; font-family: inherit; line-height: 20px !important; font-size: 14px; min-height: 70px;}.jimu-widget-smartEditor-setting-preset .ee-inputFieldRichText {width: 100%!important; margin: 5px auto;}.jimu-widget-smartEditor-setting-preset .esriCTPresetContent {overflow-y: auto; padding-right: 5px; max-height: 500px;}.jimu-rtl .jimu-widget-smartEditor-setting-preset .esriCTPresetContent {padding-right: 0px; padding-left: 5px;}.jimu-widget-smartEditor-setting-preset .esriCTPresetHint {padding-bottom: 10px; font-size: 14px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTFieldSet {width: 100%;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTFieldSetLegend {margin-right: 20px;}.jimu-rtl .jimu-widget-smartEditor-setting .checkOption {padding-right: 5px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTRadioBtnContainer {margin-right: 20px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTRadioLabel {padding-right: 0px; padding-left: 40px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTButtonPositionsLabel {margin-right: 20px; padding-right: 5px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTHint {text-indent: 70px; margin-left: 0px;}.jimu-rtl .jimu-widget-smartEditor-setting .check {margin-right: 15px; margin-left: 5px;}.jimu-widget-smartEditor-setting .esriCTLabel {width: 25%; float: left; margin-top: 6px; font-size: 14px; color: #596679;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTLabel,.jimu-rtl .jimu-widget-smartEditor-setting-address .esriCTlabel,.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTlabel {float: right;}.jimu-widget-smartEditor-setting .esriCTGlobalTleranceParentDiv {width: calc(100% - 4px); overflow: hidden; clear: both; margin-top: 3px; padding-bottom: 3px;}.jimu-widget-smartEditor-setting .esriCTGlobalToleranceTextbox {width: 10%; float: left; margin-left: 15px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTGlobalToleranceTextbox {float: right; margin-right: 15px;}.jimu-widget-smartEditor-setting .esriCTMaxCharacterLimitTextBox {float: right; margin-left: 10px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTMaxCharacterLimitTextBox {float: left; margin-left: 0px; margin-right: 10px;}.jimu-widget-smartEditor-setting .esriCTGlobalToleranceDropbox {width: 25%; float: left; font-size: 14px; color: #596679; padding-right: 10px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTGlobalToleranceDropbox {float: right; padding-right: 10px;}.jimu-widget-smartEditor-setting-intersection .esriCTToleranceParentDiv {width: 100%;}.jimu-widget-smartEditor-setting .esriCTAddNewSmartActionLink {margin: 0px 10px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTAddNewSmartActionLink {float: right;}.jimu-widget-smartEditor-setting .esriCTSmartActionsTableParent {width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .row {clear: both;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTlabel {width: 40%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; min-width: 250px; font-size: 14px; color: #596679; line-height: 30px;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTlabel {padding: 0px 0px 0px 10px; float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTSmartActionsGroupContainer {max-height: 550px; padding: 0 5px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerFieldDropBox {width: 59%; float: left;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerFieldDropBox {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTFieldset {height: 235px; width: 100%; border: 1px solid #a0acbf! important; border-radius: 5px; font-size: 14px; color: #596679; min-width: 0px; padding: 10px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTHintCheck {float: left; font-size: 13px; color: #a0acbf; font-style: oblique; line-height: 20px; padding-left: 10px; padding-right: 15px; padding-top: 5px;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTHintCheck {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTExpression {width: 59%; float: left;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTExpression {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLegendTitle,.jimu-widget-smartEditor-setting-presetPopup .esriCTLegendTitle {margin-left: 5px; font-weight: bold;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTLegendTitle,.jimu-widget-smartEditor-setting-presetPopup .esriCTLegendTitle {margin-left: 0px; margin-right: 5px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTHeaderIcon {height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; display: inline-block; vertical-align: top; margin: 0 5px; cursor: pointer;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTHideCol {background-image: url(../images/hide.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTRequiredCol {background-image: url(../images/required.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTDisableIcon {background-image: url(../images/disable.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableParentContainer,.jimu-widget-smartEditor-setting-presetPopup .esriCTTableParentContainer,.jimu-widget-smartEditor-setting-address .esriCTTableParentContainer,.jimu-widget-smartEditor-setting-relativeDomains .esriCTTableParentContainer {width: 100%;}.jimu-widget-smartEditor-setting-relativeDomains .esriCTDomainFieldsHint{padding-bottom: 10px; font-size: 14px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableMainNode {width: 100%; border-collapse: collapse; height: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableRow {width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerNameRow {line-height: 28px; width: 100%; display: table;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerNameRowParent {background-color: #eee; width: 44%; height: 28px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerFieldRow:hover {background-color: #eee; color: #7989a0;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableTH {background-color: #888888; padding: 0 5px; border-left: 2px solid #fff; height: 58px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableHeaderTitle {float: left; font-weight: bold; color: white; text-align: left; width: calc(100% - 20px); line-height: 30px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTablePriorityTitle {float: left; text-align: left; width: calc(100% - 20px); text-overflow: ellipsis; white-space: nowrap; overflow: hidden;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTTablePriorityTitle {text-align: right;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableHeaderTitle {float: right; text-align: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableHeaderIcon {float: right; height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; vertical-align: top; cursor: pointer;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityPopupIcon {float: left; height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; vertical-align: top; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityPopupIcon {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup tr.esriCTSmartActionGroupRow.esriCTLayerFieldRow {width: 100%; float: left;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerFields {padding-left: 25px; width: 45.9%;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTCheckBoxTD {padding: 0 5px;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTCheckBoxTD {padding: 0;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTCheckBoxMainDiv {float: left;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTCheckBoxMainDiv {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityIconMainDiv, .jimu-widget-smartEditor-setting .esriCTPriorityIconMainDiv {width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityIcons, .jimu-widget-smartEditor-setting .esriCTPriorityIcons {float: left; width: 12px; height: 12px; background-size: 12px; background-repeat: no-repeat; margin: 0 10px;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityIcons, .jimu-rtl .jimu-widget-smartEditor-setting .esriCTPriorityIcons {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityEditIcon {float: right; margin-right: 5px; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityEditIcon {float: left;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTSearchFieldNode,.jimu-widget-smartEditor-setting-smartActionGroup .esriCTSearchFieldNode {margin-bottom: 10px;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTExistingExpressionDiv,.jimu-widget-smartEditor-setting-smartActionGroup .esriCTExistingExpressionDiv {background-image: url(../images/warning.png); width: 18px; height: 18px; float: left; background-size: 18px; cursor: pointer;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDomainlistDiv {color: #0000ff; width: 10px; height: 15px; float: left; cursor: pointer; font-size: 20px; font-weight: bold;}.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDomainlistDiv,.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTExistingExpressionDiv,.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTExistingExpressionDiv {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTHide, .jimu-widget-smartEditor-setting .esriCTHide {background-image: url(../images/hide.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTRequired, .jimu-widget-smartEditor-setting .esriCTRequired {background-image: url(../images/required.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTDisabled, .jimu-widget-smartEditor-setting .esriCTDisabled {background-image: url(../images/disable.png);}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTExpandAllNode,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTExpandAllNode {margin: 5px 0;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTToggleLayerIcon,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTToggleLayerIcon{height: 15px; width: 15px; float: left; background-position: center center; background-repeat: no-repeat; background-size: 15px 15px; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTToggleLayerIcon,.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTToggleLayerIcon{float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTToggleLayerCollapsed,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTToggleLayerCollapsed {background-image: url('../images/collapse.png');}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTToggleLayerExpanded,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTToggleLayerExpanded{background-image: url('../images/expand.png');}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDojoCheckBoxLabel {margin-left: 5px; vertical-align: middle;}.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDojoCheckBoxLabel {margin-left: 0px; margin-right: 5px; vertical-align: inherit;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerTitle {float: left; margin-left: 5px; font-weight: bold; width: 94%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerTitle {float: right; margin-left: 0px; margin-right: 5px;}.jimu-widget-smartEditor-setting-address .esriCTHidden, .jimu-widget-smartEditor-setting-intersection .esriCTHidden, .jimu-widget-smartEditor-setting-smartActionGroup .esriCTHidden, .jimu-widget-smartEditor-setting .esriCTHidden,.jimu-widget-smartEditor-setting-presetPopup .esriCTHidden, .jimu-widget-smartEditor-setting-coordinates .esriCTHidden {display: none;}.jimu-widget-smartEditor-setting .esriCTVisibility {visibility: hidden;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTExpressionTextBoxNode {float: left; width: calc(100% - 26px);}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTExpressionTextBoxNode {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTextBoxNode {width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .editExpressionIconNode {float: left; height: 30px; line-height: 30px; padding-left: 10px; padding-top: 3px; cursor: pointer;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .editExpressionIconNode {float: right; padding-left: 0px; padding-right: 10px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerField {float: left; width: 59%;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTLayerField {float: right;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTGroupNameTextBox {width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTRowContainer {width: 100%; overflow: hidden; margin-bottom: 10px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTlabelParentContainer {width: 100%; clear: both;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityColumnParentContainer {width: 100%; overflow: hidden;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityColumnParentDiv {clear: both; width: 100%; overflow: hidden;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityNumberDiv {width: 100%; overflow: hidden; height: 17px; color: white;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTSAHeaderCheckbox {padding-left: 4px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityOneDiv, .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityTwoDiv, .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityThreeDiv {width: 32px; float: left; padding-left: 8px;}.jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityOneDiv, .jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityTwoDiv, .jimu-rtl .jimu-widget-smartEditor-setting-smartActionGroup .esriCTPriorityThreeDiv {float: right; padding-left: 0px; padding-right: 8px;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTSubmitAttributeDataText {width: 100%; padding: 0px; float: none; line-height: normal;}.jimu-widget-smartEditor-setting .esriCTDefinedFor {margin-left: 0px;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTDefinedFor {margin-right: 0px; margin-left: 10px;}.jimu-widget-smartEditor-setting .esriCTAttributeActionsTableParent {width: 100%;}.jimu-widget-smartEditor-setting .esriCTAttributeActions {margin-top: 10px;}.jimu-widget-smartEditor-setting .esriCTAttributeActionContainer{margin-bottom: 10px; height: 30px;}.jimu-widget-smartEditor-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-smartEditor-setting .esriCTSmartActionsTabNode {overflow-y: auto;}.jimu-widget-smartEditor-setting .esriCTAttributeActionsTabNode,.jimu-widget-smartEditor-setting .esriCTGeneralSettingTabNode {height: calc(100% - 45px); overflow: auto;}@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {.jimu-widget-smartEditor-setting .jimu-viewstack {height: calc(100% - 45px);}}.jimu-widget-smartEditor-setting .esriCTTabNode {padding: 10px;}.jimu-widget-smartEditor-setting-presetPopup .esriCTPresetPopUpDiv {max-height: 445px; padding: 0 5px;}.jimu-widget-smartEditor-setting-presetPopup .esriCTWrapper,.jimu-widget-smartEditor-setting-coordinates .esriCTWrapper,.jimu-widget-smartEditor-setting-address .esriCTWrapper{width: 100%; overflow: hidden; margin-bottom: 10px;}.jimu-widget-smartEditor-setting-presetPopup .esriCTPresetPopUpLabel{width: 30%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; font-size: 14px; color: #596679; line-height: 30px;}.jimu-rtl .jimu-widget-smartEditor-setting-presetPopup .esriCTPresetPopUpLabel,.jimu-rtl .jimu-widget-smartEditor-setting-coordinates .esriCTCoordinatePopUpLabel,.jimu-rtl.jimu-widget-smartEditor-setting-address .esriCTAddressPopuplabel {float: right;}.jimu-widget-smartEditor-setting-presetPopup .esriCTPresetPopupdijitWrapper {width: 50%; float: left; padding-bottom: 5px;}.jimu-widget-smartEditor-setting-presetPopup .esriCTPresetValueTime{margin-top: 2px;}.jimu-rtl .jimu-widget-smartEditor-setting-presetPopup .esriCTPresetPopupdijitWrapper,.jimu-rtl .jimu-widget-smartEditor-setting-coordinates .esriCTCoordinatePopupdijitWrapper {float: right;}.jimu-widget-smartEditor-setting-presetPopup .esriCTSelectValueBtn {float: left; margin-left: 10px; line-height: 28px;}.jimu-rtl .jimu-widget-smartEditor-setting-presetPopup .esriCTSelectValueBtn {float: right; margin-right: 10px;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTOverrideForPreset {max-height: 205px; overflow-y: auto;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTLayerMainDiv{padding-top: 5px; background-color: #eee;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTLayercheckBox{padding-left: 25px; font-weight: bold;}.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTLayercheckBox{padding-right: 25px}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTFieldsDiv{padding-left: 5px; padding-top: 5px;}.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTFieldsDiv{padding-right: 5px}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDomainlistDiv,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTExistingExpressionDiv {margin-right: 4px;}.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTDomainlistDiv,.jimu-rtl .jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTExistingExpressionDiv {margin-left: 4px;}.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .esriCTVisibilityHidden {visibility: hidden;}.jimu-widget-smartEditor-setting-chooseFromLayer .esriCTPopUpLabel {width: 30%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; font-size: 14px; color: #596679; line-height: 30px;}.jimu-rtl .jimu-widget-smartEditor-setting-chooseFromLayer .esriCTPopUpLabel{float: right}.jimu-widget-smartEditor-setting-chooseFromLayer .esriCTDomainFieldHint {font-size: 13px; color: #a0acbf; font-style: oblique; margin-top: 5px;}.jimu-widget-smartEditor-setting-chooseFromLayer .esriCTWrapper {width: 100%; overflow: hidden; margin-bottom: 5px; padding-bottom: 5px;}.jimu-widget-smartEditor-setting-chooseFromLayer .esriCTPopupSelect {width: 70%; float:right;}.jimu-rtl .jimu-widget-smartEditor-setting-chooseFromLayer .esriCTPopupSelect{float: left;}.jimu-widget-smartEditor-setting-coordinates .esriCTCoordianteDijitMainWrapper{width: 100%;}.jimu-widget-smartEditor-setting-coordinates .esriCTCoordinatePopUpLabel {width: 40%; padding: 0px 10px 0px 0px; word-break: break-word; float: left; font-size: 14px; color: #596679; line-height: 30px;}.jimu-widget-smartEditor-setting-coordinates .esriCTCoordinatePopupdijitWrapper{width: 60%; float: left; padding-bottom: 5px;}.jimu-widget-smartEditor-setting-intersection .esriCTIntersectionGroupName {width: 50%; float: left;}.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTIntersectionGroupName {float: right;}.jimu-widget-smartEditor-setting-intersection .esriCTIntersectionDatatype {width: 50%; float: right;}.jimu-rtl .jimu-widget-smartEditor-setting-intersection .esriCTIntersectionDatatype {float: left;}.jimu-widget-smartEditor-setting-coordinates .esriCTCoordinateWidth,.jimu-widget-smartEditor-setting-address .esriCTAddressWidth {width: 70%;}.jimu-widget-smartEditor-setting-coordinates .esriCTFullWidth,.jimu-widget-smartEditor-setting-address .esriCTFullWidth,.jimu-widget-smartEditor-setting-intersection esriCTFullWidth{width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle-group,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle-group {padding: 5px;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle-group .checkbox-inline,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle-group .switch-toggle.dijitCheckBox,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle.dijitCheckBox,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-left: 2px;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle.dijitCheckBox:before,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle.dijitCheckBox:before {content: \"\"; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle.dijitCheckBox input,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle.dijitCheckBox.dijitCheckBoxChecked,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-smartEditor-setting-smartActionGroup .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before,.jimu-widget-smartEditor-setting-layersAndFieldsApplyOn .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-smartEditor-setting .esriCTIntersectionToleranceLabel {width: 60%;}.jimu-rtl .jimu-widget-smartEditor-setting .esriCTIntersectionToleranceLabel {margin-right: 10px;}.jimu-widget-smartEditor-setting .head-section {position: sticky; top:0;}.jimu-widget-smartEditor-setting .esriCTSmartActionsTableParent .jimu-simple-table .body-section {height: calc(100% - 36px);}.jimu-widget-smartEditor-setting .layerTable .jimu-simple-table .body-section {}.jimu-widget-smartEditor-setting .layerTable td.checkbox-td {padding-left: 0px;}.jimu-widget-smartEditor-setting .layerTable td.checkbox-td.edit {padding-left: 8px;}.jimu-widget-smartEditor-setting .esriCTSmartActionsTableParent .jimu-simple-table {max-height: 250px; overflow-y: auto;}.jimu-widget-smartEditor-setting-smartActionGroup tr.esriCTTableRow \x3e th {position: sticky; top: 0;}.jimu-widget-smartEditor-setting-smartActionGroup .esriCTTableParentContainer {height: 100%; width: 100%;}.jimu-widget-smartEditor-setting-smartActionGroup .tableBodyScroll table {clear: both; display: inline-table;}.jimu-widget-smartEditor-setting-smartActionGroup .tableBodyScroll tbody {position: absolute; overflow-y: auto; clear: both; height: 142px;}",
"*now":function(F){F(['dojo/i18n!*preload*widgets/SmartEditor/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/LayerInfos/LayerInfos dojo/_base/lang dojo/on dojo/string dojo/query dijit/registry dojo/_base/array ./EditFields ./EditDescription ./SmartActionGroup ../utils dijit/Editor dojo/dom-style dojo/dom-attr dojo/dom-class dojo/sniff jimu/utils dojo/_base/html jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup esri/request esri/lang jimu/dijit/Message jimu/dijit/LoadingShelter jimu/dijit/LoadingIndicator jimu/dijit/TabContainer3 dojo/dom-construct dojo/promise/all dojo/Deferred jimu/portalUtils ./Intersection ./Coordinates ./Address ./Preset ../presetBuilderBackwardCompatibility jimu/dijit/EditorXssFilter jimu/dijit/LayerChooserFromMap dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor dijit/form/CheckBox jimu/dijit/RadioBtn".split(" "),function(F,
J,y,K,t,a,f,b,c,h,n,p,v,G,D,e,g,x,B,d,m,u,C,O,M,S,q,k,E,N,l,z,L,R,Q,V,W,Y,I,P,X){return F([y,J],{baseClass:"jimu-widget-smartEditor-setting",_jimuLayerInfos:null,_layersTable:null,_configInfos:null,_editFields:null,_currentTableIds:[],_currentConfigInfoInTable:null,_configuredGeocoderSettings:{},_configuredPresetInfos:{},_totalLayers:[],postMixInProperties:function(){this.nls.units={};a.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){this.nls=a.mixin(this.nls,window.jimuNls.common);
this.nls=a.mixin(this.nls,window.jimuNls.timeUnit);this.editorXssFilter=P.getInstance();this._configuredGeocoderSettings={};this._configuredPresetInfos={};this._currentTableIds=[];this._totalLayers=[];this._initTabs();this._loading=new E({hidden:!0});this._loading.placeAt(this.domNode);this._loading.startup();this._createLayerChooserFromMap()},_processConfig:function(){if(!this.config.editor.hasOwnProperty("presetInfos")&&this.config.editor.layerInfos){var A=this.config.editor.layerInfos;n.forEach(A,
a.hitch(this,function(r){r.fieldValues={};n.forEach(r.fieldInfos,a.hitch(this,function(w){if(w.hasOwnProperty("canPresetValue")&&w.canPresetValue){var H=[{actionName:"Intersection",enabled:!1},{actionName:"Address",enabled:!1},{actionName:"Coordinates",enabled:!1},{actionName:"Preset",enabled:!0}];r.fieldValues[w.fieldName]=a.clone(H);this._configuredPresetInfos[w.fieldName]=[]}}))}));this.config.editor.presetInfos=this._configuredPresetInfos}I.createPresetGroups(this.config,this._jimuLayerInfos)},
startup:function(){this.inherited(arguments);t.getInstance(this.map,this.map.itemInfo).then(a.hitch(this,function(A){this._jimuLayerInfos=A;this._processConfig();this._init();this.setConfig();this._initEditor();this.webmapSettingsRadioBtn.onStateChange=a.hitch(this,function(){this.webmapSettingsRadioBtn.get("checked")&&this._onWebMapSettingsRadioBtnChecked()});this.customSettingsRadioBtn.onStateChange=a.hitch(this,function(){this.customSettingsRadioBtn.get("checked")&&this._onCustomSettingsRadioBtnChecked()});
this.own(f(this.valuePicker,"click",a.hitch(this,function(){this.valuePicker.get("checked")&&(this.enableAttributeUpdates.set("checked",!0),this.enableAutomaticAttributeUpdates.set("checked",!0))})))}))},_onWebMapSettingsRadioBtnChecked:function(){this._getConfigForCurrentDisplayedLayers();this._updateLayersTable()},_onCustomSettingsRadioBtnChecked:function(){this._updateLayersTable()},_updateLayersTable:function(){this._layersTable.clear();if(this._currentTableIds.length&&0<this._currentTableIds.length){var A;
n.some(this._configInfos,a.hitch(this,function(r){if(this._currentTableIds[this._currentTableIds.length-1]===r.featureLayer.id)return A=r,!0}));n.forEach(A.relationshipInfos,a.hitch(this,function(r){r.layerInfo=this._jimuLayerInfos.getLayerOrTableInfoById(r.featureLayer.id)}));this._setLayersTable(A.relationshipInfos,!0)}else this._setLayersTable(this._configInfos,!1)},destroy:function(){this._jimuLayerInfos=null;delete this._jimuLayerInfos;this._layersTable=null;delete this._layersTable;this._configInfos=
null;delete this._configInfos;this._editFields=null;delete this._editFields;this._editDescriptions=null;delete this._editDescriptions;this.inherited(arguments)},_init:function(){this._initSettings();this._initLayersTable();this.own(f(this.addNewSmartAction,"click",a.hitch(this,function(){this._configureGroupSmartAction()})));this._initsmartActionsTable();this._initAllAttributeActions()},_initTabs:function(){this.tab=new N({tabs:[{title:this.nls.layersPage.layerSettings,content:this.layerSettingTabNode},
{title:this.nls.layersPage.smartActionsTabTitle,content:this.smartActionsTabNode},{title:this.nls.layersPage.attributeActionsTabTitle,content:this.attributeActionsTabNode},{title:this.nls.layersPage.generalSettings,content:this.generalSettingTabNode}]});this.own(f(this.tab,"tabChanged",a.hitch(this,function(){this.tab.containerNode.scrollTop=0;2===this.tab.getSelectedIndex()?this._resetHeight(this.attributeActionsTabNode):3===this.tab.getSelectedIndex()&&this._resetHeight(this.generalSettingTabNode)})));
this.tab.placeAt(this.tabDiv);this.own(f(this.geocoderSettings,"click",a.hitch(this,function(){this._openServiceChooser(!0)})))},_initLayersTable:function(){var A={fields:[{name:"edit",title:this.nls.layersPage.layerSettingsTable.edit,type:"checkbox","class":"editable"},{name:"label",title:this.nls.layersPage.layerSettingsTable.label,type:"text","class":"layer"},{name:"allowUpdateOnly",title:this.nls.layersPage.layerSettingsTable.allowUpdateOnly,type:"checkbox","class":"update"},{name:"allowDelete",
title:this.nls.layersPage.layerSettingsTable.allowDelete,type:"checkbox","class":"update"},{name:"disableGeometryUpdate",title:this.nls.layersPage.layerSettingsTable.update,type:"checkbox","class":"disable"},{name:"specialType",type:"extension",title:this.nls.layersPage.layerSettingsTable.description,create:a.hitch(this,this._createSpecialType),setValue:a.hitch(this,this._setValue4SpecialType),getValue:a.hitch(this,this._getValueOfSpecialType),"class":"description"},{name:"actions",title:this.nls.actions,
type:"actions","class":"actions layersTableAction",actions:["edit"]},{name:"allowUpdateOnlyHidden",type:"checkbox",hidden:!0},{name:"allowDeleteHidden",type:"checkbox",hidden:!0},{name:"disableGeometryUpdateHidden",type:"checkbox",hidden:!0}],selectable:!1,autoHeight:!1,style:{maxHeight:"calc(100% - 100px)"}};g.set(this.layerSettingTabNode.parentElement,"height","calc(100% - 45px)");this._layersTable=new K(A);this._layersTable.placeAt(this.tableLayerInfos);this._layersTable.startup();this._addBreadCrumb(this.nls.layersPage.allLayers,
!0);c("th.simple-table-field",this._layersTable.domNode).forEach(function(r){switch(void 0===r.innerText||""===r.innerText?"":r.innerText.replace(/(\r\n|\n|\r)/gm,"")){case this.nls.layersPage.layerSettingsTable.edit:r.title=this.nls.layersPage.layerSettingsTable.editTip;r.alt=this.nls.layersPage.layerSettingsTable.editTip;break;case this.nls.layersPage.layerSettingsTable.label:r.title=this.nls.layersPage.layerSettingsTable.labelTip;r.alt=this.nls.layersPage.layerSettingsTable.labelTip;break;case this.nls.layersPage.layerSettingsTable.allowUpdateOnly:r.title=
this.nls.layersPage.layerSettingsTable.allowUpdateOnlyTip;r.alt=this.nls.layersPage.layerSettingsTable.allowUpdateOnlyTip;break;case this.nls.layersPage.layerSettingsTable.allowDelete:r.title=this.nls.layersPage.layerSettingsTable.allowDeleteTip;r.alt=this.nls.layersPage.layerSettingsTable.allowDeleteTip;break;case this.nls.layersPage.layerSettingsTable.update:r.title=this.nls.layersPage.layerSettingsTable.updateTip;r.alt=this.nls.layersPage.layerSettingsTable.updateTip;break;case this.nls.layersPage.layerSettingsTable.description:r.title=
this.nls.layersPage.layerSettingsTable.descriptionTip;r.alt=this.nls.layersPage.layerSettingsTable.descriptionTip;break;case this.nls.actions:r.title=this.nls.layersPage.layerSettingsTable.actionsTip,r.alt=this.nls.layersPage.layerSettingsTable.actionsTip}},this);this.own(f(this._layersTable,"actions-edit",a.hitch(this,this._onEditFieldInfoClick)))},_createSpecialType:function(A){var r=u.create("a",{"class":"attDescrip"},A);this.own(f(r,"click",a.hitch(this,function(){this._onDescriptionClick(A.parentNode)})))},
_setValue4SpecialType:function(){},_getValueOfSpecialType:function(){},_initSettings:function(){this.config.editor.hasOwnProperty("honorWebMapConfiguration")&&this.config.editor.honorWebMapConfiguration?this.webmapSettingsRadioBtn.set("checked",!0):this.customSettingsRadioBtn.set("checked",!0);this.config.editor.hasOwnProperty("expandRelatedTableOnLoad")?this.expandRelatedTableNode.set("checked",this.config.editor.expandRelatedTableOnLoad):this.expandRelatedTableNode.set("checked",!1);this.config.editor.hasOwnProperty("expandMainLayerOnLoad")?
this.expandMainLayerNode.set("checked",this.config.editor.expandMainLayerOnLoad):this.expandMainLayerNode.set("checked",!0);this.useFilterEditor.set("checked",this.config.editor.useFilterEditor);this.config.editor.hasOwnProperty("displayShapeSelector")?this.displayShapeSelector.set("checked",this.config.editor.displayShapeSelector):this.displayShapeSelector.set("checked",!1);this.config.editor.hasOwnProperty("createNewFeaturesFromExisting")?this.createNewFeaturesFromExisting.set("checked",this.config.editor.createNewFeaturesFromExisting):
this.createNewFeaturesFromExisting.set("checked",!1);this.config.editor.hasOwnProperty("overrideDefaultsByCopiedFeature")?this.overrideDefaultsByCopiedFeature.set("checked",this.config.editor.overrideDefaultsByCopiedFeature):this.overrideDefaultsByCopiedFeature.set("checked",!1);this.own(f(this.createNewFeaturesFromExisting,"click",a.hitch(this,function(){this.createNewFeaturesFromExisting.get("checked")||this.overrideDefaultsByCopiedFeature.set("checked",!1)})));this.own(f(this.overrideDefaultsByCopiedFeature,
"click",a.hitch(this,function(){this.overrideDefaultsByCopiedFeature.get("checked")&&this.createNewFeaturesFromExisting.set("checked",!0)})));this.config.editor.hasOwnProperty("displayPresetTop")?this.displayPresetTop.set("checked",this.config.editor.displayPresetTop):this.displayPresetTop.set("checked",!1);this.displayPromptOnSave.set("checked",this.config.editor.displayPromptOnSave);this.displayPromptOnDelete.set("checked",this.config.editor.displayPromptOnDelete);this.removeOnSave.set("checked",
this.config.editor.removeOnSave);this.config.editor.hasOwnProperty("listenToGF")?this.listenToGF.set("checked",this.config.editor.listenToGF):this.listenToGF.set("checked",!1);this.config.editor.hasOwnProperty("keepTemplateSelected")?this.keepTemplateSelected.set("checked",this.config.editor.keepTemplateSelected):this.keepTemplateSelected.set("checked",!1);this.config.editor.hasOwnProperty("editGeometryDefault")?this.editGeometryDefault.set("checked",this.config.editor.editGeometryDefault):this.editGeometryDefault.set("checked",
!1);this.config.editor.hasOwnProperty("showValuePicker")?this.valuePicker.set("checked",this.config.editor.showValuePicker):this.valuePicker.set("checked",!1);this.config.editor.hasOwnProperty("autoSaveEdits")?this.autoSaveEdits.set("checked",this.config.editor.autoSaveEdits):this.autoSaveEdits.set("checked",!1);this.config.editor.hasOwnProperty("enableAttributeUpdates")?this.enableAttributeUpdates.set("checked",this.config.editor.enableAttributeUpdates):this.enableAttributeUpdates.set("checked",
!1);this.own(f(this.autoSaveEdits,"click",a.hitch(this,function(){this.autoSaveEdits.get("checked")&&this.removeOnSave.set("checked",!0)})));this.config.editor.hasOwnProperty("enableAutomaticAttributeUpdates")?this.enableAutomaticAttributeUpdates.set("checked",this.config.editor.enableAutomaticAttributeUpdates):this.enableAutomaticAttributeUpdates.set("checked",!1);this.own(f(this.enableAttributeUpdates,"click",a.hitch(this,function(){this.enableAttributeUpdates.get("checked")||this.enableAutomaticAttributeUpdates.set("checked",
!1)})));this.own(f(this.enableAutomaticAttributeUpdates,"click",a.hitch(this,function(){this.enableAutomaticAttributeUpdates.get("checked")&&this.enableAttributeUpdates.set("checked",!0)})));this.config.editor.hasOwnProperty("enableLockingMapNavigation")?this.enableLockingMapNavigation.set("checked",this.config.editor.enableLockingMapNavigation):this.enableLockingMapNavigation.set("checked",!1);this.config.editor.hasOwnProperty("enableMovingSelectedFeatureToGPS")?this.enableMovingSelectedFeatureToGPS.set("checked",
this.config.editor.enableMovingSelectedFeatureToGPS):this.enableMovingSelectedFeatureToGPS.set("checked",!1);this.config.editor.hasOwnProperty("enableMovingSelectedFeatureToXY")?this.enableMovingSelectedFeatureToXY.set("checked",this.config.editor.enableMovingSelectedFeatureToXY):this.enableMovingSelectedFeatureToXY.set("checked",!1);this.config.editor.hasOwnProperty("showActionButtonsAbove")?this.positionOfSaveButtonBelow.set("checked",!this.config.editor.showActionButtonsAbove):this.positionOfSaveButtonBelow.set("checked",
!0);this.config.editor.hasOwnProperty("showActionButtonsAbove")?this.positionOfSaveButtonAbove.set("checked",this.config.editor.showActionButtonsAbove):this.positionOfSaveButtonAbove.set("checked",!1);this.config.editor.hasOwnProperty("canSwitchToMultilineInput")?this.switchToMultilineInput.set("checked",this.config.editor.canSwitchToMultilineInput):this.switchToMultilineInput.set("checked",!1);this.config.editor.hasOwnProperty("featuresSelectionTolerance")?this.featuresSelectionTolerance.set("value",
this.config.editor.featuresSelectionTolerance):this.featuresSelectionTolerance.set("value","20")},setConfig:function(){var A=(new E({hidden:!1})).placeAt(this.tableInfosLoading);this._fetchDefaultGeocoder().then(a.hitch(this,function(r){this._getTableInfos().then(a.hitch(this,function(){this._configInfos=D.getConfigInfos(this._jimuLayerInfos,this.config.editor.layerInfos,!1,!1);var w={};this.config.editor.layerInfos&&0<this.config.editor.layerInfos.length&&(n.forEach(this.config.editor.layerInfos,
function(H){H.hasOwnProperty("_editFlag")||(H._editFlag=!0);w[H.featureLayer.id]=H._editFlag}),n.forEach(this._configInfos,function(H){w.hasOwnProperty(H.featureLayer.id)?H._editFlag=w[H.featureLayer.id]:H._editFlag=!1}));n.forEach(this._configInfos,function(H){H.fieldValidations||(H.fieldValidations={})});this._configuredGeocoderSettings=this.config.geocoderSettings?a.clone(this.config.geocoderSettings):r;this._configuredPresetInfos=this.config.editor.presetInfos?a.clone(this.config.editor.presetInfos):
{};this._currentConfigInfoInTable=this._configInfos;this._setLayersTable(this._configInfos,!1);this.config.editor.defaultToleranceSettings?(this.globalTolerance.set("value",this.config.editor.defaultToleranceSettings.value),this.globalToleranceUnit.set("value",this.config.editor.defaultToleranceSettings.unit)):(this.globalTolerance.set("value",0),this.globalToleranceUnit.set("value","meters"));this.config.editor.hasOwnProperty("defaultPixelsTolerance")&&this.globalPixelsTolerance.set("value",this.config.editor.defaultPixelsTolerance);
this.config.editor.maxLimitToMultilineTextBox||0===this.config.editor.maxLimitToMultilineTextBox?this.maxCharacter.set("value",this.config.editor.maxLimitToMultilineTextBox):this.maxCharacter.set("value",35);setTimeout(a.hitch(this,function(){this.resize();A.destroy()}),200)}))}))},_fetchOrgsHelperServiecs:function(){var A=new L;this.appConfig.portalUrl&&""!==a.trim(this.appConfig.portalUrl)?R.getPortalSelfInfo(this.appConfig.portalUrl).then(a.hitch(this,function(r){r=r&&r.helperServices;var w="";
r&&r.geocode&&0<r.geocode.length&&r.geocode[0].url&&(w=r.geocode[0].url);A.resolve(w)}),a.hitch(this,function(){A.resolve("")})):A.resolve("");return A.promise},_fetchDefaultGeocoder:function(){var A=new L;this._fetchOrgsHelperServiecs().then(a.hitch(this,function(r){var w={};M({url:r,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(a.hitch(this,function(H){H&&H.candidateFields&&(w.url=r,w.fields=a.clone(H.candidateFields));A.resolve(w)}),a.hitch(this,function(){A.resolve(w)}))}));
return A.promise},_getTableInfos:function(){var A=[],r=this._jimuLayerInfos.getTableInfoArray();n.forEach(r,function(w){A.push(w.getLayerObject())},this);return z(A)},_setLayersTable:function(A,r){var w=null,H=!1,T;if(r&&this._currentTableIds&&0<this._currentTableIds.length){var U=this._configInfos;n.forEach(this._currentTableIds,function(ba,ja){n.some(U,function(ha){if(ha.featureLayer.id===ba)return U=ha,!0});1<this._currentTableIds.length&&ja+1<this._currentTableIds.length&&(U=U.relationshipInfos)},
this);U.relationshipInfos=A}this._currentConfigInfoInTable=A;n.forEach(A,function(ba){if(this.webmapSettingsRadioBtn.checked)var ja=D.createDefaultConfigInfo(ba.layerInfo);var ha=this._layersTable.addRow({label:ba.layerInfo.title,edit:this.webmapSettingsRadioBtn.checked?ja._editFlag:ba._editFlag?!0:!1,allowUpdateOnly:this.webmapSettingsRadioBtn.checked?ja.allowUpdateOnly:ba.allowUpdateOnly,allowUpdateOnlyHidden:null===ba.allowUpdateOnly?!1:ba.allowUpdateOnly,allowDelete:this.webmapSettingsRadioBtn.checked?
ja.featureLayer.layerAllowsDelete:ba.allowDelete,allowDeleteHidden:null===ba.allowDelete?!1:ba.allowDelete,disableGeometryUpdate:r?!0:this.webmapSettingsRadioBtn.checked?ja.disableGeometryUpdate:ba.disableGeometryUpdate,disableGeometryUpdateHidden:null===ba.disableGeometryUpdate?!1:ba.disableGeometryUpdate});T=g.get(ha.tr,"height");ba.layerInfo.isTable&&(H=!0);ha.tr._configInfo=ba;this.webmapSettingsRadioBtn.checked&&(w=c(".editable",ha.tr),w.forEach(function(da){h.getEnclosingWidget(da.childNodes[0]).setStatus(!1)}));
ha.tr._layerId=ba.layerInfo.layerObject.id;w=c(".allowDelete",ha.tr);!1===ba.featureLayer.layerAllowsDelete&&w.forEach(function(da){h.getEnclosingWidget(da.childNodes[0]).setStatus(!1)});this.webmapSettingsRadioBtn.checked&&w.forEach(function(da){da=h.getEnclosingWidget(da.childNodes[0]);da.setStatus(!1);ja.allowDelete&&da.setValue(!0)});w=c(".allowUpdateOnly",ha.tr);(!1===ba.featureLayer.layerAllowsCreate||this.webmapSettingsRadioBtn.checked)&&w.forEach(function(da){da=h.getEnclosingWidget(da.childNodes[0]);
da.setValue(!1);da.setStatus(!1)});w=c(".allowUpdateOnly",ha.tr);w.forEach(function(da){da=h.getEnclosingWidget(da.childNodes[0]);!1===ba.featureLayer.layerAllowsUpdate&&(da.setValue(!1),da.setStatus(!1));r&&!ba.layerInfo.isTable&&(da.setValue(!0),da.setStatus(!1))});w=c(".disableGeometryUpdate",ha.tr);w.forEach(function(da){da=h.getEnclosingWidget(da.childNodes[0]);if(!1===ba.featureLayer.layerAllowGeometryUpdates||this.webmapSettingsRadioBtn.checked)da.setValue(!1),da.setStatus(!1);r&&(da.setValue(!0),
da.setStatus(!1))});!1===ba.featureLayer.layerAllowsUpdate&&!1===ba.featureLayer.layerAllowsCreate&&(w=c(".edit, .disableGeometryUpdate",ha.tr),w.forEach(function(da){da=h.getEnclosingWidget(da.childNodes[0]);da.setValue(!1);da.setStatus(!1)}));var ia=this._layersTable._getThCheckBox("disableGeometryUpdate");ia&&(r?(ia.setValue(!1),ia.setStatus(!1)):ia.setStatus(!0));if(r&&!ba.layerInfo.isTable){ia=c(".edit, .editable",ha.tr)[0];var ka=l.create("div",{"class":"warningIcon",style:"display:none",title:this.nls.layersPage.layerSettingsTable.allowUpdateOnly});
l.place(ka,ia,"first");ia=h.getEnclosingWidget(ia.childNodes[1]);this.own(f(ia,"change",a.hitch(this,function(da){da?g.set(ka,"display","block"):g.set(ka,"display","none")})));!0===ba._editFlag&&g.set(ka,"display","block")}ia=[];ba.relationshipInfos&&0!==ba.relationshipInfos.length?this._isValidRelationship(ba.relationshipInfos)&&(ia=ba.relationshipInfos):(ia=this._getRelatedTableInfo(ba.layerInfo.layerObject),ba.relationshipInfos=ia,n.forEach(ba.relationshipInfos,function(da){da._editFlag=!1}));
0<ia.length&&(ia[0].layerInfo||(ia=D.getConfigInfos(this._jimuLayerInfos,ia,!1,!0,!0),n.forEach(ba.relationshipInfos,function(da){da.hasOwnProperty("_editFlag")||(da._editFlag=!1)})),this._addTableFieldActionIcon(ha.tr,ia));c(".jimu-icon-edit",ha.tr)[0].title=this.nls.layersPage.layerSettingsTable.fieldsTip;if(ha=this._layersTable._getThCheckBox("allowUpdateOnly"))r&&!H?(ha.setValue(!1),ha.setStatus(!1)):ha.setStatus(!0)},this);var Z=this._layersTable._getThCheckBox("edit"),aa=this._layersTable._getThCheckBox("allowUpdateOnly"),
fa=this._layersTable._getThCheckBox("allowDelete"),ca=this._layersTable._getThCheckBox("disableGeometryUpdate"),ea=this.webmapSettingsRadioBtn.checked?!1:!0;Z.setStatus(ea);aa.setStatus(ea);fa.setStatus(ea);ca.setStatus(ea);g.set(this._layersTable.domNode,"height",T*A.length+37+"px")},_isValidRelationship:function(A){var r=!1;n.some(this._jimuLayerInfos.getLayerInfoArray(),a.hitch(this,function(w){n.forEach(A,a.hitch(this,function(H){if(w.id===H.featureLayer.id)return r=!0}))}));r||n.some(this._jimuLayerInfos.getTableInfoArray(),
a.hitch(this,function(w){n.forEach(A,a.hitch(this,function(H){if(w.id===H.featureLayer.id)return r=!0}))}));return r},_onDescriptionClick:function(A){var r=this._layersTable.getRowData(A);if(this.webmapSettingsRadioBtn.checked)var w=D.createDefaultConfigInfo(A._configInfo.layerInfo);r&&(this.webmapSettingsRadioBtn.checked?w._editFlag:r.edit)&&(this._editDescriptions=new v({nls:this.nls,_configInfo:A._configInfo,_layerName:r.label}),this._editDescriptions.popupEditDescription())},_onEditFieldInfoClick:function(A){var r=
this._layersTable.getRowData(A);this.webmapSettingsRadioBtn.checked&&D.createDefaultConfigInfo(A._configInfo.layerInfo);this._editFields=new p({nls:this.nls,_configInfo:A._configInfo,_layerName:r.label,isEditableLayer:null!==r.edit?r.edit:A._configInfo.layerInfo.layerObject.isEditable(),_geocoderSettings:this._configuredGeocoderSettings,_configuredPresetInfos:this._configuredPresetInfos,layerInfos:this._jimuLayerInfos,isRelatedLayer:1<=this._currentTableIds.length?!0:!1,honorWebMapSettings:this.webmapSettingsRadioBtn.checked,
editUtils:D,map:this.map,_smartActionsTable:this._smartActionsTable,_attributeActionsTable:{Intersection:this._intersectionActionGroupTable,Address:this._addressActionGroupTable,Coordinates:this._coordinatesActionGroupTable,Preset:this._presetActionGroupTable},_tab:this.tab});this._editFields.popupEditPage();this.own(f(this._editFields,"SetGeocoder",a.hitch(this,this._openServiceChooser)));this.own(f(this._editFields,"RemoveFromGroup",a.hitch(this,function(w){w&&(n.forEach(w.smartActionGroupInfo,
function(H){this._removeFromGroup(H)},this),n.forEach(w.attributeActionGroupInfo,function(H){this._removeFromAttributeActionGroup(H)},this))})))},_getText:function(){return this._editorObj.focusNode.innerHTML},_initEditor:function(){if(!this._editorObj)if(this._initEditorPluginsCSS(),this._editorObj=new e({plugins:["bold","italic","underline",m.getEditorTextColor("smartEditor"),m.getEditorBackgroundColor("smartEditor"),"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList",
"insertUnorderedList","indent","outdent"],extraPlugins:["|","createLink","unlink","pastefromword","|","undo","redo","|","viewSource","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize","formatBlock"],style:"font-family:Verdana;"},this.editorDescription),g.set(this._editorObj.domNode,{width:"100%",height:"100%"}),this._editorObj.set("value",this.editorXssFilter.sanitize(void 0===
this.config.editor.editDescription||null===this.config.editor.editDescription?this.nls.layersPage.title:this.config.editor.editDescription)),this._editorObj.startup(),8!==d("ie"))this._editorObj.resize({w:"100%",h:"100%"});else{var A=u.getMarginBox(this.editorDescription);this._editorObj.resize({w:A.w,h:A.h})}},_initEditorPluginsCSS:function(){var A=document.getElementsByTagName("head")[0];var r=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";c('link[href\x3d"'+r+'"]',A)[0]||m.loadStyleLink("editor_plugins_resources_TextColor",
r);r=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";c('link[href\x3d"'+r+'"]',A)[0]||m.loadStyleLink("editor_plugins_resources_editorPlugins",r);r=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";c('link[href\x3d"'+r+'"]',A)[0]||m.loadStyleLink("editor_plugins_resources_PasteFromWord",r)},_resetSettingsConfig:function(){this.config.editor.displayPromptOnSave=void 0===this.displayPromptOnSave.checked?!1:this.displayPromptOnSave.checked;this.config.editor.displayPromptOnDelete=
void 0===this.displayPromptOnDelete.checked?!1:this.displayPromptOnDelete.checked;this.config.editor.removeOnSave=void 0===this.removeOnSave.checked?!1:this.removeOnSave.checked;this.config.editor.canSwitchToMultilineInput=void 0===this.switchToMultilineInput.checked?!1:this.switchToMultilineInput.checked;this.config.editor.useFilterEditor=void 0===this.useFilterEditor.checked?!1:this.useFilterEditor.checked;this.config.editor.displayShapeSelector=void 0===this.displayShapeSelector.checked?!1:this.displayShapeSelector.checked;
this.config.editor.createNewFeaturesFromExisting=void 0===this.createNewFeaturesFromExisting.checked?!1:this.createNewFeaturesFromExisting.checked;this.config.editor.overrideDefaultsByCopiedFeature=void 0===this.overrideDefaultsByCopiedFeature.checked?!1:this.overrideDefaultsByCopiedFeature.checked;this.config.editor.displayPresetTop=void 0===this.displayPresetTop.checked?!1:this.displayPresetTop.checked;this.config.editor.listenToGF=void 0===this.listenToGF.checked?!1:this.listenToGF.checked;this.config.editor.keepTemplateSelected=
void 0===this.keepTemplateSelected.checked?!1:this.keepTemplateSelected.checked;this.config.editor.editGeometryDefault=void 0===this.editGeometryDefault.checked?!1:this.editGeometryDefault.checked;this.config.editor.showValuePicker=void 0===this.valuePicker.checked?!1:this.valuePicker.checked;this.config.editor.autoSaveEdits=void 0===this.autoSaveEdits.checked?!1:this.autoSaveEdits.checked;this.config.editor.enableAttributeUpdates=void 0===this.enableAttributeUpdates.checked?!1:this.enableAttributeUpdates.checked;
this.config.editor.enableAutomaticAttributeUpdates=void 0===this.enableAutomaticAttributeUpdates.checked?!1:this.enableAutomaticAttributeUpdates.checked;this.config.editor.enableLockingMapNavigation=void 0===this.enableLockingMapNavigation.checked?!1:this.enableLockingMapNavigation.checked;this.config.editor.enableMovingSelectedFeatureToGPS=void 0===this.enableMovingSelectedFeatureToGPS.checked?!1:this.enableMovingSelectedFeatureToGPS.checked;this.config.editor.enableMovingSelectedFeatureToXY=void 0===
this.enableMovingSelectedFeatureToXY.checked?!1:this.enableMovingSelectedFeatureToXY.checked;this.config.editor.showActionButtonsAbove=this.positionOfSaveButtonAbove.checked?!0:!1;this.config.editor.featuresSelectionTolerance=this.featuresSelectionTolerance.get("value")},_getConfigForCurrentDisplayedLayers:function(){if(this._currentConfigInfoInTable){var A=this._layersTable.getData();n.forEach(this._currentConfigInfoInTable,function(r,w){r._editFlag=A[w].edit;r.allowUpdateOnly=null===A[w].allowUpdateOnly?
A[w].allowUpdateOnlyHidden:A[w].allowUpdateOnly;r.allowDelete=null===A[w].allowDelete?A[w].allowDeleteHidden:A[w].allowDelete;r.disableGeometryUpdate=null===A[w].disableGeometryUpdate?A[w].disableGeometryUpdateHidden:A[w].disableGeometryUpdate},this)}},_getCurrentConfigInfo:function(A){var r=[];n.forEach(A,function(w){w.hasOwnProperty("featureLayer")&&(w.featureLayer.hasOwnProperty("layerAllowsCreate")&&delete w.featureLayer.layerAllowsCreate,w.featureLayer.hasOwnProperty("layerAllowsUpdate")&&delete w.featureLayer.layerAllowsUpdate,
w.featureLayer.hasOwnProperty("layerAllowsDelete")&&delete w.featureLayer.layerAllowsDelete,w.featureLayer.hasOwnProperty("layerAllowGeometryUpdates")&&delete w.featureLayer.layerAllowGeometryUpdates);w.fieldInfos=this._resetFieldInfos(w.fieldInfos);if(w.hasOwnProperty("fieldValidations"))for(var H in w.fieldValidations)w.fieldValidations.hasOwnProperty(H)&&n.forEach(w.fieldValidations[H],function(T){T.hasOwnProperty("expression")&&delete T.expression});w.layerInfo&&delete w.layerInfo;r.push(w);w.relationshipInfos&&
0<w.relationshipInfos.length&&(w.relationshipInfos=this._getCurrentConfigInfo(w.relationshipInfos))},this);return r},getConfig:function(){if(!this.globalTolerance.isValid())return new q({message:this.nls.layersPage.toleranceErrorMsg}),!1;if(!this.globalPixelsTolerance.isValid())return new q({message:this.nls.layersPage.pixelsToleranecErrorMsg}),!1;if(!this.maxCharacter.isValid()||isNaN(this.maxCharacter.get("value")))return new q({message:this.nls.layersPage.invalidMaxCharacterErrorMsg}),!1;if(!this.featuresSelectionTolerance.isValid())return new q({message:this.nls.layersPage.featuresSelectionToleranceErrorMsg}),
!1;var A=new L;this._loading.show();setTimeout(a.hitch(this,function(){this._resetSettingsConfig();this.config.editor.editDescription=this._getText();this.config.editor.defaultToleranceSettings={value:this.globalTolerance.getValue(),unit:this.globalToleranceUnit.getValue()};this.config.editor.defaultPixelsTolerance=this.globalPixelsTolerance.get("value");this.config.editor.maxLimitToMultilineTextBox=this.maxCharacter.getValue();this.customSettingsRadioBtn.checked&&this._getConfigForCurrentDisplayedLayers();
if(this.customSettingsRadioBtn.checked){var r=this._validateFieldInfos(this._configInfos);if(r.layerID&&!r.isValidFields)return r=this._jimuLayerInfos.getLayerOrTableInfoById(r.layerID).layerObject,this._loading.hide(),q({message:b.substitute(this.nls.fieldsPage.noDisplayFieldWarningMsg,{layerName:r.name})}),!1}r=this._getCurrentConfigInfo(this._configInfos);if(0===r.length)return this._loading.hide(),new q({message:this.nls.layersPage.noConfigedLayersError}),!1;this.config.editor.layerInfos=r;this._configuredGeocoderSettings&&
this._configuredGeocoderSettings.hasOwnProperty("url")?this.config.geocoderSettings=a.clone(this._configuredGeocoderSettings):this.config.geocoderSettings=null;this.config.editor.presetInfos={};this.config.smartActionGroups=this._getSmartActionGroupConfig();if(this.config.attributeActionGroups&&(this._getPresetGroupOrder(),r=this._validatePresetGroup(),!r.isValid))return this._loading.hide(),q({message:b.substitute(this.nls.attributeActionsPage.presetNoFieldWarningMsg,{groupName:r.groupName})}),this.tab.selectTab(this.nls.layersPage.attributeActionsTabTitle),
!1;this.config.editor.honorWebMapConfiguration=this.webmapSettingsRadioBtn.checked?!0:!1;this.config.editor.expandRelatedTableOnLoad=this.expandRelatedTableNode.checked?!0:!1;this.config.editor.expandMainLayerOnLoad=this.expandMainLayerNode.checked?!0:!1;this._loading.hide();A.resolve(this.config)}),200);return A.promise},_validatePresetGroup:function(){var A=!0,r="";if(this.config.attributeActionGroups&&this.config.attributeActionGroups.Preset)for(var w=0;w<this.config.attributeActionGroups.presetOrder.length;w++)n.some(this.config.attributeActionGroups.presetOrder,
a.hitch(this,function(H){if(!this._hasFieldsInPresetGroup(this.config.attributeActionGroups.Preset[H]))return A=!1,r=H,!0}));return{isValid:A,groupName:r}},_hasFieldsInPresetGroup:function(A){var r=!1,w;for(w in A.appliedOn)if(0<A.appliedOn[w].length){r=!0;break}return r},_getPresetGroupOrder:function(){this.config.attributeActionGroups.presetOrder=[];for(var A=this._presetActionGroupTable.getRows(),r=0;r<A.length;r++)this.config.attributeActionGroups.presetOrder.push(A[r]._configInfo.name)},_resetFieldInfos:function(A){return n.map(A,
function(r){var w={};w.fieldName=void 0===r.fieldName?"":r.fieldName;w.isEditable=void 0===r.isEditable?!0:r.isEditable;w.visible=void 0===r.visible?!0:r.visible;return w})},_validateFieldInfos:function(A){var r=!1,w;n.some(A,function(H){r=!1;w=H.featureLayer.id;0===H.fieldInfos.length&&(r=!0);n.some(H.fieldInfos,function(T,U){if(T.visible)return r=!0},this);if(!r)return!0});return{isValidFields:r,layerID:w}},_getRelatedTableInfo:function(A){var r=[];if(A){var w=A.url.substr(0,A.url.lastIndexOf("/")+
1);A=a.clone(A.relationships);A=n.filter(A,function(H){return"esriRelRoleDestination"!==H.role});n.forEach(A,a.hitch(this,function(H){var T=!1;n.forEach(this.map.webMapResponse.itemInfo.itemData.tables,a.hitch(this,function(U){var Z;U&&U.url&&U.url.replace(/.*?:\/\//g,"")===(w+H.relatedTableId).replace(/.*?:\/\//g,"")&&(U=this._jimuLayerInfos.getLayerOrTableInfoById(U.id))&&(U=D.getConfigInfo(U,{}),U.relationshipId=H.id,(Z=this._getSmartActionsForRelation(U.featureLayer.id))||(Z={}),U.fieldValidations=
Z,(Z=this._getAttributeActionsForRelation(U.featureLayer.id))||(Z={}),U.fieldValues=Z,r.push(U),T=!0)}));T||n.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,a.hitch(this,function(U){var Z;U&&U.url&&U.url.replace(/.*?:\/\//g,"")===(w+H.relatedTableId).replace(/.*?:\/\//g,"")&&(U=this._jimuLayerInfos.getLayerOrTableInfoById(U.id))&&(U=D.getConfigInfo(U,{}),U.relationshipId=H.id,(Z=this._getSmartActionsForRelation(U.featureLayer.id))||(Z={}),U.fieldValidations=Z,(Z=this._getAttributeActionsForRelation(U.featureLayer.id))||
(Z={}),U.fieldValues=Z,r.push(U))}))}))}return r},_addTableFieldActionIcon:function(A,r){var w=c(".action-item-parent",A)[0];var H=c(".jimu-icon-edit",A)[0];c(".action-item-parent",A)[0]&&g.set(c(".action-item-parent",A)[0],"width","60px");c(".actions-td.simple-table-cell",A);A.tableFieldDiv=l.create("div",{"class":"action-item jimu-float-leading row-edit-div jimu-icon table-field-icon",title:this.nls.layersPage.layerSettingsTable.relationTip},w);l.place(A.tableFieldDiv,H,"after");this.own(f(A.tableFieldDiv,
"click",a.hitch(this,function(){var T=this._layersTable.getRowData(A);this.customSettingsRadioBtn.checked&&this._getConfigForCurrentDisplayedLayers();this._addBreadCrumb(T.label);this._currentTableIds.push(A._layerId);this._layersTable.clear();this._updateValidationsAccordingToGroups(r);this._setLayersTable(r,!0)})))},_updateValidationsAccordingToGroups:function(A){if(this._currentTableIds&&0<this._currentTableIds.length){var r=this._configInfos;n.some(this._currentTableIds,function(H,T){n.some(r,
function(U){if(U.featureLayer.id===H)return r=U,!0});1<this._currentTableIds.length&&T+1<this._currentTableIds.length&&(r=r.relationshipInfos)},this)}if(r&&r.relationshipInfos){var w=r.relationshipInfos;w.length===A.length&&n.forEach(A,function(H){n.some(w,function(T){if(T.featureLayer.id===H.featureLayer.id)return H.fieldValidations=T.fieldValidations,H.fieldValues=T.fieldValues,!0})},this)}},_addBreadCrumb:function(A,r){var w;var H=l.create("div",{},this.breadCrumbContainer);f(H,"click",a.hitch(this,
function(T){this._onBreadCrumbSectionClick(H,T)}));(w=c(".breadCrumbTitle",this.domNode))&&0<w.length&&B.add(w[w.length-1],"breadCrumbTitleActive");r?x.set(H,"breadIndex",-1):(l.create("div",{"class":"nextArrowIcon"},H),x.set(H,"breadIndex",this._currentTableIds.length));l.create("div",{"class":"breadCrumbTitle",innerHTML:A},H)},_onBreadCrumbSectionClick:function(A,r){A=c(".breadCrumbTitle",A)[0];if(B.contains(A,"breadCrumbTitleActive")){var w=parseInt(x.get(r.currentTarget,"breadIndex"),10);r=c("div[breadIndex]").length;
B.remove(A,"breadCrumbTitleActive");for(A=w+1;A<=r;A++)l.destroy(c("div[breadIndex\x3d"+A+"]")[0]);if(this._currentTableIds&&0<this._currentTableIds.length){var H=this._configInfos;n.some(this._currentTableIds,function(T,U){if(w+1===U)return!0;n.some(H,function(Z){if(Z.featureLayer.id===T)return H=Z,!0});1<this._currentTableIds.length&&U+1<this._currentTableIds.length&&(H=H.relationshipInfos)},this);this.customSettingsRadioBtn.checked&&this._getConfigForCurrentDisplayedLayers();this._currentTableIds.splice(w+
1,this._currentTableIds.length);this._layersTable.clear();this._setLayersTable(H,-1===w?!1:!0)}}},_openServiceChooser:function(A){var r="";this._configuredGeocoderSettings&&this._configuredGeocoderSettings.url&&(r=this._configuredGeocoderSettings.url);this.serviceChooserContent=new C({url:r});this.geocoderPopupShelter=new k({hidden:!0});r=l.create("div");l.create("div",{innerHTML:this.nls.geocoderPage.hintMsg,style:{"font-size":"14px","padding-bottom":"5px"}},r);r.appendChild(this.serviceChooserContent.domNode);
this.geocoderPopup=new O({titleLabel:this.nls.geocoderPage.setGeocoderURL,autoHeight:!0,content:r,container:window.jimuConfig.layoutId,width:640});this.geocoderPopupShelter.placeAt(this.geocoderPopup.domNode);u.setStyle(this.serviceChooserContent.domNode,"width","580px");u.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(f(this.serviceChooserContent,"validate-click",a.hitch(this,function(){u.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(f(this.serviceChooserContent,"ok",a.hitch(this,function(w){this._onSelectLocatorUrlOk(w,A)})));this.serviceChooserContent.own(f(this.serviceChooserContent,"cancel",a.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(A,r){A&&A[0]&&A[0].url&&this.domNode&&(this.geocoderPopupShelter.show(),M({url:A[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(a.hitch(this,function(w){this.geocoderPopupShelter.hide();
w&&w.candidateFields?(this._configuredGeocoderSettings.url=A[0].url,this._configuredGeocoderSettings.fields=a.clone(w.candidateFields),n.forEach(this._configuredGeocoderSettings.fields,function(H){delete H.localizedNames}),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),r||this._editFields.geocoderConfigured()):new q({message:this.nls.locatorWarning})}),a.hitch(this,function(){this.geocoderPopupShelter.hide();new q({message:S.substitute({URL:this._getRequestUrl(A[0].url)},
a.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null)},_initsmartActionsTable:function(){this._smartActionsTable=new K({fields:[{name:"name",title:this.nls.smartActionsPage.smartActionsTable.name,type:"text",width:"25%"},{name:"expression",title:this.nls.smartActionsPage.smartActionsTable.expression,type:"text",width:"50%"},{name:"definedOn",title:this.nls.smartActionsPage.smartActionsTable.definedFor,
type:"empty",width:"15%"},{name:"actions",title:this.nls.actions,type:"actions","class":"actions",width:"10%",actions:["edit","delete"]}],selectable:!1});this.own(f(this._smartActionsTable,"actions-edit",a.hitch(this,this._configureGroupSmartAction)));this._smartActionsTable.onBeforeRowDelete=a.hitch(this,this._onDeleteSmartActionsClick);this._smartActionsTable.placeAt(this.smartActionsTableNode);this._smartActionsTable.startup();this.config.smartActionGroups&&this._populateSmartActionGroups()},_getSmartActionGroupConfig:function(){var A,
r={};this._smartActionsTable&&(A=this._smartActionsTable.getRows())&&0<A.length&&n.forEach(A,function(w){w._configInfo&&(r[w._configInfo.name]=w._configInfo)});return r},_populateSmartActionGroups:function(){for(var A in this.config.smartActionGroups)this._addSmartActionGroupRow(this.config.smartActionGroups[A])},_onDeleteSmartActionsClick:function(A){var r=new O({titleLabel:this.nls.smartActionsPage.deleteGroupPopupTitle,width:450,maxHeight:445,autoHeight:!0,content:this.nls.smartActionsPage.deleteGroupPopupMsg,
"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:a.hitch(this,function(){this._configureGroupSmartAction(A,!0);r.close();this._smartActionsTable.deleteRow(A)})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:a.hitch(this,function(){r.close()})}]})},_removeFromGroup:function(A){if(this.config.smartActionGroups&&this.config.smartActionGroups[A.groupName]){var r=this.config.smartActionGroups[A.groupName];r.appliedOn[A.layerId]&&(r.appliedOn[A.layerId][A.fieldName][A.action]=
!1,this._updateSmartActionTablesDefiendForCol(A.groupName))}this._removeGroupNameFromLayerFields(A)},_updateSmartActionTablesDefiendForCol:function(A){if(this._smartActionsTable){var r=this._smartActionsTable.getRows(),w=this.config.smartActionGroups[A];n.some(r,function(H){if(this._smartActionsTable.getRowData(H).name===A){var T=this._checkPriorityStatus(w);this._addDefinedFor(T,H);return!0}},this)}},_removeGroupNameFromLayerFields:function(A){var r,w=[];if(w=this._getLayersFieldValidations(w,this._configInfos,
A.layerId))for(var H=0;H<w.length;H++)if(r=w[H])for(var T in r)r&&r[T]&&T===A.fieldName&&n.some(r[T],function(U){if(U&&A.action===U.actionName&&U.filter&&U.filter.hasOwnProperty("smartActionGroupName")&&U.filter.smartActionGroupName===A.groupName)return delete U.filter.smartActionGroupName,!0},this)},_getLayersFieldValidations:function(A,r,w){n.forEach(r,function(H){H.featureLayer&&H.featureLayer.id===w&&H.fieldValidations&&(A||(A=[]),A.push(H.fieldValidations));H.relationshipInfos&&(A=this._getLayersFieldValidations(A,
H.relationshipInfos,w))},this);return A},_configureGroupSmartAction:function(A,r){var w={nls:this.nls,map:this.map,filterInfo:{filter:""},layerForExpression:"",name:"",prevName:null,submitWhenHidden:!1,appliedOn:null,existingGroupNames:[],_configInfos:this._configInfos,_jimuLayerInfos:this._jimuLayerInfos,editUtils:D};this.config.smartActionGroups&&(w.existingGroupNames=Object.keys(this.config.smartActionGroups));w.existingGroups=this._getSmartActionGroupConfig();A&&(w.appliedOn=A._configInfo.appliedOn,
w.submitWhenHidden=A._configInfo.submitWhenHidden,w.name=A._configInfo.name,w.prevName=a.clone(A._configInfo.name),w.filterInfo=A._configInfo.filterInfo,w.layerForExpression=A._configInfo.layerForExpression);w=new G(w);this.own(f(w,"groupInfoUpdated",a.hitch(this,function(H){A?(A._configInfo=H,this._smartActionsTable.editRow(A,{name:H.name,expression:H.filterInfo.expression})):this._addSmartActionGroupRow(H);this.config.smartActionGroups=this._getSmartActionGroupConfig();this._updateSmartActionTablesDefiendForColForAllRows()})));
r?(this.config.smartActionGroups.hasOwnProperty(w.name)&&delete this.config.smartActionGroups[w.name],w.deleteGroup()):(w.showDialog(),setTimeout(a.hitch(this,function(){var H=c(".esriCTTableMainNode.tableBodyScroll",this.smartActionsTableNode.domNode),T=c(".tableBodyScroll\x3etbody",this.smartActionsTableNode.domNode);if(H.length&&T.length){var U=g.getComputedStyle(H[0].parentElement).height;g.set(H[0],"height",U);H=g.getComputedStyle(c(".tableBodyScroll\x3ethead",this.smartActionsTableNode.domNode)[0]).height;
g.set(T[0],"height",parseFloat(U)-parseFloat(H)-10+"px");g.set(T[0],"overflow-y","auto");g.set(T[0],"max-height","calc(100% - 10px)")}}),200))},_addSmartActionGroupRow:function(A){var r=this._smartActionsTable.addRow({name:A.name,expression:A.filterInfo.expression});r.success&&(r.tr._configInfo=A,A=this._checkPriorityStatus(A),this._addDefinedFor(A,r.tr))},_updateSmartActionTablesDefiendForColForAllRows:function(){if(this._smartActionsTable){var A=this._smartActionsTable.getRows();n.forEach(A,function(r){var w=
this._checkPriorityStatus(r._configInfo);this._addDefinedFor(w,r);return!0},this)}},_addDefinedFor:function(A,r){var w;(r=c(".simple-table-cell",r)[2])&&l.empty(r);r=l.create("div",{"class":"esriCTPriorityIconMainDiv"},r);var H=!0;for(w in A){if(H){H=!1;var T="esriCTPriorityIcons esriCT"+w+" esriCTDefinedFor"}else T="esriCTPriorityIcons esriCT"+w;A[w]||(T+=" esriCTVisibility");l.create("div",{"class":T,title:this.nls.actionPage.actions[w.toLowerCase()]},r)}},_checkPriorityStatus:function(A){var r;
for(r in A.appliedOn){for(var w in A.appliedOn[r]){if(!H)var H=A.appliedOn[r][w].Hide;if(!T)var T=A.appliedOn[r][w].Required;if(!U)var U=A.appliedOn[r][w].Disabled;if(H&&T&&U)break}if(H&&T&&U)break}return{Hide:H,Required:T,Disabled:U}},_getFieldValidationsFromGroup:function(A,r,w){var H={},T;for(T in A.appliedOn[r]){var U=w&&w[T]?w[T]:null;if(A.appliedOn[r][T].Hide||A.appliedOn[r][T].Required||A.appliedOn[r][T].Disabled)U||(U=[{actionName:"Hide"},{actionName:"Required"},{actionName:"Disabled"}]),
H[T]=U;var Z={submitWhenHidden:!1,filter:a.clone(A.filterInfo.filter),expression:A.filterInfo.filter.expr};Z.filter.smartActionGroupName=A.name;A.appliedOn[r][T].Hide&&(U[0]=a.mixin(U[0],Z),U[0].submitWhenHidden=A.submitWhenHidden);A.appliedOn[r][T].Required&&(U[1]=a.mixin(U[1],Z));A.appliedOn[r][T].Disabled&&(U[2]=a.mixin(U[2],Z))}return H},_getSmartActionsForRelation:function(A){var r;if(this.config.smartActionGroups)for(var w in this.config.smartActionGroups)this.config.smartActionGroups[w].appliedOn.hasOwnProperty(A)&&
(r=this._getFieldValidationsFromGroup(this.config.smartActionGroups[w],A,r));return r},_getFieldValuesFromGroup:function(A,r,w){var H={},T;for(T in A.appliedOn[r]){var U=w&&w[T]?w[T]:null;-1<A.appliedOn[r].indexOf(T)&&(U||(U=[{actionName:"Intersection",enabled:!1,fields:[]},{actionName:"Address",enabled:!1},{actionName:"Coordinates",enabled:!1,coordinatesSystem:"MapSpatialReference",field:"x"},{actionName:"Preset",enabled:!0,attributeActionGroupName:A.name}]),H[T]=U)}return H},_getAttributeActionsForRelation:function(A){var r;
if(this.config.attributeActionGroups&&this.config.attributeActionGroups.Preset)for(var w in this.config.attributeActionGroups.Preset)this.config.attributeActionGroups.Preset[w].appliedOn.hasOwnProperty(A)&&(r=this._getFieldValuesFromGroup(this.config.attributeActionGroups.Preset[w],A,r));return r},_createLayerChooserFromMap:function(){var A=this._createLayerChooserMapArgs();this._layerChooserFromMap=new X(A);this._layerChooserFromMap.startup();A=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();
var r=this._layerChooserFromMap.layerInfosObj.getTableInfoArray();r&&0<r.length&&(A=A.concat(r));this._getAllFilteredLayers(A,[])},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},_createFiltersForLayerSelector:function(){return X.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0)},_isLayerEditable:function(A){var r=!1;A&&A.layerObject&&(A=A.layerObject.getEditCapabilities(),A.canCreate||A.canUpdate||
A.canDelete||A.canUpdateGeometry)&&(r=!0);return r},_getAllFilteredLayers:function(A,r){n.forEach(A,a.hitch(this,function(w){if(w.isLeaf()){var H=new L;this._layerChooserFromMap.filter(w).then(a.hitch(this,function(T){T&&this._isLayerEditable(w)&&this._totalLayers.push(w);H.resolve()}));r.push(H)}else this._getAllFilteredLayers(w.newSubLayers,r)}))},_onDeleteAttributeActionsClick:function(A,r){var w=new O({titleLabel:this.nls.attributeActionsPage.deleteGroupPopupTitle,width:450,maxHeight:445,autoHeight:!0,
content:this.nls.attributeActionsPage.deleteGroupPopupMsg,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:a.hitch(this,function(){"Intersection"===r?(this._configureIntersectionActionGroup(A,!0),this._intersectionActionGroupTable.deleteRow(A)):"Address"===r?(this._configureAddressActionGroup(A,!0),this._addressActionGroupTable.deleteRow(A)):"Coordinates"===r?(this._configureCoordinatesActionGroup(A,!0),this._coordinatesActionGroupTable.deleteRow(A)):"Preset"===r&&(this._configurePresetActionGroup(A,
!0),this._presetActionGroupTable.deleteRow(A));w.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:a.hitch(this,function(){w.close()})}]})},_initAttributeActionsTable:function(A,r,w){var H=["edit","delete"];r&&(H=["up","down","edit","delete"]);r=[{name:"name",title:this.nls.attributeActionsPage.name,type:"text"},{name:"dataType",title:this.nls.attributeActionsPage.type,type:"text"},{name:"actions",title:this.nls.actions,type:"actions","class":"actions",actions:H}];w&&r.splice(2,
0,{name:"coordinateSourceTableValue",title:this.nls.coordinatesPage.coordinatesSourceTitle,type:"text",hidden:!0});w=new K({fields:r,selectable:!1});w.placeAt(A);w.startup();return w},_getAllLayersFieldValues:function(A,r,w){n.forEach(r,function(H){H.featureLayer&&H.featureLayer.id===w&&(H.fieldValues?A||(A=[]):H.fieldValues={},A.push(H.fieldValues));H.relationshipInfos&&(A=this._getAllLayersFieldValues(A,H.relationshipInfos,w))},this);return A},_removeAttributeGroupNameFromLayerFields:function(A){var r,
w=[];if((w=this._getAllLayersFieldValues(w,this._configInfos,A.layerId))&&0<w.length)for(var H=0;H<w.length;H++)if(r=w[H])for(var T in r)if(r&&r[T]&&T===A.fieldName)for(var U=r[T],Z=0;Z<U.length;Z++)U[Z].actionName===A.action&&U[Z].hasOwnProperty("attributeActionGroupName")&&U[Z].attributeActionGroupName===A.groupName&&delete U[Z].attributeActionGroupName},_removeFromAttributeActionGroup:function(A){if(this.config.attributeActionGroups&&this.config.attributeActionGroups[A.action]){var r=this.config.attributeActionGroups[A.action][A.groupName];
if(r.appliedOn[A.layerId]&&-1<r.appliedOn[A.layerId].indexOf(A.fieldName)){var w=r.appliedOn[A.layerId].indexOf(A.fieldName);r.appliedOn[A.layerId].splice(w,1)}}this._removeAttributeGroupNameFromLayerFields(A)},_initAllAttributeActions:function(){this._intersectionActionGroupTable=this._initAttributeActionsTable(this.intersectionActionsTableNode);this.own(f(this._intersectionActionGroupTable,"actions-edit",a.hitch(this,this._configureIntersectionActionGroup)));this._intersectionActionGroupTable.onBeforeRowDelete=
a.hitch(this,function(A){this._onDeleteAttributeActionsClick(A,"Intersection")});this._addressActionGroupTable=this._initAttributeActionsTable(this.addressActionsTableNode);this.own(f(this._addressActionGroupTable,"actions-edit",a.hitch(this,this._configureAddressActionGroup)));this._addressActionGroupTable.onBeforeRowDelete=a.hitch(this,function(A){this._onDeleteAttributeActionsClick(A,"Address")});this._coordinatesActionGroupTable=this._initAttributeActionsTable(this.coordinatesActionsTableNode,
!1,!0);this.own(f(this._coordinatesActionGroupTable,"actions-edit",a.hitch(this,this._configureCoordinatesActionGroup)));this._coordinatesActionGroupTable.onBeforeRowDelete=a.hitch(this,function(A){this._onDeleteAttributeActionsClick(A,"Coordinates")});this._presetActionGroupTable=this._initAttributeActionsTable(this.presetActionsTableNode,!0);this.own(f(this._presetActionGroupTable,"actions-edit",a.hitch(this,this._configurePresetActionGroup)));this._presetActionGroupTable.onBeforeRowDelete=a.hitch(this,
function(A){this._onDeleteAttributeActionsClick(A,"Preset")});this.config.attributeActionGroups&&this._populateAttributeActionGroups()},_addAttributeActionGroupRow:function(A,r){var w=A.name;var H=A.dataType;if("Intersection"===r){var T=this._intersectionActionGroupTable;H=this.nls.dataType[A.dataType]}else if("Address"===r)T=this._addressActionGroupTable;else if("Coordinates"===r){T=this._coordinatesActionGroupTable;var U=A.attributeInfo&&"undefined"!==typeof A.attributeInfo.coordinatesSource?A.attributeInfo.coordinatesSource:
"featureLocation"}else"Preset"===r&&(T=this._presetActionGroupTable,H=this.nls.dataType[A.dataType]);T&&(r=U?T.addRow({name:w,dataType:H,coordinateSourceTableValue:this.nls.coordinatesPage[U]}):T.addRow({name:w,dataType:H}),r.success&&(r.tr._configInfo=A))},_hasFieldsInPresetGroup:function(A){var r=!1,w;for(w in A.appliedOn)if(0<A.appliedOn[w].length){r=!0;break}return r},_populateAttributeActionGroups:function(){for(var A in this.config.attributeActionGroups)if("presetOrder"!==A){var r=this.config.attributeActionGroups[A];
if("Preset"===A){this.config.attributeActionGroups.hasOwnProperty("presetOrder")||(this.config.attributeActionGroups.presetOrder=Object.keys(r));for(var w=0;w<this.config.attributeActionGroups.presetOrder.length;w++){var H=this.config.attributeActionGroups.presetOrder[w],T=r[H];this._addAttributeActionGroupRow(T,A)}}else for(H in r)T=r[H],this._addAttributeActionGroupRow(T,A)}},_getAttributeActionGroupConfig:function(){return{Intersection:this._getAttributeGroupsForAction(this._intersectionActionGroupTable),
Address:this._getAttributeGroupsForAction(this._addressActionGroupTable),Coordinates:this._getAttributeGroupsForAction(this._coordinatesActionGroupTable),Preset:this._getAttributeGroupsForAction(this._presetActionGroupTable)}},_getAttributeGroupsForAction:function(A){var r={};A&&(A=A.getRows())&&0<A.length&&n.forEach(A,function(w){w._configInfo&&(r[w._configInfo.name]=w._configInfo)});return r},_configureIntersectionActionGroup:function(A,r){var w={nls:this.nls,map:this.map,isGroup:!0,isDelete:r,
layerInfos:this._jimuLayerInfos,existingGroupNames:[],appliedOn:null,_configInfos:this._configInfos,_fieldType:"esriFieldTypeString",_fieldValues:{Intersection:{fields:[]}},editUtils:D};this.config.attributeActionGroups&&this.config.attributeActionGroups.Intersection&&(w.existingGroupNames=Object.keys(this.config.attributeActionGroups.Intersection));w.existingGroups=this._getAttributeActionGroupConfig().Intersection;A&&(w.appliedOn=A._configInfo.appliedOn,w.name=A._configInfo.name,w._fieldType=A._configInfo.dataType,
w.prevName=a.clone(A._configInfo.name),w._fieldValues.Intersection=A._configInfo.attributeInfo);w=new Q(w);this.own(f(w,"groupInfoUpdated",a.hitch(this,function(H){A?(A._configInfo=H,this._intersectionActionGroupTable.editRow(A,{name:H.name,dataType:this.nls.dataType[H.dataType]})):this._addAttributeActionGroupRow(H,"Intersection");this.config.attributeActionGroups=this._getAttributeActionGroupConfig()})));r&&(this.config.attributeActionGroups.Intersection.hasOwnProperty(A._configInfo.name)&&delete this.config.attributeActionGroups.Intersection[A._configInfo.name],
w.deleteGroup())},_onIntersectionBtnClick:function(){this._configureIntersectionActionGroup()},_configureAddressActionGroup:function(A,r){var w={nls:this.nls,map:this.map,isGroup:!0,isDelete:r,_totalLayers:this._totalLayers,layerInfos:this._jimuLayerInfos,existingGroupNames:[],_configInfos:this._configInfos,appliedOn:null,_geocoderSettings:this._configuredGeocoderSettings,_fieldValues:{Address:{field:"",enabled:!0}},editUtils:D};this.config.attributeActionGroups&&this.config.attributeActionGroups.Address&&
(w.existingGroupNames=Object.keys(this.config.attributeActionGroups.Address));w.existingGroups=this._getAttributeActionGroupConfig().Address;A&&(w.appliedOn=A._configInfo.appliedOn,w.name=A._configInfo.name,w.prevName=a.clone(A._configInfo.name),w._fieldValues.Address=A._configInfo.attributeInfo);w=new W(w);this.own(f(w,"groupInfoUpdated",a.hitch(this,function(H){A?(A._configInfo=H,this._addressActionGroupTable.editRow(A,{name:H.name,dataType:H.dataType})):this._addAttributeActionGroupRow(H,"Address");
this.config.attributeActionGroups=this._getAttributeActionGroupConfig()})));r&&(this.config.attributeActionGroups.Address.hasOwnProperty(A._configInfo.name)&&delete this.config.attributeActionGroups.Address[A._configInfo.name],w.deleteGroup())},_onAddressBtnClick:function(){this._configuredGeocoderSettings?this._configureAddressActionGroup():this._openServiceChooser()},_configureCoordinatesActionGroup:function(A,r){var w={nls:this.nls,map:this.map,isGroup:!0,isDelete:r,_totalLayers:this._totalLayers,
layerInfos:this._jimuLayerInfos,existingGroupNames:[],_configInfos:this._configInfos,appliedOn:null,coordinatesSavedDataTypes:this._filterAttributeDropDownOptions(A),_geocoderSettings:this._configuredGeocoderSettings,_fieldValues:{Coordinates:{coordinatesSystem:"MapSpatialReference",field:"x",enabled:!0,coordinatesSource:"featureLocation"}},editUtils:D};this.config.attributeActionGroups&&this.config.attributeActionGroups.Coordinates&&(w.existingGroupNames=Object.keys(this.config.attributeActionGroups.Coordinates));
w.existingGroups=this._getAttributeActionGroupConfig().Coordinates;A&&(w.appliedOn=A._configInfo.appliedOn,w.name=A._configInfo.name,w.prevName=a.clone(A._configInfo.name),w._fieldValues.Coordinates=A._configInfo.attributeInfo);w=new V(w);this.own(f(w,"groupInfoUpdated",a.hitch(this,function(H){if(A){A._configInfo=H;var T=H.attributeInfo&&"undefined"!==typeof H.attributeInfo.coordinatesSource?H.attributeInfo.coordinatesSource:"featureLocation";this._coordinatesActionGroupTable.editRow(A,{name:H.name,
dataType:H.dataType,coordinatesSource:T,coordinateSourceTableValue:this.nls.coordinatesPage[T]})}else this._addAttributeActionGroupRow(H,"Coordinates");this.config.attributeActionGroups=this._getAttributeActionGroupConfig()})));r&&(this.config.attributeActionGroups.Coordinates.hasOwnProperty(A._configInfo.name)&&delete this.config.attributeActionGroups.Coordinates[A._configInfo.name],w.deleteGroup())},_onCoordinateBtnClick:function(){var A=this._coordinatesActionGroupTable.getRows();A&&7>A.length?
this._configureCoordinatesActionGroup():new q({message:this.nls.coordinatesPage.allGroupsCreatedMsg})},_configurePresetActionGroup:function(A,r){var w={nls:this.nls,map:this.map,isDelete:r,_totalLayers:this._totalLayers,layerInfos:this._jimuLayerInfos,_configuredPresetInfos:this._configuredPresetInfos,existingGroupNames:[],_configInfos:this._configInfos,appliedOn:null,dataType:"esriFieldTypeString",editUtils:D};this.config.attributeActionGroups&&this.config.attributeActionGroups.Preset&&(w.existingGroupNames=
Object.keys(this.config.attributeActionGroups.Preset));w.existingGroups=this._getAttributeActionGroupConfig().Preset;A&&(w.appliedOn=A._configInfo.appliedOn,w.name=A._configInfo.name,w.dataType=A._configInfo.dataType,w.showOnlyDomainFields=A._configInfo.showOnlyDomainFields,w.hideInPresetDisplay=A._configInfo.hideInPresetDisplay,w.prevName=a.clone(A._configInfo.name),w.presetValue=A._configInfo.presetValue,w.chooseFromLayerInfo=A._configInfo.chooseFromLayerInfo);w=new Y(w);this.own(f(w,"groupInfoUpdated",
a.hitch(this,function(H){A?(A._configInfo=H,this._presetActionGroupTable.editRow(A,{name:H.name,dataType:this.nls.dataType[H.dataType]})):this._addAttributeActionGroupRow(H,"Preset");this.config.attributeActionGroups=this._getAttributeActionGroupConfig()})));r&&(this.config.attributeActionGroups.Preset.hasOwnProperty(A._configInfo.name)&&delete this.config.attributeActionGroups.Preset[A._configInfo.name],w.deleteGroup())},_onPresetBtnClick:function(){this._configurePresetActionGroup()},_filterAttributeDropDownOptions:function(A){var r,
w;var H={featureLocation:{},myLocation:{}};H.featureLocation.MapSpatialReference=["X","Y","X Y"];H.featureLocation.LatLong=["Latitude","Longitude","Latitude Longitude"];H.featureLocation.MGRS=["MGRS"];H.myLocation.MapSpatialReference=["X","Y","X Y"];H.myLocation.LatLong=["Latitude","Longitude","Latitude Longitude"];H.myLocation.MGRS=["MGRS"];(r=this._coordinatesActionGroupTable.getRows())&&0<r.length&&n.forEach(r,a.hitch(this,function(T){var U="featureLocation";A&&A._configInfo.attributeInfo.coordinatesSource===
T._configInfo.attributeInfo.coordinatesSource&&A._configInfo.dataType===T._configInfo.dataType||(w=T._configInfo.dataType,T._configInfo.attributeInfo&&T._configInfo.attributeInfo.coordinatesSource&&(U=T._configInfo.attributeInfo.coordinatesSource),-1<H[U].MapSpatialReference.indexOf(w)?(T=H[U].MapSpatialReference.indexOf(w),H[U].MapSpatialReference.splice(T,1)):-1<H[U].LatLong.indexOf(w)?(T=H[U].LatLong.indexOf(w),H[U].LatLong.splice(T,1)):-1<H[U].MGRS.indexOf(w)&&H[U].MGRS.splice(0,1))}));return H},
_resetHeight:function(A){g.set(A,"height",A.offsetParent.offsetHeight-50+"px")}})});