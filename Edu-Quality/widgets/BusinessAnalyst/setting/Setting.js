// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),function(y,z,C,r,k,d,
e,b,c,a,g,h,f,t,x,l,v,F,I,B,G,J,D,p,u){function A(q){return new B({command:q.name})}function n(q){return new B({buttonClass:I,command:q.name})}C=C("dijit.Editor",p,{plugins:null,extraPlugins:null,constructor:function(){g.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",G]);this._plugins=[];this._editInterval=
1E3*this.editActionInterval;if(h("ie")||h("trident")||h("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new r;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);g.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=k.getLocalization("dijit._editor","commands",this.lang);
h("webkit")&&c.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new l({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));z.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);e.add(this.iframe.parentNode,"dijitEditorIFrameContainer");e.add(this.iframe,"dijitEditorIFrame");d.set(this.iframe,"allowTransparency",!0);this.toolbar.startup();
this.onNormalizedDisplayChanged()},destroy:function(){z.forEach(this._plugins,function(q){q&&q.destroy&&q.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(q,H){var M=g.isString(q)?{name:q}:g.isFunction(q)?{ctor:q}:q;if(!M.setEditor){var m={args:M,plugin:null,editor:this};M.name&&(B.registry[M.name]?m.plugin=B.registry[M.name](M):t.publish(u._scopeName+".Editor.getPlugin",m));if(!m.plugin)try{var w=M.ctor||g.getObject(M.name)||
y(M.name);w&&(m.plugin=new w(M))}catch(E){throw Error(this.id+": cannot find plugin ["+M.name+"]");}if(!m.plugin)throw Error(this.id+": cannot find plugin ["+M.name+"]");q=m.plugin}1<arguments.length?this._plugins[H]=q:this._plugins.push(q);q.setEditor(this);g.isFunction(q.setToolbar)&&q.setToolbar(this.toolbar)},resize:function(q){q&&F.prototype.resize.apply(this,arguments)},layout:function(){var q=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+b.getPadBorderExtents(this.iframe.parentNode).h+
b.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=q+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(q){var H,M=this.document.body,m=M.clientWidth,w=M.clientHeight,E=M.clientLeft,L=M.offsetWidth,K=M.offsetHeight,N=M.offsetLeft;/^rtl$/i.test(M.dir||"")?m<L&&q.x>m&&q.x<L&&(H=!0):q.x<E&&q.x>N&&(H=!0);H||w<K&&q.y>w&&q.y<K&&(H=!0);H||(delete this._cursorToStart,delete this._savedSelection,"BODY"==q.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(q){this.customUndo&&this.endEditing(!0);"BODY"!=q.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(q){this._inEditing||(this._inEditing=!0,this._beginEditing(q));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(q){if(!this.customUndo||
"undo"!=q&&"redo"!=q){this.customUndo&&(this.endEditing(),this._beginEditing());var H=this.inherited(arguments);this.customUndo&&this._endEditing();return H}return this[q]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(q){try{var H=this.document.execCommand(q,!1,null);if(h("webkit")&&!H)throw{};}catch(M){H=f.substitute,alert(H(this.commands.systemShortcut,
[this.commands[q],H(this.commands[h("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[q]])])),H=!1}return H},queryCommandEnabled:function(q){return!this.customUndo||"undo"!=q&&"redo"!=q?this.inherited(arguments):"undo"==q?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(q){var H=q.mark,M=q.mark;q=q.isCollapsed;var m;if(M)if(9>h("ie")||9===h("ie")&&h("quirks"))if(g.isArray(M))H=[],z.forEach(M,function(L){H.push(D.getNode(L,this.editNode))},this),this.selection.moveToBookmark({mark:H,
isCollapsed:q});else{if(M.startContainer&&M.endContainer&&(m=D.getSelection(this.window))&&m.removeAllRanges){m.removeAllRanges();q=D.create(this.window);var w=D.getNode(M.startContainer,this.editNode);var E=D.getNode(M.endContainer,this.editNode);w&&E&&(q.setStart(w,M.startOffset),q.setEnd(E,M.endOffset),m.addRange(q))}}else(m=D.getSelection(this.window))&&m.removeAllRanges&&(m.removeAllRanges(),q=D.create(this.window),w=D.getNode(M.startContainer,this.editNode),E=D.getNode(M.endContainer,this.editNode),
w&&E&&(q.setStart(w,M.startOffset),q.setEnd(E,M.endOffset),m.addRange(q)))},_changeToStep:function(q,H){this.setValue(H.text);(q=H.bookmark)&&this._moveToBookmark(q)},undo:function(){var q=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var H=this._steps.pop();H&&0<this._steps.length&&(this.focus(),this._changeToStep(H,this._steps[this._steps.length-1]),this._undoedSteps.push(H),this.onDisplayChanged(),delete this._undoRedoActive,q=!0);delete this._undoRedoActive}return q},
redo:function(){var q=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var H=this._undoedSteps.pop();H&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],H),this._steps.push(H),this.onDisplayChanged(),q=!0);delete this._undoRedoActive}return q},endEditing:function(q){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(q),this._inEditing=!1)},_getBookmark:function(){var q=this.selection.getBookmark(),
H=[];if(q&&q.mark){var M=q.mark;if(9>h("ie")||9===h("ie")&&h("quirks")){var m=D.getSelection(this.window);if(g.isArray(M))z.forEach(q.mark,function(E){H.push(D.getIndex(E,this.editNode).o)},this),q.mark=H;else if(m){var w;m.rangeCount&&(w=m.getRangeAt(0));q.mark=w?w.cloneRange():this.selection.getBookmark()}}try{q.mark&&q.mark.startContainer&&(H=D.getIndex(q.mark.startContainer,this.editNode).o,q.mark={startContainer:H,startOffset:q.mark.startOffset,endContainer:q.mark.endContainer===q.mark.startContainer?
H:D.getIndex(q.mark.endContainer,this.editNode).o,endOffset:q.mark.endOffset})}catch(E){q.mark=null}}return q},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:J.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var q=J.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:q,bookmark:this._getBookmark()})},onKeyDown:function(q){h("ie")||this.iframe||q.keyCode!=a.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var H=
q.keyCode;if(q.ctrlKey&&!q.shiftKey&&!q.altKey){if(90==H||122==H){q.stopPropagation();q.preventDefault();this.undo();return}if(89==H||121==H){q.stopPropagation();q.preventDefault();this.redo();return}}this.inherited(arguments);switch(H){case a.ENTER:case a.BACKSPACE:case a.DELETE:this.beginEditing();break;case 88:case 86:if(q.ctrlKey&&!q.altKey&&!q.metaKey){this.endEditing();88==q.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!q.ctrlKey&&!q.altKey&&
!q.metaKey&&(q.keyCode<a.F1||q.keyCode>a.F15)){this.beginEditing();break}case a.ALT:this.endEditing();break;case a.UP_ARROW:case a.DOWN_ARROW:case a.LEFT_ARROW:case a.RIGHT_ARROW:case a.HOME:case a.END:case a.PAGE_UP:case a.PAGE_DOWN:this.endEditing(!0);case a.CTRL:case a.SHIFT:case a.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(q){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(q){this.customUndo?this.isClosed?this.setValue(q):(this.beginEditing(),q||(q="\x26#160;"),this.setValue(q),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(q){this.setValueDeferred.then(g.hitch(this,function(){!this.disabled&&q||!this._buttonEnabledPlugins&&q?
z.forEach(this._plugins,function(H){H.set("disabled",!0)}):this.disabled&&!q&&z.forEach(this._plugins,function(H){H.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(c.set(this.document.body,"color",c.get(this.iframe,"color")),c.set(this.document.body,"background-color",c.get(this.iframe,"background-color")))}catch(q){}}});g.mixin(B.registry,{undo:A,redo:A,cut:A,copy:A,paste:A,insertOrderedList:A,insertUnorderedList:A,
indent:A,outdent:A,justifyCenter:A,justifyFull:A,justifyLeft:A,justifyRight:A,"delete":A,selectAll:A,removeFormat:A,unlink:A,insertHorizontalRule:A,bold:n,italic:n,underline:n,strikethrough:n,subscript:n,superscript:n,"|":function(){return new B({setEditor:function(q){this.editor=q;this.button=new v({ownerDocument:q.ownerDocument})}})}});return C})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(y,z,C,r,k,d,e,b){C("dijit-legacy-requires")&&k(0,function(){y(["dijit/ToolbarSeparator"])});return z("dijit.Toolbar",[d,b,e],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(y,z,C,r){return y("dijit.ToolbarSeparator",[C,r],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);z.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(y,z,C,r,k){z=z("dijit._editor._Plugin",r,{constructor:function(d){this.params=
d||{};C.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:k,disabled:!1,getLabel:function(d){return this.editor.commands[d]},_initButton:function(){if(this.command.length){var d=this.getLabel(this.command),e=this.editor,b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(d=C.mixin({label:d,ownerDocument:e.ownerDocument,dir:e.dir,
lang:e.lang,showLabel:!1,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete d.name,this.button=new this.buttonClass(d))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(d,e,b){this.own(y.connect(d,e,this,b))},updateState:function(){var d=this.editor,e=this.command;if(d&&d.isLoaded&&e.length){var b=this.get("disabled");if(this.button)try{var c=
d._implCommand(e);var a=!b&&(this[c]?this[c](e):d.queryCommandEnabled(e));this.enabled!==a&&(this.enabled=a,this.button.set("disabled",!a));if(a&&"boolean"==typeof this.button.checked){var g=d.queryCommandState(e);this.checked!==g&&(this.checked=g,this.button.set("checked",d.queryCommandState(e)))}}catch(h){console.log(h)}}},setEditor:function(d){this.editor=d;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",C.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",C.hitch(this,"updateState")))},setToolbar:function(d){this.button&&d.addChild(this.button)},set:function(d,e){if("object"===typeof d){for(var b in d)this.set(b,d[b]);return this}b=this._getAttrNames(d);if(this[b.s])var c=this[b.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(d,e);return c||this},get:function(d){var e=this._getAttrNames(d);
return this[e.g]?this[e.g]():this[d]},_setDisabledAttr:function(d){this._set("disabled",d);this.updateState()},_getAttrNames:function(d){var e=this._attrPairNames;if(e[d])return e[d];var b=d.charAt(0).toUpperCase()+d.substr(1);return e[d]={s:"_set"+b+"Attr",g:"_get"+b+"Attr"}},_set:function(d,e){this[d]=e}});z.registry={};return z})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g){return y("dijit._editor.plugins.EnterKeyHandling",c,{blockNodeForEnter:"BR",constructor:function(h){h&&("blockNodeForEnter"in h&&(h.blockNodeForEnter=h.blockNodeForEnter.toUpperCase()),r.mixin(this,h))},setEditor:function(h){if(this.editor!==h)if(this.editor=h,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,h.onLoadDeferred.then(r.hitch(this,function(t){this.own(k(h.document,"keydown",r.hitch(this,function(x){if(x.keyCode==C.ENTER){var l=r.mixin({},x);l.shiftKey=
!0;this.handleEnterKey(l)||(x.stopPropagation(),x.preventDefault())}})));9<=d("ie")&&10>=d("ie")&&this.own(k(h.document,"paste",r.hitch(this,function(x){setTimeout(r.hitch(this,function(){var l=this.editor.document.selection.createRange();l.move("character",-1);l.select();l.move("character",1);l.select()}),0)})));return t}));else if(this.blockNodeForEnter){var f=r.hitch(this,"handleEnterKey");h.addKeyHandler(13,0,0,f);h.addKeyHandler(13,0,1,f);this.own(this.editor.on("KeyPressed",r.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var h=this.editor.selection.getAncestorElement("LI");if(h){d("mozilla")&&"LI"==h.parentNode.parentNode.nodeName&&(h=h.parentNode.parentNode);var f=h.firstChild;!f||1!=f.nodeType||"UL"!=f.nodeName&&"OL"!=f.nodeName||(h.insertBefore(f.ownerDocument.createTextNode("\u00a0"),f),f=g.create(this.editor.window),f.setStart(h.firstChild,0),h=g.getSelection(this.editor.window,!0),h.removeAllRanges(),h.addRange(f))}else a.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(h=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(h.innerHTML=this.bogusHtmlContent,9>=d("ie")&&(h=this.editor.document.selection.createRange(),h.move("character",-1),h.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(h){var f,t=this.editor.document,x;if(h.shiftKey){h=this.editor.selection.getParentElement();if(f=g.getAncestor(h,this.blockNodes)){if("LI"==f.tagName)return!0;h=g.getSelection(this.editor.window);var l=h.getRangeAt(0);l.collapsed||(l.deleteContents(),h=g.getSelection(this.editor.window),l=h.getRangeAt(0));if(g.atBeginningOfContainer(f,l.startContainer,l.startOffset)){var v=t.createElement("br");l=g.create(this.editor.window);f.insertBefore(v,
f.firstChild);l.setStartAfter(v);h.removeAllRanges();h.addRange(l)}else if(g.atEndOfContainer(f,l.startContainer,l.startOffset))l=g.create(this.editor.window),v=t.createElement("br"),f.appendChild(v),f.appendChild(t.createTextNode("\u00a0")),l.setStart(f.lastChild,0),h.removeAllRanges(),h.addRange(l);else{if((x=l.startContainer)&&3==x.nodeType){var F=x.nodeValue;var I=t.createTextNode(F.substring(0,l.startOffset));var B=t.createTextNode(F.substring(l.startOffset));f=t.createElement("br");""==B.nodeValue&&
d("webkit")&&(B=t.createTextNode("\u00a0"));z.place(I,x,"after");z.place(f,I,"after");z.place(B,f,"after");z.destroy(x);l=g.create(this.editor.window);l.setStart(B,0);h.removeAllRanges();h.addRange(l);return!1}return!0}}else h=g.getSelection(this.editor.window),h.rangeCount?(l=h.getRangeAt(0))&&l.startContainer&&(l.collapsed||(l.deleteContents(),h=g.getSelection(this.editor.window),l=h.getRangeAt(0)),(x=l.startContainer)&&3==x.nodeType?(f=l.startOffset,x.length<f&&(B=this._adjustNodeAndOffset(x,f),
x=B.node,f=B.offset),F=x.nodeValue,I=t.createTextNode(F.substring(0,f)),B=t.createTextNode(F.substring(f)),f=t.createElement("br"),B.length||(B=t.createTextNode("\u00a0")),I.length?z.place(I,x,"after"):I=x,z.place(f,I,"after"),z.place(B,f,"after"),z.destroy(x)):(0<=l.startOffset&&(v=x.childNodes[l.startOffset]),f=t.createElement("br"),B=t.createTextNode("\u00a0"),v?(z.place(f,v,"before"),z.place(B,f,"after")):(x.appendChild(f),x.appendChild(B))),l=g.create(this.editor.window),l.setStart(B,0),l.setEnd(B,
B.length),h.removeAllRanges(),h.addRange(l),this.editor.selection.collapse(!0)):a.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var G=!0;h=g.getSelection(this.editor.window);l=h.getRangeAt(0);l.collapsed||(l.deleteContents(),h=g.getSelection(this.editor.window),l=h.getRangeAt(0));v=g.getBlockAncestor(l.endContainer,null,this.editor.editNode);var J=v.blockNode;if(this._checkListLater=J&&("LI"==J.nodeName||"LI"==J.parentNode.nodeName))return d("mozilla")&&(this._pressedEnterInBlock=
J),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(J.innerHTML)&&(J.innerHTML="",d("webkit")&&(l=g.create(this.editor.window),l.setStart(J,0),h.removeAllRanges(),h.addRange(l)),this._checkListLater=!1),!0;if(!v.blockNode||v.blockNode===this.editor.editNode){try{a.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(D){}v={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(v.blockNode){if(v.blockNode!=this.editor.editNode&&!(v.blockNode.textContent||v.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(v.blockNode),!1}else v.blockNode=this.editor.editNode;h=g.getSelection(this.editor.window);l=h.getRangeAt(0)}J=t.createElement(this.blockNodeForEnter);J.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(v.blockNode);B=l.endOffset;G=l.endContainer;G.length<B&&(B=this._adjustNodeAndOffset(G,B),G=
B.node,B=B.offset);if(g.atEndOfContainer(v.blockNode,G,B))v.blockNode===v.blockContainer?v.blockNode.appendChild(J):z.place(J,v.blockNode,"after"),G=!1,l=g.create(this.editor.window),l.setStart(J,0),h.removeAllRanges(),h.addRange(l),this.editor.height&&b.scrollIntoView(J);else if(g.atBeginningOfContainer(v.blockNode,l.startContainer,l.startOffset))z.place(J,v.blockNode,v.blockNode===v.blockContainer?"first":"before"),J.nextSibling&&this.editor.height&&(l=g.create(this.editor.window),l.setStart(J.nextSibling,
0),h.removeAllRanges(),h.addRange(l),b.scrollIntoView(J.nextSibling)),G=!1;else{v.blockNode===v.blockContainer?v.blockNode.appendChild(J):z.place(J,v.blockNode,"after");G=!1;v.blockNode.style&&J.style&&v.blockNode.style.cssText&&(J.style.cssText=v.blockNode.style.cssText);if((x=l.startContainer)&&3==x.nodeType){B=l.endOffset;x.length<B&&(B=this._adjustNodeAndOffset(x,B),x=B.node,B=B.offset);F=x.nodeValue;I=t.createTextNode(F.substring(0,B));B=t.createTextNode(F.substring(B,F.length));z.place(I,x,
"before");z.place(B,x,"after");z.destroy(x);for(l=I.parentNode;l!==v.blockNode;){F=t.createElement(l.tagName);l.style&&F.style&&l.style.cssText&&(F.style.cssText=l.style.cssText);"FONT"===l.tagName&&(l.color&&(F.color=l.color),l.face&&(F.face=l.face),l.size&&(F.size=l.size));for(;B;)x=B.nextSibling,F.appendChild(B),B=x;z.place(F,l,"after");I=l;B=F;l=l.parentNode}if(1==B.nodeType||3==B.nodeType&&B.nodeValue)J.innerHTML="";for(I=B;B;)x=B.nextSibling,J.appendChild(B),B=x}l=g.create(this.editor.window);
t=I;if("BR"!==this.blockNodeForEnter){for(;t;)f=t,t=x=t.firstChild;f&&f.parentNode?(J=f.parentNode,l.setStart(J,0),h.removeAllRanges(),h.addRange(l),this.editor.height&&b.scrollIntoView(J),d("mozilla")&&(this._pressedEnterInBlock=v.blockNode)):G=!0}else l.setStart(J,0),h.removeAllRanges(),h.addRange(l),this.editor.height&&b.scrollIntoView(J),d("mozilla")&&(this._pressedEnterInBlock=v.blockNode)}return G},_adjustNodeAndOffset:function(h,f){for(;h.length<f&&h.nextSibling&&3==h.nextSibling.nodeType;)f-=
h.length,h=h.nextSibling;return{node:h,offset:f}},removeTrailingBr:function(h){if(h=/P|DIV|LI/i.test(h.tagName)?h:this.editor.selection.getParentOfType(h,["P","DIV","LI"]))h.lastChild&&(1<h.childNodes.length&&3==h.lastChild.nodeType&&/^[\s\xAD]*$/.test(h.lastChild.nodeValue)||"BR"==h.lastChild.tagName)&&z.destroy(h.lastChild),h.childNodes.length||(h.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v,F,I,B,G,J,D,p,u,A,n,q,H){var M=C("dijit._editor.RichText",[D,p],{constructor:function(m){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};m&&f.isString(m.value)&&(this.value=m.value);this.onLoadDeferred=new r},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[f.trim,f.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);v("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));v("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(v("ie")||v("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[f.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[f.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);I.publish(H._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var m=f.hitch(this,function(L,K){return function(){return!this.execCommand(L,K)}}),w={b:m("bold"),i:m("italic"),u:m("underline"),a:m("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:m("formatblock",
"h1"),2:m("formatblock","h2"),3:m("formatblock","h3"),4:m("formatblock","h4"),"\\":m("insertunorderedlist")};v("ie")||(w.Z=m("redo"));for(var E in w)this.addKeyHandler(E,!0,!1,w[E])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(M._editorCommandsLocalized)this._local2NativeFormatNames=M._local2NativeFormatNames,this._native2LocalFormatNames=M._native2LocalFormatNames;else{M._editorCommandsLocalized=!0;M._local2NativeFormatNames={};
M._native2LocalFormatNames={};this._local2NativeFormatNames=M._local2NativeFormatNames;this._native2LocalFormatNames=M._native2LocalFormatNames;for(var m="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),w="",E,L=0;E=m[L++];)w="l"!==E.charAt(1)?w+("\x3c"+E+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+E+"\x3e\x3cbr/\x3e"):w+("\x3c"+E+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+E+"\x3e\x3cbr/\x3e");var K=b.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:w});this.ownerDocumentBody.appendChild(K);
m=f.hitch(this,function(){for(var N=K.firstChild;N;)try{this.selection.selectElement(N.firstChild);var O=N.tagName.toLowerCase();this._local2NativeFormatNames[O]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[O]]=O;N=N.nextSibling.nextSibling}catch(Q){}b.destroy(K)});this.defer(m)}},open:function(m){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new r;this.isClosed||this.close();I.publish(H._scopeName+"._editor.RichText::open",
this);1===arguments.length&&m.nodeName&&(this.domNode=m);var w=this.domNode;if(f.isString(this.value)){var E=this.value;w.innerHTML=""}else if(w.nodeName&&"textarea"==w.nodeName.toLowerCase()){var L=this.textarea=w;this.name=L.name;E=L.value;w=this.domNode=this.ownerDocument.createElement("div");w.setAttribute("widgetId",this.id);L.removeAttribute("widgetId");w.cssText=L.cssText;w.className+=" "+L.className;b.place(w,L,"before");var K=f.hitch(this,function(){a.set(L,{display:"block",position:"absolute",
top:"-1000px"});if(v("ie")){var P=L.style;this.__overflow=P.overflow;P.overflow="hidden"}});v("ie")?this.defer(K,10):K();if(L.form){var N=L.value;this.reset=function(){this.getValue()!==N&&this.replaceValue(N)};t(L.form,"submit",f.hitch(this,function(){d.set(L,"disabled",this.disabled);L.value=this.getValue()}))}}else E=n.getChildrenHtml(w),w.innerHTML="";this.value=E;w.nodeName&&"LI"===w.nodeName&&(w.innerHTML=" \x3cbr\x3e");this.header=w.ownerDocument.createElement("div");w.appendChild(this.header);
this.editingArea=w.ownerDocument.createElement("div");w.appendChild(this.editingArea);this.footer=w.ownerDocument.createElement("div");w.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!z.useXDomain||z.allowXdRichTextSave)){if((E=k.byId(H._scopeName+"._editor.RichText.value"))&&""!==E.value){K=E.value.split(this._SEPARATOR);for(var O=0,Q;Q=K[O++];)if(Q=Q.split(this._NAME_CONTENT_SEP),Q[0]===this.name){this.value=Q[1];K=K.splice(O,1);E.value=K.join(this._SEPARATOR);
break}}M._globalSaveHandler||(M._globalSaveHandler={},B.addOnUnload(function(){for(var P in M._globalSaveHandler){var S=M._globalSaveHandler[P];f.isFunction(S)&&S()}}));M._globalSaveHandler[this.id]=f.hitch(this,"_saveContent")}this.isClosed=!1;E=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");E.id=this.id+"_iframe";E.style.border="none";E.style.width="100%";this._layoutMode?E.style.height="100%":7<=v("ie")?(this.height&&(E.style.height=this.height),this.minHeight&&(E.style.minHeight=
this.minHeight)):E.style.height=this.height?this.height:this.minHeight;E.frameBorder=0;E._loadFunc=f.hitch(this,function(P){this.window=P;this.document=P.document;this.selection=new u.SelectionManager(P);v("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});K=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");K=11>v("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+K+"');document.close()":"javascript: '"+
K+"'";this.editingArea.appendChild(E);E.src=K;"LI"===w.nodeName&&(w.lastChild.style.marginTop="-1.2em");e.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var m=a.getComputedStyle(this.domNode);if(this["aria-label"])var w=this["aria-label"];else{var E=x('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||k.byId(this["aria-labelledby"],this.ownerDocument);E&&(w=E.textContent||E.innerHTML||"")}E="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(w?" aria-label\x3d'"+F.escape(w)+"'":"")+"\x3e\x3c/div\x3e";var L=[m.fontWeight,m.fontSize,m.fontFamily].join(" "),K=m.lineHeight;K=0<=K.indexOf("px")?parseFloat(K)/parseFloat(m.fontSize):0<=K.indexOf("em")?parseFloat(K):"normal";var N="",O=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(Q){Q=Q.replace(/^;/ig,"")+";";var P=Q.split(":")[0];if(P){P=f.trim(P);P=P.toLowerCase();var S,R="";for(S=0;S<P.length;S++){var T=P.charAt(S);switch(T){case "-":S++,T=P.charAt(S).toUpperCase();default:R+=
T}}a.set(O.domNode,R,"")}N+=Q+";"});this.iframe.setAttribute("title",w);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||g.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",w?"\x3ctitle\x3e"+F.escape(w)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",L,";\n",this.height||v("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",K,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",v("ie")||v("trident")||v("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",w?" aria-label\x3d'"+F.escape(w)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+N+"'\x3e",E,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var m=[];this.styleSheets&&(m=this.styleSheets.split(";"),this.styleSheets=
"");m=m.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var w="",E=0,L,K=J.get(this.ownerDocument);L=m[E++];)L=(new G(K.location,L)).toString(),this.editingAreaStyleSheets.push(L),w+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+L+'"/\x3e';return w},addStyleSheet:function(m){var w=m.toString(),E=J.get(this.ownerDocument);if("."===w.charAt(0)||"/"!==w.charAt(0)&&!m.host)w=(new G(E.location,w)).toString();-1<y.indexOf(this.editingAreaStyleSheets,w)||(this.editingAreaStyleSheets.push(w),
this.onLoadDeferred.then(f.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(w);else{var L=this.document.getElementsByTagName("head")[0],K=this.document.createElement("link");K.rel="stylesheet";K.type="text/css";K.href=w;L.appendChild(K)}})))},removeStyleSheet:function(m){var w=m.toString(),E=J.get(this.ownerDocument);if("."===w.charAt(0)||"/"!==w.charAt(0)&&!m.host)w=(new G(E.location,w)).toString();m=y.indexOf(this.editingAreaStyleSheets,w);-1!==m&&(delete this.editingAreaStyleSheets[m],
x('link[href\x3d"'+w+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(m){m=!!m;this._set("disabled",m);if(this.isLoaded){var w=v("ie")&&(this.isLoaded||!this.focusOnLoad);w&&(this.editNode.unselectable="on");this.editNode.contentEditable=!m;this.editNode.tabIndex=m?"-1":this.tabIndex;w&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(v("mozilla")&&!m&&this._mozSettingProps){m=this._mozSettingProps;for(var E in m)if(m.hasOwnProperty(E))try{this.document.execCommand(E,
!1,m[E])}catch(L){}}this._disabledOK=!0}},onLoad:function(m){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=q.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var w=this;this.beforeIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){w.editNode.focus()};this.focusNode=
this.editNode;var E=this.events.concat(this.captureEvents),L=this.iframe?this.document:this.editNode;this.own.apply(this,y.map(E,function(K){var N=K.toLowerCase().replace(/^on/,"");return t(L,N,f.hitch(this,K))},this));this.own(t(L,"mouseup",f.hitch(this,"onClick")));v("ie")&&(this.own(t(this.document,"mousedown",f.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);v("webkit")&&(this._webkitListener=this.own(t(this.document,"mouseup",f.hitch(this,"onDisplayChanged")))[0],this.own(t(this.document,
"mousedown",f.hitch(this,function(K){K=K.target;!K||K!==this.document.body&&K!==this.document||this.defer("placeCursorAtEnd")}))));if(v("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(K){}this.isLoaded=!0;this.set("disabled",this.disabled);E=f.hitch(this,function(){this.setValue(m);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&l(f.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(E):E()},onKeyDown:function(m){if(m.keyCode===h.SHIFT||m.keyCode===h.ALT||m.keyCode===h.META||m.keyCode===h.CTRL)return!0;m.keyCode===h.TAB&&this.isTabIndent&&(m.stopPropagation(),m.preventDefault(),this.queryCommandEnabled(m.shiftKey?"outdent":"indent")&&this.execCommand(m.shiftKey?"outdent":"indent"));if(m.keyCode==h.TAB&&!this.isTabIndent&&!m.ctrlKey&&!m.altKey)return m.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>v("ie")&&m.keyCode===h.BACKSPACE&&"Control"===this.document.selection.type&&(m.stopPropagation(),m.preventDefault(),this.execCommand("delete"));v("ff")&&(m.keyCode===h.PAGE_UP||m.keyCode===h.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&m.preventDefault();var w=this._keyHandlers[m.keyCode],E=arguments;w&&!m.altKey&&y.some(w,function(L){if(!(L.shift^m.shiftKey||L.ctrl^(m.ctrlKey||m.metaKey)))return L.handler.apply(this,E)||m.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(m){g.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",m)},_setValueAttr:function(m){this.setValue(m)},_setDisableSpellCheckAttr:function(m){this.document?d.set(this.document.body,"spellcheck",!m):this.onLoadDeferred.then(f.hitch(this,function(){d.set(this.document.body,"spellcheck",!m)}));this._set("disableSpellCheck",m)},addKeyHandler:function(m,w,E,L){"string"==
typeof m&&(m=m.toUpperCase().charCodeAt(0));f.isArray(this._keyHandlers[m])||(this._keyHandlers[m]=[]);this._keyHandlers[m].push({shift:E||!1,ctrl:w||!1,handler:L})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(m){this.onDisplayChanged(m)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(m){(v("ie")||v("trident"))&&this.defer(function(){q.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var w=this.getValue(!0);if(w!==this.value)this.onChange(w);
this._set("value",w)},_onFocus:function(m){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!v("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>v("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(m,w){m=m.toLowerCase();"formatblock"===m?v("safari")&&void 0===w&&(m="heading"):"hilitecolor"!==m||v("mozilla")||(m="backcolor");return m},_implCommand:function(m){return"_"+this._normalizeCommand(m)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(m){var w=this._qcaCache[m];return void 0!==w?w:this._qcaCache[m]=this._queryCommandAvailable(m)},_queryCommandAvailable:function(m){switch(m.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return v("ie")||v("trident")||v("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!v("webkit");default:return!1}},execCommand:function(m,w){this.focused&&this.focus();m=this._normalizeCommand(m,w);if(void 0!==w){if("heading"===m)throw Error("unimplemented");"formatblock"===
m&&(v("ie")||v("trident"))&&(w="\x3c"+w+"\x3e")}var E="_"+m+"Impl";if(this[E])var L=this[E](w);else if((w=1<arguments.length?w:null)||"createlink"!==m)L=this.document.execCommand(m,!1,w);this.onDisplayChanged();return L},queryCommandEnabled:function(m){if(this.disabled||!this._disabledOK)return!1;m=this._normalizeCommand(m);var w=this._implCommand(m);return this[w]?this[w](m):this._browserQueryCommandEnabled(m)},queryCommandState:function(m){if(this.disabled||!this._disabledOK)return!1;m=this._normalizeCommand(m);
try{return this.document.queryCommandState(m)}catch(w){return!1}},queryCommandValue:function(m){if(this.disabled||!this._disabledOK)return!1;m=this._normalizeCommand(m);if(v("ie")&&"formatblock"===m)m=this._native2LocalFormatNames[this.document.queryCommandValue(m)];else if(v("mozilla")&&"hilitecolor"===m){try{var w=this.document.queryCommandValue("styleWithCSS")}catch(E){w=!1}this.document.execCommand("styleWithCSS",!1,!0);m=this.document.queryCommandValue(m);this.document.execCommand("styleWithCSS",
!1,w)}else m=this.document.queryCommandValue(m);return m},_sCall:function(m,w){return this.selection[m].apply(this.selection,w)},placeCursorAtStart:function(){this.focus();var m=!1;if(v("mozilla"))for(var w=this.editNode.firstChild;w;){if(3===w.nodeType){if(0<w.nodeValue.replace(/^\s+|\s+$/g,"").length){m=!0;this.selection.selectElement(w);break}}else if(1===w.nodeType){m=!0;var E=w.tagName?w.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(E)?this.selection.selectElement(w):
this.selection.selectElementChildren(w);break}w=w.nextSibling}else m=!0,this.selection.selectElementChildren(this.editNode);m&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var m=!1;if(v("mozilla"))for(var w=this.editNode.lastChild;w;){if(3===w.nodeType){if(0<w.nodeValue.replace(/^\s+|\s+$/g,"").length){m=!0;this.selection.selectElement(w);break}}else if(1===w.nodeType){m=!0;this.selection.selectElement(w.lastChild||w);break}w=w.previousSibling}else m=!0,this.selection.selectElementChildren(this.editNode);
m&&this.selection.collapse(!1)},getValue:function(m){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,m):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(m){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){m=this._preFilterContent(m);var w=this.isClosed?this.domNode:this.editNode;w.innerHTML=m;this._preDomFilterContent(w)}else this.textarea.value=m;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(f.hitch(this,function(){this.setValue(m)}))},replaceValue:function(m){this.isClosed?this.setValue(m):this.window&&this.window.getSelection&&!v("mozilla")?this.setValue(m):this.window&&this.window.getSelection?(m=this._preFilterContent(m),this.execCommand("selectall"),this.execCommand("inserthtml",m),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(m);this._set("value",this.getValue(!0))},_preFilterContent:function(m){var w=
m;y.forEach(this.contentPreFilters,function(E){E&&(w=E(w))});return w},_preDomFilterContent:function(m){m=m||this.editNode;y.forEach(this.contentDomPreFilters,function(w){w&&f.isFunction(w)&&w(m)},this)},_postFilterContent:function(m,w){if(f.isString(m))var E=m;else m=m||this.editNode,this.contentDomPostFilters.length&&(w&&(m=f.clone(m)),y.forEach(this.contentDomPostFilters,function(L){m=L(m)})),E=n.getChildrenHtml(m);f.trim(E.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(E="");y.forEach(this.contentPostFilters,
function(L){E=L(E)});return E},_saveContent:function(){var m=k.byId(H._scopeName+"._editor.RichText.value");m&&(m.value&&(m.value+=this._SEPARATOR),m.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(m,w){m=m.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");w||(m=m.replace(/'/gm,"\x26#39;"));return m},getNodeHtml:function(m){g.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return n.getNodeHtml(m)},getNodeChildrenHtml:function(m){g.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return n.getChildrenHtml(m)},close:function(m){if(!this.isClosed){arguments.length||(m=!0);m&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);v("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var w=this.textarea.style;w.position="";w.left=w.top="";v("ie")&&(w.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;b.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;e.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);M._globalSaveHandler&&delete M._globalSaveHandler[this.id]},_removeMozBogus:function(m){return m.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(m){m=m.replace(/\sclass="webkit-block-placeholder"/gi,"");m=m.replace(/\sclass="apple-style-span"/gi,
"");return m=m.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(m){return m.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(m){return m.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(m){if(!m)return!1;
if(v("ie")||v("trident")||v("edge"))return this.focused&&!this.disabled;var w=9>v("ie")?this.document.selection.createRange():this.document;try{return w.queryCommandEnabled(m)}catch(E){return!1}},_createlinkEnabledImpl:function(){var m=!0;return m=v("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var m=!0;return m=v("mozilla")||v("webkit")||v("ie")||v("trident")||v("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var m=!0;return m=v("mozilla")||v("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var m=!0;v("webkit")?((m=this.window.getSelection())&&(m=m.toString()),m=!!m):m=this._browserQueryCommandEnabled("cut");return m},_copyEnabledImpl:function(){var m=!0;v("webkit")?((m=this.window.getSelection())&&(m=m.toString()),m=!!m):m=this._browserQueryCommandEnabled("copy");
return m},_pasteEnabledImpl:function(){var m=!0;return v("webkit")?!0:m=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(m){return v("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,m)},_unlinkImpl:function(m){return this.queryCommandEnabled("unlink")&&(v("mozilla")||v("webkit"))?(m=this.selection.getAncestorElement("a"),this.selection.selectElement(m),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,m)},_hilitecolorImpl:function(m){if(!this._handleTextColorOrProperties("hilitecolor",m))if(v("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var w=this.document.execCommand("hilitecolor",!1,m);this.document.execCommand("styleWithCSS",!1,!1)}else w=this.document.execCommand("hilitecolor",!1,m);return w},_backcolorImpl:function(m){v("ie")&&(m=m?m:null);var w=this._handleTextColorOrProperties("backcolor",m);w||(w=this.document.execCommand("backcolor",
!1,m));return w},_forecolorImpl:function(m){v("ie")&&(m=m?m:null);var w=!1;(w=this._handleTextColorOrProperties("forecolor",m))||(w=this.document.execCommand("forecolor",!1,m));return w},_inserthtmlImpl:function(m){m=this._preFilterContent(m);var w=!0;if(9>v("ie")){var E=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var L=E.item(0);E.length;)E.remove(E.item(0));L.outerHTML=m}else E.pasteHTML(m);E.select()}else if(8>v("trident")){var K=A.getSelection(this.window);
if(K&&K.rangeCount&&K.getRangeAt){E=K.getRangeAt(0);E.deleteContents();var N=b.create("div");N.innerHTML=m;for(L=this.document.createDocumentFragment();m=N.firstChild;)var O=L.appendChild(m);E.insertNode(L);O&&(E=E.cloneRange(),E.setStartAfter(O),E.collapse(!1),K.removeAllRanges(),K.addRange(E))}}else v("mozilla")&&!m.length?this.selection.remove():w=this.document.execCommand("inserthtml",!1,m);return w},_boldImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),w=this._adaptIEFormatAreaAndExec("bold");
w||(w=this.document.execCommand("bold",!1,m));return w},_italicImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),w=this._adaptIEFormatAreaAndExec("italic");w||(w=this.document.execCommand("italic",!1,m));return w},_underlineImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),w=this._adaptIEFormatAreaAndExec("underline");w||(w=this.document.execCommand("underline",!1,m));return w},_strikethroughImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),
w=this._adaptIEFormatAreaAndExec("strikethrough");w||(w=this.document.execCommand("strikethrough",!1,m));return w},_superscriptImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),w=this._adaptIEFormatAreaAndExec("superscript");w||(w=this.document.execCommand("superscript",!1,m));return w},_subscriptImpl:function(m){var w=!1;if(v("ie")||v("trident"))this._adaptIESelection(),w=this._adaptIEFormatAreaAndExec("subscript");w||(w=this.document.execCommand("subscript",!1,m));return w},
_fontnameImpl:function(m){if(v("ie")||v("trident"))var w=this._handleTextColorOrProperties("fontname",m);w||(w=this.document.execCommand("fontname",!1,m));return w},_fontsizeImpl:function(m){if(v("ie")||v("trident"))var w=this._handleTextColorOrProperties("fontsize",m);w||(w=this.document.execCommand("fontsize",!1,m));return w},_insertorderedlistImpl:function(m){var w=!1;if(v("ie")||v("trident")||v("edge"))w=this._adaptIEList("insertorderedlist",m);w||(w=this.document.execCommand("insertorderedlist",
!1,m));return w},_insertunorderedlistImpl:function(m){var w=!1;if(v("ie")||v("trident")||v("edge"))w=this._adaptIEList("insertunorderedlist",m);w||(w=this.document.execCommand("insertunorderedlist",!1,m));return w},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(m){var w=0;if(m&&m.childNodes){var E;for(E=0;E<m.childNodes.length;E++){var L=c.position(m.childNodes[E]);
w+=L.h}}return w},_isNodeEmpty:function(m,w){return 1===m.nodeType?0<m.childNodes.length?this._isNodeEmpty(m.childNodes[0],w):!0:3===m.nodeType?""===m.nodeValue.substring(w):!1},_removeStartingRangeFromRange:function(m,w){if(m.nextSibling)w.setStart(m.nextSibling,0);else{for(m=m.parentNode;m&&null==m.nextSibling;)m=m.parentNode;m&&w.setStart(m.nextSibling,0)}return w},_adaptIESelection:function(){var m=A.getSelection(this.window);if(m&&m.rangeCount&&!m.isCollapsed){for(var w=m.getRangeAt(0),E=w.startContainer,
L=w.startOffset;3===E.nodeType&&L>=E.length&&E.nextSibling;)L-=E.length,E=E.nextSibling;for(var K=null;this._isNodeEmpty(E,L)&&E!==K;)K=E,w=this._removeStartingRangeFromRange(E,w),E=w.startContainer,L=0;m.removeAllRanges();m.addRange(w)}},_adaptIEFormatAreaAndExec:function(m){var w=A.getSelection(this.window),E=this.document,L;if(m&&w&&w.isCollapsed){if(this.queryCommandValue(m)){m=this._tagNamesForCommand(m);var K=w.getRangeAt(0);var N=K.startContainer;if(3===N.nodeType){var O=K.endOffset;N.length<
O&&(O=this._adjustNodeAndOffset(Q,O),N=O.node,O=O.offset)}for(;N&&N!==this.editNode;){var Q=N.tagName?N.tagName.toLowerCase():"";if(-1<y.indexOf(m,Q)){var P=N;break}N=N.parentNode}if(P&&(Q=K.startContainer,m=E.createElement(P.tagName),b.place(m,P,"after"),Q&&3===Q.nodeType)){O=K.endOffset;Q.length<O&&(O=this._adjustNodeAndOffset(Q,O),Q=O.node,O=O.offset);N=Q.nodeValue;K=E.createTextNode(N.substring(0,O));var S=N.substring(O,N.length);S&&(L=E.createTextNode(S));b.place(K,Q,"before");if(L){var R=E.createElement("span");
R.className="ieFormatBreakerSpan";b.place(R,Q,"after");b.place(L,R,"after");L=R}b.destroy(Q);O=K.parentNode;for(Q=[];O!==P;){N=O.tagName;K={tagName:N};Q.push(K);N=E.createElement(N);O.style&&N.style&&O.style.cssText&&(N.style.cssText=O.style.cssText,K.cssText=O.style.cssText);"FONT"===O.tagName&&(O.color&&(N.color=O.color,K.color=O.color),O.face&&(N.face=O.face,K.face=O.face),O.size&&(N.size=O.size,K.size=O.size));O.className&&(N.className=O.className,K.className=O.className);if(L)for(;L;)K=L.nextSibling,
N.appendChild(L),L=K;N.tagName==O.tagName?(R=E.createElement("span"),R.className="ieFormatBreakerSpan",b.place(R,O,"after"),b.place(N,R,"after")):b.place(N,O,"after");K=O;L=N;O=O.parentNode}if(L){if(1===L.nodeType||3===L.nodeType&&L.nodeValue)m.innerHTML="";for(;L;)K=L.nextSibling,m.appendChild(L),L=K}if(Q.length){K=Q.pop();L=E.createElement(K.tagName);K.cssText&&L.style&&(L.style.cssText=K.cssText);K.className&&(L.className=K.className);"FONT"===K.tagName&&(K.color&&(L.color=K.color),K.face&&(L.face=
K.face),K.size&&(L.size=K.size));for(b.place(L,m,"before");Q.length;)K=Q.pop(),P=E.createElement(K.tagName),K.cssText&&P.style&&(P.style.cssText=K.cssText),K.className&&(P.className=K.className),"FONT"===K.tagName&&(K.color&&(P.color=K.color),K.face&&(P.face=K.face),K.size&&(P.size=K.size)),L.appendChild(P),L=P;P=E.createTextNode(".");R.appendChild(P);L.appendChild(P)}else R=E.createElement("span"),R.className="ieFormatBreakerSpan",P=E.createTextNode("."),R.appendChild(P),b.place(R,m,"before");L=
A.create(this.window);L.setStart(P,0);L.setEnd(P,P.length);w.removeAllRanges();w.addRange(L);this.selection.collapse(!1);P.parentNode.innerHTML="";m.firstChild||b.destroy(m);return!0}return!1}K=w.getRangeAt(0);if((Q=K.startContainer)&&3===Q.nodeType)return O=K.startOffset,Q.length<O&&(O=this._adjustNodeAndOffset(Q,O),Q=O.node,O=O.offset),N=Q.nodeValue,K=E.createTextNode(N.substring(0,O)),S=N.substring(O),""!==S&&(L=E.createTextNode(N.substring(O))),R=E.createElement("span"),P=E.createTextNode("."),
R.appendChild(P),K.length?b.place(K,Q,"after"):K=Q,b.place(R,K,"after"),L&&b.place(L,R,"after"),b.destroy(Q),L=A.create(this.window),L.setStart(P,0),L.setEnd(P,P.length),w.removeAllRanges(),w.addRange(L),E.execCommand(m),b.place(R.firstChild,R,"before"),b.destroy(R),L.setStart(P,0),L.setEnd(P,P.length),w.removeAllRanges(),w.addRange(L),this.selection.collapse(!1),P.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(m){var w=A.getSelection(this.window);if(w.isCollapsed&&w.rangeCount&&
!this.queryCommandValue(m)){var E=w.getRangeAt(0),L=E.startContainer;if(L&&3==L.nodeType&&!E.startOffset)return E="ul","insertorderedlist"===m&&(E="ol"),m=this.document.createElement(E),E=b.create("li",null,m),b.place(m,L,"before"),E.appendChild(L),b.create("br",null,m,"after"),m=A.create(this.window),m.setStart(L,0),m.setEnd(L,L.length),w.removeAllRanges(),w.addRange(m),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(m,w){var E=A.getSelection(this.window),L=this.document,
K,N;w=w||null;if(m&&E&&E.isCollapsed&&E.rangeCount){var O=E.getRangeAt(0);if((K=O.startContainer)&&3===K.nodeType){var Q=O.startOffset;K.length<Q&&(O=this._adjustNodeAndOffset(K,Q),K=O.node,Q=O.offset);var P=K.nodeValue;O=L.createTextNode(P.substring(0,Q));""!==P.substring(Q)&&(N=L.createTextNode(P.substring(Q)));P=L.createElement("span");Q=L.createTextNode(".");P.appendChild(Q);L=L.createElement("span");P.appendChild(L);O.length?b.place(O,K,"after"):O=K;b.place(P,O,"after");N&&b.place(N,P,"after");
b.destroy(K);K=A.create(this.window);K.setStart(Q,0);K.setEnd(Q,Q.length);E.removeAllRanges();E.addRange(K);if(v("webkit")){E="color";if("hilitecolor"===m||"backcolor"===m)E="backgroundColor";a.set(P,E,w);this.selection.remove();b.destroy(L);P.innerHTML="\x26#160;";this.selection.selectElement(P);this.focus()}else this.execCommand(m,w),b.place(P.firstChild,P,"before"),b.destroy(P),K.setStart(Q,0),K.setEnd(Q,Q.length),E.removeAllRanges(),E.addRange(K),this.selection.collapse(!1),Q.parentNode.removeChild(Q);
return!0}}return!1},_adjustNodeAndOffset:function(m,w){for(;m.length<w&&m.nextSibling&&3===m.nextSibling.nodeType;)w-=m.length,m=m.nextSibling;return{node:m,offset:w}},_tagNamesForCommand:function(m){return"bold"===m?["b","strong"]:"italic"===m?["i","em"]:"strikethrough"===m?["s","strike"]:"superscript"===m?["sup"]:"subscript"===m?["sub"]:"underline"===m?["u"]:[]},_stripBreakerNodes:function(m){if(this.isLoaded)return x(".ieFormatBreakerSpan",m).forEach(function(w){for(;w.firstChild;)b.place(w.firstChild,
w,"before");b.destroy(w)}),m},_stripTrailingEmptyNodes:function(m){function w(E){return/^(p|div|br)$/i.test(E.nodeName)&&0==E.children.length&&/^[\s\xA0]*$/.test(E.textContent||E.innerText||"")||3===E.nodeType&&/^[\s\xA0]*$/.test(E.nodeValue)}for(;m.lastChild&&w(m.lastChild);)b.destroy(m.lastChild);return m},_setTextDirAttr:function(m){this._set("textDir",m);this.onLoadDeferred.then(f.hitch(this,function(){this.editNode.dir=m}))}});return M})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(y,z,C){var r={getIndex:function(e,b){for(var c=[],a=[],g=e,h,f;e!=b;){var t=0;for(h=e.parentNode;f=h.childNodes[t++];)if(f===e){--t;break}c.unshift(t);a.unshift(t-h.childNodes.length);e=h}if(0<c.length&&3==g.nodeType){for(f=g.previousSibling;f&&3==f.nodeType;)c[c.length-1]--,f=f.previousSibling;for(f=g.nextSibling;f&&3==f.nodeType;)a[a.length-1]++,f=f.nextSibling}return{o:c,r:a}},getNode:function(e,b){if(!C.isArray(e)||0==e.length)return b;var c=b;
y.every(e,function(a){if(0<=a&&a<c.childNodes.length)c=c.childNodes[a];else return c=null,!1;return!0});return c},getCommonAncestor:function(e,b,c){c=c||e.ownerDocument.body;var a=function(f){for(var t=[];f;)if(t.unshift(f),f!==c)f=f.parentNode;else break;return t};e=a(e);b=a(b);a=Math.min(e.length,b.length);for(var g=e[0],h=1;h<a;h++)if(e[h]===b[h])g=e[h];else break;return g},getAncestor:function(e,b,c){for(c=c||e.ownerDocument.body;e&&e!==c;){var a=e.nodeName.toUpperCase();if(b.test(a))return e;
e=e.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(e,b,c){c=c||e.ownerDocument.body;b=b||r.BlockTagNames;for(var a=null,g;e&&e!==c;){var h=e.nodeName.toUpperCase();!a&&b.test(h)&&(a=e);!g&&/^(?:BODY|TD|TH|CAPTION)$/.test(h)&&(g=e);e=e.parentNode}return{blockNode:a,blockContainer:g||e.ownerDocument.body}},atBeginningOfContainer:function(e,b,c){var a=!1,g=0==c;g||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(0,c))&&(g=
!0);if(g)for(a=!0;b&&b!==e;){if(b.previousSibling){a=!1;break}b=b.parentNode}return a},atEndOfContainer:function(e,b,c){var a=!1,g=c==(b.length||b.childNodes.length);g||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(c))&&(g=!0);if(g)for(a=!0;b&&b!==e;){if(b.nextSibling){a=!1;break}b=b.parentNode}return a},adjacentNoneTextNode:function(e,b){var c=e;e=0-e.length||0;for(b=b?"nextSibling":"previousSibling";c&&3==c.nodeType;)e+=c.length,c=c[b];return[c,e]},create:function(e){e=e||window;return e.getSelection?
e.document.createRange():new d},getSelection:function(e,b){if(e.getSelection)return e.getSelection();e=new k.selection(e);b||e._getCurrentSelection();return e}};if(!window.getSelection)var k=r.ie={cachedSelection:{},selection:function(e){this._ranges=[];this.addRange=function(b,c){this._ranges.push(b);c||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();
var b=e.document.selection.createRange();b="CONTROL"==e.document.selection.type.toUpperCase()?new d(k.decomposeControlRange(b)):new d(k.decomposeTextRange(b));this.addRange(b,!0),this.isCollapsed=b.collapsed}},decomposeControlRange:function(e){var b=e.item(0),c=e.item(e.length-1);e=b.parentNode;var a=c.parentNode;b=r.getIndex(b,e).o[0];c=r.getIndex(c,a).o[0]+1;return[e,b,a,c]},getEndPoint:function(e,b){var c=e.duplicate();c.collapse(!b);var a="EndTo"+(b?"End":"Start"),g=c.parentElement(),h;if(0<g.childNodes.length)y.every(g.childNodes,
function(x,l){if(3!=x.nodeType)if(c.moveToElementText(x),0<c.compareEndPoints(a,e))if(h&&3==h.nodeType){f=h;var v=!0}else return f=g,t=l,!1;else{if(l==g.childNodes.length-1)return f=g,t=g.childNodes.length,!1}else l==g.childNodes.length-1&&(f=x,v=!0);if(v&&f)return f=(x=r.adjacentNoneTextNode(f)[0])?x.nextSibling:g.firstChild,l=r.adjacentNoneTextNode(f),x=l[0],l=l[1],x?(c.moveToElementText(x),c.collapse(!1)):c.moveToElementText(g),c.setEndPoint(a,e),t=c.text.length-l,!1;h=x;return!0});else{var f=
g;var t=0}b||1!=f.nodeType||t!=f.childNodes.length||(b=f.nextSibling)&&3==b.nodeType&&(f=b,t=0);return[f,t]},setEndPoint:function(e,b,c){e=e.duplicate();var a;if(3!=b.nodeType)if(0<c){if(a=b.childNodes[c-1])if(3==a.nodeType)b=a,c=a.length;else if(a.nextSibling&&3==a.nextSibling.nodeType)b=a.nextSibling,c=0;else{e.moveToElementText(a.nextSibling?a:b);var g=a.parentNode;a=g.insertBefore(a.ownerDocument.createTextNode(" "),a.nextSibling);e.collapse(!1);g.removeChild(a)}}else e.moveToElementText(b),e.collapse(!0);
3==b.nodeType&&(a=r.adjacentNoneTextNode(b),g=a[0],a=a[1],g?(e.moveToElementText(g),e.collapse(!1),"inherit"!=g.contentEditable&&a++):(e.moveToElementText(b.parentNode),e.collapse(!0),e.move("character",1),e.move("character",-1)),c+=a,0<c&&e.move("character",c)!=c&&console.error("Error when moving!"));return e},decomposeTextRange:function(e){var b=k.getEndPoint(e),c=b[0],a=b[1],g=b[0];b=b[1];e.htmlText.length&&(e.htmlText==e.text?b=a+e.text.length:(b=k.getEndPoint(e,!0),g=b[0],b=b[1]));return[c,a,
g,b]},setRange:function(e,b,c,a,g,h){b=k.setEndPoint(e,b,c);e.setEndPoint("StartToStart",b);if(!h)var f=k.setEndPoint(e,a,g);e.setEndPoint("EndToEnd",f||b);return e}},d=r.W3CRange=z(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?r.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(e,b){b=parseInt(b);if(this.startContainer!==e||this.startOffset!=b)delete this._cachedBookmark,this.startContainer=e,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(e,b)},setEnd:function(e,b){b=parseInt(b);if(this.endContainer!==e||this.endOffset!=b)delete this._cachedBookmark,
this.endContainer=e,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(e,b)},setStartAfter:function(e,b){this._setPoint("setStart",e,b,1)},setStartBefore:function(e,b){this._setPoint("setStart",e,b,0)},setEndAfter:function(e,b){this._setPoint("setEnd",e,b,1)},setEndBefore:function(e,b){this._setPoint("setEnd",e,b,0)},_setPoint:function(e,b,c,a){c=r.getIndex(b,b.parentNode).o;this[e](b.parentNode,c.pop()+a)},_getIERange:function(){var e=(this._body||this.endContainer.ownerDocument.body).createTextRange();
k.setRange(e,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return e},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var e=this.startContainer,b=this._getIERange();3!==e.nodeType||this.startOffset||this.setStartBefore(e);b.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var e=new d([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);e._body=this._body;return e},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});C.setObject("dijit.range",r);return r})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(y,z,C){var r={};z.setObject("dijit._editor.html",r);var k=r.escapeXml=function(d,e){d=d.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");e||(d=d.replace(/'/gm,"\x26#39;"));return d};r.getNodeHtml=function(d){var e=[];r.getNodeHtmlHelper(d,e);return e.join("")};r.getNodeHtmlHelper=function(d,e){switch(d.nodeType){case 1:var b=d.nodeName.toLowerCase();if(!b||"/"==b.charAt(0))return"";e.push("\x3c",b);var c=[],a={},g;if(C("dom-attributes-explicit")||C("dom-attributes-specified-flag"))for(var h=0;g=d.attributes[h++];){var f=g.name;"_dj"===f.substr(0,3)||C("dom-attributes-specified-flag")&&
!g.specified||f in a||(g=g.value,("src"==f||"href"==f)&&d.getAttribute("_djrealurl")&&(g=d.getAttribute("_djrealurl")),8===C("ie")&&"style"===f&&(g=g.replace("HEIGHT:","height:").replace("WIDTH:","width:")),c.push([f,g]),a[f]=g)}else{var t=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML;a=t.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);t=t.substr(0,t.indexOf("\x3e"));y.forEach(a,function(x){if(x){var l=x.indexOf("\x3d");if(0<l&&(x=x.substring(0,l),"_dj"!=x.substr(0,3)))if("src"!=x&&"href"!=
x||!d.getAttribute("_djrealurl")){switch(x){case "style":var v=d.style.cssText.toLowerCase();break;case "class":v=d.className;break;case "width":if("img"===b){(l=/width=(\S+)/i.exec(t))&&(v=l[1]);break}case "height":if("img"===b){(l=/height=(\S+)/i.exec(t))&&(v=l[1]);break}default:v=d.getAttribute(x)}null!=v&&c.push([x,v.toString()])}else c.push([x,d.getAttribute("_djrealurl")])}},this)}c.sort(function(x,l){return x[0]<l[0]?-1:x[0]==l[0]?0:1});for(a=0;g=c[a++];)e.push(" ",g[0],'\x3d"',"string"===
typeof g[1]?k(g[1],!0):g[1],'"');switch(b){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":e.push(" /\x3e");break;case "script":e.push("\x3e",d.innerHTML,"\x3c/",b,"\x3e");break;default:e.push("\x3e"),d.hasChildNodes()&&r.getChildrenHtmlHelper(d,e),e.push("\x3c/",b,"\x3e")}break;case 4:case 3:e.push(k(d.nodeValue,!0));break;case 8:e.push("\x3c!--",k(d.nodeValue,!0),"--\x3e");break;default:e.push("\x3c!-- Element not recognized - Type: ",d.nodeType," Name: ",
d.nodeName,"--\x3e")}};r.getChildrenHtml=function(d){var e=[];r.getChildrenHtmlHelper(d,e);return e.join("")};r.getChildrenHtmlHelper=function(d,e){if(d)for(var b=d.childNodes||d,c=!C("ie")||b!==d,a,g=0;a=b[g++];)c&&a.parentNode!=d||r.getNodeHtmlHelper(a,e)};return r})},"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),function(y,
z,C,r,k,d,e,b){var c=function(a,g){this.storage=a;this.data=g};c.prototype={storage:null,data:null,filter:function(a){return this.storage._filter(this.data,a)},sort:function(a,g){return this.storage._sort(this.data,a,g)},fetch:function(){return this.storage._fetchRange(this.data)},fetchRange:function(a){return this.storage._fetchRange(this.data,a)},mayHaveChildren:function(a){return this.storage.mayHaveChildren(a)},getChildren:function(a){return this.storage.getChildren(a,{returnCollection:!0})}};
return y(r,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:e,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(a,g){z.mixin(this,g);this.storage=this;this.root={children:a||[]};z.mixin(this._provideBinding(this.root),{deepness:-1,selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(a){var g=this._getBinding(a);
g||(a[this.bindingProperty]=g={});return g},_getBinding:function(a){return this.bindingProperty?a[this.bindingProperty]:a},_initializeNode:function(a,g){var h=this._provideBinding(a);h.selected=!!h.selected;a.children?(h.selectCount=0,h.leafCount=0,C.forEach(a.children,function(f){this._registerNode(f);var t=this._provideBinding(f);t.parent=a;t.deepness=g;this._initializeNode(f,g+1);h.selectCount+=t.selectCount;h.leafCount+=t.leafCount},this),h.selectCount)?h.selectCount===h.leafCount&&(h.selected=
!0):h.selected=!1:("number"!==typeof h.leafCount&&(h.leafCount=1),h.selectCount=h.selected?h.leafCount:0)},isOwned:function(a,g){return g||a!==this.root?this.get(this.getIdentity(a))===a:!0},_registerNode:function(a){this._autoId&&void 0===a[this.idProperty]&&(a[this.idProperty]=this._autoId++);this.idProperty&&(this._hash[a[this.idProperty]]=a)},_unregisterNode:function(a){this.isOwned(a,!0)&&delete this._hash[a[this.idProperty]]},clear:function(){this.root.children.length&&(C.forEach(this.root.children,
function(a){this._unbindNode(a)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(a){a.children&&C.forEach(a.children,function(h){delete this._getBinding(h).parent;this._unbindNode(h)},this);this._unregisterNode(a);var g=this._getBinding(a);g.parent&&(this._incrementCounts(g.parent,-g.selectCount,-g.leafCount),delete g.parent);g!==a&&delete a[this.bindingProperty]},removeNodes:function(a,g){C.forEach(a&&a.slice(),function(h){if(this.isOwned(h,!0)){var f=
this._getBinding(h).parent,t=C.indexOf(f.children,h);0<=t&&f.children.splice(t,1);this._unbindNode(h)}},this);!g&&this.emit("updated")},addNodes:function(a,g,h){if(!g)g=this.root;else if(!this.isOwned(g)||!g.children)return!1;var f=this._getBinding(g).deepness+1,t=0,x=0;C.forEach(a,function(l){if(!this.isOwned(l)){g.children.push(l);this._registerNode(l);var v=this._provideBinding(l);v.parent=g;v.deepness=f;this._initializeNode(l,f+1);t+=v.selectCount;x+=v.leafCount}},this);this._incrementCounts(g,
t,x);!h&&this.emit("updated");return!0},select:function(a,g){return this.changeSelect(a,!0,g)},deselect:function(a){this.changeSelect(a,!1)},changeSelect:function(a,g,h){h=h||this.root.leafCount;var f=a&&this._getBinding(a);if(f){g=!!g;var t=(g?f.leafCount:0)-f.selectCount,x=0>t||this.root.selectCount+t<=h;if(!a.children)return x&&(f.selected=g,t&&this._incrementCounts(a,t)),x;x&&(f.selected=g);C.forEach(a.children,function(l){this.changeSelect(l,g,h)},this);return x}},_incrementCounts:function(a,
g,h){a=this._getBinding(a);a.selectCount+=g;h&&(a.leafCount+=h);a.selectCount?a.selectCount==a.leafCount&&(a.selected=!0):a.selected=!1;a.parent&&this._incrementCounts(a.parent,g,h)},getSelectionState:function(a){if(!this.isOwned(a))return!1;a=this._getBinding(a);return a.selectCount&&a.selectCount!=a.leafCount?"mixed":a.selected=!!a.selectCount},getSelectedNodes:function(a){return this.getDescendingNodes(this.root,!0,a)},getDescendingNodes:function(a,g,h){if(!this.isOwned(a))return[];var f=[];this._collectNodes(a.children,
f,g,h);return f},_collectNodes:function(a,g,h,f){C.forEach(a,function(t){var x=this._getBinding(t),l=null===h||void 0===h?x.leafCount:h?x.selectCount:x.leafCount-x.selectCount;l&&(!t.children||!f&&l==x.leafCount?g.push(t):this._collectNodes(t.children,g,h,f))},this)},inspectChildren:function(a,g,h,f){f&&(g=z.hitch(f,g));a=a||this.root;(a=a.children)&&h&&(a=a.slice(),a.sort(h));return C.every(a,function(t){var x=g(t);return null===x?!1:!1!==x&&t.children?this.inspectChildren(t,g,h):!0},this)},updateExpandedNodes:function(a,
g){for(var h in this._hash)this.updateExpand(this._hash[h],!!a[h]);this._updateOddEven(null,g)},updateExpand:function(a,g,h,f){if(a){var t=!1;a.children&&(a=this._getBinding(a),a.expanded!==g&&(t=!0,a.expanded=g));g={};t&&h&&this._updateOddEven(g,f);return g}},_updateOddEven:function(a,g){var h=1;this.inspectChildren(null,function(f){!1!==f.visible&&(h=1-h);var t=this._getBinding(f);a&&t.isOdd!==h&&(a[this.getIdentity(f)]=h);t.isOdd=h;return!(!f.children||!t.expanded)},g,this)},isOdd:function(a){return(a=
this._getBinding(a))&&a.isOdd},get:function(a){return this._hash[a]},getIdentity:function(a){return this.idProperty?a[this.idProperty]:null},query:function(a,g){return d(this._query(this.data,a,g))},_query:function(a,g,h){return this.queryEngine(g,h)(a)},filter:function(a){return this._filter(this.data,a)},_filter:function(a,g){a=this._query(a,g);return new c(this.storage,a)},sort:function(a,g){return this._sort(this.data,a,g)},_sort:function(a,g,h){"function"===typeof g?(a=a.slice(),a.sort(g)):(g=
Array.isArray(g)?g.map(function(f){return{attribute:f.property,descending:f.descending}}):[{attribute:g,descending:h}],a=this._query(a,{},{sort:g}));return new c(this.storage,a)},mayHaveChildren:function(a){return!!a.children},getChildren:function(a,g){var h=this.isOwned(a,!0)?a.children:null;a=this.isDstoreTree||g&&g.returnCollection;g=this.queryEngine({},a?null:g)(h||[]);return a?new c(this.storage,g):d(g)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(a){return this._fetchRange(this.data,
a)},_fetchRange:function(a,g){return b(k(g?a.slice(g.start,g.end):a.slice()),{totalLength:k(a.length)})}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(y){return y})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(y,z){function C(r,k){return z(this,function(d){for(var e=0,b=d.length;e<b;e++)r.call(k,d[e],e,d)})}return function(r,k){var d=k&&"totalLength"in k;if(r.then){r=y.delegate(r);var e=r.then(function(b){var c=d?k.totalLength:b.totalLength||
b.length;b.totalLength=c;return!d&&c});r.totalLength=d?k.totalLength:e;r.response=k&&k.response}else r.totalLength=d?k.totalLength:r.length;r.forEach=C;return r}})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v,F,I,B){var G=y(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function D(){this._selectedRowInfos={};this.inherited(D,arguments)},postCreate:function p(){this.inherited(p,arguments);r.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(p){this.selectSingleRow(this._previouslySelectedRowsByNode.get(p),
p)},selectSingleRow:function(p,u){this.unselectAllRows();this._selectRow(p,u)},_selectRow:function(p,u){r.add(p,this.selectedRowClass);r.add(p,"row-level-"+this._getNodeLevel(u));var A=this.tree.getIdentity(u),n={row:p,node:u,nodeId:A,index:u.parent&&u.parent.children.indexOf(u)};this._lastSelectedRowInfo=this._selectedRowInfos[A]=n;this._previouslySelectedRowsByNode.set(u,p);var q=this;this._outsideHandler=this._outsideHandler||e(document.body,"click",function(){F.isMouseOver(q.domNode)||q._isSelectionFrozen||
q.keepSelectionOnOutsideClick||q.unselectAllRows()})},_unselectRow:function(p,u){delete this._selectedRowInfos[this.tree.getIdentity(u)];r.remove(p,this.selectedRowClass)},unselectAllRows:function(){for(var p in this._selectedRowInfos)r.remove(this._selectedRowInfos[p].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(p){var u=this;p&&p.forEach(function(A){var n=u.grid.row(A);n&&n.element&&u._selectRow(n.element,A)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var p=[],u=[],A=[],n;for(n in this._selectedRowInfos)A.push(this._selectedRowInfos[n]);A.sort(function(q,H){return q.index-H.index});A.forEach(function(q){p.push(q.node);u.push(q.row)});return{nodes:p,rows:u}},_emitSelectedRowsEvent:function(){var p=
this._getSelectedNodesRows();if(p.nodes.length)this.onRowsSelected(p.nodes,p.rows)}});return y([a,g,C,G],{templateString:B,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(p,u){},getLabel:function(p,u){return p.label},postCreate:function u(){this.inherited(u,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var u in this._checkboxes)this._updateCheckboxState(this._checkboxes[u]);this._emitSelectionChanged()},setWidth:function(u){this.grid&&this.grid.domNode&&d.set(this.grid.domNode,"width",u+"px")},setHeight:function(u){this.grid&&this.grid.domNode&&d.set(this.grid.domNode,"height",u+"px")},row:function(u){return this.grid.row(u)},cell:function(u){return this.grid.cell(u)},_labelColumn:null,_createGrid:function(){var u=this;this._checkboxes={};var A={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},n;if(this.additionalColumns&&this.additionalColumns.length&&(n=this.additionalColumns.filter(function(H){return H.field===u.labelColumnField})[0])){for(var q in A)void 0===n[q]&&(n[q]=A[q]);A=n}A.indentWidth=A.indentWidth||16;this._labelColumn=A=this._prepareTreeColumn(A);q=[];this.firstColumns&&(q=q.concat(this.firstColumns));this.showCheckboxColumn&&q.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});n||q.push(A);this.additionalColumns&&(q=q.concat(this.additionalColumns));A=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&A.push(this.gridClass);this.fitParentSize&&A.push("fitParentSize");A=Object.assign({class:A.join(" "),keepScrollPosition:!0,store:this.tree,columns:q},this.gridParams);this.grid=this._createGridObject(A,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};l.oddEvenFix(this.grid);this.own(e(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();I.autoTooltip(this.domNode);this.showHeader||r.add(this.domNode,"esriMapsAnalystXGridNoHeader");e(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(H){(H=u.grid.row(H))&&u.onExpandChangedUser(H.data)})},_createGridObject:function(u,A){return new h(u,A)},onRowInserted:function(u,A){},_addGridHandlers:function(){function u(n,q){A.enableRowSelection&&q.parent&&(!A.selectedRowFilter||A.selectedRowFilter(q))&&(r.add(n,"esriMapsAnalystXClickable"),e(n,"click",function(H){setTimeout(function(){if(!A._isSelectionFrozen){if(H.shiftKey&&A.enableMultipleRowSelection){if(A._lastSelectedRowInfo&&A._lastSelectedRowInfo.row.parentNode&&A._lastSelectedRowInfo.node.parent===
q.parent){var M=v.getChildIndex(A._lastSelectedRowInfo.row.parentNode,A._lastSelectedRowInfo.row),m=v.getChildIndex(n.parentNode,n),w=M<=m?A._lastSelectedRowInfo.row:n;M=M<=m?n:A._lastSelectedRowInfo.row;m=w;if(w.id!==M.id){do{w=A.grid.row(m).data;A._selectRow(m,w);if(m.id===M.id)break;m=m.nextSibling}while(m)}}else A.selectSingleRow(n,q);v.stealFocus()}else t.isCtrl(H)&&A.enableMultipleRowSelection?A._lastSelectedRowInfo&&A._lastSelectedRowInfo.row.parentNode&&A._lastSelectedRowInfo.node.parent===
q.parent||A.allowSelectionFromManyParents?A._selectedRowInfos[q.id]?A._unselectRow(n,q):A._selectRow(n,q):A.selectSingleRow(n,q):A.selectSingleRow(n,q);A._emitSelectedRowsEvent()}})}))}var A=this;this.own(z.after(this.grid,"insertRow",function(n){var q=n&&A.grid._rowIdToObject[n.id];if(n){if(q&&A.hideInvisibleExpandoIcons&&(!q.children||!q.children.length)){var H=b(".dgrid-expando-icon",n)[0];H&&(H.style.width="0")}v[q&&!1===q.visible?"hide":"show"](n);u(n,q)}q&&(A._updateRowHighlighting(q,n),A.onRowInserted(n,
q));A.rowPostProcessor&&A.rowPostProcessor(n,q);return n}))},_addKeepScrollHandlers:function(){function u(n){if(!A.grid.contentNode)return n;if(A.fitParentSize){var q=v.hasScrollbars(A.grid.bodyNode);A.grid.headerNode.style[A.isLeftToRight()?"right":"left"]=q.w?"":"0px";A._lastContentWidth=A.grid.contentNode.style.width||A._lastContentWidth||"";A.grid.contentNode.style.width=q.h?A._lastContentWidth:""}else A.keepContentUnderScroll?A.grid.contentNode.style.width=A.grid.headerNode.firstChild.offsetWidth+
"px":!1===A.keepContentUnderScroll&&(A.grid.contentNode.style.width="");return n}var A=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)z.before(this.grid,"refresh",function(){A.hideCheckLimitMessage();A._lastCheckedNode=null}),z.after(this.grid,"resize",u),z.after(this.grid,"refresh",u)},_getNodeLevel:function(u){var A=-1;for(u=u&&u.parent;u;)A++,u=u.parent;return A},_prepareTreeColumn:function(u){return this._wrapTreeColumn(f(u))},_wrapTreeColumn:function(u){return u},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(u){var A=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,A);this.emit("SelectionChanged",{selected:A,toggledTreeNode:u})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(u){this._isRefreshSuspended=u},_refreshGrid:function(){if(!this._isRefreshSuspended){var u=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(u);for(var A in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[A].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[A].node).element,this._selectedRowInfos[A].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(u){return this.grid&&this.grid.scrollTo(u)},_renderCheckbox:function(u){if(!u.leafCount&&u!==this.tree.root||!this.showCheckboxColumn||
!1===u.selectable&&void 0===u.indepSelection)return document.createTextNode("");var A=new x(null,{class:"esriStyleInTable"});A.autoToggle=!1;A.node=u;this._updateCheckboxState(A,u);!1===u.enabled&&A.set("disabled",!0);u===this.tree.root?(this._rootCheckbox=A,v[this.showRootCheckbox?"show":"hide"](A.domNode)):this._checkboxes[this.tree.getIdentity(u)]=A;A.onClick=this._onCheckboxClick.bind(this,u,A);return A},_renderCheckboxForColumn:function(u){return(u=this._renderCheckbox(u))&&u.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var u in this._checkboxes)this._updateCheckboxState(this._checkboxes[u])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(u,A,n){n.stopPropagation();this.hideCheckLimitMessage();var q=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(u));q&&n.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,u,A||n)?this._lastCheckedNode=u:(this._lastCheckedNode=q?u:null,
this._toggleNodeSelection(u,A||n),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(u,A,n){if(!u||u===A||u.parent!==A.parent)return!1;var q=A.parent.children,H=q.indexOf(u);A=q.indexOf(A);u=H<A?1:-1;var M=[],m=[];for(H+=u;;H+=u){var w=q[H];((void 0===w.indepSelection?w.selected:w.indepSelection)?M:m).push(w);if(H===A)break}M.forEach(function(E){this._toggleNodeSelection(E,n)},this);m.every(function(E){return this._toggleNodeSelection(E,n)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(u,
A){var n=void 0===u.indepSelection?!u.selected:!u.indepSelection;if(n&&this.checkLimit){var q=this.getSelectedNodes().length,H="function"===typeof this.checkLimit?this.checkLimit(this.tree,q):this.checkLimit;if(q>=H)if(void 0===u.indepSelection&&u.children&&!1!==this.tree.getSelectionState(u))n=!1;else return this.showCheckLimitMessage(A),!1}q=!0;void 0===u.indepSelection?(q=this.tree.changeSelect(u,n,H),!q&&this.showCheckLimitMessage(A)):u.indepSelection=n;this._emitSelectionChanged(u);return q},
_checkLimitHandler:null,showCheckLimitMessage:function(u){if(this.checkLimitMessage){var A=u&&(u.domNode||u.target);A&&(c.show(this.checkLimitMessage,A,["above","below"]),u=function(){A&&c.hide(A);A=null},setTimeout(u,this.checkLimitMessageTimeout),this._checkLimitHandler=u,this.onCheckLimitReached(u))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(u){},_updateCheckboxState:function(u){if(u){var A=this._getNodeSelection(u.node);
u.set("checked",A);this._updateRowHighlighting(u.node,null,A)}},_getNodeSelection:function(u){return void 0!==u.indepSelection?u.indepSelection:this.tree.getSelectionState(u)},_updateRowHighlighting:function(u,A,n){this.highlightSelected&&u&&(n=void 0!==n?n:this._getNodeSelection(u),(A=A||this.grid&&this.row(u).element)&&(!0!==n||void 0===u.indepSelection&&!1===u.selectable?r.remove(A,"selected"):r.add(A,"selected")))},_renderLabel:function(u,A,n){A=this._renderLabelNode(u,n);this._provideLabelClickAction(A,
n,u);return A},_provideLabelClickAction:function(u,A,n){var q=this.expandOnNodeClick&&n.children?n.children.length&&(u=A,function(){this.toggleExpand(n);this.onExpandChangedUser(n)}.bind(this)):!1!==n.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,n,null):null;q&&(r.add(u,"esriMapsAnalystXClickable"),e(u,"click",function(H){H.stopPropagation();q(H)}))},_renderLabelNode:function(u){return k.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(u)})},
_renderLabelHeader:function(u){var A=k.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(u)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(r.add(A,"esriMapsAnalystXClickable"),e(A,"click",this._onCheckboxClick.bind(this,u,null)));return A},onRowsSelected:function(u,A){},isNodeSelected:function(u){return u&&(u.selected||u.indepSelection)},getSelectedNodes:function(){var u=this.tree.getSelectedNodes(!1),
A=this._getIndepSelectedNodes();return u.concat(A)},_getIndepSelectedNodes:function(){function u(n){n&&(n.indepSelection&&A.push(n),n.children&&n.children.forEach(u))}var A=[];u(this.tree.root);return A},getSelectedState:function(){if(!this.tree)return null;var u={normalSelection:{},indepSelection:{}},A=this.tree.getSelectedNodes(!1);A&&A.forEach(function(n){u.normalSelection[n.id]=!0});(A=this._getIndepSelectedNodes())&&A.forEach(function(n){u.indepSelection[n.id]=!0});return u},setSelectedState:function(u){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(u){for(var A in u.normalSelection){var n=this.tree.get(A);n&&this.tree.changeSelect(n,!0)}for(A in u.indepSelection)if(n=this.tree.get(A))n.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(u,A,n){u&&(void 0!==u.indepSelection?u.indepSelection=A:this.tree.changeSelect(u,A),!1!==n&&this.refreshCheckboxes())},isExpanded:function(u){u="string"===typeof u?u:u[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[u]},setExpanded:function(u,A,n){u="string"==typeof u?
u:u[this.tree.idProperty];void 0!==u&&(!1!==n?(n=this.grid.row(u))&&n.element&&this.grid.expand(u,A):this.grid._expanded[u]=A)},toggleExpand:function(u){this.setExpanded(u,!this.isExpanded(u))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(u){this.grid._expanded=u||{}},onExpandChangedUser:function(u){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(y,z,C){return y([z,C],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(y){return y(null,{_escapeValue:function(z){return z.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(y,
z,C,r,k,d,e,b,c,a,g){function h(x,l,v,F){F=this.grid.isRTL?"right":"left";var I=".dgrid-expando-icon";l&&(I+=".ui-icon.ui-icon-triangle-1-"+(v?"se":"e"));x=g("div"+I+"[style\x3dmargin-"+F+": "+x*(this.indentWidth||9)+"px; float: "+F+"]");x.innerHTML="\x26nbsp;";return x}function f(x){var l=this,v=this.style.height;v&&(this.style.display="0px"==v?"none":"block");x&&(g(this,".dgrid-tree-resetting"),setTimeout(function(){g(l,"!dgrid-tree-resetting")}));this.style.height=""}function t(x){var l=x.renderCell||
c.defaultRenderCell,v,F;x||(x={});x.shouldExpand=x.shouldExpand||function(I,B,G){return G};e.after(x,"init",function(){var I=x.grid,B=".dgrid-content .dgrid-column-"+x.id,G=[];I.cleanEmptyObservers=!1;if(!I.store)throw Error("dgrid tree column plugin requires a store to operate.");x.renderExpando||(x.renderExpando=h);G.push(I.on(x.expandOn||".dgrid-expando-icon:click,"+B+":dblclick,"+B+":keydown",function(J){var D=I.row(J);I.store.mayHaveChildren&&!I.store.mayHaveChildren(D.data)||"keydown"==J.type&&
32!=J.keyCode||"dblclick"==J.type&&F&&1<F.count&&D.id==F.id&&-1<J.target.className.indexOf("dgrid-expando-icon")||I.expand(D);-1<J.target.className.indexOf("dgrid-expando-icon")&&(F&&F.id==I.row(J).id?F.count++:F={id:I.row(J).id,count:1})}));b("touch")&&G.push(I.on(a.selector(B,a.dbltap),function(){I.expand(this)}));I._expanded||(I._expanded={});G.push(e.after(I,"insertRow",function(J){var D=this.row(J);x.shouldExpand(D,v,this._expanded[D.id])&&this.expand(J,!0,!0);return J}));G.push(e.before(I,"removeRow",
function(J,D){if(J=J.connected)k("\x3e.dgrid-row",J).forEach(function(p){I.removeRow(p,!0)}),D||g(J,"!")}));x.collapseOnRefresh&&G.push(e.after(I,"cleanup",function(){this._expanded={}}));I._calcRowHeight=function(J){var D=J.connected;return J.offsetHeight+(D?D.offsetHeight:0)};I.expand=function(J,D,p){var u=J.element?J:I.row(J),A=b("transitionend");J=new C;var n=J.promise;J.resolve();J=u.element;J=-1<J.className.indexOf("dgrid-expando-icon")?J:k(".dgrid-expando-icon",J)[0];p=p||!1===x.enableTransitions;
if(J&&J.mayHaveChildren&&(p||D!==!!this._expanded[u.id])){var q=void 0===D?!this._expanded[u.id]:D;g(J,".ui-icon-triangle-1-"+(q?"se":"e")+"!ui-icon-triangle-1-"+(q?"e":"se"));D=u.element;var H=D.connected,M={originalQuery:this.query};if(!H){H=M.container=D.connected=g(D,"+div.dgrid-tree-container");var m=function(L){return I.store.getChildren(u.data,L)};x.allowDuplicates&&(M.parentId=u.id);"level"in J&&(m.level=J.level);n=n.then(function(){if(I.renderQuery)return I.renderQuery(m,M);var L=g(H,"div"),
K=I.renderArray(m(M),L,"level"in m?{queryLevel:m.level}:{});C.when(K,function(){g(L,"!")});return K});A?d(H,A,f):f.call(H)}H.hidden=!q;var w=H.style;if(!A||p)w.display=q?"block":"none",w.height="";else{if(q){w.display="block";var E=H.scrollHeight;w.height="0px"}else g(H,".dgrid-tree-resetting"),w.height=H.scrollHeight+"px";setTimeout(function(){g(H,"!dgrid-tree-resetting");w.height=q?E?E+"px":"auto":"0px"})}q?this._expanded[u.id]=!0:delete this._expanded[u.id]}return n};e.after(x,"destroy",function(){z.forEach(G,
function(J){J.remove()});delete I.expand;delete I._calcRowHeight})});x.renderCell=function(I,B,G,J){var D=x.grid,p=Number(J&&J.queryLevel)+1,u=!D.store.mayHaveChildren||D.store.mayHaveChildren(I),A=J.parentId;p=v=isNaN(p)?0:p;D=x.renderExpando(p,u,D._expanded[(A?A+"-":"")+D.store.getIdentity(I)],I);D.level=p;D.mayHaveChildren=u;(I=l.call(x,I,B,G,J))&&I.nodeType?(g(G,D),g(G,I)):G.insertBefore(D,G.firstChild)};return x}t.defaultRenderExpando=h;r.getObject("dgrid.tree",!0);return dgrid.tree=t})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(y){function z(r,k){r=r.style;var d;if(k in r)return!0;k=k.slice(0,1).toUpperCase()+k.slice(1);for(d=C.length;d--;)if(C[d]+k in r)return C[d];return!1}var C=["ms","O","Moz","Webkit"];y.add("css-transitions",function(r,k,d){return z(d,"transitionProperty")});y.add("css-transforms",function(r,k,d){return z(d,"transform")});y.add("css-transforms3d",function(r,k,d){return z(d,"perspective")});y.add("transitionend",function(){var r=y("css-transitions");return r?!0===r?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[r]:!1});return y})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(y,z,C){var r={listenToKeyboardCombinationOverNode:function(k){return y(document.body,"keydown",function(d){if(!k.isCtrl||r.isCtrl(d))if(!k.isShift||d.shiftKey)if(!k.isAlt||d.altKey)String.fromCharCode(d.keyCode).toLowerCase()!==k["char"]||k.node&&!C.isNodeInLayout(k.node)||k.callback(d)})},isCtrl:function(k){return z("mac")?
k.metaKey:k.ctrlKey}};return r})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(y,z,C,r,k,d,e,b){function c(){g||(g=r.create("div",{"class":"esriGEOffscreen"},document.body));return g}var a={isHidden:function(f){return f&&C.contains(f,"esriGEHidden")},hasVisibleChildren:function(f){if(!f||!f.children.length)return!1;
for(var t=0;t<f.children.length;t++)if(!a.isHidden(f.children[t]))return!0;return!1},hide:function(f){return a.addTag(f,"esriGEHidden")},show:function(f){return a.removeTag(f,"esriGEHidden")},display:function(f,t){return a[t?"show":"hide"](f)},addTag:function(f,t){return a.applyCallback(f,function(x){x&&C.add(x,t)})},removeTag:function(f,t){return a.applyCallback(f,function(x){x&&C.remove(x,t)})},applyCallback:function(f,t,x){x&&(t=y.hitch(x,t));Array.isArray(f)?f.forEach(t):t(f);return f},getChildIndex:function(f,
t){if(!f||!f.children||!t)return-1;for(var x=0;x<f.children.length;x++)if(f.children[x]===t)return x;return-1},getChildren:function(f){if(!f||!f.children)return null;for(var t=[],x=0;x<f.children.length;x++)t.push(f.children[x]);return t},getChildNodes:function(f){if(!f||!f.childNodes)return null;for(var t=[],x=0;x<f.childNodes.length;x++)t.push(f.childNodes[x]);return t},isChildOf:function(f,t,x){var l=!1,v=function(F){if(x&&!x(F))return!1;F.parentNode===t?l=!0:F.parentNode&&v(F.parentNode)};f&&
v(f);return l},isNodeInLayout:function(f){return a.isChildOf(f,document.body,function(t){return!a.isHidden(t)&&"none"!=d.get(t,"display")&&!C.contains(t,"dijitHidden")})},isNodeVisible:function(f){return a.isChildOf(f,document.body,function(t){return!C.contains(t,"dijitHidden")&&"hidden"!=d.get(t,"visibility")})},isNodeOnscreen:function(f){return a.isChildOf(f,document.body,function(t){return!C.contains(t,"esriGEOffscreen")})},enableContent:function(f,t,x){if(f){x=x||{};var l=f.children.length-1;
if(!(0>l)){l=f.children[l];C.contains(l,"esriGEDisabledContent")||(l=null);if(t)l&&f.removeChild(l);else if(l=l||r.create("div",{"class":"esriGEDisabledContent"+(x.overlayClass?" "+x.overlayClass:"")},f),x.textContent&&(l.textContent=x.textContent),!1!==x.fitParent&&(f=k[x.marginBox?"getMarginBox":"getContentBox"](f).h))f=f.toString()+"px",d.set(l,{height:f,marginTop:"-"+f});return l}}},enableContentAbsolute:function(f,t,x){if(f){x=x||{};var l=d.get(f,"position");"relative"!==l&&"absolute"!==l&&d.set(f,
"position","relative");return a.enableContent(f,t,{overlayClass:"esriGEAbsoluteStretched "+(x.overlayClass||"")+(x.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1,textContent:x.textContent})}}},g;a.hideNodeInBackground=function(f,t){if(f){if(f._hideNodeInBackgroundUndoController)return f._hideNodeInBackgroundUndoController;var x=r.create("div",null,f,"after"),l=r.create("div",{style:"position: absolute; left: 0px; top: 0px;"},c());r.place(f,l);t="DomUtil.hideNodeInBackground"+
(t?"."+t:"");z.set(x,"_bg_memo_node",t);z.set(l,"_bg_temp_node",t);t={undo:function(){x&&(x.parentNode&&r.place(f,x,"replace"),r.destroy(x),r.destroy(l),g.children.length||(r.destroy(g),g=null),x=null,delete f._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return f._hideNodeInBackgroundUndoController=t}};a.showNodeFromBackground=function(f){f&&f._hideNodeInBackgroundUndoController&&f._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(f){function t(F){for(var I=
{x:0,y:0};F.offsetParent;)I.x+=F.offsetLeft,I.y+=F.offsetTop,F=F.offsetParent,I.x+=d.get(F,"borderLeftWidth"),I.y+=d.get(F,"borderTopWidth");return I}function x(F){return d.get(F,"width")+d.get(F,"paddingLeft")+d.get(F,"paddingRight")+d.get(F,"borderLeftWidth")+d.get(F,"borderRightWidth")}function l(F){return d.get(F,"height")+d.get(F,"paddingTop")+d.get(F,"paddingBottom")+d.get(F,"borderTopWidth")+d.get(F,"borderBottomWidth")}if(f){if(f instanceof SVGElement&&f.getBBox){var v=(v=f.ownerSVGElement&&
f.ownerSVGElement.parentNode)&&t(v);f=f.getBBox();return{x:(f.x||0)+v.x,y:(f.y||0)+v.y,w:f.width||0,h:f.height||0}}v=t(f);return{x:v.x,y:v.y,w:x(f),h:l(f)}}};a.uniteNodeBoxes=function(f,t){var x=1E6,l=1E6,v=-1E6,F=-1E6;f.forEach(function(I){I=a.noTransformPosition(I);x=Math.min(x,I.x);l=Math.min(l,I.y);v=Math.max(v,I.x+I.w);F=Math.max(F,I.y+I.h)});f={x:x,y:l,w:v-x,h:F-l};t&&(t=a.noTransformPosition(t),f.x-=t.x,f.y-=t.y);return f};a.getNodesBox=function(f,t){if(!f||!f.length)return null;for(var x=
1E6,l=-1E6,v=1E6,F=-1E6,I=0;I<f.length;I++){var B=f[I];B=t&&t.ignoreTranformation?a.noTransformPosition(B):k.position(B);x=Math.min(x,B.x);v=Math.min(v,B.y);l=Math.max(l,B.x+B.w);F=Math.max(F,B.y+B.h)}return{x:x,y:v,w:l-x,h:F-v}};a.traverseChildren=function(f,t){function x(l){if(l&&l.children)for(var v=0;v<l.children.length;v++){var F=l.children[v];if(t(F))break;x(F)}}x(f)};a.scrollToListNode=function(f,t,x){var l=t.offsetTop+t.clientHeight,v=l-(f.scrollTop+f.clientHeight);0<v&&(f.scrollTop+=v);x&&
(l-=t.clientHeight-x.offsetTop,v=f.scrollTop-l,0<v&&(f.scrollTop-=v))};var h;a.getScrollbarSize=function(){if(!h){var f=r.create("div",null,document.body);f.style.width="100px";f.style.height="100px";f.style.overflow="scroll";f.style.position="absolute";f.style.top="9999px";h={w:f.offsetWidth-f.clientWidth,h:f.offsetHeight-f.clientHeight};r.destroy(f)}return h};a.hasScrollbars=function(f){var t=d.getComputedStyle(f);return{w:"scroll"===t.overflowX||f.offsetWidth>f.clientWidth&&"auto"===t.overflowX,
h:"scroll"===t.overflowY||f.offsetHeight>f.clientHeight&&"auto"===t.overflowY}};a.getMeasureContext=function(f){f=f||{};f.style=f.style?f.style+" ":"";f.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:r.create("div",f,document.body),measureText:function(t){this.div.innerHTML=t;t=k.getMarginBox(this.div);delete t.l;delete t.t;return t},destroy:function(){r.destroy(this.div)}}};a.getTextBox=function(f,t){t=a.getMeasureContext(t);f=t.measureText(f);t.destroy();return f};
a.getNodeFontFamily=function(f){return(f=d.get(f,"fontFamily")||d.getComputedStyle(f)["font-family"])?f.replace(/'|"/g,"").split(",")[0]:f};a.getNodeFontSize=function(f){return d.toPixelValue(f,d.get(f,"fontSize"))};a.stealFocus=function(){var f=new b;try{var t=r.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});r.place(t,document.body);t.select();r.destroy(t)}catch(x){}setTimeout(f.resolve,0);return f.promise};a.getWindowBox=function(){for(var f=[],t=0,x=document.body.children.length;t<
x;t++){var l=document.body.children[t];a.isHidden(l)||(a.hide(l),f.push(l))}t={w:document.body.clientWidth,h:document.body.clientHeight};f.forEach(function(v){a.show(v)});return t};a.getBorder=function(f){return{t:d.toPixelValue(f,d.get(f,"borderTopWidth")),r:d.toPixelValue(f,d.get(f,"borderRightWidth")),b:d.toPixelValue(f,d.get(f,"borderBottomWidth")),l:d.toPixelValue(f,d.get(f,"borderLeftWidth"))}};a.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};a.setAttribute=function(f,
t,x){return 2===arguments.length?z.set(f,t):z.set(f,t,x)};a.getAttribute=function(f,t,x){return 2===arguments.length?z.get(f,t):z.get(f,t,x)};a.addClass=function(f,t){return C.add(f,t)};a.removeClass=function(f,t){return C.remove(f,t)};a.toggleClass=function(f,t,x){return C[x?"add":"remove"](f,t)};a.replaceClass=function(f,t,x){return C.replace(f,t,x)};a.containsClass=function(f,t){return C.contains(f,t)};a.getStyle=function(f,t){return d.get(f,t)};a.setStyle=function(f,t,x){return 2===arguments.length?
d.set(f,t):d.set(f,t,x)};a.toPixelValue=function(f,t){return parseFloat(t)||0};a.getComputedStyle=function(f){return f&&1===f.nodeType&&window.getComputedStyle(f)};a.position=function(f,t){return k.position(f,t)};a.getMarginBox=function(f,t){return k.getMarginBox(f,t)};a.setMarginBox=function(f,t){return k.setMarginBox(f,t)};a.getMarginExtents=function(f,t){return k.getMarginExtents(f,t)};a.getContentBox=function(f,t){return k.getContentBox(f,t)};a.getPadBorderExtents=function(f,t){return k.getPadBorderExtents(f,
t)};a.getPadExtents=function(f,t){return k.getPadExtents(f,t)};a.getBorderExtents=function(f,t){return k.getBorderExtents(f,t)};a.docScroll=function(){return k.docScroll()};a.create=function(f,t,x,l){return r.create(f,t,x,l)};a.toDom=function(f){return r.toDom(f)};a.place=function(f,t,x){return r.place(f,t,x)};a.empty=function(f){return r.empty(f)};a.destroy=function(f){return r.destroy(f)};a.query=function(f,t){f=e(f,t);t=[];for(var x=0,l=f.length;x<l;x++)t.push(f[x]);return t};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],
function(y){return y})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(y,z,C,r,k,d,e,b){return y(r,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(c,a,g){var h=b.isMobileDevice()?"touchstart":"click";a=a||{};var f=a["class"];a["class"]=(f?f+" ":"")+"esriTriStateCheckBoxIcon";
if(f=a.label){if(c instanceof HTMLLabelElement)c.innerHTML="\x26nbsp;"+f;else{var t=a.labelAttrs||{};t.innerHTML="\x26nbsp;"+f;t=d.create("label",t);c&&d.place(t,c);c=t}a=C.mixin({},a);delete a.label;delete a.labelAttrs}this.checkboxNode=d.create("div",a,c,c instanceof HTMLLabelElement?"first":g);this._currentClass=this._composeClass();e.add(this.checkboxNode,this._currentClass);c instanceof HTMLLabelElement?(k(c,h,C.hitch(this,this._onClick)),e.add(c,"esriTriStateCheckBoxLabel")):k(this.checkboxNode,
h,C.hitch(this,this._onClick));this.domNode=f?c:this.checkboxNode},postscript:function(){},_onClick:function(c){this.disabled||(this.autoToggle&&this.toggle(),c.checked=this.checked,this.onClick(z.fix(c)))},onClick:function(c){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(c){c!==this.checked&&(this.checked="mixed"===c?c:this._lastChecked=!!c,this._updateClass())},_disabledSetter:function(c){this.disabled=!!c;this._updateClass()},_updateClass:function(){var c=
this._composeClass();c!==this._currentClass&&(e.replace(this.checkboxNode,c,this._currentClass),this._currentClass=c)},_composeClass:function(){var c="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?c+"Disabled":c}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(y){var z={},C=function(){var k=window,d=k.navigator.platform,e=k.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,
iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!k.cordova&&!k.phonegap),phonegap:!(!k.cordova&&!k.phonegap),electron:!1,nwjs:!1},c=k.screen.width,a=k.screen.height,g=e.match(/(Android);?[\s\/]+([\d.]+)?/),h=e.match(/(iPad).*OS\s([\d_]+)/),f=e.match(/(iPod)(.*OS\s([\d_]+))?/),t=!h&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/),x=0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/"),l=0<=e.indexOf("Edge/"),v=0<=e.indexOf("Gecko/")&&0<=e.indexOf("Firefox/"),F="Win32"===d,I=0<=e.toLowerCase().indexOf("electron"),
B="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.nw;d="MacIntel"===d;var G="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!h&&d&&y("touch")&&0<=G.indexOf(c+"x"+a)&&((h=e.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),d=!1);b.ie=x;b.edge=l;b.firefox=v;g&&!F&&(b.os="android",b.osVersion=g[2],b.android=!0,b.androidChrome=0<=e.toLowerCase().indexOf("chrome"));if(h||t||f)b.os=
"ios",b.ios=!0;t&&!f&&(b.osVersion=t[2].replace(/_/g,"."),b.iphone=!0);h&&(b.osVersion=h[2].replace(/_/g,"."),b.ipad=!0);f&&(b.osVersion=f[3]?f[3].replace(/_/g,"."):null,b.ipod=!0);b.ios&&b.osVersion&&0<=e.indexOf("Version/")&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]);b.webView=!(!(t||h||f)||!e.match(/.*AppleWebKit(?!.*Safari)/i)&&!k.navigator.standalone)||k.matchMedia&&k.matchMedia("(display-mode: standalone)").matches;b.webview=b.webView;
b.standalone=b.webView;b.desktop=!(b.ios||b.android)||I||B;b.desktop&&(b.electron=I,b.nwjs=B,b.macos=d,b.windows=F,b.macos&&(b.os="macos"),b.windows&&(b.os="windows"));b.pixelRatio=k.devicePixelRatio||1;return b}();z.device=C;z.isMobileDevice=function(){return!C.desktop};z.isPCWithTouchScreen=function(){return C.desktop&&y("touch")};z.isLandscape=function(){return 90===Math.abs(window.orientation)};var r=null;z.isWebLayout=function(){if(!r){var k=document.createElement("div");k.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;";
document.body.appendChild(k);r=k.offsetHeight;k.parentNode.removeChild(k)}k=r;k*=7;var d=document.body.offsetWidth;if(d>=k)return!0;var e=document.body.offsetHeight;return d>=e&&Math.sqrt(d*d+e*e)>=k?!0:!1};z.press=C.desktop?"mousedown":"touchstart";z.release=C.desktop?"mouseup":"touchend";z.click=C.desktop?"click":"touchend";z.clickOrRelease=C.desktop?"click, mouseup":"touchend";z.move=C.desktop?"mousemove":"touchmove";return z})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect",
"dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(y,z,C,r){function k(c,a,g){if(void 0===g){var h=c._rowIdToObject[a.id];h&&(g=(c=c.store)&&c.isOdd&&c.isOdd(h))}0!==g&&1!==g||z.replace(a,b[g],b[1-g])}function d(c,a,g){var h=c.store;if(h&&h.updateExpand){g=h.updateExpand(a.data,g,!0,c.getSortingFunction());for(var f in g)a=c.row(h.get(f)),a.element&&k(c,a.element,g[f])}}var e=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],b=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(c){z.add(c,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:c,update:function(a){a=a?1:0;z.replace(c,e[a],e[1-a])}}},oddEvenFix:function(c){c.expand&&(c.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?r.getSorting(a):null},y.after(c,"insertRow",function(a){k(c,a);return a}),y.before(c,"refresh",function(){var a=c.store;a&&a.updateExpandedNodes&&a.updateExpandedNodes(c._expanded,c.getSortingFunction())}),y.around(c,"expand",function(a){return function(g,
h){var f=g.element?g:c.row(g);void 0===h&&(h=!c._expanded[f.id]);!0===h&&d(c,f,!0);var t=a.apply(this,arguments);!1===h&&d(c,f,!1);return t}}),y.around(c,"adjustRowIndices",function(a){return function(){var g=c.store;g&&g.updateExpandedNodes&&g.updateExpand&&g.isOdd||a.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(c){function a(){var g=c.headerNode.firstChild,h=c.contentNode;h&&g&&g.offsetWidth!==h.offsetWidth&&(h.style.width="",g.style.width="",g.style.width=h.offsetWidth+"px")}
y.after(c,"resize",a);y.after(c,"refresh",a);y.after(c,"expand",function(g){setTimeout(a,100);setTimeout(a,300);return g})},inlineSortArrow:function(c,a,g){a=r.arrayToObject(r.listToArray(a));y.after(c,"updateSortArrow",function(h,f){if((f=h[0]&&h[0].attribute)&&a[f]){var t=(f=c._sortNode||c._findSortArrowParent(f))&&C(".dgrid-sort-arrow",f)[0];h=h[0].descending;if(t){t.remove();z.remove(f,"dgrid-sort-down dgrid-sort-up");var x=g?C(g,f)[0]:f.lastChild.append?f.lastChild:f;x.append||(x=f);z.add(x,
h?"dgrid-sort-down":"dgrid-sort-up");x.append(t)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(y,z,C,r,k,d){function e(a,g){a.some(function(h,f){g.func(h,f,g,a);if(g.stop)return!0});return g}function b(a){var g=a.split(" "),h=g[1];a={};switch(g[0]){case "max":a.result=-Infinity;g=function(f,t,x){x.result=Math.max(x.result,
k.getObject(f,h))};break;case "min":a.result=Infinity;g=function(f,t,x){x.result=Math.min(x.result,k.getObject(f,h))};break;case "sum":a.result=0;g=function(f,t,x){x.result+=k.getObject(f,h)};break;case "random":a.result=void 0;g=function(f,t,x,l){x.result=l[Math.round((l.length-1)*Math.random())];x.stop=!0};break;default:throw Error("Unsupported query.");}a.func=g;return a}var c={getSorting:function(a,g){if(!a)return k.compare;if("function"===typeof a)return a;var h=Array.isArray(a)?a:a.sort||[a];
var f={};"string"===typeof g&&(g=[g]);Array.isArray(g)?g.forEach(function(t){f[t]=k.compareNames}):g&&(f=g);return function(t,x){for(var l=void 0,v=0;l=h[v];v++){var F=t[l.attribute],I=x[l.attribute];if(F=(f[l.attribute]||(f["*"]?f["*"].bind(null,l.attribute):k.compare))(F,I,!1,!1,t,x))return l.descending?-F:F}return 0}},sort:function(a,g,h){return a.sort(c.getSorting(g,h))},sortIndices:function(a,g,h){a=C.map(a,function(t,x){return{value:t,index:x}});var f=c.getSorting(g,h);a.sort(function(t,x){return f(t.value,
x.value)});return C.map(a,function(t){return t.index})},getQueryEngine:function(a,g){return function(h,f){f&&f.sort&&(f=Object.assign({},f),f.sort=c.getSorting(f.sort,a));return(g||r)(h,f)}},objectToArray:function(a,g){void 0===g&&(g=null);var h=[],f=g?function(l){return a[l]?a[l][g]:void 0}:function(l){return a[l]},t;for(t in a){var x=f(t);"undefined"!==typeof x&&h.push(x)}return h},arrayToObject:function(a,g){var h={},f=d.composeIdentityFunction(g);C.forEach(a,function(t){h[f(t)]=t});return h},
composeIdentityFunction:d.composeIdentityFunction,removeDuplicates:d.removeDuplicates,splitArrayToBunches:d.splitArrayToBunches,contains:function(a,g){return-1!==C.indexOfLoose(a,g)},remove:function(a,g){g=C.indexOfLoose(a,g);-1!==g&&a.splice(g,1);return-1!==g},merge:function(a,g){a=a||[];null!=g&&Array.prototype.push.apply(a,g);return a},listToArray:function(a,g){if(null==a)return[];void 0===g&&(g=",");a="string"===typeof a?a.split(g):a.slice();for(g=0;g<a.length;g++)"string"===typeof a[g]&&(a[g]=
a[g].trim());return a},reorderArray:function(a,g){var h=a.length,f=0,t=Array(h),x={},l={},v;for(v in g){var F=Math.round(v);if(0<=F&&F<h&&!x[F]){var I=Math.round(g[v]);0<=I&&I<h&&!l[I]&&(t[I]=a[F],x[F]=1,l[I]=1,f++)}}f!==h&&(t=t.filter(function(B,G){return l[G]}),a.forEach(function(B,G){!x[G]&&t.push(B)}));return t},mapIndices:function(a,g,h,f){f=null==f?null:f;if(1===a)h.call(f,0,Math.floor(g/2));else{g=(g-1)/(a-1);for(var t=0;t<a;t++)h.call(f,t,Math.floor(.5+t*g))}},moveElement:function(a,g,h,f){var t=
Array.isArray(g)?g:[g];if(-1!==t.indexOf(h))return a.slice();var x=[];a.forEach(function(l){-1===t.indexOf(l)&&(l==h?"before"===f?(t.forEach(function(v){x.push(v)}),x.push(h)):"after"===f&&(x.push(h),t.forEach(function(v){x.push(v)})):x.push(l))});return x},min:function(a,g){var h=a.length;switch(h){case 0:return null;case 1:return a[0];default:for(var f=a[0],t=g(f),x=0,l=1;l<h;l++){var v=g(a[l]);t>v&&(f=a[l],t=v,x=l)}return{key:x,value:f,comparisonValue:t}}},max:function(a,g){var h=a.length;switch(h){case 0:return null;
case 1:return a[0];default:for(var f=a[0],t=g(f),x=0,l=1;l<h;l++){var v=g(a[l]);t<v&&(f=a[l],t=v,x=l)}return{key:x,value:f,comparisonValue:t}}},query:function(a,g){if("object"===typeof g)return e(a,g);if("string"===typeof g)return g=b(g),e(a,g).result},everyEqualProperty:function(a,g){if(2>a.length)return!0;var h;return!a.some(function(f,t){if(0===t)h=f[g];else if(h!==f[g])return!0})}};return c})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require","exports"],function(y,z){var C=Array.prototype,
r={every:function(k,d,e){return null==k?!0:"string"===typeof k?C.every.call(k.split(""),d,e):C.every.call(k,d,e)},some:function(k,d,e){return null==k?!1:"string"===typeof k?C.some.call(k.split(""),d,e):C.some.call(k,d,e)},forEach:function(k,d,e){if(null!=k)return"string"===typeof k?C.forEach.call(k.split(""),d,e):C.forEach.call(k,d,e)},map:function(k,d,e){return null==k?[]:"string"===typeof k?C.map.call(k.split(""),d,e):C.map.call(k,d,e)},filter:function(k,d,e){return null==k?[]:"string"===typeof k?
C.filter.call(k.split(""),d,e):C.filter.call(k,d,e)},indexOf:function(k,d){return null==k?-1:"string"===typeof k?C.indexOf.call(k.split(""),d):C.indexOf.call(k,d)},indexOfLoose:function(k,d){if(null==k||void 0===k.length)return-1;if("string"===typeof k)return r.indexOfLoose(k.split(""),d);for(var e=0,b=k.length;e<b;e++)if(k[e]==d)return e;return-1},lastIndexOf:function(k,d){return null==k?-1:"string"===typeof k?C.lastIndexOf.call(k.split(""),d):C.lastIndexOf.call(k,d)},lastIndexOfLoose:function(k,
d){if(null==k||void 0===k.length)return-1;if("string"===typeof k)return r.lastIndexOfLoose(k.split(""),d);for(var e=k.length-1;0<=e;e--)if(k[e]==d)return e;return-1}};return r})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],function(y,z,C){var r=Object.assign({},y,z,C);r.getPrototypeOf=function(k){try{return Object.getPrototypeOf?Object.getPrototypeOf(k):k.__proto__||
k.constructor&&k.constructor.prototype}catch(d){return null}};r.isJson=function(k){return"object"===typeof k&&r.getPrototypeOf(k)===Object.prototype};r.copyJson=function(k){return void 0===k||null===k?null:JSON.parse(JSON.stringify({object:k})).object};r.convert=function(k,d,e){var b=d||function(){};d=b(k);if("undefined"!==typeof d)return d;if(Array.isArray(k)){var c=[];k.forEach(function(f){c.push(r.convert(f,b,e))},this);return c}if(!r.isJson(k))return k;d={};for(var a in k){var g=k[a],h=e?b(a):
a;"undefined"===typeof h&&(h=a);d[h]=r.convert(g,b,e)}return d};r.getDeepCopy=function(k){return r.convert(k)};r.getRange=function(k,d,e){d="function"===typeof d?d.bind(null==e?null:e):null;var b,c;for(c in k)if(e=k[c],e=Number(null===d?e:d(e,c)),!isNaN(e))if(void 0===a)var a=b=e;else a=Math.min(a,e),b=Math.max(b,e);return void 0===a?{}:{min:a,max:b}};r.removeEmptyObjects=function(k){function d(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(c){var a=b[c];!a||"object"!==typeof a||Array.isArray(a)||
Object.keys(a).length?d(a):(e=!0,delete b[c])})}for(var e=!0;e;)e=!1,d(k);return k};r.removeValues=function(k,d){function e(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(c){d(c,b[c])?e(b[c]):delete b[c]})}e(k);return k};r.isEqual=function(k,d){if(null===k||"object"!==typeof k||null===d||"object"!==typeof d)return k===d;if(Object.keys(k).length!==Object.keys(d).length)return!1;var e={},b;for(b in k)e[b]=!0;for(b in d)if(void 0!==e[b])delete e[b];else return!1;for(b in k)if(!r.isEqual(k[b],
d[b]))return!1;return!0};r.getObject=function(k,d){if(!d)return k;d=d.split(".");for(var e=0;e<d.length;e++)k=k&&k[d[e]];return k};r.formatNumber=function(k,d){d="number"===typeof d?{places:d}:d||{};if(null==d.places||0>d.places)d.places=r.getPlaces(k,!0),d.maxPlaces&&d.places>d.maxPlaces&&(d.places=d.maxPlaces);return z.formatNumber(k,d)};r.getPlaces=function(k,d){function e(h,f){var t=k.indexOf(h,b);if(0>t)return c;h=k.charAt(t+h.length);return!h||0>f.indexOf(h)?c:t-b}k=+k;if(isNaN(k))return-1;
k+="";var b=k.indexOf(".")+1,c=b?k.length-b:0;if(2>=c||!d)return c;d=0;if(!+k.substr(0,b-1))for(;"0"===k.charAt(b);)b++,d++,c--;for(var a=c-1;2<=a;a--){var g=Math.min(e("000000000000000".substr(0,a),"01234"),e("999999999999999".substr(0,a),"56789"));if(g!==c){c=g;break}}return c+d};return r})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(y,z){function C(r,k){for(var d=0,e=Object.keys(k);d<e.length;d++){var b=e[d];"object"!==typeof r[b]||null===r[b]||
"object"!==typeof k[b]||null===k[b]?r[b]=k[b]:Array.isArray(r[b])?Array.isArray(k[b])?r[b].concat(k[b]):r[b]=k[b]:Array.isArray(k[b])?r[b]=k[b]:C(r[b],k[b])}}return{map:function(r,k,d){void 0!==d&&(k=k.bind(d));if("object"!==typeof r)throw Error("Object or array expected");if(Array.isArray(r)){d=[];for(var e=0,b=r.length;e<b;e++)d.push(k(r[e],e));return d}d={};e=0;for(b=Object.keys(r);e<b.length;e++){var c=b[e];Object.hasOwnProperty.call(r,c)&&(d[c]=k(r[c],c))}return d},deepAssign:function(r){for(var k=
[],d=1;d<arguments.length;d++)k[d-1]=arguments[d];for(d=0;d<k.length;d++)C(r,k[d]);return r}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(y){var z={};Math.log10=Math.log10||function(r){return Math.log(r)*Math.LOG10E};z.populateObject=function(r,k,d){function e(b,c){function a(h){var f=b[h],t=c[h],x=f&&"object"===typeof f;void 0!==f&&(void 0===t?c[h]=f:t&&"object"===typeof t&&x?e(f,t):d&&(x?(t=c[h]={},e(f,t)):c[h]=b[h]))}if(b&&c&&!(Array.isArray(b)&&!Array.isArray(c)||
Array.isArray(c)&&!Array.isArray(b)))if(Array.isArray(b))b.forEach(function(h,f){a(f)});else for(var g in b)a(g)}e(k,r);return r};z.filterByPattern=function(r,k){function d(b,c,a){for(var g in b){var h=b[g],f=c[g];if(Array.isArray(h)){var t=h[0];if(f&&Array.isArray(f)){var x=a[g]=[];f.forEach(function(v){if(v&&"object"===typeof v){var F=Array.isArray(v)?[]:{};d(t,v,F);x.push(F)}})}}else if("object"===typeof h){if(f&&"object"===typeof f){var l=a[g]={};d(h,f,l)}}else void 0!==f&&(a[g]=f)}}var e={};
d(k,r,e);return e};z.traverseObject=function(r,k){for(var d in r){var e=r[d];k(e,d,r);e&&"object"===typeof e&&z.traverseObject(e,k)}};z.copyOwnJsonProperties=function(r,k,d){k=k||{};for(var e in r){var b=r[e];r.hasOwnProperty(e)&&"function"!=typeof b&&(b&&"object"==typeof b&&d&&(b=d(e,b)),void 0!==b&&(k[e]=b))}return k};z.removeUndefinedProperties=function(r){r&&Object.keys(r).forEach(function(k){void 0===r[k]&&delete r[k]});return r};z.getValue=function(r,k){if("string"!==typeof k)return r;k=k.split(".");
for(var d=0;d<k.length;d++)r=r&&r[k[d]];return r};z.setValue=function(r,k,d){if("string"===typeof k&&(k=k.split("."),k.length)){for(var e=0;e<k.length-1;e++)r=r&&r[k[e]];r&&(r[k[k.length-1]]=d)}};z.isNumber=function(r){return!isNaN(parseFloat(r))&&isFinite(r)};z.roundNumber=function(r,k){return"number"!==typeof r?r:parseFloat(r.toFixed(void 0!==k?k:0))};z.getBestPrecision=function(r){return 0===r?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(r))))};z.getPlaces=function(r,k){function d(g,h){var f=
r.indexOf(g,e);if(0>f)return b;g=r.charAt(f+g.length);return!g||0>h.indexOf(g)?b:f-e}r=+r;if(isNaN(r))return-1;r+="";var e=r.indexOf(".")+1,b=e?r.length-e:0;if(2>=b||!k)return b;k=0;if(!+r.substr(0,e-1))for(;"0"===r.charAt(e);)e++,k++,b--;for(var c=b-1;2<=c;c--){var a=Math.min(d("000000000000000".substr(0,c),"01234"),d("999999999999999".substr(0,c),"56789"));if(a!==b){b=a;break}}return b+k};z.formatNumber=function(r,k){k="number"===typeof k?{places:k}:k||{};var d=k.places,e={};0<=d?e.places=d:d=-1;
r=y.format(r,e);if(k.noSeparator){e=z.getSeparator();var b;if(e)for(;0<=(b=r.indexOf(e));)r=r.substr(0,b)+r.substr(b+1)}if(k.preserveTrailingZeroes||0>=d||!r)return r;for(k=r.length;0<d&&"0"==r.charAt(k-1);)k--,--d||k--;return r.substr(0,k)};z.formatNumberAsCurrency=function(r,k,d){return k?k.split(";")[0>r?1:0].replace("0",z.formatNumber(Math.abs(r),d)):z.formatNumber(r,d)};var C;z.getSeparator=function(){void 0===C&&(C=y.format(9999,{places:0}).replace(/9/g,""));return C};z.parseNumber=function(r,
k,d,e){if(""===r)return"undefined"!==typeof d?d:NaN;if(null==r||"string"!==typeof r&&isNaN(r))return NaN;r=String(r);if(!r.trim())return void 0!==d?d:NaN;d=y.parse(r,{strict:e});isNaN(d)&&r.trim().length&&(d=e?y.parse(r,{strict:e,locale:"en-US"}):Number(r));return isNaN(d)||void 0===k||0>k?d:y.round(d,k)};z.parsePercentOrCurrency=function(r,k,d,e,b){"string"===typeof r&&(r=r.replace("%",""),k&&(k=k.split(";")[0].replace("0",""),r=r.replace(k,"")));return z.parseNumber(r,d,e,b)};z.compareEqual=function(r,
k,d){return void 0===d?r===k:Number(Number(r).toFixed(d))===Number(Number(k).toFixed(d))};return z})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function y(k,d,e,b){k=void 0===k||null===k;return k!=(void 0===d||null===d)?(d=k?-1:1,(void 0===b?e:b)?-d:d):k?0:null}function z(k){var d=/^(.+)\s([1-9]\d*)$/.exec(k);return d?{base:d[1],number:d[2]}:/^[1-9]\d*$/.test(k)?{base:"",number:+k}:{base:k,number:0}}var C={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",
UNALPHABETICAL:"unalphabetical",compareNumeric:function(k,d,e,b){b=y(k,d,e,b);if(null!==b)return b;k=Number(k);d=Number(d);b=k>d?1:k<d?-1:0;return e?-b:b},compareString:function(k,d,e,b){b=y(k,d,e,b);if(null!==b)return b;k=String(k);d=String(d);b=k.localeCompare(d);return e?-b:b}},r=/^(.+)\s([1-9]\d*)(\D*)$/;C.compareNames=function(k,d,e,b){var c=z("string"===typeof k?k.toLowerCase():k),a=z("string"===typeof d?d.toLowerCase():d),g=null;if(c.base===a.base)g=C.compareNumeric(c.number,a.number,e,b);
else{var h=r.exec(c.base);if(h){var f=r.exec(a.base);f&&h[1]===f[1]&&h[3]===f[3]&&(g=C.compareNumeric(h[2],f[2],e,b))}null===g&&(g=C.compareString(c.base,a.base,e,b))}return g||C.compareString(k,d,e,b)};C.compare=function(k,d,e,b){var c=y(k,d,e,b);if(null!==c)return c;c=typeof k;typeof d!=c&&(c="");switch(c){case "number":case "boolean":break;case "object":k=k.valueOf();d=d.valueOf();break;default:return C.compareString(k,d,e,b)}c=k>d?1:k<d?-1:0;return e?-c:c};return C})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],
function(y){var z={},C={}.toString();z.arraysEqual=function(r,k){if(!r&&!k)return!0;if(!r||!k||r.length!==k.length)return!1;for(var d=0;d<r.length;d++)if(r[d]!==k[d])return!1;return!0};z.composeIdentityFunction=function(r,k){var d="function"===typeof r?r:r?function(e){return e[r]}:function(e){return e};return function(e){return(e=d(e))&&e.toString?e.toString():k&&void 0===e?e:String(e)}};z.removeDuplicates=function(r,k){var d=[],e={};k=z.composeIdentityFunction(k,!0);y.forEach(r,function(b,c){var a=
k(b);a===C&&(void 0===b["__ArrayUtil.js_uniqueKey__"]&&(b["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+c),a=b["__ArrayUtil.js_uniqueKey__"]);void 0===a||a in e||(e[a]=b,d.push(b))});return d};z.splitArrayToBunches=function(r,k){k=k||100;for(var d=[],e,b=0,c=r.length;b<c;b++)e&&e.length!==k||(e=[],d.push(e)),e.push(r[b]);return d};return z})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(y,z,C,r,k,d,e){var b=Object.assign({},e);b.select=function(c){return b.addTag(c,"selected")};b.unselect=function(c){return b.removeTag(c,"selected")};b.floatStart=function(c){return b.addTag(c,"esriMapsAnalystXFloatStart")};b.floatEnd=function(c){return b.addTag(c,"esriMapsAnalystXFloatEnd")};b.addSpacer=function(c,a){c=y.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},c);if(a)b[a](c);return c};b.getAndUpdateNumber=function(c,a){if(!c)return NaN;var g=c.get&&c.set;void 0===
a&&(a=0);var h=d.parseNumber(g?c.get("value"):c.value,a);isNaN(h)||(g?c.set("value",d.formatNumber(h,a)):c.value=d.formatNumber(h,a));return h};b.getAndUpdateString=function(c){if(!c)return null;if(c.get&&c.set){var a=c.get("value").trim();c.set("value",a)}else a=c.value.trim(),c.value=a;return a};b.getScreenScaleFactor=function(){return b.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};b.positionAtCenter=function(c,a){if(c&&a){var g=z.position(c);a=z.position(a);g.w&&g.h&&a.w&&a.h&&C.set(c,
{left:(a.w-g.w)/2+"px",top:(a.h-g.h)/2+"px"})}};b.showAroundOverlay=function(c,a){a=a||{};b.removeAroundOverlay(c);var g={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},h=z.position(c);if(a.viewPortContainer){var f=z.position(a.viewPortContainer),t=h.x,x=h.y;h.x=Math.max(h.x,f.x);h.w-=h.x-t;h.y=Math.max(h.y,f.y);h.h-=h.y-x;h.w=Math.min(h.w,f.x+f.w-h.x);h.h=Math.min(h.h,f.y+f.h-h.y)}c.__aroundOverlays=(a.placeInNode?[{l:0,t:-h.y,w:h.w,h:h.y},{l:h.w,t:-h.y,w:document.body.clientWidth-(h.x+
h.w),h:document.body.clientHeight},{l:0,t:h.h,w:h.w,h:document.body.clientHeight-(h.y+h.h)},{l:-h.x,t:-h.y,w:h.x,h:document.body.clientHeight}]:[{l:h.x,t:0,w:h.w,h:h.y},{w:document.body.clientWidth-(h.x+h.w),r:0,t:0,b:0},{l:h.x,h:document.body.clientHeight-(h.y+h.h),w:h.w,b:0},{l:0,t:0,w:h.x,b:0}]).map(function(v){var F=y.create("div",{"class":a.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},a.placeInNode?c:document.body),I={position:"absolute"},B;for(B in g)void 0!==v[B]&&(I[g[B]]=Math.round(v[B])+
"px");C.set(F,I);return F});h=function(){b.removeAroundOverlay(c)};a.removeOnClick&&(c.__aroundOverlaysRemoveHandle=k.once(document.body,"click",h));c.__aroundOverlaysResizeHandle=k(window,"resize",function(){b.showAroundOverlay(c,a)});var l;c.__aroundOverlaysSetIntervalHandle=setInterval(function(){if(l){var v=z.position(c);v.x==l.x&&v.y==l.y&&v.w==l.w&&v.h==l.h||b.showAroundOverlay(c,a)}else l=z.position(c)},50);return{remove:h}};b.removeAroundOverlay=function(c){c.__aroundOverlays&&c.__aroundOverlays.forEach(function(a){y.destroy(a)});
delete c.__aroundOverlays;c.__aroundOverlaysRemoveHandle&&c.__aroundOverlaysRemoveHandle.remove();delete c.__aroundOverlaysRemoveHandle;c.__aroundOverlaysResizeHandle&&c.__aroundOverlaysResizeHandle.remove();delete c.__aroundOverlaysResizeHandle;clearInterval(c.__aroundOverlaysSetIntervalHandle);delete c.__aroundOverlaysSetIntervalHandle};b.getDocumentStyleDeclaration=function(c){function a(f){try{var t=f.rules||f.cssRules}catch(l){t=null}if(t)for(f=0;f<t.length;f++){var x=t[f];if(x.styleSheet){if(x=
a(x.styleSheet))return x}else if(x.selectorText==c)return x.style}}for(var g=0;g<document.styleSheets.length;g++){var h=a(document.styleSheets[g]);if(h)return h}return null};b.getNodeFontFamily=function(c){return(c=C.get(c,"fontFamily")||C.getComputedStyle(c)["font-family"])?c.replace(/'|"/g,"").split(",")[0]:c};b.getNodeFontSize=function(c){return C.toPixelValue(c,C.get(c,"fontSize"))};b.listenToNodeAdded=function(c,a,g){if(b.isNodeInLayout(c))a();else{c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove();
var h=setInterval(function(){b.isNodeInLayout(c)&&(c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove(),a())},g||100);c.__listenToNodeAddedHandle={remove:function(){clearInterval(h);delete c.__listenToNodeAddedHandle}};return c.__listenToNodeAddedHandle}};b.isNodeVisible=function(c){return b.isChildOf(c,document.body,function(a){return!r.contains(a,"dijitHidden")&&"hidden"!=C.get(a,"visibility")})};b.enableHyperlink=function(c,a){a?r.replace(c,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):
r.replace(c,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return b})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(y,z){var C;z.unitTesting_setCursorOverNode=function(r){r=y.position(r);z.unitTesting_setCursorPosition(r.x+r.w/2,r.y+r.h/2)};z.unitTesting_setCursorPosition=function(r,k){z._latestEvent={clientX:r,pageX:r,clientY:k,pageY:k}};z.unitTesting_lockPosition=function(r){C=r};
z.unitTesting_shiftMousePosition=function(r,k){z.unitTesting_setCursorPosition(z._latestEvent.clientX+(r||0),z._latestEvent.clientY+(k||0))};z._setLatestEvent=function(r){C||(z._latestEvent=r)};return z})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(y,z,C,r,k,d){var e={_latestEvent:null,_setLatestEvent:function(c){e._latestEvent=c}};C("touch")?(z(document.body,r.press,function(c){e._setLatestEvent(e.fixTouchEvent(c,
!0))}),z(document.body,r.move,function(c){e._setLatestEvent(e.fixTouchEvent(c,!0))})):z(document.body,"mousemove",function(c){e._setLatestEvent(e.fixTouchEvent(c,!0))});var b;z(document.body,"mousedown",function(){b||(b=!0,z.once(document.body,"mouseup, click",function(){b=!1}))});e.getCursorPosition=function(){return e._latestEvent};e.isMouseOver=function(c,a){var g=a&&a.event||e._latestEvent;if(!(c&&c.parentNode&&c.getBoundingClientRect&&g))return!1;if(a&&a.checkAllChildren){a=y.mixin({},a);delete a.checkAllChildren;
var h=!1;d.traverseChildren(c,function(f){if(e.isMouseOver(f,a))return h=!0});return h}return e.isMouseOverBox(k.position(c),a)};e.isMouseOverBox=function(c,a){if(!c)return!1;var g=a&&a.event||e._latestEvent;a&&a.ignoreBorderTolerance&&(a=a.ignoreBorderTolerance,c=y.mixin({},c),c.x+=a,c.y+=a,c.w-=2*a,c.h-=2*a);return c.x<=g.clientX&&c.x+c.w>=g.clientX&&c.y<=g.clientY&&c.y+c.h>=g.clientY};e.fixTouchEvent=function(c,a){c=a?y.mixin({},c):c;c.touches&&1===c.touches.length?(a=c.touches[0],c.clientX=a.clientX,
c.clientY=a.clientY,c.pageX=a.pageX,c.pageY=a.pageY):c.changedTouches&&1===c.changedTouches.length&&(a=c.changedTouches[0],c.clientX=a.clientX,c.clientY=a.clientY,c.pageX=a.pageX,c.pageY=a.pageY);return c};e.isBeingDragged=function(){return b};e.addOverOutHandler=function(c){function a(){clearTimeout(h);g&&g.remove()}var g,h,f=z(c.node,"mouseover",function(t){function x(){e.isMouseOver(c.node)&&(c.onMouseOver(t),g=z(document.body,"mousemove",function(l){e.isMouseOver(c.node)||(a(),c.onMouseOut(l))}))}
a();c.delayTimeout?h=setTimeout(x,c.delayTimeout):x()});return{remove:function(){f.remove();a()}}};e.addOutHandler=function(c,a){return z(document.body,"mousemove",function(g){e.isMouseOver(c,{checkAllChildren:!0})||a(g)})};return e})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t){function x(){D&&(D.isMultilineContainer?B.hideTooltipForNode(D):(clearInterval(D.__autoTooltipInLayoutCheckHandle),delete D.__autoTooltipInLayoutCheckHandle,g.hide(D)),D=null)}function l(p,u){u=u||"";var A=y.create("div",{class:"esriMapsAnalystXValidationTooltip"+u},document.body);!u&&y.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+u},A);y.create("div",{innerHTML:p,class:"esriMapsAnalystXValidationTooltipBody"+u},A);z.set(A,"position","fixed");return A}
function v(p,u){function A(){p&&(document.body.removeChild(p),H.forEach(function(M){M.remove()}),p=H=null)}u=u.textbox||u;var n=C.getMarginBox(p),q=C.position(u);"rtl"===document.dir?z.set(p,{left:q.x-n.w+"px",top:q.y+q.h/2-n.h/2+"px"}):z.set(p,{left:q.x+q.w+"px",top:q.y+q.h/2-n.h/2+"px"});var H=[d(document.body,"mousedown, keydown",A),d(u,"blur",A)];return{remove:A}}function F(p,u,A){function n(){var w=y.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},H);r.add(w,"right"===A?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function q(){M=y.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},H);y.create("div",{innerHTML:p,class:"esriMapsAnalystXClosableTooltipLabel"},M);m=y.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},M)}u={class:"esriMapsAnalystXClosableTooltip "+(u||"")};u.id=a();var H=y.create("div",u,document.body),M,m;"right"!==A?(q(),n()):(n(),q());z.set(H,"position","fixed");return{tooltip:H,
body:M,closeButton:m}}function I(p,u,A,n){var q=C.getMarginBox(p.tooltip),H=C.position(u);"rtl"===document.dir&&"right"!==n||"rtl"!==document.dir&&"right"===n?z.set(p.tooltip,{left:H.x+H.w+"px",top:H.y+H.h/2-q.h/2+"px"}):z.set(p.tooltip,{left:H.x-q.w+"px",top:H.y+H.h/2-q.h/2+"px"});var M,m=function(){M&&clearTimeout(M);w&&clearInterval(w);E&&E.remove();p.tooltip.parentNode===document.body&&document.body.removeChild(p.tooltip)};var w=setInterval(function(){h.isNodeInLayout(u)||m();h.isNodeVisible(u)?
h.show(p.tooltip):h.hide(p.tooltip)},300);A&&(M=setTimeout(m,A));var E=d(p.closeButton,"click",function(){m()});p.tooltip._removeFunc=m;return p.tooltip}var B={},G={};B.hideTooltipForNode=t.hideTooltipForNode;B.setTooltipToNode=t.setTooltipToNode;B.createTooltip=function(p,u,A){var n={orientation:C.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};u&&(n.innerHTML=u);A&&(n=Object.assign(n,A));n.id=a();n.toMouseCursor&&(n.mouseEvent=f.getCursorPosition(),delete n.toMouseCursor);u=n.mouseEvent;delete n.mouseEvent;
A=n.htmlFragment;delete n.htmlFragment;var q=n.widget;delete n.widget;var H=n.orientation;delete n.orientation;var M=n.offset;delete n.offset;var m=n.horizontalOffset;delete n.horizontalOffset;var w=y.create("div",n,p?p.container:document.body);A?y.place(A,w):q&&q.placeAt(w);z.set(w,"position","fixed");var E=C.getMarginBox(w),L=function(K,N){var O=K.touches?event.touches[0].clientX:K.clientX;K=K.touches?event.touches[0].clientY:K.clientY;var Q,P,S=M.x,R=M.y;"left"===H?0>O-E.w-S&&(Q="right"):O+E.w+
S>document.body.clientWidth&&(Q="left");K+E.h+R>document.body.clientHeight&&(P="above");Q=Q||H;z.set(w,{left:N?N+"px":O+("left"===Q?-E.w-S:S)+"px",top:K+("above"===P?-E.h-R:R)+"px"});w.style.display=""};u&&L(u,m);n=[];n.push(d(p?p:document.body,p?"mouse-move, mousemove":"mousemove, touchmove",function(K){L(K,m)}));n.push(d(p?p:document.body,p?"mouse-out, mouseout":"mouseout, touchend",function(K){w.style.display="none"}));p={};p.handlers=n;p.tooltip=w;G[w.id]=p;return w};B.removeTooltip=function(p){if(p){p=
"string"===typeof p?p:p.id;var u=G[p];delete G[p];u&&(u.handlers.forEach(function(A){A.remove()}),y.destroy(u.tooltip))}};var J={};B.registerTooltipForSlider=function(p,u,A,n){var q={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};u&&(q=Object.assign(q,u));q.id=a();var H=y.create("div",q,document.body);H.style.display="none";z.set(H,"position","fixed");var M=!1,m=function(E,L){if(!M){M=!0;H.style.display="";H.innerHTML=L();var K=C.getMarginBox(H),N=C.position(E);z.set(H,{left:N.x+N.w/2-K.w/2+
q.offsetX+"px",top:N.y-K.h-5+q.offsetY+"px"});var O=[];O.push(c.after(p,"onChange",function(){H.innerHTML=L();N=C.position(E);z.set(H,{left:N.x+N.w/2-K.w/2+"px",top:N.y-K.h-5+"px"})}));var Q=function(){H.style.display="none";O.forEach(function(S){S.remove()});M=!1},P=!1;O.push(d(E,"mousedown, mouseDown, mouse-down",function(){P=!0;O.push(d(document,"mouseup, mouseUp, mouse-up",function(){Q()}))}));O.push(d(E,"mouseout, mouseOut, mouse-out",function(){P||Q()}))}};u=[];u.push(d(p.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){n&&p.isSliderDisabled&&p.isSliderDisabled()||m(p.sliderHandle,function(){var E=n?p.get("value")[0]:p.get("value");return A?A(E):E})}));n&&u.push(d(p.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){p.isSliderDisabled&&p.isSliderDisabled()||m(p.sliderHandleMax,function(){return A?A(p.get("value")[1]):p.get("value")[1]})}));u.push(c.before(p,"destroy",function(){B.unregisterTooltipForSlider(p)}));p.tooltipId=H.id;var w={};w.tooltip=H;w.handlers=u;J[H.id]=w};B.unregisterTooltipForSlider=
function(p){var u=J[p.tooltipId];u&&(u.handlers.forEach(function(A){A.remove()}),y.destroy(u.tooltip));delete J[p.tooltipId];delete p.tooltipId};var D=null;B.autoTooltip=function(p,u,A){"string"===typeof u&&(u=u.split(" ").filter(function(q){return q&&!!q.trim().length}));u=u||[];u.push("TrimWithEllipses");A=A||[];A.push("esriMapsAnalystXInfoIcon");for(var n=0;n<u.length;n++)d(p,"."+u[n]+":mouseover, "+u[n]+":touchstart, ",function(q){this!==D&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(q=getComputedStyle(this).width,q=Number(q.substr(0,q.length-2)),0>q-Math.round(q)&&this.offsetWidth==this.scrollWidth-1||(x(),D=this,q=D.autoTooltip||D.textContent||D.value,D.title&&(q+=" ("+D.title+")"),q&&g.show(q,D,["above","below"]),d.once(D,"mouseout, touchstart, touchout",function(){x()}),D.__autoTooltipInLayoutCheckHandle=setInterval(function(){h.isNodeInLayout(D)||x()},500)))});if(b("touch"))for(n=0;n<A.length;n++)d(p,"."+A[n]+":touchstart ",function(q){this!==D&&(D=this,D.title&&(g.show(D.title,
D,["above","below"]),d.once(D,"touchstart, touchout",function(){g.hide(D);D=null})))})};B.addAutoTooltipsToTabContainer=function(p){k(".tabLabel",p.domNode).forEach(function(u){r.add(u,"TrimWithEllipses")});B.autoTooltip(p)};B.setMultilineText=function(p,u,A,n){A=A||2;u=u.trim();n=n||["above","below"];r.remove(p,"TrimWithEllipses");p.style.overflow="hidden";p.innerHTML="";for(var q=u,H=!1;q;){A--;var M=y.create("div",null,p);M.style.overflow="hidden";M.style.whiteSpace="nowrap";for(var m=q;m;)if(M.textContent=
m,M.offsetWidth<M.scrollWidth-1)m=(m=m.match(/^(.*[^\s]+)\s+[^\s]+$/))&&m[1]||"";else break;!m||!A&&m!==q?(M.textContent=q,q="",M.style.textOverflow="ellipsis",H=!0):q=q.substr(m.length).trim()}H&&B.setTooltipToNode(p,function(){x();D=p;D.isMultilineContainer=!0;return u},{position:n})};B.showErrorTip=function(p,u){return v(l(u),p.domNode||p)};B.showNewStyleErrorTip=function(p,u,A){return v(l(u,"NewStyle"+(A?" esriMapsAnalystXWarningStyle":"")),p.domNode||p)};B.showAlertTooltip=function(p){p&&p.node&&
p.message&&(g.show(p.message,p.node,p.position||["above","below"]),setTimeout(function(){g.hide(p.node)},p.timeout||5E3))};B.showClosableTooltip=function(p){var u=F(p.message,p.tooltipClass,p.position);return I(u,p.component,p.timeout,p.position)};B.removeClosableTooltip=function(p){p&&p._removeFunc&&p._removeFunc()};B.showClosableTooltipOnVerticalBracket=function(p){var u=p.below||p.above,A=C.position(p.above,!0),n=C.position(u,!0),q="rtl"!==document.dir?"start"===p.direction:"end"===p.direction,
H=A.x+A.w*(q?0:1);A=A.y;var M=n.y+n.h,m=y.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),w=y.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},m);n={};H={top:A-2,left:H+(q?-3:3),height:M-A+4,width:10};for(var E in H)n[E]=H[E]+"px";z.set(m,n);var L=e.createSurface(w,H.width,H.height);L.clear();L.createPolyline([{x:q?H.width:0,y:0},{x:q?0:H.width,y:0},{x:q?0:H.width,y:H.height},{x:q?H.width:0,y:H.height}]).setStroke({color:"#6E6E6E",
width:6});p.component=m;q=F(p.message,p.tooltipClass,p.position);var K=function(){clickHandler&&clickHandler.remove();N&&clearInterval(N);L&&L.clear();y.destroy(w);y.destroy(m)},N=setInterval(function(){h.isNodeInLayout(u)||K();h.isNodeVisible(u)?z.set(m,"visibility","visible"):z.set(m,"visibility","hidden")},300);p.timeout&&setTimeout(K,p.timeout);clickHandler=d(q.closeButton,"click",K);tooltip=I(q,p.component,p.timeout,p.position);var O=tooltip._removeFunc;tooltip._removeFunc=function(){O();K()};
return tooltip};return B})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function y(){for(var d=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>d.length;)d="0"+d;return d}var z=y(),C=y();C=C.substring(0,4)+"-4"+C.substring(5,8);var r=y();r="8"+r.substring(1,4)+"-"+r.substring(4,8);var k=y();return(z+"-"+C+"-"+r+k).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel",
"dojo/_base/lang"],function(y){y.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(z,C){if(!z)throw C||(C="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(C);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};
dojox.uuid.isValid=function(z){z=z.toString();var C=y.isString(z)&&36==z.length&&z==z.toLowerCase();if(C){z=z.split("-");C=5==z.length&&8==z[0].length&&4==z[1].length&&4==z[2].length&&4==z[3].length&&12==z[4].length;for(var r in z){var k=parseInt(z[r],16);C=C&&isFinite(k)}}return C};dojox.uuid.getVariant=function(z){if(!dojox.uuid._ourVariantLookupTable){var C=dojox.uuid.variant,r=[];r[0]=C.NCS;r[1]=C.NCS;r[2]=C.NCS;r[3]=C.NCS;r[4]=C.NCS;r[5]=C.NCS;r[6]=C.NCS;r[7]=C.NCS;r[8]=C.DCE;r[9]=C.DCE;r[10]=
C.DCE;r[11]=C.DCE;r[12]=C.MICROSOFT;r[13]=C.MICROSOFT;r[14]=C.UNKNOWN;r[15]=C.UNKNOWN;dojox.uuid._ourVariantLookupTable=r}z=z.toString();z=z.charAt(19);z=parseInt(z,16);dojox.uuid.assert(0<=z&&16>=z);return dojox.uuid._ourVariantLookupTable[z]};dojox.uuid.getVersion=function(z){dojox.uuid.assert(dojox.uuid.getVariant(z)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");z=z.toString();z=z.charAt(14);return parseInt(z,16)};dojox.uuid.getNode=function(z){dojox.uuid.assert(dojox.uuid.getVersion(z)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");z=z.toString();return z.split("-")[4]};dojox.uuid.getTimestamp=function(z,C){dojox.uuid.assert(dojox.uuid.getVersion(z)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");z=z.toString();C||(C=null);switch(C){case "string":case String:return dojox.uuid.getTimestamp(z,Date).toUTCString();case "hex":var r=z.split("-");z=r[0];C=r[1];r=r[2];r=r.slice(1);z=r+C+z;dojox.uuid.assert(15==
z.length);return z;case null:case "date":case Date:return r=z.split("-"),z=parseInt(r[0],16),C=parseInt(r[1],16),r=(parseInt(r[2],16)&4095)<<16,r=4294967296*(r+C),r+=z,new Date(r/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+C)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v){function F(){}var I={},B=y(a._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(p){p&&(C.add(this.domNode,p),this._customClasses=p)},setCustomStyle:function(p){this._customStyle=p},show:function(p,u,A,n,q,H,M){if(!this.aroundNode||this.aroundNode!==u||this.containerNode.innerHTML!=p)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof p?this.containerNode.innerHTML=p:(this.containerNode.innerHTML=
"",r.place(p.domNode||p,this.containerNode));q&&this.set("textDir",q);this.containerNode.align=n?"right":"left";var m=g.around(this.domNode,u,A&&A.length?A:a.defaultPosition,!n,z.hitch(this,"orient")),w=m.aroundNodePos;"M"==m.corner.charAt(0)&&"M"==m.aroundCorner.charAt(0)?(this.connectorNode.style.top=w.y+(w.h-this.connectorNode.offsetHeight>>1)-m.y+"px",this.connectorNode.style.left=""):"M"==m.corner.charAt(1)&&"M"==m.aroundCorner.charAt(1)?this.connectorNode.style.left=w.x+(w.w-this.connectorNode.offsetWidth>>
1)-m.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=u;this.onMouseEnter=H||F;this.onMouseLeave=M||F}},orient:function(p,u,A,n,q){this.connectorNode.style.top="";var H=n.h;n=n.w;p.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=u+"-"+A];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var M=k.position(this.domNode);M.w=Math.ceil(M.w);if(c("ie")||c("trident"))M.w+=2;k.setMarginBox(this.domNode,{w:Math.min(Math.max(n,1),M.w)});"B"==A.charAt(0)&&"B"==u.charAt(0)?(p=k.position(p),u=this.connectorNode.offsetHeight,
p.h>H?(this.connectorNode.style.top=H-(q.h+u>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(q.h/2-u/2,0),p.h-u)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,M.w-n)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var p=this.domNode.clientWidth,u=this.domNode.clientHeight,A=k.position(this.domNode),n=k.position(this.connectorNode),
q=k.position(this.containerNode);n.x-=A.x;n.y-=A.y;q.x-=A.x;q.y-=A.y;q.x+=1;q.y+=1;q.w-=2;q.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&r.destroy(this._surfaceContainer);A=this._surfaceContainer=r.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");A.style.pointerEvents="none";p=this._surface=h.createSurface(A,p,u);u=[{x:q.x,y:q.y},{x:q.x+q.w,y:q.y},{x:q.x+q.w,y:q.y+q.h},{x:q.x,y:q.y+q.h},{x:q.x,y:q.y}];A=n.x+n.w/2;n=n.y+n.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":q=
[{x:A-5,y:q.y},{x:A,y:n},{x:A+5,y:q.y}];u.splice.apply(u,[1,0].concat(q));break;case "ML-MR":case "BL-BR":q=[{x:q.x+q.w,y:n-5},{x:A,y:n},{x:q.x+q.w,y:n+5}];u.splice.apply(u,[2,0].concat(q));break;case "TM-BM":case "TL-BL":case "TR-BR":q=[{x:A+5,y:q.y+q.h},{x:A,y:n},{x:A-5,y:q.y+q.h}];u.splice.apply(u,[3,0].concat(q));break;case "MR-ML":case "BR-BL":q=[{x:q.x,y:n+5},{x:A,y:n},{x:q.x,y:n-5}],u.splice.apply(u,[4,0].concat(q))}q=p.createPolyline(u);n="function"===typeof this._customStyle?this._customStyle():
this._customStyle;q.setFill(n&&n.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});n&&n.color&&(this.containerNode.style.color=n.color)}}}),G={show:function(p,u,A,n,q){"string"===typeof A&&(A=[A]);A=A&&A.map(function(M){return{after:"after-centered",before:"before-centered"}[M]||M});var H=new B;q&&H.setCustomStyle(q);H.addCustomClasses(n);H.show(p,u,A);return H}};I.setTooltipToNode=function(p,u,A){function n(){!q&&I.showTooltipForNode(p,u,A)}A=A||{};if(p&&!v.isPlayerOnServer&&
(I.hideTooltipForNode(p),p.__setTooltipToNodeMouseEnterHandle&&p.__setTooltipToNodeMouseEnterHandle.remove(),u)){var q=!1;f.isMobileDevice()?p.__setTooltipToNodeMouseEnterHandle=t.addNoDragClickHandler(p,n):p.__setTooltipToNodeMouseEnterHandle=e(p,b.enter,n);A.showTooltip&&n();return{remove:function(){u=null;I.hideTooltipForNode(p)},suspend:function(){I.hideTooltipForNode(p);q=!0},resume:function(){q=!1},refresh:function(){p._shownTooltip&&n()}}}};I.showTooltipForNode=function(p,u,A){function n(){I.hideTooltipForNode(p);
var m=Array.isArray(A.classes)?A.classes.join(" "):A.classes;m=(m||"")+" esriGETooltip";A.notRestricted&&(m+=" notRestricted");p._shownTooltip=H=G.show(q,p,A.position||["after","before"],m,A.style)}A=A||{};if(p&&!v.isPlayerOnServer){I.hideTooltipForNode(p);var q="function"==typeof u?u():u;if(q){A.textAlign&&(q="\x3cdiv class\x3d'"+("start"===A.textAlign?"esriGEStart":"end"===A.textAlign?"esriGEEnd":"")+"'\x3e"+q+"\x3c/div\x3e");C.add(p,"esriGESimpleTextTooltip");var H;n();var M=I.hideTooltipForNode.bind(I,
p);f.isMobileDevice()?p.__setTooltipToNodeMouseLeaveHandle=e(document.body,"touchstart",function(m){l.isMouseOver(p,{event:m})||M()}):p.__setTooltipToNodeMouseLeaveHandle=e.once(p,b.leave,function(){!A.stayOnHover&&M()});A.ignoreNodeRemoval||(p.__setTooltipToNodeInLayoutHandle=setInterval(function(){!x.isNodeInLayout(p)&&M()},300));f.isMobileDevice()||(p.__setTooltipToNodeMouseOverHandle=setInterval(function(){A.stayOnHover&&l.isMouseOver(H.domNode)||l.isMouseOver(p)||M()},300),p.__setTooltipToNodeClickHandle=
e(p,"click",function(m){A.hideOnClick?M():!p._shownTooltip&&n()}),A.stayOnHover&&(p.__setTooltipToNodeMouseLeaveMasterHandle=e(H.domNode,b.leave,M)));return p._shownTooltip}}};I.isShown=function(p){return!(!p||!p._shownTooltip)};I.hideTooltipForNode=function(p){p&&(p.title="",C.remove(p,"esriGESimpleTextTooltip"),p._shownTooltip&&p._shownTooltip.destroy(),delete p._shownTooltip,p.__setTooltipToNodeMouseLeaveHandle&&p.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(p.__setTooltipToNodeInLayoutHandle),
clearInterval(p.__setTooltipToNodeMouseOverHandle),p.__setTooltipToNodeClickHandle&&p.__setTooltipToNodeClickHandle.remove(),p.__setTooltipToNodeMouseLeaveMasterHandle&&p.__setTooltipToNodeMouseLeaveMasterHandle.remove())};var J,D;I.autoTooltip=function(p){v.isPlayerOnServer||e(p,".TrimWithEllipses:mouseover",function(){if(this!==J&&this.offsetWidth<this.scrollWidth){var u=function(){J=null;D&&(D.tooltip.destroy(),D.mouseOutH.remove(),D.mouseMoveH.remove(),D=null)};u();J=this;D={tooltip:G.show(J.textContent,
J,["above","below"]),mouseOutH:e.once(J,"mouseout, mousedown, touchstart",u),mouseMoveH:e(document.body,"mousemove",function(){l.isMouseOver(J)||u()})}}})};I.showClosableTooltip=function(p){var u=I._createClosableTooltip(p.message,p.tooltipClass,p.position);return I._placeClosableTooltip(u,p.node,p.timeout,p.position,p.onClosed)};I.removeClosableTooltip=function(p){p&&p._removeFunc&&p._removeFunc()};I._createClosableTooltip=function(p,u,A){function n(){var w=r.create("div",{"class":"esriGEClosableTooltipTip"},
H);C.add(w,"right"===A?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function q(){M=r.create("div",{"class":"esriGEClosableTooltipBody"},H);r.create("div",{innerHTML:p,"class":"esriGEClosableTooltipLabel"},M);m=r.create("div",{"class":"esriGEClosableTooltipCloseButton"},M)}var H=r.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(u||"")},document.body),M,m;"right"!==A?(q(),n()):(n(),q());H.style.position="fixed";return{tooltip:H,body:M,closeButton:m}};I._placeClosableTooltip=
function(p,u,A,n,q){function H(){var Q=k.position(u),P=Q.x+";"+Q.y+";"+Q.w+";"+Q.h;P!==m&&(m=P,P=k.getMarginBox(p.tooltip),d.set(p.tooltip,{left:(M?Q.x+Q.w:Q.x-P.w)+"px",top:Q.y+Q.h/2-P.h/2+"px"}))}var M="rtl"===document.dir&&"right"!==n||"rtl"!==document.dir&&"right"===n,m;H();var w,E,L=function(){w&&clearTimeout(w);K&&clearInterval(K);N&&clearInterval(N);O&&O.remove();p.tooltip.parentNode&&p.tooltip.parentNode.removeChild(p.tooltip)};var K=setInterval(function(){x.isNodeInLayout(u)&&u.parentNode||
(E=!1,L());x.isNodeVisible(u)&&x.isNodeOnscreen(u)?(E=!0,x.show(p.tooltip)):(E=!1,x.hide(p.tooltip))},0);var N=setInterval(function(){E&&H()},0);A&&(w=setTimeout(L,A));var O=e(p.closeButton,"click",function(){L();q&&q()});p.tooltip._removeFunc=L;return p.tooltip};I.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});I.hideTooltipForNode(document.body);return I})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil",
"./KeyboardUtil"],function(y,z,C,r){var k={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(d,e,b){b=b||{};return C.isMobileDevice()?k._addMobile(d,e,b):k._addPC(d,e,b)},_addPC:function(d,e,b){var c=b.tolerance||0,a,g,h=y(d,"mousedown",function(f){g&&g.remove();var t=f.clientX,x=f.clientY,l;a=y(document.body,"mousemove",function(v){if(!v.shiftKey&&!r.isCtrl(v)){var F=v.clientY;if(0<Math.abs(v.clientX-t)||0<Math.abs(F-x))l=!0}});g=y.once(document.body,"mouseup",function(v){a.remove();
var F=v.clientX,I=v.clientY;!l&&Math.abs(F-t)<=c&&Math.abs(I-x)<=c&&e(v)})});return{remove:function(){a&&a.remove();g&&g.remove();h&&h.remove()}}},_addMobile:function(d,e,b){function c(){g&&g.remove();h&&h.remove();f&&f.remove();clearTimeout(t)}var a=b.tolerance||k.MOBILE_TOLERANCE,g,h,f,t;var x=y(d,"touchstart",function(l){function v(B){return Math.abs(l.clientX-B.clientX)<a&&Math.abs(l.clientY-B.clientY)<a}c();var F;if(b.detectLongPress){var I;h=y(d,"touchmove",function(B){I=B});t=setTimeout(function(){v(I||
l)&&(b.ignoreReleaseIfLongPressHappened&&(F=!0),b.longPressCallback(l))},b.longPressTimeout||k.LONG_PRESS_TIMEOUT)}g=y.once(d,"touchend",function(B){!F&&v(B)&&e(B);c()});f=y.once(d,"touchcancel",c)});return{remove:function(){x&&x.remove();c()}}},addGlobalDragHanlder:function(d){function e(){b&&b.remove();c&&c.remove();a&&a.remove();g&&g.remove();h&&d.destroyDnDBox&&d.destroyDnDBox(h)}d.tolerance=0<d.tolerance?d.tolerance:5;var b,c,a,g,h;return y(d.node,d.downEventName||C.press,function(f){e();if(!d.onMouseDown||
d.onMouseDown(f)){var t=f.clientX,x=f.clientY,l=t,v=x;b=y(document.body,C.move,function(F){function I(){e();d.dragEnded&&d.dragEnded()}F.shiftKey||r.isCtrl(F)||!(Math.abs(t-F.clientX)>=d.tolerance||Math.abs(x-F.clientY)>=d.tolerance)||(b.remove(),d.dragStarted&&!d.dragStarted(F,F.clientX-l,F.clientY-v))||(l=F.clientX,v=F.clientY,h=d.createDnDBox&&d.createDnDBox(),c=y(document.body,C.move,function(B){d.dragMoved&&d.dragMoved(B,B.clientX-l,B.clientY-v,I);l=B.clientX;v=B.clientY}),a=y.once(document.body,
z("ie")||z("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){I()}),g=y(document.body,"keyup",function(B){27==B.keyCode&&(e(),d.dragCanceled&&d.dragCanceled())}))});y.once(document.body,z("ie")||z("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){b.remove()})}})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],function(y){function z(C){C=C.split(".");return Number((Number(C[0])+Number(C[1])/100).toFixed(2))}y=Math.max(z("3.35"),
z(y.version)).toFixed(2);return{jsapiVersion:y,esriDijitCssUrl:"https://js.arcgis.com/"+y+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+y+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+y+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,
showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!0,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,numVerticesPerFeature:5E4}}})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),
function(y,z,C,r,k,d,e){return{getAvailableCountries:function(){return e.getPortal(portalUrl).loadSelfInfo().then(function(b){return C({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(b){return e.getPortal(portalUrl).loadSelfInfo().then(function(c){return C({url:(c&&
c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreasOptions:JSON.stringify(b.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),
token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(b){var c={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof b.report?b.report:JSON.stringify(b.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreas:JSON.stringify(b.studyAreas),reportFields:JSON.stringify({locationname:b.locationName,latitude:b.lat,longitude:b.long,subtitle:"Prepared by Esri",areadesc2:b.areadesc2})};return e.getPortal(portalUrl).loadSelfInfo().then(function(a){return C({url:(a&&
a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:c,handleAs:"blob"}).then(function(g){return d.saveAs(g,b.reportDownloadName+".pdf")}).otherwise(function(g){alert("Error: "+g)})})},checkCapabilities:function(b){return e.getPortal(portalUrl).loadSelfInfo().then(function(c){var a=!1,g=!1,h=c&&c.user&&c.user.privileges,
f=c&&c.helperServices;c=f.geoenrichment&&f.geoenrichment.url;f=f.routingUtilities&&f.routingUtilities.url;var t=c?c:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&y.some(b.appProxies,function(x){return t.toLowerCase()===x.sourceUrl.toLowerCase()})?g=a=!0:y.forEach(h,function(x){"premium:user:geoenrichment"===x?a=!0:"premium:user:networkanalysis"===x&&(g=!0)});return{hasPrivilege:a&&g,geServiceConfigured:!!c,
dirRoutingServiceConfigured:!!f}})},getCountryForPolygon:function(b,c,a){return e.getPortal(portalUrl).loadSelfInfo().then(function(g){return C({url:(g&&g.helperServices&&g.helperServices.geoenrichment&&g.helperServices.geoenrichment.url?g.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),
studyAreas:JSON.stringify([{geometry:b.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(h){if(h&&h.results&&1===h.results.length&&1===h.results[0].value.FeatureSet[0].features.length)return h.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;if(h&&h.results&&1===h.results.length&&1<h.results[0].value.FeatureSet[0].features.length){var f=b.getCentroid();f=k.xyToLngLat(f.x,f.y);var t=function(x){var l="";y.forEach(x,function(v){v.attributes.sourceCountry==
a&&(l=a)});if(l)return l;y.forEach(x,function(v){v.attributes.sourceCountry==c.defaultCountryID&&(l=defaultCountryID)});return l?l:x[0].attributes.sourceCountry};return z(r.reverseGeocode({x:f[0],y:f[1]})).then(function(x){return x&&x.address&&x.address.CountryCode?x.address.CountryCode:t(h.results[0].value.FeatureSet[0].features)}).otherwise(function(){return t(h.results[0].value.FeatureSet[0].features)})}return c.defaultCountryID})})},getGEProxyUrl:function(b){var c=!1;return e.getPortal(portalUrl).loadSelfInfo().then(function(a){geUrl=
a&&a.helperServices&&a.helperServices.geoenrichment&&a.helperServices.geoenrichment.url?a.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&y.forEach(b.appProxies,function(g){geUrl.toLowerCase()===g.sourceUrl.toLowerCase()&&(c=g.proxyUrl)});return c})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request","jimu/portalUtils"],function(y,z){return{reverseGeocode:function(C){return z.getPortal(portalUrl).loadSelfInfo().then(function(r){return y({url:(r&&
r.isPortal&&r.helperServices&&r.helperServices.geocode&&0<r.helperServices.geocode.length?r.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:C.x,y:C.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./DataUtil","./ImageUtil"],
function(y,z,C,r){function k(){return new y.reject(Error("Saving not supported."))}var d=k,e=/[\\/:*?"<>|]/g,b={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(g,h,f,t){return b.savingSupported()?b.saveAs(new Blob([g],{type:f||"text/plain"}),h||"text.txt",t):k()},saveImageFile:function(g,h){if(b.savingSupported()){if("string"===typeof g){var f=r.base64DataFromDataURL(g);f=C.binaryStringToByteArray(atob(f)).buffer}else g instanceof ArrayBuffer&&(f=g);return b.saveAs(f?
C.arrayBuffersToBlob([f],"image/png"):g,h)}k()},_queue:[],_isSavePendingFlag:!1,_saveTimeoutH:null,saveAs:function(g,h,f){return f&&f.addDownloadIntervals?(f=new y,b._queue.push({blob:g,name:h||"download",dfd:f}),b._trySaveAsNext(),f.promise):d(g,b.validateName(h||"download"))},_trySaveAsNext:function(){if(b._queue.length&&!b._isSavePendingFlag){var g=b._queue.shift();b._isSavePendingFlag=!0;z(d(g.blob,b.validateName(g.name))).then(g.dfd.resolve,g.dfd.reject).always(function(){setTimeout(function(){b._isSavePendingFlag=
!1;b._trySaveAsNext()},100)})}},validateName:function(g){return String(g).trim().replace(e,"")}};if(!b.savingSupported())return b;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return d=function(g,h){var f=new y;window.navigator.msSaveOrOpenBlob(g,h)?f.resolve():f.reject(Error("Failed to save or open downloaded file."));return f.promise},b;var c=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var a=function(g){if(void 0!==window.MouseEvent)var h=new MouseEvent("click",
{bubbles:!0,cancelable:!1});else h=document.createEvent("MouseEvent"),h.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g.dispatchEvent(h)};d=function(g,h){var f=new y,t=c.createObjectURL(g),x=window.document.createElement("a");x.href=t;x.download=h;a(x);setTimeout(function(){c.revokeObjectURL(t);x=null;f.resolve();f=null},1E3);return f.promise};return b}d=function(g,h){var f=new y;g=new File([g],h,{type:g.type});var t=c.createObjectURL(g);window.open(t,"_blank");setTimeout(function(){c.revokeObjectURL(t);
f.resolve()},1E3);return f.promise};return b})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(y,z){function C(e){return"string"==typeof e?{source:e,getLength:function(){return this.source.length},getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&e instanceof ArrayBuffer?{source:new Uint8Array(e),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:
e}function r(e){for(var b=e.length,c=new Uint8Array(e.length),a=0;a<b;a++)c[a]=e.charCodeAt(a);return c}function k(e,b){e=new Uint8Array(e);b=Math.min(b,e.byteLength);for(var c="",a=0;a<b;a++)c+=String.fromCharCode(e[a]);return c}var d={arrayBufferFromBlob:function(e){var b=new y,c=new FileReader;c.onloadend=function(){c.error?b.reject(c.error):b.resolve(c.result)};c.readAsArrayBuffer(e);return b.promise},arrayBuffersToBlob:function(e,b){return new Blob(e,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(e){if("string"==
typeof e)return e;e=C(e);var b=e.getLength(),c=b%4;b-=c;for(var a="",g=0,h,f,t,x;g<b;)h=e.getByte(g++),f=e.getByte(g++),t=e.getByte(g++),x=e.getByte(g++),a+=String.fromCharCode(h,f,t,x);1==c?a+=String.fromCharCode(e.getByte(g)):2==c?a+=String.fromCharCode(e.getByte(g),e.getByte(g+1)):3==c&&(a+=String.fromCharCode(e.getByte(g),e.getByte(g+1),e.getByte(g+2)));return a},base64FromByteSource:function(e){e=C(e);var b=e.getLength(),c=b%3;b-=c;for(var a,g,h,f,t="",x=0;x<b;x+=3)f=e.getByte(x)<<16|e.getByte(x+
1)<<8|e.getByte(x+2),a=f>>18&63,g=f>>12&63,h=f>>6&63,f&=63,t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f];1==c?(f=e.getByte(x),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f<<
4&63]+"\x3d\x3d"):2==c&&(f=e.getByte(x)<<8|e.getByte(x+1),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f<<2&63]+"\x3d");return t},base64FromJson:function(e){return btoa(unescape(encodeURIComponent("string"===typeof e?e:JSON.stringify(e))))}};d.binaryStringToByteArray=r;d.base64ToByteArray=function(e){return r(atob(e))};d.getFirstBytes=
function(e,b){if("string"==typeof e)var c=e.substr(0,b);else if(window.ArrayBuffer&&e instanceof ArrayBuffer)c=k(e,b);else if(window.Blob&&e instanceof Blob){c=new y;var a=new FileReader;a.onloadend=function(){a.error?c.resolve(""):c.resolve(k(a.result,b))};a.readAsArrayBuffer(e.slice(0,b))}return z(c||"")};d.isBase64=function(e){return e&&0==e.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(e.replace(/={0,2}$/,""))};d.base64ToJson=function(e){return JSON.parse(decodeURIComponent(atob(e)))};
d.getContentType=function(e){e=d.getFileExtension(e);if(null===e)return null;switch(e){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};d.getFileExtension=function(e){var b=e.lastIndexOf(".")+1;return b?e.substr(b).toLowerCase():null};return d})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/when","./UrlUtil"],function(y,z,C){var r={base64DataToDataURL:function(k,d){if(/^data:image/.test(k))return k;d||(d=atob(k.substr(0,16)),d=r.getImageContentType(d));return"data:"+(d||"image/png")+";base64,"+k},getImageContentType:function(k){if("\u00ff\u00d8\u00ff"===k.substr(0,3)&&"JFIF"===k.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===k.substr(0,8))return"image/png";if("GIF89a"===k.substr(0,6)||"GIF87a"===k.substr(0,6))return"image/gif"},base64DataFromDataURL:function(k){0==
k.indexOf("data:")&&(k=k.substr(k.indexOf(",")+1));return k},getBase64DataIndex:function(k){k=0==k.indexOf("data:")?k.indexOf(";base64,"):-1;return 0<k?k+8:0},getContentType:function(k){var d=r.getBase64DataIndex(k);return d?k.substring(5,d-8):null},checkBase64FileSize:function(k,d){return r.getBase64FileSize(k)<=d},getBase64FileSize:function(k){return.75*k.length},imageToDataURL:function(k,d){d=d||{};var e=document.createElement("canvas"),b=e.getContext("2d");e.width=d.width||k.width;e.height=d.height||
k.height;var c=d.opacity;null!=c&&!isNaN(c)&&0<=c&&1>c&&(b.globalAlpha=+c,d.format="image/png");(c=d.pos)?b.drawImage(k,c.x||0,c.y||0):b.drawImage(k,0,0,e.width,e.height);return e.toDataURL(d.format)},imageFromUrl:function(k,d){var e=new y,b=new Image;0!==k.indexOf("data:")&&d&&d.crossOrigin&&b.setAttribute("crossOrigin",d.crossOrigin);b.onload=function(){if(b.width&&b.height)e.resolve(b);else{var c=Error("Error of reading an image from URL.");d&&d.ignoreError?e.resolve(null):e.reject(c)}b.onload=
b.onerror=null};b.onerror=function(c){d&&d.ignoreError?e.resolve(null):e.reject(c);b.onload=b.onerror=null};k=require.toUrl(k);/^http:/i.test(k)&&/^https/i.test(window.location.protocol)&&(k=C.toHttpsUrl(k));b.src=k;return e.promise},scaleImage:function(k,d){if("string"===typeof k){var e=r.base64DataToDataURL(k),b=r.getContentType(e);e=r.imageFromUrl(e)}return z(e||k).then(function(c){var a=1,g=c.width,h=c.height;if(d.factor)a=d.factor;else if(d.maxDim)a=d.maxDim/Math.max(g,h);else if(d.imageDim){var f=
d.imageDim.w,t=d.imageDim.h;d.imageDim.preserveRatio?(a=Math.min(f/g,t/h),d.imageDim.reduceOnly&&1<a&&(a=1)):d.imageDim.reduceOnly?(g=Math.min(g,f),h=Math.min(h,t)):(g=f,h=t)}return r.imageToDataURL(c,{width:g*a,height:h*a,format:d.format||b,opacity:d.opacity})})},getImageViewType:function(k,d){return 1E3<=d?(k/=d,.025>=Math.abs(k-2)?"360":2<k?"pano":null):null}};return r})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],
function(y,z,C,r,k){var d={getDomain:function(b){if("string"!==typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var c=b.indexOf("/");return 0>c?b:b.substr(0,c)},getPortalUrl:function(b){if("string"!==typeof b)return null;b=b.replace(/\?.*$/,"");var c=b.match(/^(.+)\/sharing(\/|$)/i);return c||(c=b.match(/^(.+)\/home$/i))?c[1]:(c=b.match(/^(.+)\/portal(\/|$)/i))?c[1]+"/portal":b},getProxyUrl:function(b){var c=z.defaults.io.proxyUrl;c&&!/^http/i.test(c)&&(c=r.getAbsoluteUrl(c));c&&b&&
(c=d.toHttpsUrl(c));return c},registerCORS:function(b){(b=d.getDomain(b))&&-1==z.defaults.io.corsEnabledServers.indexOf(b)&&z.defaults.io.corsEnabledServers.push(b);d._fixCORS()},_fixCORS:function(){z.defaults.io.corsEnabledServers=z.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+b),!1):!0})},indexOfQuery:function(b){var c=b.indexOf("?");0<=c&&(b=b.substr(c+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=
b.indexOf("?"),c=0<=b?c+1+b:-1));return c},removeQuery:function(b){var c=d.indexOfQuery(b);return 0>c?b:b.substr(0,c)},addQueryPart:function(b,c){var a=0>d.indexOfQuery(b)?"?":"\x26";return b+a+c},getVariableValue:function(b,c){if(b&&"string"===typeof c){var a=r.urlToObject(b);if(a.query){var g={};Object.keys(a.query).forEach(function(h){g[h.toLowerCase()]=a.query[h]});return g[c.toLowerCase()]}}},addUrlVariable:function(b,c,a){c=encodeURIComponent(c);a=encodeURIComponent(a);return d.addQueryPart(b,
c+"\x3d"+a)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?b:"http://"+b},toHttpsUrl:function(b){b&&(b=d.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var c=new y(b);b=b.replace(/^http/i,"https");var a=d.securePortsMap[c.port];a&&(b=b.replace(":"+c.port,":"+a));return b},combine:function(b,c){"number"===typeof c&&(c+="");if(c){if(/^(http:\/\/|https:\/\/)/i.test(c)||!b)return c;"/"!=c.charAt(0)&&(c="/"+c);if(1==c.length)return b;var a=b.length-1;"/"==
b.charAt(a)&&(b=b.substr(0,a));var g=r.urlToObject(b);b=d.removeQuery(b);a=b.length-c.length;0<=a&&b.substr(a).toLowerCase()==c.toLowerCase()&&(b=b.substr(0,a));b+=c;for(var h in g.query)d.addQueryPart(b,g.query[h])}return b},combineMulti:function(b){for(var c=b[0],a=1;a<b.length;a++)c=d.combine(c,b[a]);return c},openUrl:function(b,c){if(c)return window.open(b,"_blank");c=window.open();c.opener=null;c.referrer=null;c.location=b;return c},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},
getToken:function(b){return(b=b&&C.id.findCredential(b)||C.id.credentials[0])&&b.token}},e;d.getArcgisUrl=function(){return e};d.setArcgisUrl=function(b){b&&(e=b,k.arcgisUrl=d.combine(b,"/sharing/rest/content/items"))};return d})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(y,z,C,r,k,d,e){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";
return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(b,c){var a=this,g=[],h=new y,f;c&&r.forEach(c.countryConfig,function(v){b==v.countryID&&(f=v)});f||(f={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,
allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var t=null,x=null,l=null;C(this._initReports(b),function(){if(!c||f.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],f.enabledEsriReports))t=g.length,g.push({value:"esriReports",label:e.esriReports,children:[]});if(!c||f.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,
b,f.enabledOrgReports))x=g.length,g.push({value:"myReports",label:e.myReports,children:[]});if(!c||f.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,f.enabledOrgReports))l=g.length,g.push({value:"sharedReports",label:e.sharedReports,children:[]});(f.allowAllEsriReports||a._hasEnabledReports(a._cachedCountryClassicReports[b],f.enabledEsriReports))&&a._cachedCountryClassicReports[b]&&0<a._cachedCountryClassicReports[b].length&&
r.forEach(a._cachedCountryClassicReports[b],function(I){(f.allowAllEsriReports||f.enabledEsriReports.includes(I.reportID))&&g[t].children.push(a._formatClassicReportsForDropDown(I))});var v=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];(f.allowAllOrgReports&&a._hasReportsForCountry(a._ownedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._ownedCachedCustomReports,b,f.enabledOrgReports))&&r.forEach(a._ownedCachedCustomReports,
function(I){I.properties.countries.includes(b)&&(f.allowAllOrgReports||f.enabledOrgReports.includes(I.id))&&(I.typeKeywords.some(function(B){return 0<=v.indexOf(B)})||g[x].children.push(a._formatClassicReportsForDropDown(I)))});(f.allowAllOrgReports&&a._hasReportsForCountry(a._sharedCachedCustomReports,b)||a._hasEnabledReportsForCountry(a._sharedCachedCustomReports,b,f.enabledOrgReports))&&r.forEach(a._sharedCachedCustomReports,function(I){I.properties.countries.includes(b)&&(f.allowAllOrgReports||
f.enabledOrgReports.includes(I.id))&&(I.typeKeywords.some(function(B){return 0<=v.indexOf(B)})||g[l].children.push(a._formatClassicReportsForDropDown(I)))});var F=function(I,B){I=I.label.toUpperCase();B=B.label.toUpperCase();var G=0;I>B?G=1:I<B&&(G=-1);return G};0<g.length&&g[0].children.sort(F);1<g.length&&g[1].children.sort(F);2<g.length&&g[2].children.sort(F);h.resolve(g)});return h},_hasEnabledReports:function(b,c){return b&&c?r.some(b,function(a){return c.includes(a.reportID)}):!1},_hasReportsForCountry:function(b,
c){return b&&c?r.some(b,function(a){return a.properties.countries.includes(c)}):!1},_hasEnabledReportsForCountry:function(b,c,a){return b&&c&&a?r.some(b,function(g){return g.properties.countries.includes(c)?a.includes(g.id):!1}):!1},_formatClassicReportsForDropDown:function(b){return b.metadata?{label:b.metadata.title,value:b.reportID,reportType:b.metadata.type}:{label:b.title,value:b.id,reportType:b.properties.type,item:{itemid:b.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(b,
c){var a=this,g=[],h=new y,f;c&&r.forEach(c.countryConfig,function(v){b==v.countryID&&(f=v)});f||(f={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var t=null,x=
null,l=null;C(this._initReports(b),function(){if(!c||f.allowAllEsriInfographics||a._hasEnabledInfographics(a._cachedInfographicReports,f.enabledEsriInfographics))t=g.length,g.push({value:"esriReports",label:e.esriInfographics,children:[]});if(!c||f.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||a._hasEnabledInfographics(a._ownedCachedCustomReports,f.enabledOrgInfographics))x=g.length,g.push({value:"myReports",label:e.myInfographics,children:[]});if(!c||f.allowAllOrgInfographics&&0<
a._sharedCachedCustomReports.length||a._hasEnabledInfographics(a._sharedCachedCustomReports,f.enabledOrgInfographics))l=g.length,g.push({value:"sharedReports",label:e.sharedInfographics,children:[]});(f.allowAllEsriInfographics||a._hasEnabledInfographics(a._cachedInfographicReports,f.enabledEsriInfographics))&&r.forEach(a._cachedInfographicReports,function(F){F.properties.countries.includes(b)&&(f.allowAllEsriInfographics||f.enabledEsriInfographics.includes(F.id))&&g[t].children.push(a._formatInfographicReportsForDropDown(F))});
(f.allowAllOrgInfographics&&0<a._ownedCachedCustomReports.length||a._hasEnabledInfographics(a._ownedCachedCustomReports,f.enabledOrgInfographics))&&r.forEach(a._ownedCachedCustomReports,function(F){F.properties.countries.includes(b)&&(f.allowAllOrgInfographics||f.enabledOrgInfographics.includes(F.id))&&(F.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(F))&&g[x].children.push(a._formatInfographicReportsForDropDown(F))});(f.allowAllOrgInfographics&&0<a._sharedCachedCustomReports.length||
a._hasEnabledInfographics(a._sharedCachedCustomReports,f.enabledOrgInfographics))&&r.forEach(a._sharedCachedCustomReports,function(F){F.properties.countries.includes(b)&&(f.allowAllOrgInfographics||f.enabledOrgInfographics.includes(F.id))&&(F.typeKeywords.includes("esriWebInfographicReport")||a._isOldPortalInfographic(F))&&g[l].children.push(a._formatInfographicReportsForDropDown(F))});var v=function(F,I){F=F.label.toUpperCase();I=I.label.toUpperCase();var B=0;F>I?B=1:F<I&&(B=-1);return B};0<g.length&&
g[0].children.sort(v);1<g.length&&g[1].children.sort(v);2<g.length&&g[2].children.sort(v);h.resolve(g)});return h},_hasEnabledInfographics:function(b,c){return r.some(b,function(a){return c.includes(a.id)})},_isOldPortalInfographic:function(b){return b.properties&&b.properties.isHidden&&"true"===b.properties.isHidden?!1:b.properties&&b.properties.isGraphicReport&&"true"===b.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(b){return{label:b.title,value:b.id}},_initReports:function(b){var c=
[],a=this;if(this._countryInitDfds[b])return this._countryInitDfds[b];this._countryInitDfds[b]=new y;var g=function(h,f){return k(h).then(function(t){r.forEach(t.results,function(x){f.push(x)});if(-1!=t.nextStart)return h.content.start=t.nextStart,g(h,f)},function(t){alert(t)})};d.getPortal(portalUrl).loadSelfInfo().then(function(h){var f=h&&h.helperServices&&h.helperServices.geoenrichment&&h.helperServices.geoenrichment.url?h.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";
a._cachedCountryClassicReports[b]||c.push(k({url:f+"/Geoenrichment/reports/"+b,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(t){a._cachedCountryClassicReports[b]=t.reports},function(t){alert(t)}));a._cachedInfographicReports||(a._cachedInfographicReports=[],c.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.35)"}},
a._cachedInfographicReports)));a._ownedCachedCustomReports||(a._ownedCachedCustomReports=[],c.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}},a._ownedCachedCustomReports)));a._sharedCachedCustomReports||(a._sharedCachedCustomReports=[],c.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",
f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},a._sharedCachedCustomReports)),c.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},
a._sharedCachedCustomReports)),h&&h.appInfo&&h.appInfo.orgId&&c.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:public type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId+" orgid: "+h.id}},a._sharedCachedCustomReports)));0===c.length?a._countryInitDfds[b].resolve():z(c).then(function(){a._countryInitDfds[b].resolve()})});return this._countryInitDfds[b]}}})},
"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(y){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(z,C,r,k,d){var e=z.get("value"),b=C.get("value"),c=r.get("value"),a=!0;0<e.length&&null===this._tryParseFloat(e)?(a=!1,y.remove(k,"hidden"),k.innerHTML=d,y.add(z.domNode,"invalidValue")):y.remove(z.domNode,"invalidValue");0<b.length&&null===this._tryParseFloat(b)?(a=!1,y.remove(k,"hidden"),k.innerHTML=
d,y.add(C.domNode,"invalidValue")):y.remove(C.domNode,"invalidValue");0<c.length&&null===this._tryParseFloat(c)?(a=!1,y.remove(k,"hidden"),k.innerHTML=d,y.add(r.domNode,"invalidValue")):y.remove(r.domNode,"invalidValue");a&&y.add(k,"hidden");return a},validateMinMaxValues:function(z,C,r,k,d,e,b){var c=z.get("value"),a=C.get("value"),g=r.get("value"),h=!0;0<c.length?(c=parseFloat(c),c<k||c>d?(h=!1,y.remove(e,"hidden"),e.innerHTML=b,y.add(z.domNode,"invalidValue")):y.remove(z.domNode,"invalidValue")):
y.remove(z.domNode,"invalidValue");0<a.length?(c=parseFloat(a),c<k||c>d?(h=!1,y.remove(e,"hidden"),e.innerHTML=b,y.add(C.domNode,"invalidValue")):y.remove(C.domNode,"invalidValue")):y.remove(C.domNode,"invalidValue");0<g.length?(c=parseFloat(g),c<k||c>d?(h=!1,y.remove(e,"hidden"),e.innerHTML=b,y.add(r.domNode,"invalidValue")):y.remove(r.domNode,"invalidValue")):y.remove(r.domNode,"invalidValue");h&&y.add(e,"hidden");return h},_tryParseFloat:function(z){var C=null;null!==z&&0<z.length&&(isNaN(z)||
(C=parseFloat(z)));return C}}})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(y,z,C,r,k,d){var e=null,b=y([C,k],{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=this._getWhiteList();this.sanitizer=new d({whiteList:this.whiteList,
safeAttrValue:r.hitch(this,function(c,a,g,h){return"style"===a?this.xss.friendlyAttrValue(g).replace(/"/g,"'"):"img"===c&&"src"===a?this.xss.escapeAttrValue(g):this.xss.safeAttrValue(c,a,g,h)}),onTag:r.hitch(this,function(c,a,g){if(g.isWhite&&this._isInWhiteList(c,this.graphicsWhiteList))return a}),onIgnoreTagAttr:r.hitch(this,function(c,a,g,h){if("data-"===a.substr(0,5))return a+'\x3d"'+this.xss.escapeAttrValue(g)+'"'}),onIgnoreTag:r.hitch(this,function(c,a,g){if("o:"===c.substr(0,2)||"!--[if"===
c||"!--[endif]--"===c)return a})},!0);this.xss=this.sanitizer.xss},sanitize:function(c){return this.sanitizer.sanitize(c)},_getWhiteList:function(){var c="title height width class style font-family id align text-align".split(" "),a={div:c,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,span:c,p:c,s:c,strong:c,em:c,u:c,ol:c,ul:c,li:c,a:["href","target"].concat(c),img:["src","alt","border"].concat(c),blockquote:c,font:["face","size","color"].concat(c),pre:c,code:c,b:c,i:c,wbr:c,video:"autoplay controls loop muted poster preload".split(" ").concat(c),
audio:["autoplay","controls","loop","muted","preload"].concat(c),source:["media","src","type"].concat(c),table:["cellpadding","cellspacing","border"].concat(c),tbody:[].concat(c),tr:["valign"].concat(c),td:["valign","colspan","rowspan","nowrap"].concat(c),th:["valign","colspan","rowspan","nowrap"].concat(c),hr:c,html:c,title:c,link:["rel","href"],style:["type"].concat(c),body:c};this.graphicsWhiteList={animate:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],
desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],
mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],use:[],view:[],object:[],canvas:c};return this._extendObjectOfArrays([a,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],
blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align",
"valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(c){var a={};z.forEach(c,function(g){var h=Object.keys(g);z.forEach(h,function(f){Array.isArray(g[f])&&Array.isArray(a[f])?a[f]=a[f].concat(g[f]):
a[f]=g[f]},this)},this);return a},_isInWhiteList:function(c,a){a=Object.keys(a);var g=!1;z.forEach(a,function(h){c===h&&(g=!0)},this);return g}});b.getInstance=function(){null===e&&(e=new b);return e};return b})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),function(y,z,C,r,k,d,e,b,c,a,g,h,f){var t=C("dijit._editor.plugins.LinkDialog",
g,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:h,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=d.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(l){y("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),d.hitch(this,function(v,F,I){var B=this;this.tag="insertImage"==this.command?"img":"a";v=d.delegate(v.getLocalization("dijit","common",this.lang),v.getLocalization("dijit._editor",
"LinkDialog",this.lang));var G=this.dropDown=this.button.dropDown=new F({title:v[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:d.hitch(this,"setValue"),onOpen:function(){B._onOpenDialog();F.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(d.hitch(B,"_onCloseDialog"),0)}});v.urlRegExp=this.urlRegExp;v.id=I.getUniqueId(this.editor.id);this._uniqueId=v.id;this._setContent(G.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
a.substitute(this.linkDialogTemplate,v));G.startup();this._urlInput=I.byId(this._uniqueId+"_urlInput");this._textInput=I.byId(this._uniqueId+"_textInput");this._setButton=I.byId(this._uniqueId+"_setButton");this.own(I.byId(this._uniqueId+"_cancelButton").on("click",d.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",d.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",d.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=d.hitch(this,function(){var J=this._urlInput.get("value");return this._urlRegExp.test(J)||this._emailRegExp.test(J)});this.own(e(G.domNode,"keydown",d.hitch(this,d.hitch(this,function(J){!J||J.keyCode!=k.ENTER||J.shiftKey||J.metaKey||J.ctrlKey||J.altKey||this._setButton.get("disabled")||(G.onExecute(),G.execute(G.get("value")))}))));l()}))},_checkAndFixInput:function(){var l=this,v=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var F=v,I=!1,B=!1;F&&1<F.length&&(F=d.trim(F),0!==F.indexOf("mailto:")&&(0<F.indexOf("/")?-1===F.indexOf("://")&&"/"!==F.charAt(0)&&F.indexOf("./")&&0!==F.indexOf("../")&&l._hostRxp.test(F)&&(I=!0):l._userAtRxp.test(F)&&(B=!0)));I&&l._urlInput.set("value","http://"+F);B&&l._urlInput.set("value","mailto:"+F);l._setButton.set("disabled",!l._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(d.hitch(this,
function(){this.own(e(this.editor.editNode,"mouseup",d.hitch(this,"_onMouseUp")));this.own(e(this.editor.editNode,"dblclick",d.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(l){this.dropDown.set({parserScope:"dojo",content:l})},_checkValues:function(l){l&&l.urlInput&&(l.urlInput=l.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&l&&l.textInput&&("function"===typeof this.linkFilter?l.textInput=this.linkFilter(l.textInput):
z.forEach(this.linkFilter,function(v){l.textInput=l.textInput.replace(v[0],v[1])}));return l},_createlinkEnabledImpl:function(){return!0},setValue:function(l){this._onCloseDialog();if(9>b("ie")){var v=f.getSelection(this.editor.window).getRangeAt(0).endContainer;3===v.nodeType&&(v=v.parentNode);v&&v.nodeName&&v.nodeName.toLowerCase()!==this.tag&&(v=this.editor.selection.getSelectedElement(this.tag));v&&v.nodeName&&v.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(v),
this.editor.execCommand("unlink"))}l=this._checkValues(l);this.editor.execCommand("inserthtml",a.substitute(this.htmlTemplate,l));c("a",this.editor.document).forEach(function(F){F.innerHTML||r.has(F,"name")||F.parentNode.removeChild(F)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(l){if(l&&l.tagName.toLowerCase()===this.tag){var v=l.getAttribute("_djrealurl")||l.getAttribute("href");var F=l.getAttribute("target")||"_self";var I=l.textContent||
l.innerText;this.editor.selection.selectElement(l,!0)}else I=this.editor.selection.getSelectedText();return{urlInput:v||"",textInput:I||"",targetSelect:F||""}},_onOpenDialog:function(){if(b("ie")){var l=f.getSelection(this.editor.window);if(l.rangeCount){var v=l.getRangeAt(0);var F=v.endContainer;3===F.nodeType&&(F=F.parentNode);F&&F.nodeName&&F.nodeName.toLowerCase()!==this.tag&&(F=this.editor.selection.getSelectedElement(this.tag));if(!F||F.nodeName&&F.nodeName.toLowerCase()!==this.tag)(l=this.editor.selection.getAncestorElement(this.tag))&&
l.nodeName&&l.nodeName.toLowerCase()==this.tag?(F=l,this.editor.selection.selectElement(F)):v.startContainer===v.endContainer&&(l=v.startContainer.firstChild)&&l.nodeName&&l.nodeName.toLowerCase()==this.tag&&(F=l,this.editor.selection.selectElement(F))}}else F=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(F))},_onDblClick:function(l){if(l&&l.target&&(l=l.target,(l.tagName?l.tagName.toLowerCase():
"")===this.tag&&r.get(l,"href"))){var v=this.editor;this.editor.selection.selectElement(l);v.onDisplayChanged();v._updateTimer&&(v._updateTimer.remove(),delete v._updateTimer);v.onNormalizedDisplayChanged();var F=this.button;setTimeout(function(){F.set("disabled",!1);F.loadAndOpenDropDown().then(function(){F.dropDown.focus&&F.dropDown.focus()})},10)}},_onMouseUp:function(){if(b("ff")){var l=this.editor.selection.getAncestorElement(this.tag);if(l){var v=f.getSelection(this.editor.window).getRangeAt(0);
if(v.collapsed&&l.childNodes.length){var F=v.cloneRange();F.selectNodeContents(l.childNodes[l.childNodes.length-1]);F.setStart(l.childNodes[0],0);1!==v.compareBoundaryPoints(F.START_TO_START,F)?v.setStartBefore(l):-1!==v.compareBoundaryPoints(F.END_TO_START,F)&&v.setStartAfter(l)}}}}}),x=C("dijit._editor.plugins.ImgLinkDialog",[t],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(l){if(l&&l.tagName.toLowerCase()===this.tag){var v=l.getAttribute("_djrealurl")||l.getAttribute("src");var F=l.getAttribute("alt");this.editor.selection.selectElement(l,!0)}else F=this.editor.selection.getSelectedText();return{urlInput:v||"",textInput:F||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(d.hitch(this,function(){this.own(e(this.editor.editNode,"mousedown",d.hitch(this,"_selectTag")))}))},_selectTag:function(l){l&&l.target&&(l=l.target,(l.tagName?l.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(l))},_checkValues:function(l){l&&l.urlInput&&(l.urlInput=l.urlInput.replace(/"/g,"\x26quot;"));l&&l.textInput&&(l.textInput=l.textInput.replace(/"/g,"\x26quot;"));return l},_onDblClick:function(l){if(l&&l.target&&(l=l.target,(l.tagName?
l.tagName.toLowerCase():"")===this.tag&&r.get(l,"src"))){var v=this.editor;this.editor.selection.selectElement(l);v.onDisplayChanged();v._updateTimer&&(v._updateTimer.remove(),delete v._updateTimer);v.onNormalizedDisplayChanged();var F=this.button;setTimeout(function(){F.set("disabled",!1);F.loadAndOpenDropDown().then(function(){F.dropDown.focus&&F.dropDown.focus()})},10)}}});g.registry.createLink=function(l){var v={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in l?l.allowUnsafeHtml:!1};
"linkFilter"in l&&(v.linkFilter=l.linkFilter);return new t(v)};g.registry.insertImage=function(){return new x({command:"insertImage"})};t.ImgLinkDialog=x;return t})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v,F){var I=C("dijit._editor.plugins.ViewSource",x,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){h("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var B=b.getLocalization("dijit._editor","commands"),G=this.editor;this.button=new l({label:B.viewSource,ownerDocument:G.ownerDocument,dir:G.dir,lang:G.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:a.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(B){this.editor=B;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=z.before(this.editor,"setValue",a.hitch(this,function(G){return[this._filter(G)]}));this._getValueFilterHandle=z.after(this.editor,"getValue",a.hitch(this,function(G){return this._filter(G)}));this.editor.addKeyHandler(c.F12,!0,!0,a.hitch(this,function(G){this.button.focus();
this.toggle();G.stopPropagation();G.preventDefault();setTimeout(a.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(B){var G=this.editor,J=G._plugins;this._sourceShown=B;var D=this;try{this.sourceArea||this._createSourceView();if(B)G._sourceQueryCommandEnabled=G.queryCommandEnabled,G.queryCommandEnabled=function(u){return"viewsource"===u.toLowerCase()},this.editor.onDisplayChanged(),y.forEach(J,function(u){!u||u instanceof I||!u.isInstanceOf(x)||u.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return D.sourceArea}),this.sourceArea.value=G.get("value"),this.sourceArea.style.height=G.iframe.style.height,this.sourceArea.style.width=G.iframe.style.width,G.iframe.parentNode.style.position="relative",e.set(G.iframe,{position:"absolute",top:0,visibility:"hidden"}),e.set(this.sourceArea,{display:"block"}),this._resizeHandle=g(window,"resize",a.hitch(this,function(){var u=f.getBox(G.ownerDocument);"_prevW"in this&&"_prevH"in this&&
u.w===this._prevW&&u.h===this._prevH||(this._prevW=u.w,this._prevH=u.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(a.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(a.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=a.hitch(this,function(){var u=this.sourceArea.value;return u=this._filter(u)}),this._setListener=z.after(this.editor,
"setValue",a.hitch(this,function(u){this.sourceArea.value=u||""}),!0);else{if(!G._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);G.queryCommandEnabled=G._sourceQueryCommandEnabled;if(!this._readOnly){var p=this.sourceArea.value;G.beginEditing();G.set("value",p);G.endEditing()}y.forEach(J,function(u){u&&
u.isInstanceOf(x)&&u.set("disabled",!1)});e.set(this.sourceArea,"display","none");e.set(G.iframe,{position:"relative",visibility:"visible"});delete G._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(a.hitch(this,function(){var u=G.domNode.parentNode;u&&(u=F.getEnclosingWidget(u))&&u.resize&&u.resize();G.resize()}),300)}catch(u){console.log(u)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var B=this.editor,G=B.getHeaderHeight(),J=
B.getFooterHeight(),D=d.position(B.domNode),p=d.getPadBorderExtents(B.iframe.parentNode),u=d.getMarginExtents(B.iframe.parentNode),A=d.getPadBorderExtents(B.domNode),n=D.w-A.w;D=D.h-(G+A.h+J);this._fsPlugin&&this._fsPlugin.isFullscreen&&(B=f.getBox(B.ownerDocument),n=B.w-A.w,D=B.h-(G+A.h+J));d.setMarginBox(this.sourceArea,{w:Math.round(n-(p.w+u.w)),h:Math.round(D-(p.h+u.h))})},_createSourceView:function(){var B=this.editor,G=B._plugins;this.sourceArea=k.create("textarea");this.readOnly&&(r.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);e.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});r.set(this.sourceArea,"aria-label",this.editor.id);k.place(this.sourceArea,B.iframe,"before");h("ie")&&B.iframe.parentNode.lastChild!==B.iframe&&e.set(B.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});B._viewsource_oldFocus=B.focus;var J=this;B.focus=function(){if(J._sourceShown)J.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,t.focus(B.editNode)):B._viewsource_oldFocus()}catch(u){console.log("ViewSource focus code error: "+u)}};var D,p;for(D=0;D<G.length;D++)if((p=G[D])&&("dijit._editor.plugins.FullScreen"===p.declaredClass||p.declaredClass===v._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=p;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return J._sourceShown?J.sourceArea:this._viewsource_getAltViewNode()});
this.own(g(this.sourceArea,"keydown",a.hitch(this,function(u){this._sourceShown&&u.keyCode==c.F12&&u.ctrlKey&&u.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(a.hitch(this,function(){B.focus()}),100),u.stopPropagation(),u.preventDefault())})))},_stripScripts:function(B){B&&(B=B.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),B=B.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),B=B.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return B},_stripComments:function(B){B&&
(B=B.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return B},_stripIFrames:function(B){B&&(B=B.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return B},_stripEventHandlers:function(B){if(B){var G=B.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(G)for(var J=0,D=G.length;J<D;J++){var p=G[J],u=p.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");B=B.replace(p,u)}}return B},_filter:function(B){B&&(this.stripScripts&&(B=this._stripScripts(B)),this.stripComments&&(B=this._stripComments(B)),
this.stripIFrames&&(B=this._stripIFrames(B)),this.stripEventHandlers&&(B=this._stripEventHandlers(B)));return B},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var B=this.sourceArea;t.focus(B);this._sourceShown&&!this.readOnly&&(B.setSelectionRange?B.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(B=B.createTextRange(),B.collapse(!0),B.moveStart("character",-99999),B.moveStart("character",0),B.moveEnd("character",0),B.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});x.registry.viewSource=x.registry.viewsource=function(B){return new I({readOnly:"readOnly"in
B?B.readOnly:!1,stripComments:"stripComments"in B?B.stripComments:!0,stripScripts:"stripScripts"in B?B.stripScripts:!0,stripIFrames:"stripIFrames"in B?B.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in B?B.stripEventHandlers:!0})};return I})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x){y=C("dijit._editor.plugins._FontDropDown",[a,g,h],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:y,postMixInProperties:function(){this.inherited(arguments);this.strings=k.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=c.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new b({idProperty:"value",data:z.map(this.values,function(B){var G=this.strings[B]||B;return{label:this.getLabel(B,G),name:G,value:B}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(B,G){G=!1!==G;this.select.set("value",0>z.indexOf(this.values,B)?"":B,G);G||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(B){this._set("disabled",B);this.select.set("disabled",B)}});var l=C("dijit._editor.plugins._FontNameDropDown",y,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(B,G){return this.plainText?G:"\x3cdiv style\x3d'font-family: "+B+"'\x3e"+G+"\x3c/div\x3e"},_normalizeFontName:function(B){var G=this.values;if(!B||!G)return B;var J=B.split(",");if(1<J.length)for(var D=0,p=J.length;D<p;D++){var u=e.trim(J[D]);if(-1<z.indexOf(G,u))return u}return B},_setValueAttr:function(B,G){G=!1!==
G;B=this._normalizeFontName(B);this.generic&&(B={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[B]||B);this.inherited(arguments,[B,G])}}),v=C("dijit._editor.plugins._FontSizeDropDown",y,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(B,
G){return this.plainText?G:"\x3cfont size\x3d"+B+"'\x3e"+G+"\x3c/font\x3e"},_setValueAttr:function(B,G){G=!1!==G;B.indexOf&&-1!=B.indexOf("px")&&(B={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(B,10)]||B);this.inherited(arguments,[B,G])}}),F=C("dijit._editor.plugins._FormatBlockDropDown",y,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(B,G){return this.plainText||
"noFormat"==B?G:"\x3c"+B+"\x3e"+G+"\x3c/"+B+"\x3e"},_execCommand:function(B,G,J){if("noFormat"===J){var D;if((G=x.getSelection(B.window))&&0<G.rangeCount&&(J=G.getRangeAt(0),J)){G=J.startContainer;for(D=J.endContainer;G&&G!==B.editNode&&G!==B.document.body&&1!==G.nodeType;)G=G.parentNode;for(;D&&D!==B.editNode&&D!==B.document.body&&1!==D.nodeType;)D=D.parentNode;var p=d.hitch(this,function(q,H){if(q.childNodes&&q.childNodes.length){var M;for(M=0;M<q.childNodes.length;M++){var m=q.childNodes[M];if(1==
m.nodeType&&B.selection.inSelection(m)){var w=m.tagName?m.tagName.toLowerCase():"";-1!==z.indexOf(this.values,w)&&H.push(m);p(m,H)}}}});J=d.hitch(this,function(q){if(q&&q.length){for(B.beginEditing();q.length;)this._removeFormat(B,q.pop());B.endEditing()}});var u=[];if(G==D){for(D=G;D&&D!==B.editNode&&D!==B.document.body;){if(1==D.nodeType){var A=D.tagName?D.tagName.toLowerCase():"";if(-1!==z.indexOf(this.values,A)){var n=D;break}}D=D.parentNode}p(G,u);n&&(u=[n].concat(u))}else for(D=G;B.selection.inSelection(D);)1==
D.nodeType&&(A=D.tagName?D.tagName.toLowerCase():"",-1!==z.indexOf(this.values,A)&&u.push(D),p(D,u)),D=D.nextSibling;J(u);B.onDisplayChanged()}}else B.execCommand(G,J)},_removeFormat:function(B,G){if(B.customUndo){for(;G.firstChild;)r.place(G.firstChild,G,"before");G.parentNode.removeChild(G)}else{B.selection.selectElementChildren(G);var J=B.selection.getSelectedHtml();B.selection.selectElement(G);B.execCommand("inserthtml",J||"")}}}),I=C("dijit._editor.plugins.FontChoice",t,{useDefaultCommand:!1,
_initButton:function(){var B={fontName:l,fontSize:v,formatBlock:F}[this.command],G=this.params;this.params.custom&&(G.values=this.params.custom);var J=this.editor;this.button=new B(d.delegate({dir:J.dir,lang:J.lang},G));this.own(this.button.select.on("change",d.hitch(this,function(D){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=D.indexOf(" ")&&(D="'"+D+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,D):this.editor.execCommand(this.command,
D)})))},updateState:function(){var B=this.editor,G=this.command;if(B&&B.isLoaded&&G.length&&this.button){var J=this.get("disabled");this.button.set("disabled",J);if(!J){try{var D=B.queryCommandValue(G)||""}catch(u){D=""}(J=d.isString(D)&&(D.match(/'([^']*)'/)||D.match(/"([^"]*)"/)))&&(D=J[1]);"fontSize"!==G||D||(D=3);if("formatBlock"===G)if(D&&"p"!=D)0>z.indexOf(this.button.values,D)&&(D="noFormat");else{D=null;if((G=x.getSelection(this.editor.window))&&0<G.rangeCount&&(G=G.getRangeAt(0)))var p=G.endContainer;
for(;p&&p!==B.editNode&&p!==B.document;){if((G=p.tagName?p.tagName.toLowerCase():"")&&-1<z.indexOf(this.button.values,G)){D=G;break}p=p.parentNode}D||(D="noFormat")}D!==this.button.get("value")&&this.button.set("value",D,!1)}}}});z.forEach(["fontName","fontSize","formatBlock"],function(B){t.registry[B]=function(G){return new I({command:B,plainText:G.plainText})}});I._FontDropDown=y;I._FontNameDropDown=l;I._FontSizeDropDown=v;I._FormatBlockDropDown=F;return I})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(y,z,C,r){var k=y.declare("dojox.editor.plugins.Preview",r,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=y.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new z.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:y.hitch(this,"_preview")})},setEditor:function(d){this.editor=d;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var d=this.editor.get("value"),e="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",b;if(this.stylesheets)for(b=0;b<this.stylesheets.length;b++)e+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[b]+"'\x3e\n";this.styles&&(e+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");d="\x3chtml\x3e\n\t\x3chead\x3e\n"+e+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
d+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var c=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");c.document.open();c.document.write(d);c.document.close()}catch(a){console.warn(a)}}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"preview"!==d.args.name.toLowerCase()||(d.plugin=new k({styles:"styles"in d.args?d.args.styles:"",stylesheets:"stylesheets"in d.args?d.args.stylesheets:null}))});return k})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(y,z,C,r,k,d){var e=C("dijit._editor.plugins.TextColor",k,{buttonClass:d,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var b=this;this.button.loadDropDown=function(c){function a(g){b.button.dropDown=new g({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,value:b.value,onChange:function(h){b.editor.execCommand(b.command,h)},onExecute:function(){b.editor.execCommand(b.command,this.get("value"))}});c()}"string"==
typeof b.colorPicker?y([b.colorPicker],a):a(b.colorPicker)}},updateState:function(){var b=this.editor,c=this.command;if(b&&b.isLoaded&&c.length){if(this.button){var a=this.get("disabled");this.button.set("disabled",a);if(a)return;try{var g=b.queryCommandValue(c)||""}catch(h){g=""}}""==g&&(g="#000000");"transparent"==g&&(g="#ffffff");"string"==typeof g?-1<g.indexOf("rgb")&&(g=z.fromRgb(g).toHex()):(g=((g&255)<<16|g&65280|(g&16711680)>>>16).toString(16),g="#000000".slice(0,7-g.length)+g);this.value=
g;(b=this.button.dropDown)&&b.get&&g!==b.get("value")&&b.set("value",g,!1)}}});k.registry.foreColor=function(b){return new e(b)};k.registry.hiliteColor=function(b){return new e(b)};return e})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(y,z,C,r,k,d,e){var b=e("dojox.editor.plugins.ToolbarLineBreak",[r,k],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){y.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin){var a=c.args.name.toLowerCase();if("||"===a||"toolbarlinebreak"===a)c.plugin=new d({button:new b,setEditor:function(g){this.editor=g}})}});return b})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x){y.experimental("dojox.editor.plugins.FindReplace");var l=y.declare("dojox.editor.plugins._FindReplaceCloseBox",[d,e,c],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),v=y.declare("dojox.editor.plugins._FindReplaceTextBox",[d,e,c],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");y.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(G){this.value=G;this.textBox.set("value",G)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(G){this.disabled=G;this.textBox.set("disabled",
G)},onChange:function(G){this.value=G},_onKeyPress:function(G){var J=0,D=0;!G.target||G.ctrlKey||G.altKey||G.shiftKey||(G.keyCode==y.keys.LEFT_ARROW?(J=G.target.selectionStart,D=G.target.selectionEnd,J<D&&(z.selectInputText(G.target,J,J),y.stopEvent(G))):G.keyCode==y.keys.RIGHT_ARROW&&(J=G.target.selectionStart,D=G.target.selectionEnd,J<D&&(z.selectInputText(G.target,D,D),y.stopEvent(G))))}}),F=y.declare("dojox.editor.plugins._FindReplaceCheckBox",[d,e,c],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=z.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(G){this.checkBox.set("value",G)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(G){this.disabled=G;this.checkBox.set("disabled",G)}}),I=y.declare("dojox.editor.plugins._FindReplaceToolbar",g,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");y.addClass(this.domNode,"dijitToolbar")},addChild:function(G,J){z._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(G){G.stopPropagation()}}),B=y.declare("dojox.editor.plugins.FindReplace",[x],{buttonClass:z.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=y.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new z.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:y.hitch(this,
"_toggleFindReplace")});y.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",y.hitch(this,function(G,J){"disabled"===G&&this._toggleFindReplace(!J&&this._displayed,!0,!0)}))},setEditor:function(G){this.editor=G;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(G,J,D){var p=y.marginBox(this.editor.domNode);G&&!y.isOpera?(y.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),J||(this._displayed=
!0)):(y.style(this._frToolbar.domNode,"display","none"),J||(this._displayed=!1),D||this.editor.focus());this.editor.resize({h:p.h})},_populateFindField:function(){var G=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(G&&this._findField.textBox.set("value",G),this._findField.textBox.focus(),z.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(G){this.inherited(arguments);if(!y.isOpera){var J=this._frToolbar=new I;y.style(J.domNode,"display",
"none");y.place(J.domNode,G.domNode,"after");J.startup();this._closeBox=new l;J.addChild(this._closeBox);this._findField=new v({label:this._strings.findLabel,tooltip:this._strings.findTooltip});J.addChild(this._findField);this._replaceField=new v({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});J.addChild(this._replaceField);J.addChild(new C.editor.plugins.ToolbarLineBreak);this._findButton=new z.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;J.addChild(this._findButton);this._replaceButton=new z.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;J.addChild(this._replaceButton);this._replaceAllButton=new z.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;J.addChild(this._replaceAllButton);this._caseSensitive=new F({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});J.addChild(this._caseSensitive);this._backwards=new F({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});J.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new z.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(G){G.keyCode==y.keys.ENTER&&(this._find(),y.stopEvent(G))},_onReplaceKeyDown:function(G){G.keyCode==y.keys.ENTER&&(this._replace()||this._replace(),y.stopEvent(G))},_find:function(G){var J=this._findField.get("value")||"";if(J){var D=this._caseSensitive.get("value"),
p=this._backwards.get("value");J=this._findText(J,D,p);!J&&G&&(this._promDialog.set("content",y.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),z.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;z.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this.editor.focus()}),0));return J}return!1},_replace:function(G){var J=
!1,D=this.editor;D.focus();var p=this._findField.get("value")||"",u=this._replaceField.get("value")||"";if(p){var A=this._caseSensitive.get("value"),n=this._backwards.get("value"),q=D._sCall("getSelectedText",[null]);y.isMoz&&(p=y.trim(p),q=y.trim(q));p=this._filterRegexp(p,!A);q&&p.test(q)&&(D.execCommand("inserthtml",u),J=!0,n&&(this._findText(u,A,n),D._sCall("collapse",[!0])));!this._find(!1)&&G&&(this._promDialog.set("content",y.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
z.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;z.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this.editor.focus()}),0));return J}return null},_replaceAll:function(G){var J=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&J++;var D=y.hitch(this,function(){this._replace(!1)?
(J++,setTimeout(D,10)):G&&(this._promDialog.set("content",y.string.substitute(this._strings.replaceDialogText,{0:""+J})),z.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(y.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;z.popup.close(this._promDialog)}),3E3),setTimeout(y.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});D()},_findText:function(G,J,
D){var p=this.editor,u=p.window,A=!1;if(G)if(u.find)A=u.find(G,J,D,!1,!1,!1,!1);else{var n=p.document;if(n.selection||u.getSelection)if(this.editor.focus(),p=n.body.createTextRange(),A=p.duplicate(),u.getSelection().getRangeAt(0),(n=n.selection?n.selection.createRange():null)?D?p.setEndPoint("EndToStart",n):p.setEndPoint("StartToEnd",n):this._bookmark&&(u=u.getSelection().toString(),p.moveToBookmark(this._bookmark),p.text!=u?(p=A.duplicate(),this._bookmark=null):(D?A.setEndPoint("EndToStart",p):A.setEndPoint("StartToEnd",
p),p=A.duplicate())),J=J?4:0,D&&(J|=1),A=p.findText(G,p.text.length,J))p.select(),this._bookmark=p.getBookmark()}return A},_filterRegexp:function(G,J){for(var D="",p=null,u=0;u<G.length;u++)switch(p=G.charAt(u),p){case "\\":D+=p;u++;D+=G.charAt(u);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":D+="\\";default:D+=p}D="^"+D+"$";return J?new RegExp(D,"mi"):new RegExp(D,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,z.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});B._FindReplaceCloseBox=l;B._FindReplaceTextBox=v;B._FindReplaceCheckBox=F;B._FindReplaceToolbar=I;y.subscribe(z._scopeName+".Editor.getPlugin",null,function(G){G.plugin||"findreplace"!==
G.args.name.toLowerCase()||(G.plugin=new B({}))});return B})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(y,z,C,r){var k=y.declare("dojox.editor.plugins.PasteFromWord",
r,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var d=y.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");y.mixin(d,y.i18n.getLocalization("dijit","common"));y.mixin(d,y.i18n.getLocalization("dijit._editor","commands"));this.button=new z.form.Button({label:d.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:y.hitch(this,"_openDialog")});this._uId=z.getUniqueId(this.editor.id);d.uId=this._uId;d.width=this.width||"400px";d.height=this.height||"300px";this._dialog=(new z.Dialog({title:d.pasteFromWord})).placeAt(y.body());this._dialog.set("content",y.string.substitute(this._template,d));y.style(y.byId(this._uId+"_rte"),"opacity",.001);this.connect(z.byId(this._uId+"_paste"),"onClick","_paste");this.connect(z.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(y.hitch(this,function(){this._rte=new z._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(y.hitch(this,function(){y.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var d=C.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var e;for(e=0;e<this._filters.length;e++){var b=this._filters[e];d=d.replace(b.regexp,b.handler)}d=C.html.format.prettyPrint(d);this.editor.focus();this.editor.execCommand("inserthtml",d)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(d){d.plugin||"pastefromword"!==d.args.name.toLowerCase()||(d.plugin=new k({width:"width"in d.args?d.args.width:"400px",height:"height"in d.args?d.args.width:"300px"}))});return k})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(y,z,C,r,k){var d=y.getObject("dojox.html.format",!0);d.prettyPrint=
function(e,b,c,a,g){var h=[],f=0,t=[],x="\t",l="",v=[],F,I=/[=]([^"']+?)(\s|>)/g,B=/style=("[^"]*"|'[^']*'|\S*)/gi,G=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(b&&0<b&&10>b)for(x="",F=0;F<b;F++)x+=" ";b=r.doc.createElement("div");b.innerHTML=e;var J=z.encode,D=z.decode,p=b.ownerDocument.createElement("div"),u=function(w){w=w.cloneNode(!1);p.appendChild(w);w=p.innerHTML;p.innerHTML="";return w},A=function(){var w;for(w=0;w<f;w++)h.push(x)},n=function(){h.push("\n")},q=function(w){var E;w=w.split("\n");for(E=
0;E<w.length;E++)w[E]=y.trim(w[E]);w=w.join(" ");w=y.trim(w);if(""!==w){var L=[];if(c&&0<c){var K="";for(E=0;E<f;E++)K+=x;E=K.length;K=c;for(c>E&&(K-=E);w;)if(w.length>c){for(E=K;0<E&&" "!==w.charAt(E);E--);if(!E)for(E=K;E<w.length&&" "!==w.charAt(E);E++);var N=w.substring(0,E);N=y.trim(N);w=y.trim(w.substring(E==w.length?w.length:E+1,w.length));if(N){var O="";for(E=0;E<f;E++)O+=x;N=O+N+"\n"}L.push(N)}else{O="";for(E=0;E<f;E++)O+=x;w=O+w+"\n";L.push(w);w=null}return L.join("")}O="";for(E=0;E<f;E++)O+=
x;return O+w+"\n"}return""},H=function(w){if(w){var E=w;E&&(E=E.replace(/&quot;/gi,'"'),E=E.replace(/&gt;/gi,"\x3e"),E=E.replace(/&lt;/gi,"\x3c"),E=E.replace(/&amp;/gi,"\x26"));var L;w=0;var K=E.split("\n"),N=[];for(E=0;E<K.length;E++){var O=K[E],Q=-1<O.indexOf("\n");if(O=y.trim(O)){Q=w;for(L=0;L<O.length;L++){var P=O.charAt(L);"{"===P?w++:"}"===P&&(w--,Q=w)}P="";for(L=0;L<f+Q;L++)P+=x;N.push(P+O+"\n")}else Q&&0===E&&N.push("\n")}w=N.join("")}return w},M=function(w){var E=w.nodeName.toLowerCase(),
L=y.trim(u(w));w=L.substring(0,L.indexOf("\x3e")+1);w=w.replace(I,'\x3d"$1"$2');w=w.replace(B,function(N){var O=N.substring(0,6);N=N.substring(6,N.length);var Q=N.charAt(0);N=y.trim(N.substring(1,N.length-1));N=N.split(";");var P=[];C.forEach(N,function(R){if(R=y.trim(R))R=R.substring(0,R.indexOf(":")).toLowerCase()+R.substring(R.indexOf(":"),R.length),P.push(R)});P=P.sort();N=P.join("; ");var S=y.trim(N);return S&&";"!==S?O+Q+(N+";")+Q:""});var K=[];w=w.replace(G,function(N){K.push(y.trim(N));return""});
K=K.sort();w="\x3c"+E;K.length&&(w+=" "+K.join(" "));-1!=L.indexOf("\x3c/")?(t.push(E),w+="\x3e"):(w=g?w+" /\x3e":w+"\x3e",t.push(!1));a:switch(E){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":E=!0;break a;default:E=!1}v.push(E);l&&!E&&(h.push(q(l)),l="");E?l+=w:(A(),h.push(w),n(),f++)},m=function(w){var E=w.childNodes;if(E){var L;for(L=0;L<E.length;L++){var K=E[L];if(1===
K.nodeType){var N=y.trim(K.tagName.toLowerCase());k("ie")&&K.parentNode!=w||N&&"/"===N.charAt(0)||(M(K),"script"===N?h.push(H(K.innerHTML)):"pre"===N?(K=K.innerHTML,k("mozilla")&&(K=K.replace("\x3cbr\x3e","\n"),K=K.replace("\x3cpre\x3e",""),K=K.replace("\x3c/pre\x3e","")),"\n"!==K.charAt(K.length-1)&&(K+="\n"),h.push(K)):m(K),K=v.pop(),l&&!K&&(h.push(q(l)),l=""),(N=t.pop())?(N="\x3c/"+N+"\x3e",K?l+=N:(f--,A(),h.push(N),n())):f--)}else 3===K.nodeType||4===K.nodeType?l+=J(K.nodeValue,a):8===K.nodeType&&
(K=D(K.nodeValue,a),A(),h.push("\x3c!--"),n(),f++,h.push(q(K)),f--,A(),h.push("--\x3e"),n())}}};m(b);l&&(h.push(q(l)),l="");return h.join("")};return d})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(y,z,C,r){var k=y.declare("dojox.editor.plugins.InsertAnchor",r,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var d=this,e=y.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),b=this.dropDown=new z.TooltipDialog({title:e.title,execute:y.hitch(this,"setValue"),onOpen:function(){d._onOpenDialog();z.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(y.hitch(d,"_onCloseDialog"),0)}});this.button=new z.form.DropDownButton({label:e.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});e.id=z.getUniqueId(this.editor.id);this._uniqueId=e.id;this.dropDown.set("content",b.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+y.string.substitute(this._template,e));b.startup();this._anchorInput=z.byId(this._uniqueId+"_anchorInput");this._textInput=z.byId(this._uniqueId+"_textInput");this._setButton=z.byId(this._uniqueId+"_setButton");this.connect(z.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(y.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(y.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(d){this.editor=d;this._initButton()},_checkInput:function(){var d=!0;this._anchorInput.isValid()&&
(d=!1);this._setButton.set("disabled",d)},_setup:function(){this.editor.onLoadDeferred.addCallback(y.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(y.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var d=y.moduleUrl(C._scopeName,"editor/plugins/resources").toString();if(!d.match(/^https?:\/\//i)&&!d.match(/^file:\/\//i)){var e="/"===d.charAt(0)?y.doc.location.protocol+"//"+y.doc.location.host:this._calcBaseUrl(y.global.location.href);
"/"!==e[e.length-1]&&"/"!==d.charAt(0)&&(e+="/");d=e+d}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,d)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var d=this.editor.document,e=this.getAnchorStyle();if(y.isIE)d.createStyleSheet("").cssText=
e;else{var b=d.createElement("style");b.appendChild(d.createTextNode(e));d.getElementsByTagName("head")[0].appendChild(b)}}catch(c){}},_calcBaseUrl:function(d){var e=null;null!==d&&(e=d.indexOf("?"),-1!=e&&(d=d.substring(0,e)),e=d.lastIndexOf("/"),e=0<e&&e<d.length?d.substring(0,e):d);return e},_checkValues:function(d){d&&(d.anchorInput&&(d.anchorInput=d.anchorInput.replace(/"/g,"\x26quot;")),d.textInput||(d.textInput="\x26nbsp;"));return d},setValue:function(d){this._onCloseDialog();if(!this.editor.window.getSelection){var e=
z.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===e.nodeType&&(e=e.parentNode);e&&e.nodeName&&"a"!==e.nodeName.toLowerCase()&&(e=this.editor._sCall("getSelectedElement",["a"]));e&&e.nodeName&&"a"===e.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[e]),this.editor.execCommand("unlink"))}d=this._checkValues(d);this.editor.execCommand("inserthtml",y.string.substitute(this.htmlTemplate,d))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(d){if(d&&"a"===d.tagName.toLowerCase()&&y.attr(d,"name")){var e=y.attr(d,"name");var b=d.textContent||d.innerText;this.editor._sCall("selectElement",[d,!0])}else b=this.editor._sCall("getSelectedText");return{anchorInput:e||"",textInput:b||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var d=this.editor._sCall("getAncestorElement",["a"]);else d=z.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===d.nodeType&&(d=d.parentNode),d&&d.nodeName&&
"a"!==d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(d))},_onDblClick:function(d){d&&d.target&&(d=d.target,"a"===(d.tagName?d.tagName.toLowerCase():"")&&y.attr(d,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[d]),setTimeout(y.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(d){y.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(d){d&&y.query("a[name]:not([href])",d).removeClass("dijitEditorPluginInsertAnchorStyle");return d}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin){var e=d.args.name;e&&(e=e.toLowerCase());"insertanchor"===e&&(d.plugin=new k)}});return k})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(y,z,C,r){var k=y.declare("dojox.editor.plugins.Blockquote",r,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=y.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new z.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:y.hitch(this,"_toggleQuote")})},setEditor:function(d){this.editor=d;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");d.customUndo=!0},_toggleQuote:function(d){try{var e=this.editor;e.focus();var b=this.button.get("checked"),c=z.range.getSelection(e.window),a,g,h,f;c&&0<c.rangeCount&&(a=c.getRangeAt(0));if(a){e.beginEditing();if(b)if(a.startContainer===a.endContainer){if(this._isRootInline(a.startContainer)){for(h=a.startContainer;h&&h.parentNode!==e.editNode;)h=h.parentNode;for(;h&&h.previousSibling&&(this._isTextElement(h)||1===h.nodeType&&this._isInlineFormat(this._getTagName(h)));)h=
h.previousSibling;h&&1===h.nodeType&&!this._isInlineFormat(this._getTagName(h))&&(h=h.nextSibling);if(h){var t=e.document.createElement("blockquote");y.place(t,h,"after");t.appendChild(h);for(f=t.nextSibling;f&&(this._isTextElement(f)||1===f.nodeType&&this._isInlineFormat(this._getTagName(f)));)t.appendChild(f),f=t.nextSibling}}else{for(var x=a.startContainer;(this._isTextElement(x)||this._isInlineFormat(this._getTagName(x))||"li"===this._getTagName(x))&&x!==e.editNode&&x!==e.document.body;)x=x.parentNode;
x!==e.editNode&&x!==x.ownerDocument.documentElement&&(t=e.document.createElement("blockquote"),y.place(t,x,"after"),t.appendChild(x))}t&&(e._sCall("selectElementChildren",[t]),e._sCall("collapse",[!0]))}else{var l;h=a.startContainer;for(f=a.endContainer;h&&this._isTextElement(h)&&h.parentNode!==e.editNode;)h=h.parentNode;for(l=h;l.nextSibling&&e._sCall("inSelection",[l]);)l=l.nextSibling;f=l;if(f===e.editNode||f===e.document.body){t=e.document.createElement("blockquote");y.place(t,h,"after");var v=
this._getTagName(h);if(this._isTextElement(h)||this._isInlineFormat(v))for(e=h;e&&(this._isTextElement(e)||1===e.nodeType&&this._isInlineFormat(this._getTagName(e)));)t.appendChild(e),e=t.nextSibling;else t.appendChild(h);return}f=f.nextSibling;for(l=h;l&&l!==f;){if(1===l.nodeType){if(v=this._getTagName(l),"br"!==v){if(!window.getSelection&&"p"===v&&this._isEmpty(l)){l=l.nextSibling;continue}this._isInlineFormat(v)?t||(t=e.document.createElement("blockquote"),y.place(t,l,"after")):(t&&this._isEmpty(t)&&
t.parentNode.removeChild(t),t=e.document.createElement("blockquote"),y.place(t,l,"after"));t.appendChild(l);l=t}}else this._isTextElement(l)&&(t||(t=e.document.createElement("blockquote"),y.place(t,l,"after")),t.appendChild(l),l=t);l=l.nextSibling}t&&(this._isEmpty(t)?t.parentNode.removeChild(t):(e._sCall("selectElementChildren",[t]),e._sCall("collapse",[!0])),t=null)}else if(t=!1,a.startContainer===a.endContainer){for(g=a.endContainer;g&&g!==e.editNode&&g!==e.document.body;){if("blockquote"===(g.tagName?
g.tagName.toLowerCase():"")){t=!0;break}g=g.parentNode}if(t){for(var F;g.firstChild;)F=g.firstChild,y.place(F,g,"before");g.parentNode.removeChild(g);F&&(e._sCall("selectElementChildren",[F]),e._sCall("collapse",[!0]))}}else{h=a.startContainer;for(f=a.endContainer;h&&this._isTextElement(h)&&h.parentNode!==e.editNode;)h=h.parentNode;for(a=[];h&&h.nextSibling&&e._sCall("inSelection",[h]);)h.parentNode&&"blockquote"===this._getTagName(h.parentNode)&&(h=h.parentNode),a.push(h),h=h.nextSibling;for(var I=
this._findBlockQuotes(a);I.length;){var B=I.pop();if(B.parentNode){for(;B.firstChild;)y.place(B.firstChild,B,"before");B.parentNode.removeChild(B)}}}e.endEditing()}e.onNormalizedDisplayChanged()}catch(G){}},updateState:function(){var d=this.editor,e=this.get("disabled");if(d&&d.isLoaded&&this.button&&(this.button.set("disabled",e),!e)){e=!1;var b=z.range.getSelection(d.window);if(b&&0<b.rangeCount&&(b=b.getRangeAt(0)))var c=b.endContainer;for(;c&&c!==d.editNode&&c!==d.document;){if("blockquote"===
(c.tagName?c.tagName.toLowerCase():"")){e=!0;break}c=c.parentNode}this.button.set("checked",e)}},_findBlockQuotes:function(d){var e=[];if(d){var b;for(b=0;b<d.length;b++){var c=d[b];1===c.nodeType&&("blockquote"===this._getTagName(c)&&e.push(c),c.childNodes&&0<c.childNodes.length&&(e=e.concat(this._findBlockQuotes(c.childNodes))))}}return e},_getTagName:function(d){var e="";d&&1===d.nodeType&&(e=d.tagName?d.tagName.toLowerCase():"");return e},_isRootInline:function(d){var e=this.editor;if(this._isTextElement(d)&&
d.parentNode===e.editNode||1===d.nodeType&&this._isInlineFormat(d)&&d.parentNode===e.editNode)return!0;if(this._isTextElement(d)&&this._isInlineFormat(this._getTagName(d.parentNode))){for(d=d.parentNode;d&&d!==e.editNode&&this._isInlineFormat(this._getTagName(d));)d=d.parentNode;if(d===e.editNode)return!0}return!1},_isTextElement:function(d){return d&&3===d.nodeType||4===d.nodeType?!0:!1},_isEmpty:function(d){if(d.childNodes){var e=!0,b;for(b=0;b<d.childNodes.length;b++){var c=d.childNodes[b];if(1===
c.nodeType){if("p"!==this._getTagName(c)||y.trim(c.innerHTML)){e=!1;break}}else if(this._isTextElement(c)){if((c=y.trim(c.nodeValue))&&"\x26nbsp;"!==c&&"\u00a0"!==c){e=!1;break}}else{e=!1;break}}return e}return!0},_isInlineFormat:function(d){switch(d){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});y.subscribe(z._scopeName+".Editor.getPlugin",
null,function(d){d.plugin||"blockquote"!==d.args.name.toLowerCase()||(d.plugin=new k({}))});return k})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(y,z,C,r){y.experimental("dojox.editor.plugins.UploadImage");var k=y.declare("dojox.editor.plugins.UploadImage",r,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(d){this.button.destroy();this.createFileInput();d.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var d=y.create("span",{innerHTML:"."},document.body);y.style(d,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new C.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},d);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(d,e,b){d=d[0];e=y.byId(this.currentImageId,this.editor.document);b=this.downloadPath?this.downloadPath+d.name:d.file;
e.src=b;y.attr(e,"_djrealurl",b);d.width&&(e.width=d.width,e.height=d.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "uploadImage":d.plugin=new k({url:d.args.url})}});return k})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v,F,I,B,G,J,D,p,u,A){y.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return z("dojox.form.FileUploader",[G,J,D],{swfPath:l.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(p.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var n="createFlashUploader";else this.uploaderType="html",n="createHtmlUploader";this[n]();this.fileListId&&this.connect(c.byId(this.fileListId),"click",function(q){q=q.target.parentNode.parentNode.parentNode;q.id&&-1<q.id.indexOf("file_")&&
this.removeFile(q.id.split("file_")[1])});B.addOnUnload(this,this.destroy)},getHiddenNode:function(n){if(!n)return null;var q=null;for(n=n.parentNode;n&&"body"!=n.tagName.toLowerCase();){if("none"==a.get(n,"display")){q=n;break}n=n.parentNode}return q},getButtonStyle:function(){var n=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(n))&&a.set(this._hiddenNode,"display","block");if(!n&&this.button&&this.button.domNode){var q=!0;n=this.button.domNode.className+" dijitButtonNode";var H=this.getText(b(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=n=t.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+n+'"\x3e'+H+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(n=this.button);h.get(n,"class")&&(this.baseClass+=" "+h.get(n,"class"));h.set(n,"class",this.baseClass);this.norm=this.getStyle(n);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(n,this.baseClass+" "+this.hoverClass,q),this.down=this.getTempNodeStyle(n,this.baseClass+" "+this.activeClass,q),this.dsbl=this.getTempNodeStyle(n,this.baseClass+" "+this.disabledClass,q),this.fhtml={cn:this.getText(n),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(n),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){a.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&a.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
a.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),a.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):t.destroy(this.progNode);
a.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});f.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&f.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(q){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);d.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var n=k.connect(this,"onReady",this,function(){k.disconnect(n);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&a.set(this._hiddenNode,"display","none")},onChange:function(n){},onProgress:function(n){},onComplete:function(n){},onCancel:function(){},onError:function(n){},onReady:function(n){},onLoad:function(n){},submit:function(n){n=n?x.toObject(n):null;this.upload(n);return!1},upload:function(n){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var q=v.byId(this.progressWidgetId).domNode;"none"==a.get(q,"display")&&(this.restoreProgDisplay="none",a.set(q,"display","block"));"hidden"==a.get(q,"visibility")&&(this.restoreProgDisplay="hidden",a.set(q,"visibility","visible"))}n&&!n.target&&(this.postData=n);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(n=0;n<this.fileList.length;n++)q=
this.fileList[n],q.bytesLoaded=0,q.bytesTotal=q.size||1E5,q.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(n,q){var H;for(H=0;H<this.fileList.length;H++)if(this.fileList[H].name==n){q||this.fileList.splice(H,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(n):q||(t.destroy(this.fileInputs[H]),this.fileInputs.splice(H,1),this._renumberInputs());this.fileListId&&t.destroy("file_"+n)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(r.forEach(this._subs,k.unsubscribe,dojo),r.forEach(this._cons,k.disconnect,dojo),this.scrollConnect&&k.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(t.destroy(this._fileInput),t.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(k.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(n){!0===n?("flash"==this.uploaderType?a.set(this.insideNode,"top","-2500px"):a.set(this.insideNode,"display",
"none"),a.set(this.progNode,"display","")):!1===n?(a.set(this.insideNode,{display:"",top:"0"}),a.set(this.progNode,"display","none")):a.set(this.progNode,"width",n*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var n=!1,q=k.connect(this,"_complete",function(){k.disconnect(q);n=!0}),H=0,M=setInterval(C.hitch(this,function(){H+=5;H>this.fhtml.nr.w&&(H=0,n=!0);this._displayProgress(H/this.fhtml.nr.w);n&&(clearInterval(M),setTimeout(C.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(n){"string"==typeof n&&(n=Error(n));this.onError(n)},_addToFileList:function(){if(this.fileListId){var n="";r.forEach(this.fileList,function(q){n+='\x3ctable id\x3d"file_'+q.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+q.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(q.size?Math.ceil(.001*q.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);c.byId(this.fileListId).innerHTML=
n}},_change:function(n){e("ie")&&r.forEach(n,function(q){q.name=q.name.split("\\")[q.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(n):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=n);this._addToFileList();this.onChange(n);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(n){n=
C.isArray(n)?n:[n];r.forEach(n,function(q){q.ERROR&&this._error(q.ERROR)},this);r.forEach(this.fileList,function(q){q.bytesLoaded=1;q.bytesTotal=1;q.percent=100;this._progress(q)},this);r.forEach(this.fileList,function(q){this.removeFile(q.name,!0)},this);this.onComplete(n);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(C.hitch(this,function(){a.set(v.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(n){for(var q=0,H=0,M=0;M<this.fileList.length;M++){var m=this.fileList[M];m.name==n.name&&(m.bytesLoaded=n.bytesLoaded,m.bytesTotal=n.bytesTotal,m.percent=Math.ceil(m.bytesLoaded/m.bytesTotal*100),this.log(m.name,"percent:",m.percent));H+=Math.ceil(.001*m.bytesLoaded);q+=Math.ceil(.001*m.bytesTotal)}n=Math.ceil(H/q*100);this.progressWidgetId&&v.byId(this.progressWidgetId).update({progress:n+"%"});this.showProgress&&this._displayProgress(.01*n);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(n){if(this._disabled!=n){if("flash"==this.uploaderType){if(!this.flashReady){var q=k.connect(this,"onLoad",this,function(){k.disconnect(q);this._setDisabledAttr(n)});return}this._disabled=n;this.flashMovie.doDisable(n)}else this._disabled=n,a.set(this._fileInput,"display",this._disabled?"none":"");f.toggle(this.domNode,this.disabledClass,n)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var n=
b("[tabIndex]"),q=0;q<n.length;q++)if(n[q].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=n[q];break}this.nextFocusObject.focus()},_disconnect:function(){r.forEach(this._cons,k.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&t.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();F.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:C.hitch(this,function(n){this._error("HTML Upload Error:"+n.message)}),load:C.hitch(this,
function(n,q,H){this._complete(n)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();a.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(k.connect(this._fileInput,"mouseover",this,function(n){f.add(this.domNode,this.hoverClass);this.onMouseOver(n)}));this._cons.push(k.connect(this._fileInput,"mouseout",this,function(n){setTimeout(C.hitch(this,
function(){f.remove(this.domNode,this.activeClass);f.remove(this.domNode,this.hoverClass);this.onMouseOut(n);this._checkHtmlCancel("off")}),0)}));this._cons.push(k.connect(this._fileInput,"mousedown",this,function(n){f.add(this.domNode,this.activeClass);f.remove(this.domNode,this.hoverClass);this.onMouseDown(n)}));this._cons.push(k.connect(this._fileInput,"mouseup",this,function(n){f.remove(this.domNode,this.activeClass);this.onMouseUp(n);this.onClick(n);this._checkHtmlCancel("up")}));this._cons.push(k.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var n=this._fileInput.value;n?this._change([{name:n,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&h.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(n){"change"==n&&(this.dialogIsOpen=!1);"up"==n&&(this.dialogIsOpen=!0);if("off"==n){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var n=this.fhtml.nr;a.set(this.insideNode,{width:n.w+"px",height:"middle"==n.va?n.h+"px":"auto",
textAlign:n.ta,paddingTop:n.p[0]+"px",paddingRight:n.p[1]+"px",paddingBottom:n.p[2]+"px",paddingLeft:n.p[3]+"px"});try{a.set(this.insideNode,"lineHeight","inherit")}catch(q){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],b("*",this._formNode).forEach(function(n){t.destroy(n)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>e("ie")||e("ie")&&e("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=v.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=t.create("form",{enctype:"multipart/form-data",method:"post",id:v.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,a.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var n=
this.htmlFieldName;this.selectMultipleFiles&&(n+=this.fileCount,this.fileCount++);h.set(this._fileInput,{id:this.id,name:n,type:"file"});f.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);n=g.getMarginBox(this._fileInput);a.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-n.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var n;this.fileCount=0;r.forEach(this.fileInputs,function(q){n=this.htmlFieldName+this.fileCount;this.fileCount++;
h.set(q,"name",n)},this)}},_setFormStyle:function(){A.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");a.set(this.domNode,{overflow:"hidden",position:"relative"});a.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var n in this.postData)t.create("input",{type:"hidden",name:n,value:this.postData[n]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var n=k.connect(this,"_complete",this,function(){k.disconnect(n);this._displayProgress(!1)})}var q={},H;for(H in this.postData)q[H]=this.postData[H];this.flashMovie.doUpload(q)}catch(M){this._error("FileUploader - Sorry, the SWF failed to initialize."+M)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var n=window.location.href.split("/");n.pop();n=n.join("/")+"/";this.uploadUrl=n+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",n," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");n={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:u.serialize("fh",this.fhtml),fileMask:u.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new p(n,this.insideNode);this.flashObject.onError=C.hitch(function(q){this._error("Flash Error: "+q)});this.flashObject.onReady=C.hitch(this,function(){a.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=C.hitch(this,function(q){this.flashMovie=q;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&h.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(n,q){this._subs.push(k.subscribe(this.id+n,this,q))},urlencode:function(n){return n&&"none"!=n?n.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(n){n=n.tagName.toLowerCase();
return"button"==n||"input"==n},getTextStyle:function(n){var q={};q.ff=a.get(n,"fontFamily");if(q.ff){q.ff=q.ff.replace(", ",",");q.ff=q.ff.replace(/"|'/g,"");q.ff="sans-serif"==q.ff?"Arial":q.ff;q.fw=a.get(n,"fontWeight");q.fi=a.get(n,"fontStyle");q.fs=parseInt(a.get(n,"fontSize"),10);if(-1<a.get(n,"fontSize").indexOf("%"))for(var H=n;H.tagName;){if(-1==a.get(H,"fontSize").indexOf("%")){q.fs=parseInt(a.get(H,"fontSize"),10);break}"body"==H.tagName.toLowerCase()&&(q.fs=.16*parseInt(a.get(H,"fontSize"),
10));H=H.parentNode}q.fc=(new I(a.get(n,"color"))).toHex();q.fc=parseInt(q.fc.substring(1,Infinity),16)}q.lh=a.get(n,"lineHeight");q.ta=a.get(n,"textAlign");q.ta="start"!=q.ta&&q.ta?q.ta:"left";q.va=this.isButton(n)?"middle":q.lh==q.h?"middle":a.get(n,"verticalAlign");return q},getText:function(n){n=C.trim(n.innerHTML);-1<n.indexOf("\x3c")&&(n=escape(n));return n},getStyle:function(n){var q={},H=g.getContentBox(n),M=g.getPadExtents(n);q.p=[M.t,M.w-M.l,M.h-M.t,M.l];q.w=H.w+M.w;q.h=H.h+M.h;q.d=a.get(n,
"display");H=new I(a.get(n,"backgroundColor"));q.bc=0==H.a?"#ffffff":H.toHex();q.bc=parseInt(q.bc.substring(1,Infinity),16);if(H=this.urlencode(a.get(n,"backgroundImage")))q.bi={url:H,rp:a.get(n,"backgroundRepeat"),pos:escape(a.get(n,"backgroundPosition"))},q.bi.pos||(H=a.get(n,"backgroundPositionX"),M=a.get(n,"backgroundPositionY"),q.bi.pos=escape(("left"==H?"0%":"right"==H?"100%":H)+" "+("top"==M?"0%":"bottom"==M?"100%":M)));return C.mixin(q,this.getTextStyle(n))},getTempNodeStyle:function(n,q,
H){if(H){H=t.place("\x3c"+n.tagName+"\x3e\x3cspan\x3e"+n.innerHTML+"\x3c/span\x3e\x3c/"+n.tagName+"\x3e",n.parentNode);var M=H.firstChild;f.add(M,n.className);f.add(H,q);n=this.getStyle(M)}else H=t.place("\x3c"+n.tagName+"\x3e"+n.innerHTML+"\x3c/"+n.tagName+"\x3e",n.parentNode),f.add(H,n.className),f.add(H,q),H.id=n.id,n=this.getStyle(H);t.destroy(H);return n}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(y,z,C,r,k,d,e,b,c,a,g,h,f){C.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");d=f._iframeName;d=d.substring(0,d.lastIndexOf("_"));var t=r.delegate(f,{create:function(){return t._frame=f.create.apply(f,arguments)},get:null,post:null,send:function(x){var l=k._ioSetArgs(x,function(J){G&&G.cancel()},function(J){var D=null;J=J.ioArgs;try{var p=J.handleAs;"xml"===p||"html"===p?D=G.response.data:(D=G.response.text,"json"===p?D=z.fromJson(D):"javascript"===p&&(D=C.eval(D)))}catch(u){D=
u}return D},function(J,D){D.ioArgs._hasError=!0;return J}),v=l.ioArgs,F="GET",I=b.byId(x.form);x.method&&"POST"===x.method.toUpperCase()&&I&&(F="POST");x={method:F,handleAs:"json"===x.handleAs||"javascript"===x.handleAs?"text":x.handleAs,form:x.form,query:I?null:x.content,data:I?x.content:null,timeout:x.timeout,ioArgs:v};x.method&&(x.method=x.method.toUpperCase());if(y.ioPublish&&C.publish&&!1!==v.args.ioPublish)var B=h.after(f,"_notifyStart",function(J){J.options.ioArgs===v&&(B.remove(),k._ioNotifyStart(l))},
!0);var G=f(v.url,x,!0);v._callNext=G._callNext;G.then(function(){l.resolve(l)}).otherwise(function(J){l.ioArgs.error=J;l.reject(J)});return l},_iframeOnload:e.global[d+"_onload"]});r.setObject("dojo.io.iframe",t);return t})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(y,z,C,r,k,d,e,b,c){function a(l){l=y.delegate(h,l);if(!("path"in l))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in l||(l.id="dojox-embed-flash-"+g++);return l}var g=0,h={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(k("ie")){var f=function(l){l=a(l);if(!l)return null;var v,F=l.path;if(l.vars){var I=[];for(v in l.vars)I.push(encodeURIComponent(v)+"\x3d"+encodeURIComponent(l.vars[v]));l.params.FlashVars=I.join("\x26");delete l.vars}F='\x3cobject id\x3d"'+c.escape(String(l.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
c.escape(String(l.width))+'" height\x3d"'+c.escape(String(l.height))+'"'+(l.style?' style\x3d"'+c.escape(String(l.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+c.escape(String(F))+'" /\x3e';if(l.params)for(v in l.params)F+='\x3cparam name\x3d"'+c.escape(v)+'" value\x3d"'+c.escape(String(l.params[v]))+'" /\x3e';return{id:l.id,markup:F+"\x3c/object\x3e"}};var t=function(){for(var l=10,v=null;!v&&7<l;)try{v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+l--)}catch(F){}return v?(l=v.GetVariable("$version").split(" ")[1].split(","),
{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();z.addOnWindowUnload(function(){console.warn("***************UNLOAD");var l=function(){};r("object").reverse().style("display","none").forEach(function(v){for(var F in v)if("FlashVars"!=F&&"function"==typeof v[F])try{v[F]=l}catch(I){}})})}else f=function(l){l=a(l);if(!l)return null;var v,F=l.path;if(l.vars){var I=[];for(v in l.vars)I.push(encodeURIComponent(v)+"\x3d"+encodeURIComponent(l.vars[v]));
l.params.flashVars=I.join("\x26");delete l.vars}F='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+c.escape(String(F))+'" id\x3d"'+c.escape(String(l.id))+'" width\x3d"'+c.escape(String(l.width))+'" height\x3d"'+c.escape(String(l.height))+'"'+(l.style?' style\x3d"'+c.escape(String(l.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(l.params)for(v in l.params)F+=" "+c.escape(v)+'\x3d"'+c.escape(String(l.params[v]))+'"';return{id:l.id,markup:F+
" /\x3e"}},t=function(){var l=navigator.plugins["Shockwave Flash"];return l&&l.description?(l=l.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=l[0]?parseInt(l[0]):0,minor:null!=l[1]?parseInt(l[1]):0,rev:null!=l[2]?parseInt(l[2]):0}):{major:0,minor:0,rev:0}}();var x=function(l,v){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=t.major;this.minimumVersion=l.minimumVersion||9;this.domNode=this.movie=this.id=null;v&&(v=d.byId(v));setTimeout(y.hitch(this,function(){if(l.expressInstall||this.available&&this.available>=this.minimumVersion)if(l&&v)this.init(l,v);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};y.extend(x,{onReady:function(l){},onLoad:function(l){},onError:function(l){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(l,v){this.destroy();v=d.byId(v||this.domNode);if(!v)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var F=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;x.initialized&&(this.id=x.place(l,v),this.domNode=v,setTimeout(y.hitch(this,
function(){this.movie=this.byId(this.id,l.doc);this.onReady(this.movie);this._poller=setInterval(y.hitch(this,function(){try{F=this.movie.PercentLoaded()}catch(I){console.warn("this.movie.PercentLoaded() failed",I,this.movie)}if(100==F)this._onload();else if(0==F&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(l){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var l=
y.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),v;for(v in this)l[v]||delete this[v];this._poller?e(this,"Load",this,"_destroy"):this._destroy()}},byId:function(l,v){v=v||document;return v.embeds[l]?v.embeds[l]:v[l]?v[l]:window[l]?window[l]:document[l]?document[l]:null}});y.mixin(x,{minSupported:8,available:t.major,supported:t.major>=t.required,minimumRequired:t.required,version:t,initialized:!1,onInitialize:function(){x.initialized=!0},__ie_markup__:function(l){return f(l)},proxy:function(l,
v){C.forEach(v instanceof Array?v:[v],function(F){this[F]=y.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+F+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+C.map(arguments,function(I){return __flash__toXML(I)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},l)}});x.place=function(l,v){l=f(l);v=d.byId(v);v||(v=b.doc.createElement("div"),v.id=l.id+"-container",b.body().appendChild(v));return l?(v.innerHTML=l.markup,
l.id):null};x.onInitialize();y.setObject("dojox.embed.Flash",x);return x})},"dojox/embed/flashVars":function(){define(["dojo"],function(y){y.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var z={serialize:function(C,r){var k=function(c){"string"==typeof c&&(c=c.replace(/;/g,"_sc_"),c=c.replace(/\./g,"_pr_"),c=c.replace(/:/g,"_cl_"));return c},d=dojox.embed.flashVars.serialize,e="";if(y.isArray(r)){for(var b=0;b<r.length;b++)e+=d(C+"."+b,k(r[b]))+";";return e.replace(/;{2,}/g,";")}if(y.isObject(r)){for(b in r)e+=
d(C+"."+b,k(r[b]))+";";return e.replace(/;{2,}/g,";")}return C+":"+r}};y.setObject("dojox.embed.flashVars",z);return z})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(y,z,C,r){var k=y.getObject("dojox.html",!0),d={},e={},b=[];k.insertCssRule=function(c,a,g){g=k.getDynamicStyleSheet(g);var h=c+" {"+a+"}";console.log("insertRule:",h);r("ie")?(g.cssText+=h,console.log("ss.cssText:",g.cssText)):g.sheet?g.sheet.insertRule(h,
g._indicies.length):g.appendChild(C.doc.createTextNode(h));g._indicies.push(c+" "+a);return c};k.removeCssRule=function(c,a,g){var h=-1,f,t;for(f in d)if(!g||g===f){var x=d[f];for(t=0;t<x._indicies.length;t++)if(c+" "+a===x._indicies[t]){h=t;break}if(-1<h)break}if(!x)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===h)return console.warn("The css rule was not found and could not be removed."),!1;x._indicies.splice(h,1);r("ie")?x.removeRule(h):x.sheet&&
x.sheet.deleteRule(h);return!0};k.modifyCssRule=function(c,a,g){};k.getStyleSheet=function(c){if(d[c||"default"])return d[c||"default"];if(!c)return!1;var a=k.getStyleSheets();if(a[c])return k.getStyleSheets()[c];for(var g in a)if(a[g].href&&-1<a[g].href.indexOf(c))return a[g];return!1};k.getDynamicStyleSheet=function(c){c||(c="default");d[c]||(C.doc.createStyleSheet?(d[c]=C.doc.createStyleSheet(),9>r("ie")&&(d[c].title=c)):(d[c]=C.doc.createElement("style"),d[c].setAttribute("type","text/css"),C.doc.getElementsByTagName("head")[0].appendChild(d[c]),
console.log(c," ss created: ",d[c].sheet)),d[c]._indicies=[]);return d[c]};k.enableStyleSheet=function(c){if(c=k.getStyleSheet(c))c.sheet?c.sheet.disabled=!1:c.disabled=!1};k.disableStyleSheet=function(c){if(c=k.getStyleSheet(c))c.sheet?c.sheet.disabled=!0:c.disabled=!0};k.activeStyleSheet=function(c){var a=k.getToggledStyleSheets(),g;if(1===arguments.length)z.forEach(a,function(h){h.disabled=h.title===c?!1:!0});else for(g=0;g<a.length;g++)if(!1===a[g].disabled)return a[g];return!0};k.getPreferredStyleSheet=
function(){};k.getToggledStyleSheets=function(){var c;if(!b.length){var a=k.getStyleSheets();for(c in a)a[c].title&&b.push(a[c])}return b};k.getStyleSheets=function(){if(e.collected)return e;z.forEach(C.doc.styleSheets,function(c){var a=c.sheet?c.sheet:c;c=a.title||a.href;if(r("ie"))-1===a.cssText.indexOf("#default#VML")&&(a.href?e[c]=a:a.imports.length?z.forEach(a.imports,function(g){e[g.title||g.href]=g}):e[c]=a);else{e[c]=a;e[c].id=a.ownerNode.id;c=[];try{c=a[a.cssRules?"cssRules":"rules"]}catch(g){console.warn("Reading css rules from stylesheet "+
a.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",a)}z.forEach(c,function(g){g.href&&(e[g.href]=g.styleSheet,e[g.href].id=a.ownerNode.id)})}});e.collected=!0;return e};return k})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(y,z,C,r,k,d,e){y.experimental("dojox.editor.plugins.ChooseImage");
var b=y.declare("dojox.editor.plugins.ChooseImage",C,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var c=e.getLocalization("dijit._editor","commands");this.button=new z.form.Button({label:c.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:d.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var c=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===c?(k.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(k.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var c=y.create("span",{innerHTML:"."},document.body);this.imageChooser=new r({showSelfImg:!1,cropImage:!1,format:[r.GIF,r.JPEG,r.PNG]},c);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){k.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(c){c=c[0];var a=y.byId(this.currentImageId,this.editor.document);var g=this.downloadPath?this.downloadPath+c.name:c.file;a.src=g;y.attr(a,"_djrealurl",g);c.width&&(a.width=c.width,a.height=c.height)},insertTempImage:function(c,a){a=a&&a.fileName?'alt\x3d"'+a.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+c+'" '+a+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});y.subscribe(z._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "chooseImage":c.plugin=new b({url:c.args.url})}});C.registry.chooseImage=function(c){return new b(c)};return b})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(y,z,C,r,k,d){z.experimental("dijit.editor.plugins.EditorTextColor");var e=r("dijit.editor.plugins.EditorTextColor",k,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var b="",c=!1;this.params.custom&&(this.params.custom.recordUID&&(b=this.params.custom.recordUID),this.params.custom.forceAttr&&(c=this.params.custom.forceAttr));var a=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(g){function h(f){a.button.dropDown=new f({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(t){a.editor.execCommand("useCSS",c);a.editor.execCommand("styleWithCSS",!c);a.editor.execCommand(a.hackCommand,
t)},onClose:function(){a.button.closeDropDown()}});g()}"string"===typeof a.colorPicker?y([a.colorPicker],h):h(a.colorPicker)}},updateState:function(){var b=this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){if(this.button){var a=this.get("disabled");this.button.set("disabled",a);if(a)return;try{var g=b.queryCommandValue(c)||""}catch(h){g=""}}""===g?g="#000000":"transparent"===g&&(g="rgba(0, 0, 0, 0)");this.value=g;(b=this.button.dropDown)&&b.getColor&&g!==b.getColor()&&(b.refreshRecords(),
b.setColor(g))}}});z.subscribe(C._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorTextColor":b.plugin=new e}});return e})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(y,z,C,r,k,d){z.experimental("dijit.editor.plugins.EditorBackgroundColor");var e=r("dijit.editor.plugins.EditorBackgroundColor",k,{buttonClass:d,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var b="";this.params.custom&&this.params.custom.recordUID&&(b=this.params.custom.recordUID);var c=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(a){function g(h){c.button.dropDown=new h({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,
value:c.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(f){c.editor.execCommand("useCSS",!1);c.editor.execCommand("styleWithCSS",!0);c.editor.execCommand(c.hackCommand,f)},onExecute:function(){c.editor.execCommand(c.hackCommand,this.get("value"))},onClose:function(){c.button.closeDropDown()}});a()}"string"===typeof c.colorPicker?y([c.colorPicker],g):g(c.colorPicker)}},updateState:function(){var b=
this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){if(this.button){var a=this.get("disabled");this.button.set("disabled",a);if(a)return;try{var g=b.queryCommandValue(c)||""}catch(h){g=""}}""===g?g="#000000":"transparent"===g&&(g="rgba(0, 0, 0, 0)");this.value=g;(b=this.button.dropDown)&&b.getColor&&g!==b.getColor()&&(b.refreshRecords(),b.setColor(g))}}});z.subscribe(C._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorBackgroundColor":b.plugin=new e}});
return e})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"homeContentPane" title\x3d"${nls.home}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n                \x3cdiv class\x3d"editor-container" data-dojo-attach-point\x3d"editorContainer"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"editor"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n                    \x3cdiv style\x3d"float: left;"\x3e${nls.options}\x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"searchTextBoxOption"\r\n                            data-dojo-attach-point\x3d"searchTextBoxOption"\x3e\r\n                        \x3clabel for\x3d"searchTextBoxOption"\x3e${nls.searchTextBox}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"dropPinOption"\r\n                            data-dojo-attach-point\x3d"dropPinOption"\x3e\r\n                        \x3clabel for\x3d"dropPinOption"\x3e${nls.dropPin}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"drawPolygonOption"\r\n                            data-dojo-attach-point\x3d"drawPolygonOption"\x3e\r\n                        \x3clabel for\x3d"drawPolygonOption"\x3e${nls.drawPolygon}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"drawFreehandPolygonOption"\r\n                            data-dojo-attach-point\x3d"drawFreehandPolygonOption"\x3e\r\n                        \x3clabel for\x3d"drawFreehandPolygonOption"\x3e${nls.drawFreehandPolygon}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cdiv style\x3d"float: left;"\x3e${nls.exportOptions}\x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportPrintOption"\r\n                            data-dojo-attach-point\x3d"exportPrintOption"\x3e\r\n                        \x3clabel for\x3d"exportPrintOption"\x3e${nls.print}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportImageOption"\r\n                            data-dojo-attach-point\x3d"exportImageOption"\x3e\r\n                        \x3clabel for\x3d"exportImageOption"\x3e${nls.image}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportPDFOption"\r\n                            data-dojo-attach-point\x3d"exportPDFOption"\x3e\r\n                        \x3clabel for\x3d"exportPDFOption"\x3e${nls.pdf}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv style\x3d"float: left; margin-left: 15px;"\x3e\r\n                        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"exportDynamicHTMLOption"\r\n                            data-dojo-attach-point\x3d"exportDynamicHTMLOption"\x3e\r\n                        \x3clabel for\x3d"exportDynamicHTMLOption"\x3e${nls.dynamicHTML}\x3c/label\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountryOrRegion}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: -8px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;} .jimu-widget-business-analyst-setting .makeDefaultLink {cursor: pointer!important; color: #0079c1;} .jimu-widget-business-analyst-setting .makeDefaultLink:hover {text-decoration: underline; text-decoration-color: #0079c1;} .jimu-widget-business-analyst-setting .esriMapsAnalystXSelectableTreeLabel.default {color: #0079c1;} .jimu-widget-business-analyst-setting .editor-container {height: 325px;} .jimu-widget-business-analyst-setting .dijitEditorIFrameContainer {height: 262px;}',
"*now":function(y){y(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/_base/html dojo/dom-class dojo/dom-construct dojo/dom-style dojo/mouse dojo/on dojo/query dojo/sniff jimu/BaseWidgetSetting jimu/utils dijit/_WidgetsInTemplateMixin dijit/Editor esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer jimu/dijit/EditorXssFilter dojo/NodeList-manipulate dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(y,
z,C,r,k,d,e,b,c,a,g,h,f,t,x,l,v,F,I,B,G,J){return z([g,f],{baseClass:"jimu-widget-business-analyst-setting",selectedCountryID:"",currentDefaultInfographicID:"",currentDefaultInfographicDiv:null,currentDefaultReportID:"",currentDefaultReportDiv:null,postCreate:function(){this.inherited(arguments);this.tab=new G({tabs:[{title:this.nls.home,content:this.homeContentPane},{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,
content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.home});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup();this.editorXssFilter=J.getInstance()},startup:function(){this._started||(this.inherited(arguments),this.initEditor(),this.setConfig(this.config))},initEditor:function(){var D=document.getElementsByTagName("head")[0],p=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";
c('link[href\x3d"'+p+'"]',D)[0]||h.loadStyleLink("editor_plugins_resources_TextColor",p);p=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";c('link[href\x3d"'+p+'"]',D)[0]||h.loadStyleLink("editor_plugins_resources_editorPlugins",p);p=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";c('link[href\x3d"'+p+'"]',D)[0]||h.loadStyleLink("editor_plugins_resources_PasteFromWord",p);this.editor=new t({plugins:["bold","italic","underline",h.getEditorTextColor("about"),h.getEditorBackgroundColor("about"),
"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent"],extraPlugins:["|","createLink","unlink","pastefromword","|","undo","redo","|","chooseImage","|","viewsource","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize","formatBlock"],style:"font-family:Verdana;"},this.editor);C.setStyle(this.editor.domNode,
{width:"100%",height:"100%"});this.editor.startup();8!==a("ie")&&this.editor.resize({w:"100%",h:"100%"})},setConfig:function(D){var p=this;this.initializeNewConfigValues(D);v.getAvailableCountries().then(function(u){var A=[];y.forEach(u.countries,function(n){A.push({label:n.name,value:n.id,selected:n.id==p.config.defaultCountryID?"selected":""})});p.countryDropDownInfographics=(new B({options:A})).placeAt(p.countryDropDownContainerInfographics);p.countryDropDownInfographics.startup();p.selectedCountryID=
p.countryDropDownInfographics.get("value");b(p.countryDropDownInfographics,"change",function(){p._countryChangeInfographics()});p.countryDropDownReports=(new B({options:A})).placeAt(p.countryDropDownContainerReports);p.countryDropDownReports.startup();p.selectedCountryID=p.countryDropDownReports.get("value");b(p.countryDropDownReports,"change",function(){p._countryChangeReports()});p._loadConfigForCountry(p.selectedCountryID)});this._loadRingDTWTConfig();this._loadInfographicExportOptions();this._loadFirstPageOptions();
D=this.editorXssFilter.sanitize(D.firstPageText||this.nls.defaultFirstPageText);this.editor.set("value",D)},getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();this._setInfographicExportOptions();this._setFirstPageOptions();this.config.defaultCountryID=this.selectedCountryID;this.config.firstPageText=this.editor.get("value");return this.config},_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=
this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);this.selectedCountryID=this.countryDropDownInfographics.get("value");
this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(D){var p=null;y.forEach(this.config.countryConfig,function(A){A.countryID==D&&(p=A)});p||(p={countryID:D,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],
enabledEsriInfographics:[],enabledOrgInfographics:[]});p.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;p.allowMyInfographics=0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;p.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;p.allowAllEsriInfographics=this.infographicsTreeGrid.tree.data[0].leafCount===
this.infographicsTreeGrid.tree.data[0].selectCount;p.allowAllOrgInfographics=this.infographicsTreeGrid.tree.data[1].leafCount===this.infographicsTreeGrid.tree.data[1].selectCount&&this.infographicsTreeGrid.tree.data[2].leafCount===this.infographicsTreeGrid.tree.data[2].selectCount;p.allowAllEsriInfographics||(p.enabledEsriInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[0].children));p.allowAllOrgInfographics||(p.enabledOrgInfographics=this._getEnabledReports(this.infographicsTreeGrid.tree.data[1].children.concat(this.infographicsTreeGrid.tree.data[2].children)));
p.defaultInfographicID=this.currentDefaultInfographicID;p.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:!0;p.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;p.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;p.allowAllEsriReports=this.reportsTreeGrid.tree.data[0].leafCount===this.reportsTreeGrid.tree.data[0].selectCount;
p.allowAllOrgReports=this.reportsTreeGrid.tree.data[1].leafCount===this.reportsTreeGrid.tree.data[1].selectCount&&this.reportsTreeGrid.tree.data[2].leafCount===this.reportsTreeGrid.tree.data[2].selectCount;p.allowAllEsriReports||(p.enabledEsriReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[0].children));p.allowAllOrgReports||(p.enabledOrgReports=this._getEnabledReports(this.reportsTreeGrid.tree.data[1].children.concat(this.reportsTreeGrid.tree.data[2].children)));p.defaultReportID=
this.currentDefaultReportID;var u=-1;y.forEach(this.config.countryConfig,function(A,n){A.countryID==D&&(u=n)});-1!=u?this.config.countryConfig[u]=p:this.config.countryConfig.push(p)},_loadConfigForCountry:function(D){var p=this;F.getAvailableInfographicReports(D).then(function(u){y.forEach(u,function(n){y.forEach(n.children,function(q){q.selected=!0})});p.infographicsTreeGrid||(p.infographicsTreeGrid=new l({tree:new x(u),showHeader:!1,_renderLabelNode:function(n,q){var H=k.create("div"),M=k.create("div",
{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(n),style:"float: left"},H);if(1===n.deepness){n.value===p.currentDefaultInfographicID&&(r.add(M,"default"),p.currentDefaultInfographicDiv=M);var m=k.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:p.nls.makeDefault,style:"margin-left: 10px; display: none"},H),w=k.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:p.nls.removeDefault,style:"margin-left: 10px; display: none"},
H);n.makeDefaultDiv=m;n.unselectDefaultDiv=w;b(m,"click",function(E){E.stopPropagation();p.currentDefaultInfographicDiv&&r.remove(p.currentDefaultInfographicDiv,"default");r.add(M,"default");p.currentDefaultInfographicID=n.value;p.currentDefaultInfographicDiv=M;d.set(m,"display","none");d.set(w,"display","")});b(w,"click",function(E){E.stopPropagation();p.currentDefaultInfographicDiv&&r.remove(p.currentDefaultInfographicDiv,"default");p.currentDefaultInfographicID="";p.currentDefaultInfographicDiv=
null;d.set(w,"display","none");d.set(m,"display","")});b(q,e.enter,function(){n.selected&&(n.value!==p.currentDefaultInfographicID?d.set(m,"display",""):d.set(w,"display",""))});b(q,e.leave,function(){d.set(m,"display","none");d.set(w,"display","none")})}return H}},p.infographicTreeGridContainer));p.own(b(p.infographicsTreeGrid,"SelectionChanged",function(n){n.toggledTreeNode&&0==n.toggledTreeNode.deepness?n.toggledTreeNode.selected||y.forEach(n.toggledTreeNode.children,function(q){q.value===p.currentDefaultInfographicID&&
p.currentDefaultInfographicDiv&&(r.remove(p.currentDefaultInfographicDiv,"default"),p.currentDefaultInfographicID="",p.currentDefaultInfographicDiv=null)}):n.toggledTreeNode&&!n.toggledTreeNode.selected&&n.toggledTreeNode.value===p.currentDefaultInfographicID?p.currentDefaultInfographicDiv&&(r.remove(p.currentDefaultInfographicDiv,"default"),p.currentDefaultInfographicID="",p.currentDefaultInfographicDiv=null,d.set(n.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(n.toggledTreeNode.unselectDefaultDiv,
"display","none")):n.toggledTreeNode&&!n.toggledTreeNode.selected?d.set(n.toggledTreeNode.makeDefaultDiv,"display","none"):n.toggledTreeNode&&n.toggledTreeNode.selected&&d.set(n.toggledTreeNode.makeDefaultDiv,"display","")}));var A=-1;y.forEach(p.config.countryConfig,function(n,q){n.countryID==D&&(A=q)});p.currentDefaultInfographicID="";p.currentDefaultReportID="";-1!=A&&(p.currentDefaultInfographicID=p.config.countryConfig[A].defaultInfographicID,p.currentDefaultReportID=p.config.countryConfig[A].defaultReportID,
p.config.countryConfig[A].allowAllEsriInfographics||y.forEach(u[0].children,function(n){y.some(p.config.countryConfig[A].enabledEsriInfographics,function(q){return n.value===q})||(n.selected=!1)}),p.config.countryConfig[A].allowAllOrgInfographics||y.forEach(u[1].children.concat(u[2].children),function(n){y.some(p.config.countryConfig[A].enabledOrgInfographics,function(q){return n.value===q})||(n.selected=!1)}));p.infographicsTreeGrid.tree.clear();p.infographicsTreeGrid.tree.addNodes(u)});F.getAvailableClassicReports(D).then(function(u){y.forEach(u,
function(n){y.forEach(n.children,function(q){q.selected=!0})});p.reportsTreeGrid||(p.reportsTreeGrid=new l({tree:new x(u),showHeader:!1,_renderLabelNode:function(n,q){var H=k.create("div"),M=k.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(n),style:"float: left"},H);if(1===n.deepness){n.value===p.currentDefaultReportID&&(r.add(M,"default"),p.currentDefaultReportDiv=M);var m=k.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",
innerHTML:p.nls.makeDefault,style:"margin-left: 10px; display: none"},H),w=k.create("span",{class:"esriMapsAnalystXSelectableTreeLabel makeDefaultLink",innerHTML:p.nls.removeDefault,style:"margin-left: 10px; display: none"},H);n.makeDefaultDiv=m;n.unselectDefaultDiv=w;b(m,"click",function(E){E.stopPropagation();p.currentDefaultReportDiv&&r.remove(p.currentDefaultReportDiv,"default");r.add(M,"default");p.currentDefaultReportID=n.value;p.currentDefaultReportDiv=M;d.set(m,"display","none");d.set(w,"display",
"")});b(w,"click",function(E){E.stopPropagation();p.currentDefaultReportDiv&&r.remove(p.currentDefaultReportDiv,"default");p.currentDefaultReportID="";p.currentDefaultReportDiv=null;d.set(w,"display","none");d.set(m,"display","")});b(q,e.enter,function(){n.selected&&(n.value!==p.currentDefaultReportID?d.set(m,"display",""):d.set(w,"display",""))});b(q,e.leave,function(){d.set(m,"display","none");d.set(w,"display","none")})}return H}},p.reportTreeGridContainer));p.own(b(p.reportsTreeGrid,"SelectionChanged",
function(n){n.toggledTreeNode&&0==n.toggledTreeNode.deepness?n.toggledTreeNode.selected||y.forEach(n.toggledTreeNode.children,function(q){q.value===p.currentDefaultReportID&&p.currentDefaultReportDiv&&(r.remove(p.currentDefaultReportDiv,"default"),p.currentDefaultReportID="",p.currentDefaultReportDiv=null)}):n.toggledTreeNode&&!n.toggledTreeNode.selected&&n.toggledTreeNode.value===p.currentDefaultReportID?p.currentDefaultReportDiv&&(r.remove(p.currentDefaultReportDiv,"default"),p.currentDefaultReportID=
"",p.currentDefaultReportDiv=null,d.set(n.toggledTreeNode.makeDefaultDiv,"display","none"),d.set(n.toggledTreeNode.unselectDefaultDiv,"display","none")):n.toggledTreeNode&&!n.toggledTreeNode.selected?d.set(n.toggledTreeNode.makeDefaultDiv,"display","none"):n.toggledTreeNode&&n.toggledTreeNode.selected&&d.set(n.toggledTreeNode.makeDefaultDiv,"display","")}));var A=-1;y.forEach(p.config.countryConfig,function(n,q){n.countryID==D&&(A=q)});-1!=A&&(p.config.countryConfig[A].allowAllEsriReports||y.forEach(u[0].children,
function(n){y.some(p.config.countryConfig[A].enabledEsriReports,function(q){return n.value===q})||(n.selected=!1)}),p.config.countryConfig[A].allowAllEsriInfographics||y.forEach(u[1].children.concat(u[2].children),function(n){y.some(p.config.countryConfig[A].enabledOrgReports,function(q){return n.value===q})||(n.selected=!1)}));p.reportsTreeGrid.tree.clear();p.reportsTreeGrid.tree.addNodes(u)})},_getClassicReportId:function(D){return D.value&&D.value.itemid?D.value.itemid:D.value},_getEnabledReports:function(D){var p=
[];y.forEach(D,function(u){u.selected&&(u.value&&u.value.itemid?p.push(u.value.itemid):p.push(u.value))});return p},_setRingDTWTConfig:function(){this.config.ringDefaults=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);
this.config.ringUnitDefault=this.ringsBufferUnits.get("value");this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},
_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);
this._setRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_setInfographicExportOptions:function(){this.config.exportInfographicsPrintOption=this.exportPrintOption.checked;
this.config.exportInfographicsImageOption=this.exportImageOption.checked;this.config.exportInfographicsPDFOption=this.exportPDFOption.checked;this.config.exportInfographicsDynamicHTMLOption=this.exportDynamicHTMLOption.checked},_loadInfographicExportOptions:function(){this.exportPrintOption.setChecked(this.config.exportInfographicsPrintOption);this.exportImageOption.setChecked(this.config.exportInfographicsImageOption);this.exportPDFOption.setChecked(this.config.exportInfographicsPDFOption);this.exportDynamicHTMLOption.setChecked(this.config.exportInfographicsDynamicHTMLOption)},
_setFirstPageOptions:function(){this.config.searchTextBoxOption=this.searchTextBoxOption.checked;this.config.dropPinOption=this.dropPinOption.checked;this.config.drawPolygonOption=this.drawPolygonOption.checked;this.config.drawFreehandPolygonOption=this.drawFreehandPolygonOption.checked},_loadFirstPageOptions:function(){this.searchTextBoxOption.setChecked(this.config.searchTextBoxOption);this.dropPinOption.setChecked(this.config.dropPinOption);this.drawPolygonOption.setChecked(this.config.drawPolygonOption);
this.drawFreehandPolygonOption.setChecked(this.config.drawFreehandPolygonOption)},_getRadii:function(D,p,u){D=D.get("value");p=p.get("value");u=u.get("value");var A=[];""!=D&&A.push(D);""!=p&&A.push(p);""!=u&&A.push(u);return A},_setRadii:function(D,p,u,A){0<A.length?D.set("value",A[0]):D.set("value","");1<A.length?p.set("value",A[1]):p.set("value","");2<A.length?u.set("value",A[2]):u.set("value","")},_validateRingDTWT:function(){var D=!0,p=!0,u=!1;p=D=I.validateInvalidValues(this.ringsBufferRadii1,
this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);D||(this.tab.selectTab(this.nls.rings),u=!0);D=I.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);p=p&&D;D||u||(this.tab.selectTab(this.nls.driveTime),u=!0);D=I.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,
this.nls.thisEntryIsNotValid);p=p&&D;D||u||(this.tab.selectTab(this.nls.walkTime),u=!0);if(!p)return p;tabChange=!1;p=D=I.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,I.MIN_RINGS_VALUE,I.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);D||(this.tab.selectTab(this.nls.rings),u=!0);D=I.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,I.MIN_DTWT_VALUE,I.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,
this.nls.invalidValueDTWT);p=p&&D;D||u||(this.tab.selectTab(this.nls.driveTime),u=!0);D=I.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,I.MIN_DTWT_VALUE,I.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);p=p&&D;D||u||(this.tab.selectTab(this.nls.walkTime),u=!0);return p},initializeNewConfigValues:function(D){"undefined"===typeof D.exportInfographicsPrintOption&&(D.exportInfographicsPrintOption=!0);"undefined"===typeof D.exportInfographicsImageOption&&
(D.exportInfographicsImageOption=!0);"undefined"===typeof D.exportInfographicsPDFOption&&(D.exportInfographicsPDFOption=!0);"undefined"===typeof D.exportInfographicsDynamicHTMLOption&&(D.exportInfographicsDynamicHTMLOption=!0);"undefined"===typeof D.firstPageText&&(D.firstPageText=this.nls.defaultFirstPageText);"undefined"===typeof D.searchTextBoxOption&&(D.searchTextBoxOption=!0);"undefined"===typeof D.dropPinOption&&(D.dropPinOption=!0);"undefined"===typeof D.drawPolygonOption&&(D.drawPolygonOption=
!0);"undefined"===typeof D.drawFreehandPolygonOption&&(D.drawFreehandPolygonOption=!0)}})});