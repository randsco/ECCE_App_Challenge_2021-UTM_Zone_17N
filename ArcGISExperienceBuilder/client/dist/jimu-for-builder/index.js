System.register(["jimu-core","jimu-layouts/layout-runtime","jimu-for-builder/service","jimu-core/react"],(function(e){var t,i,n,o;return{setters:[function(e){t=e},function(e){i=e},function(e){n=e},function(e){o=e}],execute:function(){e(function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=69)}([function(e,i){e.exports=t},function(e,t,i){"use strict";var n,o;i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o})),function(e){e.AppConfigChanged="app_config_changed",e.AppInfoChanged="app_info_changed",e.PortalSelfChanged="portal_self_changed",e.DialogInfosChanged="dialog_infos_changed",e.UserSignIn="user_sign_in",e.ChangeAppMode="change_app_mode",e.ChangePage="change_page",e.ChangeDialog="change_dialog",e.ChangeSelection="change_selection",e.ChangeWidgetStateProp="change_widget_state_prop",e.ChangeWidgetMutableStateProp="change_widget_mutable_state_prop",e.ChangeZoomScale="change_zoom_scale",e.BuilderTriggerKeyboard="builder_trigger_keyboard",e.ChangeBrowserSizeMode="change_browser_size_mode",e.BuilderSessionChanged="builder_session_changed",e.ActivePagePartChanged="active_page_part_changed",e.AnimationPreview="animation_preview",e.SectionNavInfoChanged="section_navinfo_changed",e.ScreenGroupNavInfoChanged="screengroup_navinfo_changed"}(n||(n={})),function(e){e.AppStateChanged="app_state_changed",e.AppSessionChanged="app_session_changed",e.PopupChooseWidget="popup_choose_widget",e.AppAddResource="app_add_resource",e.AppClearResources="app_clear_resources",e.AppTriggerKeyboard="app_trigger_keyboard",e.SetLayoutTools="app_set_layout_tools",e.ClearLastAppConfigFromHistory="clear_last_app_config_from_history",e.SetIsBusy="app_set_isbusy",e.AppIsLoaded="app_is_loaded",e.ConfirmDelete="confirm_delete"}(o||(o={}))},function(e,t,i){"use strict";t.a={frameworkAction_TriggerLayer:"Trigger data",frameworkAction_SetData:"Select data",frameworkAction_ActionLayer:"Action data",frameworkAction_Conditions:"Conditions",frameworkAction_RelateMessage:"Trigger / action connection",frameworkAction_TriggerLayerField:"Select a trigger field",frameworkAction_None:"none",frameworkAction_Equals:"equals",frameworkAction_ActionLayerField:"Select an action field",frameworkAction_MoreConditions:"More conditions",frameworkAction_SetExpression:"Please set your expression first.",frameworkAction_ChooseLayer:"Select data",frameworkAction_AutoBind:"Auto bound.",frameworkAction_NoLayer:"No data.",frameworkAction_QueryByExtent:"Query by current extent",foldable:"Foldable",billboard:"Billboard",jewelrybox:"JewelryBox",launchpad:"Launchpad",introduction:"Introduction",gallery:"Gallery",general:"General",blankfullscreen:"Blank fullscreen",blankscrollable:"Blank scrolling",scenic:"Scenic",exhibition:"Exhibition",journey:"Journey",ribbon:"Ribbon",snapshot:"Snapshot",epic:"Epic",summary:"Summary",quicknavigation:"Quick navigation",parallax:"Parallax",dashboard:"Dashboard",pocket:"Pocket",dart:"Dart",timeline:"Timeline",block1:"Block 1",block2:"Block 2",block3:"Block 3",block4:"Block 4",block5:"Block 5",block6:"Block 6",dialog1:"Confirm",dialog2:"Alert",dialog3:"Simple",dialog4:"Vogue",dialog5:"Novel",dialog6:"Sidebar",dialog7:"Tooltip",dialogTitle:"Title",screenGroup1:"Cascade",screenGroup2:"Index",screenGroup3:"Stream",screenGroup4:"Guide",screenGroup5:"Showcase",screenGroup6:"Slideshow",screenGroup7:"Portfolio",screenGroup8:"Melt",screenGroup9:"Flyer",foldableDescription:"Foldable is a template with a simple, open interface that focuses on the map, featuring a header and a controller widget.",billboardDescription:"Billboard was created with simplicity in mind; it contains a map and a controller widget.",jewelryboxDescription:"JewelryBox is a template created to display features in a list combined with a map.",launchpadDescription:"Launchpad is a template designed with the emphasis on the map and a controller widget anchored at the bottom of the page.",introductionDescription:"Introduction is a template with a modular layout designed to showcase your images and striking headlines.",galleryDescription:"Gallery is a template designed with prominent thumbnail images to highlight your rich content.",generalDescription:"General provides a long scrolling template created to share the stories behind your content.",blankfullscreenDescription:"A blank template to create your own design in a fullscreen app.",blankscrollableDescription:"A blank template to create your design in a scrolling page.",scenicDescription:"Scenic allows you to create a narrative tour using the bookmark widget in a multi-page layout.",exhibitionDescription:"Exhibition provides a multi-page layout for building a website that highlights your images and content using cards, list, and map widgets.",journeyDescription:"Journey is a template created that uses the bookmark widget and a map to provide an interactive tour experience.",ribbonDescription:"Ribbon is a template designed with the emphasis on the bookmark to control the navigation of the map.",snapshotDescription:"Snapshot is a template designed to showcase your captivating images with the use of a section, views navigation, and cards.",epicDescription:"Epic provides a long scrolling template designed for building a website experience.",summaryDescription:"Summary is a template created to be used as a secondary or ending page that focuses on short text descriptions and actionable links to additional content.",timelineDescription:"Timeline is a template designed to display your images and content in chronological order.",quicknavigationDescription:"Quick navigation allows you to quickly switch between multiple views and bookmarks on a single page.",parallaxDescription:"Parallax allows you to add a hero image layout in your experience.",dashboardDescription:"Dashboard is designed to provide a view of your geographic information and data through multiple widgets that work together on a single screen.",pocketDescription:"Pocket is a template created to display your bookmarks in an interactive slider to help navigate the features on your map.",dartDescription:"Dart is a template that focuses on the map, the widgets are placed inside a fixed panel positioned at the bottom of the map.",block1Description:"Block 1",block2Description:"Block 2",block3Description:"Block 3",block4Description:"Block 4",block5Description:"Block 5",block6Description:"Block 6",screenGroup1Description:"Screen group 1",screenGroup2Description:"Screen group 2",screenGroup3Description:"Screen group 3",screenGroup4Description:"Screen group 4",screenGroup5Description:"Screen group 5",screenGroup6Description:"Screen group 6",screenGroup7Description:"Screen group 7",screenGroup8Description:"Screen group 8",screenGroup9Description:"Screen group 9",subTitlePlaceholder:"Here is the subtitle",titlePlaceholder:"Here is the title",defaultTextPlaceholder:"Double click to edit text",copyrightPlaceholder:"Copyright info",appItemCopy:"copy",cardTitle:"Card title",bookmark:"Bookmark"}},function(e,t){e.exports=i},function(e,t,i){"use strict";i.r(t),i.d(t,"getUniqueId",(function(){return a})),i.d(t,"getUniqueLabel",(function(){return r})),i.d(t,"isFirstLevelPage",(function(){return s})),i.d(t,"isPageHasSubPage",(function(){return u})),i.d(t,"getRealPageCount",(function(){return p})),i.d(t,"getSubRealPageCount",(function(){return c})),i.d(t,"getRealPageCountExcludeOnePage",(function(){return g})),i.d(t,"isRealPage",(function(){return d})),i.d(t,"getCleanAppConfig",(function(){return l}));var n=i(0),o=i(9),a=n.appConfigUtils.getUniqueId,r=n.appConfigUtils.getUniqueLabel;function s(e,t){return!!e.pageStructure.find((function(e){return!!e[t]}))}function u(e,t){var i=e.pageStructure.find((function(e){return!!e[t]}));return i&&i[t].length>0}function p(e){var t=0;return Object.keys(e.pages).forEach((function(i,n){d(e,i)&&t++})),t}function c(e,t){if(!s(e,t))return 0;var i=0;return e.pageStructure.forEach((function(n,o){var a=Object.keys(n)[0];a===t&&n[a].forEach((function(t){d(e,t)&&i++}))})),i}function g(e,t){var i=0;return d(e,t)&&(i=1),p(e)-c(e,t)-i}function d(e,t){var i=e.pages[t];return!!i&&i.type===n.PageType.Normal}function l(e){var t=e.asMutable({deep:!0});return Object.keys(t.widgets).forEach((function(e){var i,n,o,a=t.widgets[e];a.label===(null===(i=a.manifest)||void 0===i?void 0:i.name)&&delete a.label,a.icon===a.context.folderUrl+"icon.svg"&&delete a.icon,"object"==typeof a.icon&&(a.icon.svg!==a.context.folderUrl+"icon.svg"||"#fff"!==(null===(n=a.icon.properties)||void 0===n?void 0:n.color)&&(null===(o=a.icon.properties)||void 0===o?void 0:o.color)||delete a.icon),delete a.context,delete a.manifest,delete a._originManifest})),t.layouts=o.a(t.layouts),t=n.appConfigUtils.cleanPortalInfoFromResource(t)}window._getCleanAppConfig=l},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return n}));var n,o=i(0);!function(e){e.SelectTemplate="SELECT_TEMPLATE",e.OpenChooseWidgetPopup="OPEN_CHOOSE_WIDGET_POPUP",e.CloseChooseWidgetPopup="CLOSE_CHOOSE_WIDGET_POPUP",e.WidgetSettingClassLoaded="WIDGET_SETTING_CLASS_LOADED",e.WidgetItemSettingClassLoaded="WIDGET_ITEM_SETTING_CLASS_LOADED",e.WidgetsRemoved="WIDGETS_REMOVED",e.WidgetsAdded="WIDGETS_ADDED",e.ChangeCurrentApp="CHANGE_CURRENT_APP",e.RefreshAppList="REFRSH_APPLIST",e.SetLayoutTools="SET_LAYOUT_TOOLS",e.StartGuide="START_GUIDE",e.StopGuide="STOP_GUIDE",e.WidgetSettingI18nMessageLoaded="WIDGET_SETTING_I18N_MESSAGE_LOADED",e.ConfirmDeleteContentChanged="CONFIRM_DELETE_CONTENT_CHANGED"}(n||(n={}));var a={selectTemplate:function(e){return{type:n.SelectTemplate,templateName:e}},refreshAppListAction:function(e){return{type:n.RefreshAppList,isRefresh:e}},openChooseWidgetPopup:function(e,t){return{type:n.OpenChooseWidgetPopup,layoutId:e,layoutItemId:t}},closeChooseWidgetPopup:function(){return{type:n.CloseChooseWidgetPopup}},widgetSettingClassLoaded:function(e){return{type:n.WidgetSettingClassLoaded,wigetUri:e}},widgetItemSettingClassLoaded:function(e){return{type:n.WidgetItemSettingClassLoaded,widgetUri:e}},widgetsAdded:function(e){return{type:n.WidgetsAdded,widgets:e}},widgetsRemoved:function(e){return{type:n.WidgetsRemoved,widgetIds:e}},changeCurrentApp:function(e){return{type:n.ChangeCurrentApp,appId:e}},setLayoutTools:function(e){return{type:n.SetLayoutTools,tools:e}},startGuide:function(e){return{type:n.StartGuide,guideId:e}},stopGuide:function(){return{type:n.StopGuide}},widgetSettingI18nMessageLoaded:function(e,t){return{type:n.WidgetSettingI18nMessageLoaded,widgetName:e,i18nMessages:t}},confirmDeleteContentChanged:function(e){return{type:n.ConfirmDeleteContentChanged,itemToDelete:e}}},r=function(){function e(){this.id="builder-state-redux-store-extension"}return e.prototype.getActions=function(){return Object.keys(n).map((function(e){return n[e]}))},e.prototype.getInitLocalState=function(){return Object(o.Immutable)({templateName:null,showChooseWidgetPopup:!1,currentAppId:null,refreshAppList:!1,isMobile:!1,currentGuideId:null,widgetSettingI18nMessages:Object(o.Immutable)({}),widgetsSettingClassStatus:Object(o.Immutable)({})})},e.prototype.getReducer=function(){var e=this;return function(t,i,a){var r;switch(i.type){case n.SelectTemplate:return t.set("templateName",i.templateName);case n.OpenChooseWidgetPopup:return t.set("showChooseWidgetPopup",!0).set("currentLayout",Object(o.Immutable)({layoutId:i.layoutId,layoutItemId:i.layoutItemId}));case n.CloseChooseWidgetPopup:return t.set("showChooseWidgetPopup",!1);case n.WidgetSettingClassLoaded:return t=t.setIn(["widgetsSettingClassStatus",i.wigetUri],!0),s(a,i.wigetUri).forEach((function(e){t=t.setIn(["widgetsSettingRuntimeInfo",e,"isClassLoaded"],!0)})),t;case n.WidgetItemSettingClassLoaded:return s(a,i.widgetUri).forEach((function(e){t=t.setIn(["widgetsSettingRuntimeInfo",e,"isItemClassLoaded"],!0)})),t;case n.WidgetsAdded:return i.widgets.forEach((function(e){t.widgetsSettingClassStatus[e.widgetUri]&&(t=t.setIn(["widgetsSettingRuntimeInfo",e.widgetId,"isClassLoaded"],!0))})),t;case n.WidgetsRemoved:return t.set("widgetsSettingRuntimeInfo",(r=t.widgetsSettingRuntimeInfo).without.apply(r,i.widgetIds));case n.ChangeCurrentApp:return(t=e.getInitLocalState()).set("currentAppId",i.appId).set("widgetsSettingRuntimeInfo",{});case n.RefreshAppList:return t.set("refreshAppList",i.isRefresh);case n.SetLayoutTools:return t.set("toolbarConfig",i.tools);case n.StartGuide:return t.set("currentGuideId",i.guideId);case n.StopGuide:return t.set("currentGuideId",null);case n.WidgetSettingI18nMessageLoaded:return t.setIn(["widgetSettingI18nMessages",i.widgetName],i.i18nMessages);case n.ConfirmDeleteContentChanged:var u=i.itemToDelete;return t.set("contentToDelete",u);default:return t}}},e.prototype.getStoreKey=function(){return"builder"},e}();function s(e,t){var i,n,o=(null===(n=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===n?void 0:n.widgets)||{};return Object.keys(o).filter((function(e){return o[e].uri===t}))}t.d=r},function(e,t){e.exports=n},function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return n}));var n,o=i(0),a=i(8);!function(e){e.InBuilderPutAppConfigIntoHistory="IN_BUILDER_PUT_APPCONFIG_INTO_HISTORY",e.InBuilderRemoveLastAppConfigFromHistory="IN_BUILDER_REMOVE_LAST_APPCONFIG_FROM_HISTORY",e.InBuilderAppConfigUndo="IN_BUILDER_APPCONFIG_UNDO",e.InBuilderAppConfigRedo="IN_BUILDER_APPCONFIG_REDO",e.InBuilderAppConfigRedoClear="IN_BUILDER_APPCONFIG_REDOCLEAR",e.InBuilderAppConfigClear="IN_BUILDER_APPCONFIG_CLEAR"}(n||(n={}));var r={InBuilderAppConfigUndo:function(){return{type:n.InBuilderAppConfigUndo}},InBuilderAppConfigRedo:function(){return{type:n.InBuilderAppConfigRedo}},InBuilderPutAppConfigIntoHistory:function(e){return{type:n.InBuilderPutAppConfigIntoHistory,appState:e}},InBuilderRemoveLastAppConfigFromHistory:function(){return{type:n.InBuilderRemoveLastAppConfigFromHistory}},InBuilderAppConfigRedoClear:function(){return{type:n.InBuilderAppConfigRedoClear}},InBuilderAppConfigClear:function(){return{type:n.InBuilderAppConfigClear}}},s=function(){function e(){this.id="app-state-history-extension"}return e.prototype.getActions=function(){return[n.InBuilderPutAppConfigIntoHistory,n.InBuilderRemoveLastAppConfigFromHistory,n.InBuilderAppConfigUndo,n.InBuilderAppConfigRedo,n.InBuilderAppConfigRedoClear,n.InBuilderAppConfigClear]},e.prototype.getInitLocalState=function(){return{past:[],future:[]}},e.prototype.getReducer=function(){var e=this;return function(t,i,o){switch(i.type){case n.InBuilderAppConfigUndo:return e.handleAppStateUndo(t);case n.InBuilderAppConfigRedo:return e.handleAppStateRedo(t);case n.InBuilderPutAppConfigIntoHistory:return e.handleAppStateAdd(t,i.appState);case n.InBuilderRemoveLastAppConfigFromHistory:return e.handleAppStateRemoveLast(t);case n.InBuilderAppConfigRedoClear:return e.handleAppStateRedoClear(t);case n.InBuilderAppConfigClear:return e.handleAppStateClear(t);default:return t}}},e.prototype.handleAppStateUndo=function(e){if(e.past.length<2)return console.warn("Can not undo since no history there"),e;var t=e.past[e.past.length-2],i=e.past[e.past.length-1],n=e.past.slice(0,e.past.length-1),r=[i].concat(e.future);return o.lodash.defer((function(){Object(a.publishAppConfigChangeToApp)(t)})),e.merge({past:n,future:r})},e.prototype.handleAppStateRedo=function(e){if(e.future.length<1)return console.warn("Can not redo since no history there"),e;var t=e.future[0],i=e.future.slice(1),n=e.past.concat([t]);return o.lodash.defer((function(){Object(a.publishAppConfigChangeToApp)(t)})),e.merge({past:n,future:i})},e.prototype.handleAppStateAdd=function(e,t){if(null!==t&&(e.past.length>0&&e.past[e.past.length-1]!==t||0===e.past.length)){var i=e.past.concat([t]);return e.set("past",i).set("future",[])}return e},e.prototype.handleAppStateRemoveLast=function(e){if(e.past.length>1){var t=e.past.slice(0,e.past.length-1);return e.set("past",t)}return e},e.prototype.handleAppStateRedoClear=function(e){return e.set("future",[])},e.prototype.handleAppStateClear=function(e){return e.set("future",[]).set("past",[])},e.prototype.getStoreKey=function(){return"appStateHistory"},e}();t.c=s},function(e,t,i){"use strict";i.r(t),i.d(t,"publishAppConfigChangeToApp",(function(){return B})),i.d(t,"publishAppInfoChangeToApp",(function(){return R})),i.d(t,"publishDialogInfosChangeToApp",(function(){return Z})),i.d(t,"publishAppModeChangeToApp",(function(){return Q})),i.d(t,"publishPageChangeToApp",(function(){return Y})),i.d(t,"publishDialogChangeToApp",(function(){return _})),i.d(t,"publishChangeSelectionToApp",(function(){return F})),i.d(t,"publishChangeWidgetStatePropToApp",(function(){return H})),i.d(t,"publishChangeWidgetMutableStatePropToApp",(function(){return J})),i.d(t,"publishKeyboardToApp",(function(){return V})),i.d(t,"publishChangeBrowserSizeModeToApp",(function(){return K})),i.d(t,"publishChangeSessionToApp",(function(){return X})),i.d(t,"publichChangeZoomScaleToApp",(function(){return q})),i.d(t,"publichActivePagePartChangeToApp",(function(){return $})),i.d(t,"publishAnimationPreviewToApp",(function(){return ee})),i.d(t,"publishSectionNavInfoToApp",(function(){return te})),i.d(t,"publishScreenGroupNavInfoToApp",(function(){return ie})),i.d(t,"listenAppEvents",(function(){return oe}));var n=i(0),o=i(10),a=i(7),r=i(5),s=i(1),u=i(15);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var I="undefined"!=typeof window,h=I&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),C=I&&(h&&h.getOriginalSymbol(window,"File")||File),y=I&&(h&&h.getOriginalSymbol(window,"FileReader")||FileReader),A=I&&new Promise((function(e,t){var i,n,o,a;return S("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(r){try{return D(i=r).then((function(r){try{return v(n=r[1],i.type,i.name,i.lastModified).then((function(i){try{return o=i,z(n),m(o).then((function(i){try{return M(i).then((function(i){try{return e(1===(a=i).width&&2===a.height)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}));function m(e){return new Promise((function(t,i){var n=new y;n.onload=function(){return t(n.result)},n.onerror=function(e){return i(e)},n.readAsDataURL(e)}))}function S(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((function(n){for(var o=e.split(","),a=o[0].match(/:(.*?);/)[1],r=window.atob(o[1]),s=r.length,u=new Uint8Array(s);s--;)u[s]=r.charCodeAt(s);var p=new Blob([u],{type:a});p.name=t,p.lastModified=i,n(p)}))}function M(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(e){return i(e)},n.src=e}))}function b(e){var t=d(L(e.width,e.height),2),i=t[0];return t[1].drawImage(e,0,0,i.width,i.height),i}function D(e){return new Promise((function(t,i){var n,o,a=function(){try{return o=b(n),t([n,o])}catch(e){return i(e)}},r=function(t){try{return m(e).then((function(e){try{return M(e).then((function(e){try{return n=e,a()}catch(e){return i(e)}}),i)}catch(e){return i(e)}}),i)}catch(e){return i(e)}};try{return createImageBitmap(e).then((function(e){try{return n=e,a()}catch(e){return r()}}),r)}catch(e){r()}}))}function v(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(a,r){var s;return"function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?e.convertToBlob({type:t,quality:o}).then(function(e){try{return(s=e).name=i,s.lastModified=n,u.call(this)}catch(e){return r(e)}}.bind(this),r):S(e.toDataURL(t,o),i,n).then(function(e){try{return s=e,u.call(this)}catch(e){return r(e)}}.bind(this),r);function u(){return a(s)}}))}function w(e){return new Promise((function(t,i){var n=new y;n.onload=function(e){var i=new DataView(e.target.result);if(65496!=i.getUint16(0,!1))return t(-2);for(var n=i.byteLength,o=2;o<n;){if(i.getUint16(o+2,!1)<=8)return t(-1);var a=i.getUint16(o,!1);if(o+=2,65505==a){if(1165519206!=i.getUint32(o+=2,!1))return t(-1);var r=18761==i.getUint16(o+=6,!1);o+=i.getUint32(o+4,r);var s=i.getUint16(o,r);o+=2;for(var u=0;u<s;u++)if(274==i.getUint16(o+12*u,r))return t(i.getUint16(o+12*u+8,r))}else{if(65280!=(65280&a))break;o+=i.getUint16(o,!1)}}return t(-1)},n.onerror=function(e){return i(e)},n.readAsArrayBuffer(e)}))}function j(e,t){var i,n=e.width,o=e.height,a=t.maxWidthOrHeight,r=e;if(isFinite(a)&&(n>a||o>a)){var s=d(L(n,o),2);r=s[0],i=s[1],n>o?(r.width=a,r.height=o/n*a):(r.width=n/o*a,r.height=a),i.drawImage(e,0,0,r.width,r.height),z(e)}return r}function N(e,t){var i=e.width,n=e.height,o=d(L(i,n),2),a=o[0],r=o[1];switch(4<t&&t<9?(a.width=n,a.height=i):(a.width=i,a.height=n),t){case 2:r.transform(-1,0,0,1,i,0);break;case 3:r.transform(-1,0,0,-1,i,n);break;case 4:r.transform(1,0,0,-1,0,n);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,n,0);break;case 7:r.transform(0,-1,-1,0,n,i);break;case 8:r.transform(0,-1,1,0,0,i)}return r.drawImage(e,0,0,i,n),z(e),a}function L(e,t){var i,n;try{if(null===(n=(i=new OffscreenCanvas(e,t)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(e){n=(i=document.createElement("canvas")).getContext("2d")}return i.width=e,i.height=t,[i,n]}function z(e){e.width=0,e.height=0}function T(e,t){return new Promise((function(i,n){var o,a,r,s,u,p,c,g,l,I,f,h,C,y,m,S;function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;o+=e,t.onProgress(Math.min(o,100))}function b(e){o=Math.min(Math.max(e,o),100),t.onProgress(o)}return o=0,a=t.maxIteration||10,r=1024*t.maxSizeMB*1024,M(),D(e).then(function(o){try{var D=d(o,2);return D[0],s=D[1],M(),u=j(s,t),M(),new Promise((function(i,n){var o;if(!(o=t.exifOrientation))return w(e).then(function(e){try{return o=e,a.call(this)}catch(e){return n(e)}}.bind(this),n);function a(){return i(o)}return a.call(this)})).then(function(o){try{return t.exifOrientation=o,M(),A.then(function(o){try{return p=o?u:N(u,t.exifOrientation),M(),c=1,v(p,t.fileType||e.type,e.name,e.lastModified,c).then(function(o){try{{if(g=o,M(),l=g.size>r,I=g.size>e.size,!l&&!I)return b(100),i(g);var A;function D(){if(a--&&(C>r||C>f)){var i,o,s=d(L(i=l?.95*S.width:S.width,o=l?.95*S.height:S.height),2);return m=s[0],s[1].drawImage(S,0,0,i,o),"image/jpeg"===e.type&&(c*=.95),v(m,t.fileType||e.type,e.name,e.lastModified,c).then((function(e){try{return y=e,z(S),S=m,C=y.size,b(Math.min(99,Math.floor((h-C)/(h-r)*100))),D}catch(e){return n(e)}}),n)}return[1]}return f=e.size,h=g.size,C=h,S=p,(A=function(e){for(;e;){if(e.then)return void e.then(A,n);try{if(e.pop){if(e.length)return e.pop()?w.call(this):e;e=D}else e=e.call(this)}catch(e){return n(e)}}}.bind(this))(D);function w(){return z(S),z(m),z(u),z(p),z(s),b(100),i(y)}}}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this),n)}catch(e){return n(e)}}.bind(this),n)}))}I&&(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var x,O,P=0;function k(){return function(e){return"function"==typeof e&&(e="(".concat(f,")()")),new Worker(URL.createObjectURL(new Blob([e])))}("\n    let scriptImported = false\n    self.addEventListener('message', async (e) => {\n      const { file, id, imageCompressionLibUrl, options } = e.data\n      options.onProgress = (progress) => self.postMessage({ progress, id })\n      try {\n        if (!scriptImported) {\n          // console.log('[worker] importScripts', imageCompressionLibUrl)\n          self.importScripts(imageCompressionLibUrl)\n          scriptImported = true\n        }\n        // console.log('[worker] self', self)\n        const compressedFile = await imageCompression(file, options)\n        self.postMessage({ file: compressedFile, id })\n      } catch (e) {\n        // console.error('[worker] error', e)\n        self.postMessage({ error: e.message + '\\n' + e.stack, id })\n      }\n    })\n  ")}function E(e,t){return new Promise((function(i,n){var o,a,r;if(t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,a="boolean"!=typeof t.useWebWorker||t.useWebWorker,delete t.useWebWorker,void 0===t.onProgress&&(t.onProgress=function(){}),!(e instanceof Blob||e instanceof C))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return n(new Error("The file given is not an image"));if(r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!a||"function"!=typeof Worker||r)return T(e,t).then(function(e){try{return o=e,p.call(this)}catch(e){return n(e)}}.bind(this),n);var s=function(){try{return p.call(this)}catch(e){return n(e)}}.bind(this),u=function(i){try{return T(e,t).then((function(e){try{return o=e,s()}catch(e){return n(e)}}),n)}catch(e){return n(e)}};try{return function(e,t){return new Promise((function(i,n){return new Promise((function(o,a){var r=P++;return x||(x=function(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}("\n    function imageCompression (){return (".concat(E,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(E.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(E.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(E.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(E.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(E.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(E.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(E.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(E.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(E.followExifOrientation,"\n    imageCompression.cleanupMemory = ").concat(E.cleanupMemory,"\n\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n    cleanupMemory = imageCompression.cleanupMemory\n\n    getNewCanvasAndCtx = ").concat(L,"\n    \n    CustomFileReader = FileReader\n    \n    CustomFile = File\n    \n    function _slicedToArray(arr, n) { return arr }\n    \n    function _typeof(a) { return typeof a }\n\n    function compress (){return (").concat(T,").apply(null, arguments)}\n    "))),O||(O=k()),O.addEventListener("message",(function e(o){if(o.data.id===r){if(void 0!==o.data.progress)return void t.onProgress(o.data.progress);O.removeEventListener("message",e),o.data.error&&n(new Error(o.data.error)),i(o.data.file)}})),O.addEventListener("error",n),O.postMessage({file:e,id:r,imageCompressionLibUrl:x,options:g(g({},t),{},{onProgress:void 0})}),o()}))}))}(e,t).then((function(e){try{return o=e,s()}catch(e){return u()}}),u)}catch(e){u()}function p(){try{o.name=e.name,o.lastModified=e.lastModified}catch(e){}return i(o)}}))}E.getDataUrlFromFile=m,E.getFilefromDataUrl=S,E.loadImage=M,E.drawImageInCanvas=b,E.drawFileInCanvas=D,E.canvasToFile=v,E.getExifOrientation=w,E.handleMaxWidthOrHeight=j,E.followExifOrientation=N,E.cleanupMemory=z,E.version="1.0.12";var U=E,G=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},W=function(e,t){var i,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function B(e){ne("to_app."+s.a.AppConfigChanged,e)}function R(e){ne("to_app."+s.a.AppInfoChanged,e)}function Z(e){ne("to_app."+s.a.DialogInfosChanged,e)}function Q(e){ne("to_app."+s.a.ChangeAppMode,e)}function Y(e){ne("to_app."+s.a.ChangePage,e)}function _(e){ne("to_app."+s.a.ChangeDialog,e)}function F(e){ne("to_app."+s.a.ChangeSelection,e)}function H(e){ne("to_app."+s.a.ChangeWidgetStateProp,e)}function J(e){ne("to_app."+s.a.ChangeWidgetMutableStateProp,e)}function V(e){ne("to_app."+s.a.BuilderTriggerKeyboard,e)}function K(e){ne("to_app."+s.a.ChangeBrowserSizeMode,e)}function X(){ne("to_app."+s.a.BuilderSessionChanged,n.SessionManager.getInstance().getSessions())}function q(e){ne("to_app."+s.a.ChangeZoomScale,e)}function $(e){ne("to_app."+s.a.ActivePagePartChanged,e)}function ee(e){ne("to_app."+s.a.AnimationPreview,e)}function te(e,t){ne("to_app."+s.a.SectionNavInfoChanged,{sectionId:e,navInfo:t})}function ie(e,t){ne("to_app."+s.a.ScreenGroupNavInfoChanged,{screenGroupId:e,activeIndex:t})}function ne(e,t){window._builderPubsub.publishSync(e,t)}function oe(){var e=this;window._builderPubsub.subscribe("to_builder."+s.b.AppSessionChanged,(function(e,t){n.SessionManager.getInstance().syncSessionsFromOtherWindow(t)})),window._builderPubsub.subscribe("to_builder",(function(e,t){console.debug(e,t)})),window._builderPubsub.subscribe("to_builder."+s.b.AppStateChanged,(function(e,t){var i;if(Object(n.getAppStore)().getState().builder.currentAppId!==t.appId&&Object(n.getAppStore)().dispatch(r.c.changeCurrentApp(t.appId)),!Object(n.getAppStore)().getState().appStateInBuilder||Object(n.getAppStore)().getState().appStateInBuilder.appConfig!==t.appConfig){var s=t.appConfig,u=null===(i=Object(n.getAppStore)().getState().appStateInBuilder)||void 0===i?void 0:i.appConfig;if(s&&u){if(Object.keys(s.widgets||{}).find((function(e){return s.widgets[e]&&u.widgets[e]&&s.widgets[e].version!==u.widgets[e].version})))return void Object(n.getAppStore)().dispatch(o.b.inAppAppStateChanged(t));var p=Object.keys(u.widgets).filter((function(e){return!s.widgets[e]}));Object(n.getAppStore)().dispatch(r.c.widgetsRemoved(p));var c=Object.keys(s.widgets).filter((function(e){return!u.widgets[e]})).map((function(e){return{widgetId:e,widgetUri:s.widgets[e].uri}}));Object(n.getAppStore)().dispatch(r.c.widgetsAdded(c))}Object(n.getAppStore)().dispatch(a.b.InBuilderPutAppConfigIntoHistory(t.appConfig))}Object(n.getAppStore)().dispatch(o.b.inAppAppStateChanged(t))})),window._builderPubsub.subscribe("to_builder."+s.b.PopupChooseWidget,(function(e,t){Object(n.getAppStore)().dispatch(r.c.openChooseWidgetPopup(t.layoutId,t.layoutItemId))})),window._builderPubsub.subscribe("to_builder."+s.b.AppAddResource,(function(t,i){var o=u.a.getInstance();o.getBlobByBlobUrl(i.file).then((function(t){return G(e,void 0,void 0,(function(){var e;return W(this,(function(a){switch(a.label){case 0:return e=t,t&&t.size&&t.size>204800?[4,U(t,{maxSizeMB:.2,maxWidthOrHeight:1024,useWebWorker:!0})]:[3,2];case 1:e=a.sent(),a.label=2;case 2:return i.file=e,o.upLoadFileToResource(i),i.type===n.ResourceType.Image&&i.originId&&u.a.getInstance().updateImageResourceItemInfo(i),[2]}}))}))}))})),window._builderPubsub.subscribe("to_builder."+s.b.AppClearResources,(function(e,t){u.a.getInstance().clearResources(t)})),window._builderPubsub.subscribe("to_builder."+s.b.AppTriggerKeyboard,(function(e,t){n.keyboardUtils.triggerEvent(t)})),window._builderPubsub.subscribe("to_builder."+s.b.SetLayoutTools,(function(e,t){Object(n.getAppStore)().dispatch(r.c.setLayoutTools(t))})),window._builderPubsub.subscribe("to_builder."+s.b.ClearLastAppConfigFromHistory,(function(e){Object(n.getAppStore)().dispatch(a.b.InBuilderRemoveLastAppConfigFromHistory())})),window._builderPubsub.subscribe("to_builder."+s.b.SetIsBusy,(function(e,t){Object(n.getAppStore)().dispatch(n.appActions.setIsBusy(t))})),window._builderPubsub.subscribe("to_builder."+s.b.ConfirmDelete,(function(e,t){Object(n.getAppStore)().dispatch(r.c.confirmDeleteContentChanged(t))})),window._builderPubsub.subscribe("to_builder."+s.b.AppIsLoaded,(function(e,t){var i;ne("to_app."+s.a.PortalSelfChanged,Object(n.getAppStore)().getState().portalSelf),n.portalUtils.getAppInfo(null===(i=Object(n.getAppStore)().getState().queryObject)||void 0===i?void 0:i.id).then((function(e){ne("to_app."+s.a.AppInfoChanged,e)})),Object(n.getAppStore)().getState().user&&ne("to_app."+s.a.UserSignIn,Object(n.getAppStore)().getState().user)}))}},function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return s}));var n=i(0),o=i(3);function a(e,t,i){var o=e.layoutId,a=e.layoutItemId;if(!i[o])return i;if(!i[o].content[a])return i;var r=i[o],s=Object(n.Immutable)(i);if(r.order&&r.order.indexOf(a)>=0){var u=[];r.order.forEach((function(e){e!==a&&u.push(e)})),s=s.setIn([o,"order"],u)}return t&&(s=s.setIn([o,"content"],s[o].content.without(a))),s}function r(e,t){var i=o.utils.getMaximumId(t[e])+1,a=Object(n.Immutable)(t),r={id:""+i};return a=a.setIn([e,"content",r.id],r),{layoutInfo:{layoutId:e,layoutItemId:r.id},layouts:a}}function s(e){return Object.keys(e).forEach((function(t){var i=e[t];delete i.id,i.content&&Object.keys(i.content).forEach((function(e){delete i.content[e].id}))})),e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));var n,o=i(0);!function(e){e.InAppAppStateChanged="IN_APP_APP_STATE_CHANGED",e.InBuilderAppConfigChanged="IN_BUILDER_APP_CONFIG_CHANGED"}(n||(n={}));var a={inAppAppStateChanged:function(e){return{type:n.InAppAppStateChanged,appState:e}},inBuilderAppConfigChanged:function(e){return{type:n.InBuilderAppConfigChanged,appConfig:e}}},r=function(){function e(){this.id="builder-app-state-redux-store-extension"}return e.prototype.getActions=function(){return Object.keys(n).map((function(e){return n[e]}))},e.prototype.getInitLocalState=function(){return null},e.prototype.getReducer=function(){return function(e,t,i){switch(t.type){case n.InAppAppStateChanged:return t.appState;case n.InBuilderAppConfigChanged:return o.appConfigUtils.updateStateWhenAppConfigChange(e,t.appConfig);default:return e}}},e.prototype.getStoreKey=function(){return"appStateInBuilder"},e}();t.c=r},,function(e,t){e.exports=o},function(e,t,i){"use strict";i.d(t,"b",(function(){return M})),i.d(t,"a",(function(){return b}));var n,o,a=i(0),r=i(3),s=i(4),u=i(9),p=i(8),c=i(26),g=i(7),d=i(10),l=i(5);!function(e){e.NotExist="NOT_EXIST",e.NotUsed="NOT_USED",e.UsedDataSourceLost="USED DATASOURCE LOST"}(n||(n={})),function(e){e.Widget="widgets",e.Page="pages",e.Section="sections",e.View="views",e.Layout="layouts",e.Dialog="dialogs"}(o||(o={}));var I=function(){function e(e,t){this.type=e,this.id=t,this.children=[]}return e.prototype.addChild=function(e){e.parent=this,this.children.find((function(t){return t.id===e.id}))||this.children.push(e)},e}();function f(){var e,t,i=y(),o=C();function s(e){var t=[];return Object.keys(i.layouts).forEach((function(n){t=t.concat(r.searchUtils.getContentsInLayout(i.layouts[n],e,!0))})),t}console.log(o),e=s(a.LayoutItemType.Widget),Object.keys(i.widgets).forEach((function(t){e.indexOf(t)<0&&console.error(n.NotUsed,t)})),t=s(a.LayoutItemType.Section),Object.keys(i.sections).forEach((function(e){t.indexOf(e)<0&&console.error(n.NotUsed,e)})),function(){var e=[];i.pages&&Object.keys(i.pages).forEach((function(t){i.pages[t].layout&&e.push(i.pages[t].layout)})),i.dialogs&&Object.keys(i.dialogs).forEach((function(t){e.push(i.dialogs[t].layout)})),i.views&&Object.keys(i.views).forEach((function(t){e.push(i.views[t].layout)})),i.header&&e.push(i.header.layout),i.footer&&e.push(i.footer.layout),i.widgets&&Object.keys(i.widgets).forEach((function(t){i.widgets[t].layouts&&Object.keys(i.widgets[t].layouts).forEach((function(n){e.push(i.widgets[t].layouts[n])}))}));var t=[];e.forEach((function(e){t=t.concat(Object.keys(e).map((function(t){return e[t]})))})),i.layouts&&Object.keys(i.layouts).forEach((function(e){t.indexOf(e)<0&&console.error(n.NotUsed,e)}))}(),Object.keys(i.widgets).forEach((function(e){var t=i.widgets[e];t.useDataSources&&t.useDataSources.forEach((function(t){i.dataSources[t.dataSourceId]||i.dataSources[t.dataSourceId]||console.error(n.UsedDataSourceLost,e,t.dataSourceId)}))})),function e(t){t.errors&&console.error(t.errors,h(t));t.children.forEach((function(t){e(t)}))}(o)}function h(e){for(var t=[e];e.parent;)t.push(e.parent),e=e.parent;return t.reverse().shift(),t}function C(){var e=y(),t=new I(null,null);function i(t,i){var a=new I(o.Section,i);t.addChild(a);var r=e.sections[i];a.json=r,r?r.views.forEach((function(t){!function(t,i){var a=new I(o.View,i);t.addChild(a);var r=e.views[i];if(a.json=r,!r)return void(a.errors=[n.NotExist]);Object.keys(r.layout).forEach((function(e){var t=r.layout[e];s(a,t,e)}))}(a,t)})):a.errors=[n.NotExist]}function s(t,u,p){var c=new I(o.Layout,u);c.sizeMode=p,t.addChild(c);var g=e.layouts[u];(c.json=g,g)?(r.searchUtils.getContentsInLayout(g,a.LayoutItemType.Widget,!0).forEach((function(t){!function(t,i){var a=new I(o.Widget,i);t.addChild(a);var r=e.widgets[i];a.json=r,r?r.layouts&&Object.keys(r.layouts).forEach((function(e){Object.keys(r.layouts[e]).forEach((function(t){var i=r.layouts[e][t];s(a,i,t)}))})):a.errors=[n.NotExist]}(c,t)})),r.searchUtils.getContentsInLayout(g,a.LayoutItemType.Section,!0).forEach((function(e){i(c,e)}))):c.errors=[n.NotExist]}return t.json={id:null,label:"root"},Object.keys(e.pages).forEach((function(i){!function(i){var n=new I(o.Page,i);t.addChild(n);var a=e.pages[i];n.json=a,a.layout&&Object.keys(a.layout).forEach((function(e){var t=a.layout[e];s(n,t,e)}))}(i)})),t}function y(){var e=Object(a.getAppStore)().getState();return window.jimuConfig.isBuilder?e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig:e&&e.appConfig}f.getKeys=function(e){var t=C();console.log(t);var i=function(e,i){var n;return void 0===i&&(i=t),function e(t,i){i(t),t.children.find((function(t){e(t,i)}))}(i,(function(t){t.id===e&&(n=t)})),n}(e);return i?h(i):[]},window._checkAppConfig=f;var A=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,o++)n[o]=a[r];return n};function m(){return window.jimuConfig.isBuilder?Object(a.getAppStore)().getState().appStateInBuilder.browserSizeMode:Object(a.getAppStore)().getState().browserSizeMode}function S(e){var t;return(null==e?void 0:e.widgetType)===a.WidgetType.Layout||!0===(null===(t=null==e?void 0:e.properties)||void 0===t?void 0:t.hasEmbeddedLayout)}function M(e){var t;return void 0===e&&(e=void 0),e||(t=Object(a.getAppStore)().getState(),e=window.jimuConfig.isBuilder?t&&t.appStateInBuilder&&t.appStateInBuilder.appConfig:t&&t.appConfig),new b(e)}var b=function(){function e(e){this.appConfig=e}return e.prototype.exec=function(e){if(void 0===e&&(e=!1),window.jimuConfig.isBuilder){Object(a.getAppStore)().dispatch({type:"IN_BUILDER_APPCONFIG_REDOCLEAR"}),e&&Object(a.getAppStore)().dispatch(g.b.InBuilderRemoveLastAppConfigFromHistory()),p.publishAppConfigChangeToApp(this.appConfig);var t=Object(a.getAppStore)().getState().appStateInBuilder.appConfig,i=this.appConfig,n=Object.keys(t.widgets).filter((function(e){return!i.widgets[e]}));Object(a.getAppStore)().dispatch(l.c.widgetsRemoved(n));var o=Object.keys(i.widgets).filter((function(e){return!t.widgets[e]})).map((function(e){return{widgetId:e,widgetUri:i.widgets[e].uri}}));Object(a.getAppStore)().dispatch(l.c.widgetsAdded(o)),Object(a.getAppStore)().dispatch(d.b.inBuilderAppConfigChanged(this.appConfig)),Object(a.getAppStore)().dispatch(g.b.InBuilderPutAppConfigIntoHistory(this.appConfig))}else e&&c.clearLastAppConfigFromHistory(),Object(a.getAppStore)().dispatch(a.appActions.appConfigChanged(this.appConfig));return this},e.prototype.editWidgetConfig=function(e,t){return this.appConfig.widgets[e]?(this.appConfig=this.appConfig.setIn(["widgets",e,"config"],t),this):this},e.prototype.editWidget=function(e,t){var i=this;if(!this.appConfig.widgets[e.id])return this;var n=this.appConfig.widgets[e.id],o=n;return t&&(t.forEach((function(e){e.isOutputFromWidget||(e.isOutputFromWidget=!0)})),o=o.set("outputDataSources",t.map((function(e){return e.id})))),Object.keys(e).forEach((function(t){null===e[t]&&("outputDataSourcesJson"===t&&e.outputDataSources&&e.outputDataSources.forEach((function(e){return i.removeDataSource(e)})),o=o.without(t),delete e[t])})),n.outputDataSources&&n.outputDataSources.forEach((function(e){(!o.outputDataSources||o.outputDataSources.indexOf(e)<0)&&i.removeDataSource(e)})),o.outputDataSources&&o.outputDataSources.forEach((function(e){var o=t&&t.find((function(t){return t.id===e}));o&&(!n.outputDataSources||n.outputDataSources.indexOf(e)<0?i.addDataSource(Object(a.Immutable)(o)):i.editDataSource(Object(a.Immutable)(o)))})),o=o.merge(e),e.useDataSources&&o.layouts&&o.manifest.properties.passDataSourceToChildren&&this.copyUseDataSourceToAllChildWidgets(n,o),this.appConfig=this.appConfig.setIn(["widgets",e.id],o),this},e.prototype.editWidgetProperty=function(e,t,i){if(!this.appConfig.widgets||!this.appConfig.widgets[e])return this;if("outputDataSources"===t)return console.error("Please use editWidget to update outputDataSources."),this;var n=this.appConfig.widgets[e];return n.getIn([t])===i?this:this.editWidget(n.set(t,i).asMutable({deep:!0}))},e.prototype.createWidget=function(e,t){return this.appConfig=this.appConfig.setIn(["widgets",e.id],e),!1!==t&&S(e.manifest)&&(this.createLayoutsForWidget(e,m()),e=this.appConfig.widgets[e.id]),this.appConfig=this.appConfig.setIn(["widgets",e.id],e),e},e.prototype.removeWidget=function(e){var t=this;if(!this.appConfig.widgets||!this.appConfig.widgets[e])return this;var i=this.appConfig.widgets[e];return r.searchUtils.getLayoutInfosHoldcontent(this.appConfig,a.LayoutItemType.Widget,e).forEach((function(e){t.removeLayoutItem(e,!1)})),i.outputDataSources&&i.outputDataSources.forEach((function(e){return t.removeDataSource(e)})),this.appConfig=this.removeWidgetMessageAndAction(this.appConfig,e),i.layouts&&Object.keys(i.layouts).forEach((function(e){var n=i.layouts[e];Object.keys(n).forEach((function(e){t.removeLayout(n[e],!0)}))})),this.appConfig=this.appConfig.set("widgets",this.appConfig.widgets.without(e)),this},e.prototype.duplicateWidget=function(e){var t=this;if(!e||!this.appConfig.widgets[e])return null;var i=this.appConfig.widgets[e],n=i.set("id",s.getUniqueId(this.appConfig,"widget")).set("label",this.getDuplicateLabel("widgets",i.label));if(S(n.manifest)&&(this.appConfig=this.appConfig.setIn(["widgets",n.id],n),n=this.doDuplicateEmbedWidgetContent(n)),"controller"===i.manifest.name&&(n=this.fixWidgetIdInControllerWidgetAfterCopy(i,n)),this.duplicateWidgetMessageConfig(e,n.id),n.outputDataSources){var o=n.outputDataSources.map((function(e){return t.duplicateDataSource(e).id}));n=n.set("outputDataSources",o)}return this.appConfig=this.appConfig.setIn(["widgets",n.id],n),n},e.prototype.fixWidgetIdInControllerWidgetAfterCopy=function(e,t){var i,n,o,a,r,s,u,p=this;if(!(null===(n=null===(i=e.config)||void 0===i?void 0:i.behavior)||void 0===n?void 0:n.openStarts)||(null===(r=null===(a=null===(o=e.config)||void 0===o?void 0:o.behavior)||void 0===a?void 0:a.openStarts)||void 0===r?void 0:r.length)<=0)return t;var c=null===(u=null===(s=e.config)||void 0===s?void 0:s.behavior)||void 0===u?void 0:u.openStarts,g=[];return c.forEach((function(i){var n=p.appConfig.layouts[e.layouts.controller.LARGE],o=p.appConfig.layouts[t.layouts.controller.LARGE];null==n||n.order.forEach((function(e,t){if(n.content[e].widgetId===i){var a=o.content[o.order[t]].widgetId;g.push(a)}}))})),t.setIn(["config","behavior","openStarts"],g)},e.prototype.createSection=function(){var e=this.createEmptyLayoutJson(this.appConfig).set("type",a.LayoutType.FixedLayout);this.appConfig=this.appConfig.setIn(["layouts",e.id],e);var t=Object(a.Immutable)({id:s.getUniqueId(this.appConfig,"view"),label:s.getUniqueLabel(this.appConfig,"view",a.i18n.getIntl().formatMessage({id:"view"}))}).setIn(["layout",Object(a.getAppStore)().getState().browserSizeMode],e.id);this.appConfig=this.appConfig.setIn(["views",t.id],t);var i=s.getUniqueId(this.appConfig,"section"),n=s.getUniqueLabel(this.appConfig,"section",a.i18n.getIntl().formatMessage({id:"section"})),o=Object(a.Immutable)({id:i,label:n,views:[t.id]});return this.appConfig=this.appConfig.setIn(["sections",o.id],o),o},e.prototype.removeSection=function(e){var t=this;return this.appConfig.sections&&this.appConfig.sections[e]?(r.searchUtils.getLayoutInfosHoldcontent(this.appConfig,a.LayoutItemType.Section,e).forEach((function(e){t.removeLayoutItem(e,!1)})),this.removeSectionContent(e),this.appConfig=this.appConfig.set("sections",this.appConfig.sections.without(e)),this):this},e.prototype.editSection=function(e){if(!this.appConfig.sections[e.id])return this;var t=this.appConfig.sections[e.id];return e.views.length!==t.views.length?(console.error("Can not add/remove view."),this):(this.appConfig=this.appConfig.setIn(["sections",e.id],e),this)},e.prototype.editSectionProperty=function(e,t,i){if(!this.appConfig.sections||!this.appConfig.sections[e])return this;var n=this.appConfig.sections[e];return n.getIn([t])===i?this:this.editSection(n.set(t,i))},e.prototype.editScreenGroupProperty=function(e,t,i){return this.appConfig.screenGroups&&this.appConfig.screenGroups[e]?(this.appConfig.screenGroups[e].getIn([t])===i||(this.appConfig=this.appConfig.setIn(["screenGroups",e,t],i)),this):this},e.prototype.duplicateSection=function(e){var t=this;if(!e||!this.appConfig.sections[e])return null;var i=this.appConfig.sections[e],n=i.set("id",s.getUniqueId(this.appConfig,"section")).set("label",this.getDuplicateLabel("sections",i.label));this.appConfig=this.appConfig.setIn(["sections",n.id],n);var o=i.views&&i.views.map((function(e){return t.duplicateView(e,n.id,!1).id}));return n=n.set("views",o),this.appConfig=this.appConfig.setIn(["sections",n.id],n),n},e.prototype.editView=function(e){return this.appConfig=this.appConfig.setIn(["views",e.id],e),this},e.prototype.addView=function(e,t,i){var n,o=this;return this.appConfig.views&&this.appConfig.views[e.id]||(this.appConfig.sections&&this.appConfig.sections[t]&&this.appConfig.sections[t].views?(n=this.appConfig.sections[t].views.asMutable()).push(e.id):n=[e.id],this.appConfig=this.appConfig.setIn(["views",e.id],e).setIn(["sections",t,"views"],Object(a.Immutable)(n)),i&&i.forEach((function(e){return o.addLayout(e)}))),this},e.prototype.duplicateView=function(e,t,i){var n;if(!this.appConfig.views||!this.appConfig.views[e])return null;var o=this.appConfig.views[e].set("id",s.getUniqueId(this.appConfig,"view"));if(o=o.set("label",this.getDuplicateLabel("views",o.label)),this.appConfig=this.appConfig.setIn(["views",o.id],o),o=o.set("layout",this.doDuplicateContainerContent(a.ContainerType.View,e)),this.appConfig=this.appConfig.setIn(["views",o.id],o),i){var r=this.appConfig.sections[t];r=r.set("views",(n=r.views).concat.apply(n,[o.id])),this.appConfig=this.appConfig.setIn(["sections",r.id],r)}return o},e.prototype.removeView=function(e,t){if(!(this.appConfig.views&&this.appConfig.views[e]&&this.appConfig.sections[t]&&this.appConfig.sections[t].views))return this;if(!this.appConfig.sections||!this.appConfig.sections[t]||1===this.appConfig.sections[t].views.length||this.appConfig.sections[t].views.indexOf(e)<0)return this;var i=this.appConfig.sections[t].views.flatMap((function(t){return t===e?[]:[t]}));return this.appConfig=this.appConfig.setIn(["sections",t,"views"],i),this.removeContainerContent(a.ContainerType.View,e),this.appConfig=this.appConfig.set("views",this.appConfig.views.without(e)),this},e.prototype.moveViewInSection=function(e,t,i,n){if(!(this.appConfig.sections&&this.appConfig.sections[e]&&this.appConfig.views&&this.appConfig.views[t]&&this.appConfig.views[i]))return this;if(i===t)return console.error("viewId is same to targetViewId."),this;var o=this.appConfig.sections[e].views.asMutable(),a=(o=o.filter((function(e){return e!==t}))).indexOf(i);return"below"===n&&a++,o=o.slice(0,a).concat(t).concat(o.slice(a)),this.appConfig=this.appConfig.setIn(["sections",e,"views"],o),this},e.prototype.createScreenGroup=function(){var e=s.getUniqueId(this.appConfig,"screenGroup"),t=s.getUniqueLabel(this.appConfig,"screenGroup",a.i18n.getIntl().formatMessage({id:"screenGroup"})),i=Object(a.Immutable)({id:e,label:t,screens:[],transitionType:a.ScreenTransitionType.Fade});return this.appConfig=this.appConfig.setIn(["screenGroups",i.id],i),i},e.prototype.editScreen=function(e){return this.appConfig=this.appConfig.setIn(["screens",e.id],e),this},e.prototype.moveScreenInGroup=function(e,t,i,n){var o;if(!(null===(o=this.appConfig.screenGroups)||void 0===o?void 0:o[e])||t===i)return this;var a=this.appConfig.screenGroups[e].screens.asMutable(),r=a[t],s=a[i];a.splice(t,1);var u=a.indexOf(s);return"below"===n?a.splice(u,1,s,r):a.splice(u,1,r,s),this.appConfig=this.appConfig.setIn(["screenGroups",e,"screens"],a),this},e.prototype.removeScreenByIndex=function(e,t){var i,n,o=null===(n=null===(i=this.appConfig.screenGroups)||void 0===i?void 0:i[t])||void 0===n?void 0:n.screens,a=null==o?void 0:o[e];return this.removeScreen(a,t)},e.prototype.removeScreenGroup=function(e){var t,i=this;return(null===(t=this.appConfig.screenGroups)||void 0===t?void 0:t[e])?(this.appConfig.screenGroups[e].screens&&this.appConfig.screenGroups[e].screens.forEach((function(t){i.removeScreen(t,e,!0)})),r.searchUtils.getLayoutInfosHoldcontent(this.appConfig,a.LayoutItemType.ScreenGroup,e).forEach((function(e){i.removeLayoutItem(e,!1)})),this.appConfig=this.appConfig.set("screenGroups",this.appConfig.screenGroups.without(e)),this):this},e.prototype.removeScreen=function(e,t,i){var n,o,a,r,s=this;if(void 0===i&&(i=!1),!(null===(n=this.appConfig.screens)||void 0===n?void 0:n[e])||!(null===(a=null===(o=this.appConfig.screenGroups)||void 0===o?void 0:o[t])||void 0===a?void 0:a.screens))return this;if(1===this.appConfig.screenGroups[t].screens.length&&!i||this.appConfig.screenGroups[t].screens.indexOf(e)<0)return this;var u=this.appConfig.screenGroups[t].screens.flatMap((function(t){return t===e?[]:[t]}));this.appConfig=this.appConfig.setIn(["screenGroups",t,"screens"],u);var p=this.appConfig.screens[e];return Object.keys((null===(r=p.panel)||void 0===r?void 0:r.layout)||{}).forEach((function(e){var t=p.panel.layout[e];s.removeLayout(t,!0)})),Object.keys(p.main.layout).forEach((function(e){var t=p.main.layout[e];s.removeLayout(t,!0)})),this.appConfig=this.appConfig.set("screens",this.appConfig.screens.without(e)),this},e.prototype.duplicateScreenByIndex=function(e,t,i){var n,o;void 0===i&&(i=!0);var a=null===(o=null===(n=this.appConfig.screenGroups)||void 0===n?void 0:n[t])||void 0===o?void 0:o.screens,r=null==a?void 0:a[e];return this.duplicateScreen(r,t,i)},e.prototype.duplicateScreen=function(e,t,i){var n,o=this;if(void 0===i&&(i=!0),!this.appConfig.screens[e])return null;var a=this.appConfig.screens[e].set("id",s.getUniqueId(this.appConfig,"screen"));if(a=a.set("label",this.getDuplicateLabel("screens",a.label)),this.appConfig=this.appConfig.setIn(["screens",a.id],a),(null===(n=a.panel)||void 0===n?void 0:n.layout)&&Object.keys(a.panel.layout).forEach((function(e){var t=o.duplicateLayout(a.panel.layout[e],!0);o.appConfig=o.appConfig.setIn(["layouts",t.id],t),a=a.setIn(["panel","layout",e],t.id)})),Object.keys(a.main.layout).forEach((function(e){var t=o.duplicateLayout(a.main.layout[e],!0);o.appConfig=o.appConfig.setIn(["layouts",t.id],t),a=a.setIn(["main","layout",e],t.id)})),this.appConfig=this.appConfig.setIn(["screens",a.id],a),i){var r=this.appConfig.screenGroups[t],u=r.screens.asMutable(),p=u.indexOf(e);u.splice(p,1,e,a.id),r=r.set("screens",u),this.appConfig=this.appConfig.setIn(["screenGroups",r.id],r)}return a},e.prototype.duplicateScreenGroup=function(e){var t=this;if(!this.appConfig.screenGroups[e])return null;var i=this.appConfig.screenGroups[e],n=i.set("id",s.getUniqueId(this.appConfig,"screenGroup")).set("label",this.getDuplicateLabel("screenGroups",i.label));this.appConfig=this.appConfig.setIn(["screenGroups",n.id],n);var o=i.screens.map((function(e){return t.duplicateScreen(e,n.id,!1).id}));return n=n.set("screens",o),this.appConfig=this.appConfig.setIn(["screenGroups",n.id],n),n},e.prototype.editPage=function(e){return this.appConfig=this.appConfig.setIn(["pages",e.id],e),this},e.prototype.editPageProperty=function(e,t,i){if(!this.appConfig.pages||!this.appConfig.pages[e])return this;var n=this.appConfig.pages[e];return n.getIn([t])===i?this:this.editPage(n.setIn([t],i))},e.prototype.addPage=function(e){var t;return this.appConfig.pages&&this.appConfig.pages[e.id]||(this.appConfig=this.appConfig.setIn(["pages",e.id],e),this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.concat([(t={},t[e.id]=[],t)]))),this},e.prototype.duplicatePage=function(e,t){var i,n=this;if(void 0===t&&(t=!1),!this.appConfig.pages||!this.appConfig.pages[e])return null;var o=this.appConfig.pages[e].set("id",s.getUniqueId(this.appConfig,"page"));o=o.set("label",this.getDuplicateLabel("pages",o.label)),this.appConfig=this.appConfig.setIn(["pages",o.id],o),o.isDefault&&(o=o.set("isDefault",!1)),o.type!==a.PageType.Link&&o.type!==a.PageType.Folder&&(o=o.set("layout",this.doDuplicateContainerContent(a.ContainerType.Page,o.id)));var r=this.appConfig.pageStructure.find((function(t){return!!t[e]})),u=[];if(r&&r[e].forEach((function(e){var t=n.duplicatePage(e,!0);u.push(t.id)})),!t)if(r){if(this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.concat([(i={},i[o.id]=[],i)])),u.length>0){var p=o.id,c=this.appConfig.pageStructure.length-1;c<0&&(c=0),this.appConfig=this.appConfig.setIn(["pageStructure",c+"",p],u)}}else this.appConfig.pageStructure.some((function(t,i){var a=Object.keys(t).find((function(i){return t[i].indexOf(e)>-1}));if(a)return n.appConfig=n.appConfig.setIn(["pageStructure",i+"",a],n.appConfig.pageStructure[i][a].concat(o.id)),!0}));return this.appConfig=this.appConfig.setIn(["pages",o.id],o),o},e.prototype.movePageIntoPage=function(e,t){return this.appConfig.pages&&this.appConfig.pages[e]&&this.appConfig.pages[t]?e===t?(console.error("SubPage is same to ParentPage."),this):s.isFirstLevelPage(this.appConfig,t)?s.isPageHasSubPage(this.appConfig,e)?(console.error("SubPage has sub page(s)."),this):(this.removePageFromPageStructure(e),this.movePageIntoPageForPageStructure(e,t),this):(console.error("ParentPage is not on the first aspect."),this):this},e.prototype.orderPageToPage=function(e,t,i){var n=this;if(!this.appConfig.pages||!this.appConfig.pages[t]||!this.appConfig.pages[e])return this;if(t===e)return console.error("pageId is same to targetPageId."),this;var o=!s.isFirstLevelPage(this.appConfig,t);if((s.isPageHasSubPage(this.appConfig,e)||this.appConfig.pages[e].type===a.PageType.Folder)&&o)return console.error("page structure allow two aspects only"),this;var r=this.appConfig.pageStructure.find((function(t){return!!t[e]}));return this.removePageFromPageStructure(e),o?this.appConfig.pageStructure.some((function(o,a){var r=Object.keys(o)[0],s=o[r].indexOf(t);if(s>-1){var u=n.appConfig.pageStructure[a][r];return"bottom"===i&&(s+=1),u=u.slice(0,s).concat([e]).concat(u.slice(s)),n.appConfig=n.appConfig.setIn(["pageStructure",a+"",r],u),!0}})):this.appConfig.pageStructure.some((function(o,a){var s;if(Object.keys(o)[0]===t){"bottom"===i&&(a+=1);var u=n.appConfig.pageStructure.slice(0,a).concat([r||(s={},s[e]=[],s)]).concat(n.appConfig.pageStructure.slice(a));return n.appConfig=n.appConfig.set("pageStructure",u),!0}})),this},e.prototype.removePage=function(e){var t=this;if(!this.appConfig.pages||!this.appConfig.pages[e])return this;var i=this.appConfig.pages[e];i.type!==a.PageType.Folder&&i.type!==a.PageType.Link&&this.removeContainerContent(a.ContainerType.Page,e);var n=this.appConfig.pageStructure,o=n&&n.find((function(t){return!!t[e]}));return o&&o[e].length>0&&o[e].forEach((function(e){t.removePage(e)})),this.removePageFromPageStructure(e),this.appConfig=this.appConfig.set("pages",this.appConfig.pages.without(e)),this},e.prototype.setHomePage=function(e){return this.editPageProperty(e,"isDefault",!0)},e.prototype.replaceHomePage=function(e){var t=this;return Object.keys(this.appConfig.pages).some((function(e,i){var n=t.appConfig.pages[e];if(n.isDefault)return t.editPageProperty(n.id,"isDefault",!1),!0})),this.editPageProperty(e,"isDefault",!0)},e.prototype.editDialog=function(e){var t=this.appConfig.dialogs[e.id].mode;if(t!==e.mode){var i=this.appConfig.dialogs.asMutable({deep:!0});Object.keys(i).map((function(n){var o=i[n];o.id===e.id?i[n]=Object.assign({},e.asMutable({deep:!0}),{index:Object.keys(i).filter((function(e){return i[e].mode!==t})).length}):o.mode===t&&o.index>e.index&&(o.index=o.index-1)})),this.appConfig=this.appConfig.set("dialogs",Object(a.Immutable)(i))}else this.appConfig=this.appConfig.setIn(["dialogs",e.id],e);return this},e.prototype.editDialogProperty=function(e,t,i){if(!this.appConfig.dialogs||!this.appConfig.dialogs[e])return this;var n=this.appConfig.dialogs[e];return n.getIn([t])===i?this:this.editDialog(n.setIn([t],i))},e.prototype.removeDialog=function(e){var t=this.appConfig.dialogs;if(!t||!t[e])return this;this.removeContainerContent(a.ContainerType.Dialog,e);var i=t[e].mode,n=t[e].index,o=t.without(e).asMutable({deep:!0});return Object.keys(o).map((function(e){var t=o[e];t.mode===i&&t.index>n&&(t.index=t.index-1)})),this.appConfig=this.appConfig.set("dialogs",Object(a.Immutable)(o)),this},e.prototype.duplicateDialog=function(e){var t=this.appConfig.dialogs,i=t[e];if(!t||!i)return null;var n=Object.keys(Object.keys(t).filter((function(e){return t[e].mode===i.mode}))).length;return i=i.set("id",s.getUniqueId(this.appConfig,"dialog")).set("index",n).set("isSplash",!1).set("label",this.getDuplicateLabel("dialogs",i.label)).set("layout",this.doDuplicateContainerContent(a.ContainerType.Dialog,i.id)),this.appConfig=this.appConfig.setIn(["dialogs",i.id],i),i},e.prototype.orderDialogToDialog=function(e,t,i){var n,o=this.appConfig.dialogs.asMutable({deep:!0}),r=o[e],s=o[t];return o&&r&&s?t===e?(console.error("dialogId is same to targetDialogId."),this):(s.index>r.index?(n="top"===i?s.index-1:s.index,Object.keys(o).map((function(t){var i=o[t];i.mode===s.mode&&i.id!==e&&i.index>r.index&&i.index<=n&&(i.index=i.index-1)}))):(n="top"===i?s.index:s.index+1,Object.keys(o).map((function(t){var i=o[t];i.mode===s.mode&&i.id!==e&&i.index>=n&&i.index<r.index&&(i.index=i.index+1)}))),o[e]=Object.assign({},r,{index:n,mode:s.mode}),this.appConfig=this.appConfig.set("dialogs",Object(a.Immutable)(o)),this):this},e.prototype.replaceSplashDialog=function(e){var t=this,i="";return Object.keys(this.appConfig.dialogs).some((function(e){var n=t.appConfig.dialogs[e];if(n.isSplash)return t.editDialogProperty(n.id,"isSplash",!1),i=n.id,!0})),!i||i&&e!==i?this.editDialogProperty(e,"isSplash",!0):this},e.prototype.createLayoutForSizeModeForHeader=function(e,t){if(!this.appConfig.header)return this;var i=this.createLayoutForSizeModeForOneLayout(e,t,this.appConfig.header.layout);return i&&(this.appConfig=this.appConfig.setIn(["header","layout",e],i.id)),this},e.prototype.removeSizeModeLayoutFromHeader=function(e){return this.appConfig.header.layout?(this.removeSizeModeLayout(this.appConfig.header.layout[e],e),this.appConfig=this.appConfig.setIn(["header","layout"],this.appConfig.header.layout.without(e)),this):this},e.prototype.createLayoutForSizeModeForFooter=function(e,t){if(!this.appConfig.footer)return this;var i=this.createLayoutForSizeModeForOneLayout(e,t,this.appConfig.footer.layout);return i&&(this.appConfig=this.appConfig.setIn(["footer","layout",e],i.id)),this},e.prototype.removeSizeModeLayoutFromFooter=function(e){return this.appConfig.footer.layout?(this.removeSizeModeLayout(this.appConfig.footer.layout[e],e),this.appConfig=this.appConfig.setIn(["footer","layout"],this.appConfig.footer.layout.without(e)),this):this},e.prototype.copyLayoutContent=function(e,t){var i=this.appConfig.layouts[e];return i?(this.appConfig=this.appConfig.setIn(["layouts",t],i.set("id",t)),this):this},e.prototype.createLayoutForSizeModeForPageBody=function(e,t,i){if(!this.appConfig.pages[i])return this;var n=this.appConfig.pages[i],o=this.createLayoutForSizeModeForOneLayout(e,t,n.layout);return o&&(this.appConfig=this.appConfig.setIn(["pages",i,"layout",e],o.id)),this},e.prototype.removeSizeModeLayoutFromPageBody=function(e,t){if(!this.appConfig.pages[e]||!this.appConfig.pages[e].layout)return this;var i=this.appConfig.pages[e];return this.removeSizeModeLayout(i.layout[t],t),this.appConfig=this.appConfig.setIn(["pages",e,"layout"],i.layout.without(t)),this},e.prototype.createLayoutForSizeModeForOneLayout=function(e,t,i){var n=this;if(i&&i[t]&&!i[e]){var o=this.duplicateLayout(i[t],!1);o=this.transformLayout(o,t,e);var u=r.searchUtils.getContentsInLayout(this.appConfig.layouts[o.id],a.LayoutItemType.Widget),p=r.searchUtils.getContentsInLayout(this.appConfig.layouts[o.id],a.LayoutItemType.Section),c=r.searchUtils.getContentsInLayout(this.appConfig.layouts[o.id],a.LayoutItemType.ScreenGroup);return u.filter((function(e){return n.appConfig.widgets&&n.appConfig.widgets[e]&&n.appConfig.widgets[e].manifest.properties.hasEmbeddedLayout})).forEach((function(i){var o;Object.keys(null!==(o=n.appConfig.widgets[i].layouts)&&void 0!==o?o:{}).forEach((function(o){var a=n.createLayoutForSizeModeForOneLayout(e,t,n.appConfig.widgets[i].layouts[o]);a&&(n.appConfig=n.appConfig.setIn(["widgets",i,"layouts",o,e],a.id))}))})),u.filter((function(e){return n.appConfig.widgets&&n.appConfig.widgets[e]&&n.appConfig.widgets[e].manifest.widgetType===a.WidgetType.Layout})).forEach((function(i){var u=s.getUniqueId(n.appConfig,"widget"),p=n.appConfig.widgets[i].set("id",u);n.appConfig=n.appConfig.setIn(["widgets",u],p);var c=r.searchUtils.getContainerLayoutItem(o,i,a.LayoutItemType.Widget);c=c.set("widgetId",u),o=o.setIn(["content",c.id],c),Object.keys(p.layouts).forEach((function(i){var o=n.createLayoutForSizeModeForOneLayout(e,t,p.layouts[i]);o&&(p=p.setIn(["layouts",i],p.layouts[i].without(t).set(e,o.id)))})),n.appConfig=n.appConfig.setIn(["widgets",u],p)})),p.forEach((function(i){n.appConfig.sections[i]&&n.appConfig.sections[i].views.forEach((function(i){if(n.appConfig.views[i]&&n.appConfig.views[i].layout[t]){var o=n.createLayoutForSizeModeForOneLayout(e,t,n.appConfig.views[i].layout);o&&(n.appConfig=n.appConfig.setIn(["views",i,"layout",e],o.id))}}))})),c.forEach((function(i){n.appConfig.screenGroups[i]&&n.appConfig.screenGroups[i].screens.forEach((function(i){var o,a,r,s,u=n.appConfig.screens[i];(null===(a=null===(o=u.panel)||void 0===o?void 0:o.layout)||void 0===a?void 0:a[t])&&((s=n.createLayoutForSizeModeForOneLayout(e,t,u.panel.layout))&&(n.appConfig=n.appConfig.setIn(["screens",i,"panel","layout",e],s.id)));(null===(r=u.main.layout)||void 0===r?void 0:r[t])&&((s=n.createLayoutForSizeModeForOneLayout(e,t,u.main.layout))&&(n.appConfig=n.appConfig.setIn(["screens",i,"main","layout",e],s.id)))}))})),this.appConfig=this.appConfig.setIn(["layouts",o.id],o),o}},e.prototype.removeSizeModeLayout=function(e,t){var i=this,n=r.searchUtils.getContentsInLayoutRecursive(this.appConfig,e,a.LayoutItemType.Widget,t,!0),o=r.searchUtils.getContentsInLayoutRecursive(this.appConfig,e,a.LayoutItemType.Section,t,!0),s=r.searchUtils.getContentsInLayoutRecursive(this.appConfig,e,a.LayoutItemType.ScreenGroup,t,!0);return n.forEach((function(e){var n=i.appConfig.widgets[e];n&&n.layouts&&Object.keys(n.layouts).forEach((function(o){n.layouts[o][t]&&(i.removeLayout(n.layouts[o][t],!0),i.appConfig.widgets[e]&&(i.appConfig=i.appConfig.setIn(["widgets",e,"layouts",o],n.layouts[o].without(t))))}))})),o.forEach((function(e){var n=i.appConfig.sections[e];n&&n.views&&n.views.forEach((function(e){var n=i.appConfig.views[e];n&&n.layout[t]&&(i.removeLayout(n.layout[t],!0),i.appConfig=i.appConfig.setIn(["views",e,"layout"],n.layout.without(t)))}))})),s.forEach((function(e){var n,o=i.appConfig.screenGroups[e];null===(n=null==o?void 0:o.screens)||void 0===n||n.forEach((function(e){var n,o,a,r,s=i.appConfig.screens[e];(null===(o=null===(n=null==s?void 0:s.panel)||void 0===n?void 0:n.layout)||void 0===o?void 0:o[t])&&(i.removeLayout(s.panel.layout[t],!0),i.appConfig=i.appConfig.setIn(["screens",e,"panel","layout"],s.panel.layout.without(t))),(null===(r=null===(a=null==s?void 0:s.main)||void 0===a?void 0:a.layout)||void 0===r?void 0:r[t])&&(i.removeLayout(s.main.layout[t],!0),i.appConfig=i.appConfig.setIn(["screens",e,"main","layout"],s.main.layout.without(t)))}))})),this.removeLayout(e,!0),this},e.prototype.createEmptyLayoutForWidgetOnCurrentSizeMode=function(e,t,i,n){var o=this.createEmptyLayoutJson(this.appConfig);return o=o.set("label",i),n&&(o=o.set("type",n)),this.appConfig=this.appConfig.setIn(["layouts",o.id],o).setIn(["widgets",e,"layouts",t,m()],o.id),o.id},e.prototype.removeLayoutFromWidget=function(e,t){var i,n,o,a=this;return(null===(i=this.appConfig.widgets[e])||void 0===i?void 0:i.layouts)&&(null===(n=this.appConfig.widgets[e])||void 0===n?void 0:n.layouts[t])?(Object.keys(null===(o=this.appConfig.widgets[e])||void 0===o?void 0:o.layouts[t]).forEach((function(i){var n,o=null===(n=a.appConfig.widgets[e])||void 0===n?void 0:n.layouts[t][i];a.removeLayout(o,!0)})),this.appConfig=this.appConfig.setIn(["widgets",e,"layouts"],this.appConfig.widgets[e].layouts.without(t)),this):this},e.prototype.addItemIntoLayout=function(e,t,i,n){var o=this,r=this.appConfig.layouts[e],s=[].concat(r.order||[]);return i>=0&&i<=s.length?s.splice(i,0,t.id):s.push(t.id),this.updateLayout(e,"order",s),this.appConfig=this.appConfig.setIn(["layouts",e,"content",t.id],t),n=n||this.appConfig.mainSizeMode,t.type===a.LayoutItemType.Widget&&this.updateWidgetDataSourceBeforeChangingLayout(t.widgetId,e),t.type===a.LayoutItemType.Widget&&this.appConfig.widgets[t.widgetId]&&this.appConfig.widgets[t.widgetId].layouts?Object.keys(this.appConfig.widgets[t.widgetId].layouts).forEach((function(e){var i=o.createLayoutForSizeModeForOneLayout(m(),n,o.appConfig.widgets[t.widgetId].layouts[e]);i&&(o.appConfig=o.appConfig.setIn(["widgets",t.widgetId,"layouts",e,m()],i.id))})):t.type===a.LayoutItemType.Section&&this.appConfig.sections[t.sectionId]&&this.appConfig.sections[t.sectionId].views&&this.appConfig.sections[t.sectionId].views.forEach((function(e){var t=o.createLayoutForSizeModeForOneLayout(m(),n,o.appConfig.views[e].layout);t&&(o.appConfig=o.appConfig.setIn(["views",e,"layout",m()],t.id))})),{layoutId:e,layoutItemId:t.id}},e.prototype.moveLayoutItemToAnotherLayout=function(e,t,i,n){var o,s,p=e.layoutId;Object(a.invariant)(p!==t.layoutId,"move item to another layout should have different layoutId");var c=r.searchUtils.findLayoutItem(this.appConfig,e);if(!c)return e;var g=this.appConfig.layouts[t.layoutId];c.type===a.LayoutItemType.Widget&&c.widgetId&&this.updateWidgetDataSourceBeforeChangingLayout(c.widgetId,t.layoutId);var d=this.appConfig.layouts;if(c.type===a.LayoutItemType.Widget||c.type===a.LayoutItemType.Section){var l=r.searchUtils.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId);if(l){var I=r.searchUtils.getBrowserSizeModeByLayoutIdAndWidgetId(this.appConfig,e.layoutId,l);r.searchUtils.getRelatedLayoutInfosInWidgetByLayoutInfo(this.appConfig,e,l,I).forEach((function(e){d=u.c(e,!0,d)})),this.appConfig=this.appConfig.set("layouts",d)}else this.appConfig=this.appConfig.set("layouts",u.c(e,!0,d))}else this.appConfig=this.appConfig.set("layouts",u.c(e,!0,d));var f=u.b(t.layoutId,this.appConfig.layouts),h=f.layoutInfo;this.appConfig=this.appConfig.set("layouts",f.layouts),this.updateLayoutItem(h,"type",c.type).updateLayoutItem(h,"setting",{style:{transform:null===(s=null===(o=c.setting)||void 0===o?void 0:o.style)||void 0===s?void 0:s.transform}}).updateLayoutItem(h,"bbox",i);var C=[].concat(g.order||[]);return n>=0&&n<=C.length?C.splice(n,0,h.layoutItemId):C.push(h.layoutItemId),this.updateLayout(t.layoutId,"order",C),c.type===a.LayoutItemType.Widget?this.updateLayoutItem(h,"widgetId",c.widgetId):c.type===a.LayoutItemType.Section&&this.updateLayoutItem(h,"sectionId",c.sectionId),h},e.prototype.setLayoutItemToPending=function(e,t){return r.searchUtils.findLayoutItem(this.appConfig,e)?(this.appConfig=this.appConfig.setIn(["layouts",e.layoutId,"content",e.layoutItemId,"isPending"],t),this):this},e.prototype.duplicateLayoutItem=function(e,t,i,n,o){if(void 0===o&&(o=!1),!this.appConfig.layouts||!this.appConfig.layouts[e])return null;if(!this.appConfig.layouts||!this.appConfig.layouts[t])return null;var s=r.searchUtils.findLayoutItem(this.appConfig,{layoutId:e,layoutItemId:i}),u=r.utils.getMaximumId(this.appConfig.layouts[t])+1+"",p=s.set("id",u),c=this.appConfig.layouts[t].order||Object(a.Immutable)([]),g=c.length;if(o&&(g=this.appConfig.layouts[e].order.findIndex((function(e){return e===i}))),c.length<g&&(g=c.length),c=c.slice(0,g).concat(p.id).concat(c.slice(g)),this.appConfig=this.appConfig.setIn(["layouts",t,"content",p.id],p),this.updateLayout(t,"order",c),!n)return{layoutId:t,layoutItemId:p.id};if(s.type===a.LayoutItemType.Widget&&s.widgetId){var d=this.duplicateWidget(s.widgetId);p=p.set("widgetId",d.id),this.appConfig=this.appConfig.setIn(["layouts",t,"content",p.id],p)}else if(s.type===a.LayoutItemType.Section&&s.sectionId){var l=this.duplicateSection(s.sectionId);p=p.set("sectionId",l.id),this.appConfig=this.appConfig.setIn(["layouts",t,"content",p.id],p)}else if(s.type===a.LayoutItemType.ScreenGroup&&s.screenGroupId){var I=this.duplicateScreenGroup(s.screenGroupId);p=p.set("screenGroupId",I.id),this.appConfig=this.appConfig.setIn(["layouts",t,"content",p.id],p)}return{layoutId:t,layoutItemId:p.id}},e.prototype.removeLayoutItem=function(e,t){var i=r.searchUtils.findLayoutItem(this.appConfig,e);if(!i)return this;t&&this.checkWhetherRemoveContent(e)&&(i.type===a.LayoutItemType.Widget?this.removeWidget(i.widgetId):i.type===a.LayoutItemType.Section?this.removeSection(i.sectionId):i.type===a.LayoutItemType.ScreenGroup&&this.removeScreenGroup(i.screenGroupId));var n=u.c(e,!0,this.appConfig.layouts);return this.appConfig=this.appConfig.set("layouts",n),this.clearRedundantLayout(e)},e.prototype.checkWhetherRemoveContent=function(e){var t,i=r.searchUtils.findLayoutItem(this.appConfig,e);return!!i&&(i.type===a.LayoutItemType.Widget?t=i.widgetId:i.type===a.LayoutItemType.Section?t=i.sectionId:i.type===a.LayoutItemType.ScreenGroup&&(t=i.screenGroupId),!(r.searchUtils.getLayoutInfosHoldcontent(this.appConfig,i.type,t).length>1))},e.prototype.clearRedundantLayout=function(e){return this.clearEmptyRowInFlowLayout(e),this.clearMaintainedColumnInRowWidget(e),this.clearGridLayout(e),this},e.prototype.removeLayout=function(e,t){var i=this;return this.appConfig.layouts[e]?(r.searchUtils.getLayoutItemIds(this.appConfig,e,!0).forEach((function(n){var o={layoutId:e,layoutItemId:n};i.removeLayoutItem(o,t)})),this.appConfig=this.appConfig.set("layouts",this.appConfig.layouts.without(e)),this):this},e.prototype.replaceLayout=function(e,t){var i=this.appConfig.layouts;return this.appConfig=this.appConfig.set("layouts",i.set(e,i[t]).setIn([e,"id"],e).without(t)),this},e.prototype.resetLayout=function(e,t){var i=this;return this.appConfig.layouts[e]?(r.searchUtils.getLayoutItemIds(this.appConfig,e,!0).forEach((function(n){var o={layoutId:e,layoutItemId:n};i.removeLayoutItem(o,t)})),this):this},e.prototype.duplicateLayoutItems=function(e,t,i){var n,o=this,a=this.appConfig.layouts[e];return a?((null!==(n=a.order)&&void 0!==n?n:[]).forEach((function(e){a.content[e].isPending||o.duplicateLayoutItem(a.id,t,e,i)})),this):this},e.prototype.duplicateLayout=function(e,t){var i=this.appConfig.layouts[e];if(!i)return null;var n=i.set("id",s.getUniqueId(this.appConfig,"layout"));return this.appConfig=this.appConfig.setIn(["layouts",n.id],n.without("content","order")),i.content&&this.duplicateLayoutItems(e,n.id,t),this.appConfig.layouts[n.id]},e.prototype.editLayoutSetting=function(e,t){return t=(this.appConfig.layouts[e.layoutId].setting||Object(a.Immutable)({})).merge(t),this.updateLayout(e.layoutId,"setting",t)},e.prototype.editLayoutType=function(e,t){return this.updateLayout(e.layoutId,"type",t)},e.prototype.editLayoutItemSetting=function(e,t){if(t){var i=r.searchUtils.findLayoutItem(this.appConfig,e);if(i)return t=(i.setting||Object(a.Immutable)({})).merge(t),this.updateLayoutItem(e,"setting",t)}return this},e.prototype.editLayoutItemSize=function(e,t,i){var n;if(0===t||0===i)return this;var o=e.layoutId,r=e.layoutItemId,s=this.appConfig.layouts[o],u=null===(n=null==s?void 0:s.content)||void 0===n?void 0:n[r];if(!s||!u)return this;var p=u.setting||Object(a.Immutable)({});if(s.type===a.LayoutType.FixedLayout){var c=u.bbox.set("width",t+"px").set("height",i+"px");return p=p.setIn(["autoProps","width"],!1).setIn(["autoProps","height"],!1),this.editLayoutItemBBox(e,c).editLayoutItemSetting(e,p)}return p=p.setIn(["autoProps","width"],!1).setIn(["autoProps","height"],!1).set("heightMode","ratio").set("aspectRatio",Number((i/t).toFixed(2))),this.editLayoutItemSetting(e,p)},e.prototype.editLayoutItemBBox=function(e,t){return this.updateLayoutItem(e,"bbox",t)},e.prototype.exchangeWidthAndHeight=function(){var e,t,i,n,o,s,u=Object(a.getAppStore)().getState();if(!(s=window.jimuConfig.isBuilder?null===(t=null===(e=null==u?void 0:u.appStateInBuilder)||void 0===e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.selection:null===(i=null==u?void 0:u.appRuntimeInfo)||void 0===i?void 0:i.selection))return this;var p=s.layoutId,c=this.appConfig.layouts[p];if((null==c?void 0:c.type)===a.LayoutType.FixedLayout){var g=r.searchUtils.findLayoutItem(this.appConfig,s);if(g){var d=g.bbox,l=!1,I=null!==(n=g.setting)&&void 0!==n?n:Object(a.Immutable)({}),f=null!==(o=I.autoProps)&&void 0!==o?o:{right:!0,bottom:!0};d=d.set("width",d.height).set("height",d.width),["left","right","top","bottom"].forEach((function(e){f[e]&&(d=d.without(e))})),this.editLayoutItemBBox(s,d),null==f.width&&null==f.height||(I=I.setIn(["autoProps","width"],f.height).setIn(["autoProps","height"],f.width),l=!0),"ratio"===I.heightMode&&(I=I.set("heightMode","fixed"),l=!0),l&&this.editLayoutItemSetting(s,I)}}return this},e.prototype.updateLayoutItem=function(e,t,i){if(r.searchUtils.findLayoutItem(this.appConfig,e)){var n=e.layoutId,o=e.layoutItemId;this.appConfig=this.appConfig.setIn(["layouts",n,"content",o,t],i)}return this},e.prototype.editLayoutItemIndex=function(e,t,i){var n=e.layoutId,o=this.appConfig.layouts[n].order;return!o||i<0&&i>o.length||this.adjustIndexOfLayoutItem(e,t,i),this},e.prototype.editLayoutOrder=function(e,t){return this.updateLayout(e.layoutId,"order",t)},e.prototype.addLayout=function(e){return this.appConfig.layouts&&this.appConfig.layouts[e.id]||(this.appConfig=this.appConfig.setIn(["layouts",e.id],e)),this},e.prototype.copyUseDataSourceToAllChildWidgets=function(e,t){var i=this,n=r.searchUtils.getChildrenContents(this.appConfig,t.id,a.LayoutItemType.Widget,!0),o=t.useDataSources&&t.useDataSources.map((function(e){return e.without("fields")}))[0],s=e.useDataSources&&e.useDataSources.map((function(e){return e.without("fields")}))[0];return o&&s&&o.dataSourceId===s.dataSourceId||n.forEach((function(e){var t=i.appConfig.widgets[e];t.useDataSources&&s&&t.useDataSources.find((function(e){return e.dataSourceId===s.dataSourceId}))&&(t=t.set("useDataSources",t.useDataSources.filter((function(e){return e.dataSourceId!==s.dataSourceId})))),o&&(t=t.set("useDataSources",t.useDataSources?t.useDataSources.concat(o):[o]).set("useDataSourcesEnabled",!0)),i.appConfig=i.appConfig.setIn(["widgets",e],t)})),this},e.prototype.clearEmptyRowInFlowLayout=function(e){var t,i,n,o=this,s=this.appConfig.layouts[e.layoutId];if((null!==(i=null===(t=null==s?void 0:s.order)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0)return this;var u=r.searchUtils.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId);if(u){var p,c=this.appConfig.widgets[u];if("row"===(null===(n=null==c?void 0:c.manifest)||void 0===n?void 0:n.name))Object.keys(this.appConfig.layouts).some((function(e){var t,i;if((null===(i=null===(t=o.appConfig.layouts)||void 0===t?void 0:t[e])||void 0===i?void 0:i.type)===a.LayoutType.FlowLayout){var n=r.searchUtils.getContainerLayoutItem(o.appConfig.layouts[e],u,a.LayoutItemType.Widget);if(n)return p={layoutId:e,layoutItemId:n.id},!0}})),p&&this.removeLayoutItem(p,!0)}return this},e.prototype.clearMaintainedColumnInRowWidget=function(e){var t,i,n,o,s=this.appConfig.layouts[e.layoutId],u=null!==(i=null===(t=null==s?void 0:s.order)||void 0===t?void 0:t.length)&&void 0!==i?i:0;if(u>1)return this;var p=r.searchUtils.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId);if(p){var c=this.appConfig.widgets[p];if("column"===(null===(n=null==c?void 0:c.manifest)||void 0===n?void 0:n.name)){var g=r.searchUtils.getLayoutInfosHoldcontent(this.appConfig,a.LayoutItemType.Widget,p);if(g&&g.length>0){var d=g[0],l=this.appConfig.layouts[d.layoutId].content[d.layoutItemId];if((null===(o=null==l?void 0:l.setting)||void 0===o?void 0:o.maintainedByLayout)&&1===u)return this.extractWidgetFromMaintainedColumn(d,p,{layoutId:e.layoutId,layoutItemId:s.order[0]})}}}return this},e.prototype.clearGridLayout=function(e){var t=this,i=e.layoutId,n=e.layoutItemId,o=this.appConfig.layouts[i];if(!o||o.type!==a.LayoutType.GridLayout)return this;var r=o.content[n];if(r){var s=u.c(e,!0,this.appConfig.layouts);if(this.appConfig=this.appConfig.set("layouts",s),o=this.appConfig.layouts[i],r&&r.parentId){var p=r.parentId,c=o.content[r.parentId],g=[].concat(c.items),d=g.indexOf(n);d>=0&&g.splice(d,1),g.length>1?this.appConfig=this.appConfig.setIn(["layouts",i,"content",p],c.set("items",g)):1===g.length&&this.compactGridContainer(i,p,g[0])}}else Object.keys(o.content||{}).some((function(e){var a=o.content[e].items;if(a&&a.length>0){var r=a.indexOf(n);if(r>=0)return(a=[].concat(a)).splice(r,1),t.appConfig=t.appConfig.setIn(["layouts",i,"content",e,"items"],a),1===a.length&&t.compactGridContainer(i,e,a[0]),!0}}));return this},e.prototype.addDataSource=function(e){return this.appConfig.dataSources&&this.appConfig.dataSources[e.id]||(this.appConfig=this.appConfig.setIn(["dataSources",e.id],e)),this},e.prototype.addDataSources=function(e){var t=this;return e.forEach((function(e){t.appConfig.dataSources&&t.appConfig.dataSources[e.id]||(t.appConfig=t.appConfig.setIn(["dataSources",e.id],e))})),this},e.prototype.removeDataSource=function(e){var t=this;return this.appConfig.dataSources&&this.appConfig.dataSources[e]?(this.appConfig=this.appConfig.set("dataSources",this.appConfig.dataSources.without(e)),this.appConfig.widgets&&Object.entries(this.appConfig.widgets).forEach((function(i){var n=i[0],o=i[1];o.useDataSources&&o.useDataSources.find((function(t){return t.dataSourceId===e}))&&(t.appConfig=t.appConfig.setIn(["widgets",n,"useDataSources"],o.useDataSources.filter((function(t){return t.dataSourceId!==e}))))})),this.appConfig.widgets&&Object.entries(this.appConfig.widgets).forEach((function(i){var n=i[0],o=i[1];o.outputDataSources&&o.outputDataSources.find((function(t){return t===e}))&&(t.appConfig=t.appConfig.setIn(["widgets",n,"outputDataSources"],o.outputDataSources.filter((function(t){return t!==e}))))})),this.appConfig.messageConfigs&&Object.keys(this.appConfig.messageConfigs).forEach((function(i){var n=t.appConfig.messageConfigs[i];n.useDataSources&&n.useDataSources.find((function(t){return t.dataSourceId===e}))&&(t.appConfig=t.appConfig.setIn(["messageConfigs",i,"useDataSources"],n.useDataSources.filter((function(t){return t.dataSourceId!==e}))))})),Object.entries(this.appConfig.dataSources).forEach((function(i){var n=i[0],o=i[1];o.originDataSources&&o.originDataSources.find((function(t){return t.dataSourceId===e}))&&t.removeDataSource(n)})),this):this},e.prototype.editDataSource=function(e){return this.appConfig=this.appConfig.setIn(["dataSources",e.id],e),this},e.prototype.duplicateDataSource=function(e){if(!this.appConfig.dataSources||!this.appConfig.dataSources[e])return null;var t=this.appConfig.dataSources[e],i=t.set("id",s.getUniqueId(this.appConfig,"dataSource")).set("label",this.getDuplicateLabel("dataSources",t.label));return this.addDataSource(i),i},e.prototype.addAppProxy=function(e){return this.appConfig.appProxies&&this.appConfig.appProxies[e.id]||(this.appConfig=this.appConfig.setIn(["appProxies",e.id],e)),this},e.prototype.editAppProxy=function(e){return this.appConfig=this.appConfig.setIn(["appProxies",e.id],e),this},e.prototype.removeAppProxy=function(e){return this.appConfig.appProxies&&this.appConfig.appProxies[e]?(this.appConfig=this.appConfig.set("appProxies",this.appConfig.appProxies.without(e)),this):this},e.prototype.addMessage=function(e){return this.appConfig=this.appConfig.setIn(["messageConfigs",e.id],e),this},e.prototype.editMessage=function(e){return this.appConfig=this.appConfig.setIn(["messageConfigs",e.id],e),this},e.prototype.removeMessage=function(e){return this.appConfig.messageConfigs&&this.appConfig.messageConfigs[e.id]?(this.appConfig=this.appConfig.set("messageConfigs",this.appConfig.messageConfigs.without(e.id)),this):this},e.prototype.duplicateWidgetMessageConfig=function(e,t){var i=this,n=this.appConfig.messageConfigs;if(!n)return this;Object.keys(n).forEach((function(o){if(n[o].widgetId===e){var a=n[o].set("id",s.getUniqueId(i.appConfig,"messageConfig")).set("widgetId",t);i.appConfig=i.appConfig.setIn(["messageConfigs",a.id],a)}})),Object.keys(n).forEach((function(o){if(n[o].actions){var a=[];n[o].actions.forEach((function(i){if(i.widgetId===e){var n=i.set("widgetId",t);a.push(n)}})),a.length>0&&(i.appConfig=i.appConfig.setIn(["messageConfigs",n[o].id,"actions"],n[o].actions.concat(a)))}}))},e.prototype.removeWidgetMessageAndAction=function(e,t){var i=e.messageConfigs;if(!i)return e;for(var n=Object.keys(i),o=Object(a.Immutable)({}),r=0;r<n.length;r++)i[n[r]].widgetId!==t&&(o=o.setIn([i[n[r]].id],i[n[r]]));var s=Object.keys(o);for(r=0;r<s.length;r++){var u=o[s[r]].actions;if(0!==u.length){var p=u.filter((function(e){return e.widgetId!==t})),c=Object.assign([],p);o=o.setIn([i[s[r]].id,"actions"],c)}}return e.set("messageConfigs",o)},e.prototype.editTheme=function(e){return this.appConfig=this.appConfig.set("theme",e),this},e.prototype.editCustomTheme=function(e){return this.appConfig=this.appConfig.set("customTheme",e),this},e.prototype.editHeader=function(e,t){var i=this;return this.appConfig=this.appConfig.set("header",e),t&&t.forEach((function(e){return i.addLayout(e)})),this},e.prototype.editFooter=function(e,t){var i=this;return this.appConfig=this.appConfig.set("footer",e),t&&t.forEach((function(e){return i.addLayout(e)})),this},e.prototype.setViewportSize=function(e,t){return this.appConfig=this.appConfig.setIn(["forBuilderAttributes","viewPortSize",e],t),this},e.prototype.setLockLayout=function(e){return this.appConfig=this.appConfig.setIn(["forBuilderAttributes","lockLayout"],e),this},e.prototype.editAttributes=function(e){return this.appConfig=this.appConfig.setIn(["attributes"],e),this},e.prototype.mergeUseDataSource=function(e,t){if(!e.useDataSources)return t;var i=e.useDataSources.map((function(e){return e.without("fields")}));return t.useDataSources?(i.forEach((function(e){e.dataViewId?t.useDataSources.find((function(t){return t.dataSourceId===e.dataSourceId&&t.dataViewId===e.dataViewId}))||(t=t.set("useDataSources",t.useDataSources.concat([e]))):t.useDataSources.find((function(t){return t.dataSourceId===e.dataSourceId}))||(t=t.set("useDataSources",t.useDataSources.concat([e])))})),t.set("useDataSourcesEnabled",!0)):t.set("useDataSources",i).set("useDataSourcesEnabled",!0)},e.prototype.updateWidgetDataSourceBeforeChangingLayout=function(e,t){if(!this.appConfig.widgets[e])return this;var i=this.appConfig.widgets[e],n=r.searchUtils.getWidgetIdThatUseTheLayoutId(this.appConfig,t);if(n){var o=this.appConfig.widgets[n];o.manifest.properties.passDataSourceToChildren&&(i=this.mergeUseDataSource(o,i),this.appConfig=this.appConfig.setIn(["widgets",i.id],i))}return this},e.prototype.getDuplicateLabel=function(e,t){for(var i=this,n=a.i18n.getIntl().formatMessage({id:"copy"}).toLocaleLowerCase(),o=t+" "+n,r=1;this.appConfig[e]&&Object.keys(this.appConfig[e]).find((function(t){var n;return(null===(n=i.appConfig[e][t])||void 0===n?void 0:n.label)===o}));)r++,o=t+" "+n+" "+r;return o},e.prototype.compactGridContainer=function(e,t,i){var n=this,o=this.appConfig.layouts[e],a=o.content[t],r=u.c({layoutId:e,layoutItemId:t},!0,this.appConfig.layouts);this.appConfig=this.appConfig.set("layouts",r).setIn(["layouts",e,"content",i,"parentId"],a.parentId).setIn(["layouts",e,"content",i,"bbox"],a.bbox),(o=this.appConfig.layouts[e]).setting.rootItemId===t&&(this.appConfig=this.appConfig.setIn(["layouts",e,"setting","rootItemId"],i));var s=o.content[a.parentId];if(s){var p=o.content[i],c=[].concat(s.items),g=c.indexOf(t);p.direction!==s.direction?c.splice(g,1,i):(r=u.c({layoutId:e,layoutItemId:i},!0,this.appConfig.layouts),this.appConfig=this.appConfig.set("layouts",r),o=this.appConfig.layouts[e],c.splice.apply(c,A([g,1],p.items)),p.items.forEach((function(t){var i=o.content[t];"V"===p.direction?n.appConfig=n.appConfig.setIn(["layouts",e,"content",t,"bbox"],{width:"100%",height:parseFloat(p.bbox.height)*parseFloat(i.bbox.height)/100+"%"}):n.appConfig=n.appConfig.setIn(["layouts",e,"content",t,"bbox"],{height:"100%",width:parseFloat(p.bbox.width)*parseFloat(i.bbox.width)/100+"%"}),n.appConfig=n.appConfig.setIn(["layouts",e,"content",t,"parentId"],a.parentId)}))),this.appConfig=this.appConfig.setIn(["layouts",e,"content",a.parentId,"items"],c)}},e.prototype.extractWidgetFromMaintainedColumn=function(e,t,i){var n=this.appConfig.layouts[i.layoutId].content[i.layoutItemId],o=this.appConfig.layouts[e.layoutId].content[e.layoutItemId],a=o.bbox;return this.editLayoutItemSetting(e,o.setting.set("maintainedByLayout",!1)),this.updateLayoutItem(e,"type",n.type).updateLayoutItem(e,"widgetId",n.widgetId).updateLayoutItem(e,"sectionId",n.sectionId).editLayoutItemBBox(e,a.set("height",n.bbox.height)).editLayoutItemSetting(e,n.setting),this.updateLayoutItem(i,"widgetId",null).updateLayoutItem(i,"sectionId",null),this.removeWidget(t)},e.prototype.adjustIndexOfLayoutItem=function(e,t,i){var n=e.layoutId;Object(a.invariant)(n===t.layoutId,"adjust index should happened in the same layout");var o=this.appConfig.layouts[n],r=[].concat(o.order||[]),s=r.indexOf(e.layoutItemId);return r[s]=null,r.splice(i,0,e.layoutItemId),r=r.filter((function(e){return null!==e})),this.appConfig=this.appConfig.setIn(["layouts",n,"order"],r),this},e.prototype.createLayoutsForWidget=function(e,t){var i=this;return(e.manifest.layouts||[]).forEach((function(n){var o=i.createEmptyLayoutJson(i.appConfig);n.type&&(o=o.set("type",n.type)),o=o.set("label",e.manifest.i18nMessages["_layout_"+n.name+"_label"]||n.label),i.appConfig=i.appConfig.setIn(["layouts",o.id],o).setIn(["widgets",e.id,"layouts",n.name,t],o.id)})),this},e.prototype.removePageFromPageStructure=function(e){var t=this;return this.appConfig.pageStructure?(this.appConfig.pageStructure.find((function(t){return!!t[e]}))?this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.flatMap((function(t){return t[e]?[]:[t]}))):this.appConfig.pageStructure.forEach((function(i,n){var o=Object.keys(i).find((function(t){return i[t].indexOf(e)>-1}));if(o)return t.appConfig=t.appConfig.setIn(["pageStructure",n+"",o],i[o].flatMap((function(t){return t===e?[]:[t]}))),!0})),this):this},e.prototype.doDuplicateContainerContent=function(e,t){var i=this,n=this.getContainerJson(e,t);if(!n.layout)return null;var o=n;return Object.keys(n.layout).forEach((function(e){var t=i.duplicateLayout(n.layout[e],!0);i.appConfig=i.appConfig.setIn(["layouts",t.id],t),o=o.setIn(["layout",e],t.id)})),o.layout},e.prototype.doDuplicateEmbedWidgetContent=function(e){var t=this,i=e;return e&&e.layouts&&Object.keys(e.layouts).forEach((function(n){var o=e.layouts[n];Object.keys(o).forEach((function(o){var a=t.duplicateLayout(e.layouts[n][o],!0);i=i.setIn(["layouts",n,o],a.id),t.appConfig=t.appConfig.setIn(["layouts",a.id],a)}))})),i},e.prototype.createEmptyLayoutJson=function(e){var t=s.getUniqueId(e,"layout");return Object(a.Immutable)({id:t})},e.prototype.movePageIntoPageForPageStructure=function(e,t){var i=this;return this.appConfig.pageStructure?(this.appConfig.pageStructure.some((function(n,o){var a=Object.keys(n).find((function(e){return e===t}));if(a)return i.appConfig=i.appConfig.setIn(["pageStructure",o+"",a],i.appConfig.pageStructure[o][a].concat([e])),!0})),this):this},e.prototype.removeContainerContent=function(e,t){var i=this,n=this.getContainerJson(e,t).layout;return Object.keys(n).forEach((function(o){var r=n[o];i.removeLayout(r,!0),e===a.ContainerType.Header?i.appConfig=i.appConfig.setIn(["header","layout"],i.appConfig.header.layout.without(o)):e===a.ContainerType.Footer?i.appConfig=i.appConfig.setIn(["footer","layout"],i.appConfig.footer.layout.without(o)):e===a.ContainerType.ScreenMain?i.appConfig=i.appConfig.setIn(["screens",t,"main","layout"],i.appConfig.screens[t].main.layout.without(o)):e===a.ContainerType.ScreenPanel?i.appConfig=i.appConfig.setIn(["screens",t,"panel","layout"],i.appConfig.screens[t].panel.layout.without(o)):i.appConfig=i.appConfig.setIn([e,t,"layout"],i.appConfig[e][t].layout.without(o))})),this},e.prototype.getContainerJson=function(e,t){return e===a.ContainerType.Footer||e===a.ContainerType.Header?this.appConfig[e]:e===a.ContainerType.ScreenMain?this.appConfig.screens[t].main:e===a.ContainerType.ScreenPanel?this.appConfig.screens[t].panel:this.appConfig[e][t]},e.prototype.removeSectionContent=function(e){var t=this;return this.appConfig.sections[e].views&&this.appConfig.sections[e].views.forEach((function(e){t.removeContainerContent(a.ContainerType.View,e),0===Object.keys(t.appConfig.views[e].layout).length&&(t.appConfig=t.appConfig.set("views",t.appConfig.views.without(e)))})),this},e.prototype.updateLayout=function(e,t,i){return this.appConfig.layouts[e]&&(this.appConfig=this.appConfig.setIn(["layouts",e,t],i)),this},e.prototype.transformLayout=function(e,t,i){var n=(window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._extensionManager:a.ExtensionManager.getInstance()).getExtensions(a.extensionSpec.ExtensionPoints.LayoutTransformer);if(n.length>0){var o=n.find((function(t){return t.layoutType===e.type}));o&&o.transformLayout&&(e=o.transformLayout(e,t,i))}return e},e}()},function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));var n,o=i(0);!function(e){e.AddResource="ADD_RESOURCE",e.UpdateResource="UPDATE_RESOURCE",e.ClearResources="CLEAR_RESOURCES"}(n||(n={}));var a={AddResource:function(e,t){return{type:n.AddResource,resourceKey:e,resourceItemInfo:t}},UpdateResource:function(e,t){return{type:n.UpdateResource,resourceKey:e,resourceItemInfo:t}},ClearResources:function(){return{type:n.ClearResources}}},r=function(){function e(){this.id="builder-state-resource-extension"}return e.prototype.getActions=function(){return Object.keys(n).map((function(e){return n[e]}))},e.prototype.getInitLocalState=function(){return Object(o.Immutable)({})},e.prototype.getReducer=function(){return function(e,t,i){switch(t.type){case n.AddResource:case n.UpdateResource:return e.set(t.resourceKey,t.resourceItemInfo);case n.ClearResources:return Object(o.Immutable)({});default:return e}}},e.prototype.getStoreKey=function(){return"resourcesInfo"},e}();t.c=r},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(0),o=i(14),a=i(6),r=function(){function e(){var t=this;this.resourceMap={},this.blobToResourceMap={},this.resourcesInDraft={},this.getResourcesInDraft=function(){return t.resourcesInDraft},this.setResourcesInDraft=function(e){t.resourcesInDraft=e},this.getResourcesInAppConfig=function(e){var i=t.getAppId(),o={},r=[],s=null,u=n.SessionManager.getInstance().getMainSession(),p=new RegExp("^\\$\\{appResourceUrl\\}+(.)");var c={matchFunction:function(e){return p.test(e)},matchHandle:function(e){o[e.value]=e.value}};return n.appConfigUtils.replaceAppConfigNodeValue(e,c).then((function(){return a.restServices.getItemResources(i,{authentication:u}).then((function(e){if(s=e&&e.resources)for(var t=0;t<s.length;t++){var i="${appResourceUrl}/"+s[t].resource;o[i]&&r.push({url:o[i],fileName:s[t].resource.split("/")[s[t].resource.split("/").length-1],created:s[t].created,size:s[t].size})}return Promise.resolve(r)}))}))},this.setImageResourcesInDraft=function(e){var i=t.getResourcesInDraft();i.imageResources=e,t.setResourcesInDraft(i)},this.getImageResourcesInDraft=function(e,i){if(t.resourcesInDraft.imageResources)return Promise.resolve(t.resourcesInDraft.imageResources);var o=n.SessionManager.getInstance().getMainSession(),r=a.restServices.getResourceOrigin()+e+"/resources",s=a.restServices.getResourceOrigin()+e+"/resources/images/image-resources-list.json?token="+(null==o?void 0:o.token);return fetch(""+s,{cache:"no-cache"}).then((function(e){return 404===e.status?Promise.resolve(null):e.json()})).then((function(e){if(e){var i=e;return Object.keys(i).forEach((function(e){i[e].url=i[e].url.replace("${appResourceUrl}",r)+"?token="+(null==o?void 0:o.token)})),Promise.resolve(i)}return t.uploadImageResourcesConfig({}).then((function(e){return Promise.resolve(e)}))})).catch((function(e){return console.error(e),Promise.reject(null)}))},this.updateImageResourceItemInfo=function(e){var i=t.getAppId();t.getImageResourcesInDraft(i).then((function(i){var n=Object.assign({},e);delete n.blobUrl,delete n.type,i[n.fileName.split(".")[0]]=n,t.setImageResourcesInDraft(i)}))},this.uploadImageResourcesConfig=function(i){var o=i||{},a={appId:t.getAppId(),file:new Blob([JSON.stringify(o)],{type:"application/json"}),resourcesPrefix:"images",fileName:"image-resources-list.json",type:n.ResourceType.Image};return e.getInstance().upLoadFileToResource(a).then((function(){return Promise.resolve(o)}),(function(){return Promise.reject(null)}))},this.cleanValueInImageResourcesConfig=function(e,i){return t.getAppId()!==e&&(t.resourcesInDraft.imageResources=null),i.length>0?t.getImageResourcesInDraft(e).then((function(e){if(e){for(var t=[],n=0;n<i.length;n++){for(var o=Object.keys(e),a=!0,r=0;r<o.length;r++){var s=o[r];if(e[s].resourcesPrefix+"/"+e[s].fileName===i[n]&&e[s].referedIds.length>0){a=!1;break}}a&&t.push(i[n])}return Promise.resolve(t)}return Promise.resolve(i)})):Promise.resolve(i)}}return e.getInstance=function(){return e._instance||(e._instance=new e,window._appResourceManager=e._instance),window._appResourceManager},e.prototype.getResourceItem=function(e){return this.resourceMap[e]},e.prototype.getResourceMap=function(){return this.resourceMap},e.prototype.setResourceItem=function(e,t){this.resourceMap[e]?this.resourceMap[e]=Object.assign(this.resourceMap[e],t):this.resourceMap[e]=t,Object(n.getAppStore)().dispatch(o.b.AddResource(e,this.resourceMap[e])),this.blobToResourceMap[t.blobUrl]={id:t.id,resourceUrl:t.resourceUrl}},e.prototype.clearResources=function(e){for(var t in this.resourceMap)this.resourceMap[t]&&window.URL.revokeObjectURL(this.resourceMap[t].blobUrl);this.resourceMap={},this.blobToResourceMap={},this.removeUnnecessaryResources(e),Object(n.getAppStore)().dispatch(o.b.ClearResources())},e.prototype.getAppId=function(){return Object(n.getAppStore)().getState().appStateInBuilder&&Object(n.getAppStore)().getState().appStateInBuilder.appId},e.prototype.addAppItemResource=function(e){var t=this,i=n.SessionManager.getInstance().getMainSession();return a.restServices.getItem(e.appId,{authentication:i}).then((function(o){return a.restServices.addItemResource({id:e.appId,resource:e.file,name:e.fileName,owner:o.owner,params:{resourcesPrefix:e.resourcesPrefix},authentication:i}).then((function(i){return t.setResourceItemInfoStatus(e,n.AjaxState.Success),Promise.resolve(i)}),(function(i){return t.setResourceItemInfoStatus(e,n.AjaxState.Error),Promise.reject(i)}))}))},e.prototype.getAppItemResources=function(e){var t=n.SessionManager.getInstance().getMainSession();return a.restServices.getItemResources(e.appId,{authentication:t})},e.prototype.updateAppItemResource=function(e){var t=this,i=n.SessionManager.getInstance().getMainSession();return a.restServices.getItem(e.appId,{authentication:i}).then((function(o){return a.restServices.updateItemResource({id:e.appId,resource:e.file,name:e.fileName,owner:o.owner,params:{resourcesPrefix:e.resourcesPrefix},authentication:i}).then((function(i){return t.setResourceItemInfoStatus(e,n.AjaxState.Success),Promise.resolve(i)}),(function(i){return t.setResourceItemInfoStatus(e,n.AjaxState.Error),Promise.reject(i)}))}))},e.prototype.removeAppItemResource=function(e){var t=n.SessionManager.getInstance().getMainSession(),i=e.appId?e.appId:this.getAppId();return a.restServices.getItem(i,{authentication:t}).then((function(n){return a.restServices.removeItemResource({id:i,owner:n.owner,resource:e.fileName,authentication:t}).then((function(e){return Promise.resolve(e)}),(function(e){return Promise.reject(e)}))}))},e.prototype.getLocalCacheResourceUrl=function(e){try{var t=window.URL.createObjectURL(e.file);return e.url=t,e.blobUrl=t,this.upLoadFileToResource(e),Promise.resolve(e)}catch(e){return Promise.reject(e)}},e.prototype.getBlobByBlobUrl=function(e){return new Promise((function(t,i){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){if(200==this.status){var n=this.response;return t(n)}return i()},n.onerror=function(e){return i()},n.send()}))},e.prototype.getResourcePrefix=function(e){if(e.resourcesPrefix)return e.resourcesPrefix;return e.type===n.ResourceType.Image?e.widgetId?"images/"+e.widgetId:"images/templates":e.type===n.ResourceType.Config?"config":"templates"},e.prototype.upLoadFileToResource=function(e){var t=this,i=e.appId?e.appId:this.getAppId(),o=e.fileName,a=e.originalName,r=this.getResourcePrefix(e);e.resourcesPrefix=r;var s="${appResourceUrl}/"+(r?r+"/":"")+o,u=Object(n.uuidv1)(),p={id:u,appId:i,fileName:o,originalName:a,resourcesPrefix:r,url:e.url,blobUrl:e.blobUrl,resourceUrl:s,type:e.type,status:n.AjaxState.Fetching,widgetId:e.widgetId,owner:e.owner},c=Object.assign({},p);c.file=e.file;var g=this.getAppItemResources(c).then((function(e){var i=t,n=c.resourcesPrefix;if(e&&e.resources){var o=e.resources;if(0===o.length)return i.addAppItemResource(c);for(var a=!1,r=0;r<o.length;r++)if(o[r].resource===(n?n+"/":"")+c.fileName){a=!0;break}return a?i.updateAppItemResource(c):i.addAppItemResource(c)}throw"return value from getAppItemResources is not right"})).catch((function(e){return console.error(e),t.setResourceItemInfoStatus(c,n.AjaxState.Error),Promise.reject()}));return c.promise=g,this.setResourceItem(u,p),g},e.prototype.setAppConfigLocalFileToResource=function(e){return this.setConfigLocalFileToResource(e)},e.prototype.uploadImageConfigFileToPortal=function(e,t){var i=this,n=e,o={};return this.getResourcesInAppConfig(Object.assign({},t)).then((function(e){for(var t={},a=[],r=0;r<e.length;r++){var s=e[r].fileName.split(".")[0];a.push(s)}return Object.keys(n).forEach((function(e){n[e].referedIds=[];var i=n[e].originId;(a.indexOf(i)>-1||a.indexOf(e)>-1)&&(t[e]=n[e],t[i]=n[i])})),Object.keys(t).forEach((function(e){t[e].referedIds=[];var i=t[e].originId;i!==e&&(o[i]?o[i].referedIds.push(e):(o[i]=Object.assign({},t[i]),o[i].referedIds=[e]))})),Object.keys(o).forEach((function(e){t[e]&&(t[e].referedIds=o[e].referedIds)})),i.setConfigLocalFileToResource(t).then((function(e){return i.uploadImageResourcesConfig(e)}))}))},e.prototype.setConfigLocalFileToResource=function(e){var t=this,i=this.blobToResourceMap,o=new RegExp("^blob:http(s?)://(.)"),a=[];var r={matchFunction:function(e){return o.test(e)},matchHandle:function(e){var t=e.obj,n=e.key,o=e.value;o=i[e.value],-1===a.indexOf(o.id)&&a.push(o.id),"number"==typeof e.i?t[n][e.i]=o.resourceUrl:t[n]=o.resourceUrl}};return n.appConfigUtils.replaceAppConfigNodeValue(e,r).then((function(e){return t.checkResourcesUploadStatus(a).then((function(t){return t===n.AjaxState.Success?Promise.resolve(e):Promise.reject()}))}))},e.prototype.checkResourcesUploadStatus=function(e){if(e.length>0){for(var t=[],i=0;i<e.length;i++)t.push(this.resourceMap[e[i]].promise);return Promise.all(t).then((function(){return Promise.resolve(n.AjaxState.Success)}),(function(){return Promise.resolve(n.AjaxState.Error)})).catch((function(e){return console.error(e),Promise.reject()}))}return Promise.resolve(n.AjaxState.Success)},e.prototype.uploadAppConfigFileToPortal=function(e,t,i){var o={appId:e,file:new Blob([JSON.stringify(t)],{type:"application/json"}),fileName:"config.json",type:n.ResourceType.Config,owner:i};return this.upLoadFileToResource(o).then((function(){return Promise.resolve()}),(function(){return Promise.reject()}))},e.prototype.getConfigFromItemResource=function(e){var t=n.SessionManager.getInstance().getMainSession(),i=(new Date).getTime(),o=a.restServices.getResourceOrigin()+e+"/resources/config/config.json?token="+(null==t?void 0:t.token)+"&f=json&timestamp="+i;return fetch(""+o,{cache:"no-cache"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e),Promise.reject(null)}))},e.prototype.setResourceItemInfoStatus=function(e,t){this.resourceMap&&this.resourceMap[e.id]&&(e.status=t,delete e.file,this.setResourceItem(e.id,e))},e.prototype.removeUnnecessaryResources=function(e){var t=this;if(e){var i=n.SessionManager.getInstance().getMainSession(),o=null;o=window.jimuConfig.isDevEdition?window.location.origin+"/apps/"+e+"/resources/":n.portalUrlUtils.getHostUrlByOrgUrl(Object(n.getAppStore)().getState().portalUrl)+"/sharing/rest/content/items/"+e+"/resources/";var r=null;try{a.restServices.getItemResources(e,{authentication:i,httpMethod:"GET"}).then((function(s){r=s&&s.resources;var u=!1;if(r)for(var p=0;p<r.length;p++)if("config/config.json"===r[p].resource||"images/image-resources-list.json"===r[p].resource){u=!0;break}a.restServices.getItemData(e,{authentication:i}).then((function(i){var a=new RegExp("^\\$\\{appResourceUrl\\}+(.)"),s=new RegExp("^"+o),p={};var c={matchFunction:function(e){return a.test(e)||s.test(e)},matchHandle:function(e){p[e.value]=e.value}};n.appConfigUtils.replaceAppConfigNodeValue(i,c).then((function(){return u?t.getConfigFromItemResource(e):Promise.resolve({})})).then((function(e){n.appConfigUtils.replaceAppConfigNodeValue(e,c)})).then((function(){var i=[];if(r){for(var n=0;n<r.length;n++)"config/config.json"!==r[n].resource&&"images/image-resources-list.json"!==r[n].resource&&(p["${appResourceUrl}/"+r[n].resource.replace("_compress","")]||p[o+r[n].resource.replace("_compress","")]||i.push(r[n].resource));t.cleanValueInImageResourcesConfig(e,i).then((function(i){i.map((function(i){t.removeAppItemResource({appId:e,fileName:i})}))}))}}))}))}))}catch(e){console.error(e)}}},e}()},,function(e,t,i){"use strict";var n,o=i(0),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(o.React.PureComponent);t.a=r},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0),o=i(2);function a(){return function(e,t){return(e=n.i18n.getLocaleToLoad(e,t))?n.i18n.loadLocaleMessages("jimu-for-builder/lib/translations",e).then((function(e){return e})):Promise.resolve(o.a)}(Object(n.getAppStore)().getState().appContext.locale,n.translatedLocales).then((function(e){return e&&Object(n.getAppStore)().dispatch(n.appActions.i18nMessagesLoaded("jimu-for-builder",e)),e}))}},function(e,t,i){"use strict";var n,o=i(0),a=i(24),r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=o.i18n.getTranslatedLocale,p=function(){function e(){this.actionSettings={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getAllActions=function(){var e=this.getAppMessageManager();return e?e.getActions():[]},e.prototype.getAction=function(e,t){var i=this.getAppMessageManager();return i?i.getAction(e,t):null},e.prototype.getAppMessageManager=function(){return window._appWindow._messageManager?window._appWindow._messageManager:null},e.prototype.getFilteredActions=function(e){if(window._appWindow._messageManager){for(var t=window._appWindow._messageManager.getActions(),i=[],n=0;n<t.length;n++)t[n].filterMessageType(e)&&i.push(t[n]);return i}return[]},e.prototype.getConvertedSettingUri=function(e,t){for(var i=this.getAllActions(),n=null,a=0;a<i.length;a++)if(e.indexOf(i[a].id)>-1){var r=i[a].widgetId;if(r){var s=Object(o.getAppStore)().getState().appStateInBuilder.appConfig.widgets[r],u=s.manifest.messageActions,p=null;if(u)for(var c=0;c<u.length;c++)u[c].name===i[a].name&&(p=u[c]);return p&&t?n=s.context.isRemote?null:s.uri+"dist/"+t:null}return t}return n},e.prototype.loadActionSettingClass=function(e,t){var i,n=this,r=t?this.getConvertedSettingUri(e.actionId,t):null;if(r||Promise.resolve(null),this.actionSettings[r]||(this.actionSettings[r]={}),null===(i=this.actionSettings[r])||void 0===i?void 0:i.clazzPromise)return this.actionSettings[r].clazzPromise;var s=e.widgetId,u=Object(o.getAppStore)().getState().appStateInBuilder.appConfig.widgets[s];return this.actionSettings[r].clazzPromise=this.loadRawSettingClass(r).then((function(e){return a.a.getInstance().loadI18nMessagesForSetting(u&&u.uri).then((function(t){return n.injectActionSettingProps(e,t,u&&u.id)}))})).then((function(e){return n.actionSettings[r].clazz=e,e})),this.actionSettings[r].clazzPromise},e.prototype.loadRawSettingClass=function(e){var t=this;return this.actionSettings[e].rawClazzPromise?this.actionSettings[e].rawClazzPromise:this.actionSettings[e].rawClazzPromise=o.moduleLoader.loadModule(e).then((function(i){return i=i.default?i.default:i,t.actionSettings[e].rawClazz=i}))},e.prototype.injectActionSettingProps=function(e,t,i){var n=Object(o.injectIntl)(e),a=Object(o.getAppStore)().getState().appStateInBuilder.appConfig.widgets[i],p=null;p=i&&a?Object(o.getAppStore)().getState().appStateInBuilder.appConfig.widgets[i].manifest.name:"Framework";var c=function(e){function c(t){return e.call(this,t)||this}return r(c,e),c.prototype.render=function(){var e={messages:t},r=Object(o.getAppStore)().getState().appI18nMessages,p=null;i&&a?((p=u(Object(o.getAppStore)().getState().appContext.locale,a.manifest.translatedLocales.asMutable()))||(p=a.manifest.translatedLocales&&a.manifest.translatedLocales[0]),p||(p=Object(o.getAppStore)().getState().appContext.locale)):p=Object(o.getAppStore)().getState().appContext.locale;var c=Object.assign({},t,r);return o.React.createElement(o.IntlProvider,{locale:p,messages:c},o.React.createElement(n,s({},this.props,e)))},c.displayName="ActionSettingWrapper("+p+")",c}(o.React.PureComponent);for(var g in e)c[g]||(c[g]=e[g]);return c},e.prototype.registerActionRawSettingClass=function(e,t){this.actionSettings[e]||(this.actionSettings[e]={}),this.actionSettings[e].rawClazz=t,this.actionSettings[e].rawClazzPromise=Promise.resolve(t),this.actionSettings[e].settingI18nMessages={},this.actionSettings[e].settingI18nMessagesPromise=Promise.resolve({})},e.prototype.getActionRawSettingClass=function(e){return this.actionSettings[e].rawClazz},e}();t.a=p},,,,,function(e,t,i){"use strict";var n,o=i(12),a=i(0),r=i(5),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(){return(u=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=a.i18n.getLocaleToLoad,c=a.i18n.loadLocaleMessages,g=function(){function e(){this.settings={},Object(a.observeStore)(this.onStoreChange.bind(this),["appStateInBuilder","appConfig","widgets"])}return e.getInstance=function(){return e.instance||(e.instance=new e,window._widgetSettingManager=e.instance),e.instance},e.prototype.getWidgetUri=function(e){var t,i,n,o=null===(t=Object(a.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig;return null===(n=null===(i=null==o?void 0:o.widgets)||void 0===i?void 0:i[e])||void 0===n?void 0:n.uri},e.prototype.getWidgetManifestByUri=function(e){var t,i,n,o=null===(i=null===(t=Object(a.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.widgets,r=Object.keys(o||{}).find((function(t){return o[t].uri===e}));return null===(n=o[r])||void 0===n?void 0:n.manifest},e.prototype.updateWidgetCache=function(e,t){for(var i in this.settings[e]||(this.settings[e]={}),t)this.settings[e][i]=t[i]},e.prototype.getWidgetSettingClass=function(e){var t;return null===(t=this.settings[this.getWidgetUri(e)])||void 0===t?void 0:t.settingClazz},e.prototype.deleteWidgetSettingClass=function(e){delete this.settings[this.getWidgetUri(e)]},e.prototype.getItemSettingClass=function(e){var t;return null===(t=this.settings[this.getWidgetUri(e)])||void 0===t?void 0:t.itemSettingClazz},e.prototype.getSettingI18nMessagesByUri=function(e){var t;return null===(t=this.settings[e])||void 0===t?void 0:t.settingI18nMessage},e.prototype.deleteAllWidgetSettingClasses=function(){this.settings={}},e.prototype.loadWidgetSettingClass=function(e){var t,i,n,o=null===(n=null===(i=null===(t=Object(a.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.widgets)||void 0===n?void 0:n[e];if(!o)return Promise.resolve(null);if(!o.manifest)return Promise.resolve(null);var r=this.getWidgetUri(e);return this.loadWidgetSettingClassByUri(r)},e.prototype.checkWidgetUriInConfig=function(e){var t,i,n=(null===(i=null===(t=Object(a.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.widgets)||{};return!!Object.keys(n).find((function(t){return n[t].uri===e}))},e.prototype.loadWidgetSettingClassByUri=function(e){var t=this;return this.settings[e]||(this.settings[e]={}),this.settings[e].settingClazzPromise&&this.settings[e].settingClazzPromise,this.settings[e].settingClazzPromise=this.loadRawSettingClass(e).then((function(){return t.loadI18nMessagesForSetting(e)})).then((function(){var i=t.injectWidgetSettingProps(e);return t.settings[e].settingClazz=i,Object(a.getAppStore)().dispatch(r.c.widgetSettingClassLoaded(e)),i})),this.settings[e].settingClazzPromise},e.prototype.loadRawSettingClass=function(e){var t=this,i=this.getWidgetManifestByUri(e),n=e+"dist/setting/setting";return i.properties.hasSettingPage||(n="jimu-for-builder/json-editor-setting"),this.loadWidgetSettingDependency(e).then((function(){return a.moduleLoader.loadModule(n)})).then((function(i){var n=i.default?i.default:i;return t.settings[e].rawSettingClazz=n,n}))},e.prototype.loadI18nMessagesForSetting=function(e){var t=this;if(this.settings[e]||(this.settings[e]={}),this.settings[e].settingI18nMessagePromise)return this.settings[e].settingI18nMessagePromise;var i=this.getWidgetManifestByUri(e);if(!i)return Promise.resolve({});if(i.translatedLocales){var n=Object(a.getAppStore)().getState().appContext.locale;n=p(n,i.translatedLocales),this.settings[e].settingI18nMessagePromise=n?c(e+"dist/setting/translations",n):Promise.resolve({})}else this.settings[e].settingI18nMessagePromise=Promise.resolve({});return this.settings[e].settingI18nMessagePromise.then((function(n){return Object(a.getAppStore)().dispatch(r.c.widgetSettingI18nMessageLoaded(i.name,n)),t.settings[e].settingI18nMessage=n,n}))},e.prototype.loadWidgetSettingDependency=function(e){var t=this.getWidgetManifestByUri(e);if(!t.settingDependency)return Promise.resolve();var i="string"==typeof t.settingDependency?[t.settingDependency]:t.settingDependency;return Object(a.loadDependencies)(i)},e.prototype.loadItemSettingClass=function(e){var t,i,n,o=null===(n=null===(i=null===(t=Object(a.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.widgets)||void 0===n?void 0:n[e];return o&&o.manifest?this.loadItemSettingClassByUri(this.getWidgetUri(e)):Promise.resolve(null)},e.prototype.loadItemSettingClassByUri=function(e){var t=this;return this.settings[e]||(this.settings[e]={}),this.settings[e].itemSettingClazzPromise&&this.settings[e].itemSettingClazzPromise,this.settings[e].itemSettingClazzPromise=this.loadRawItemSettingClass(e).then((function(i){return t.settings[e].itemSettingClazz=i,Object(a.getAppStore)().dispatch(r.c.widgetItemSettingClassLoaded(e)),i})),this.settings[e].itemSettingClazzPromise},e.prototype.loadRawItemSettingClass=function(e){var t=e+"dist/setting/item-setting";return a.moduleLoader.loadModule(t).then((function(e){return e.default?e.default:e}))},e.prototype.injectWidgetSettingProps=function(e){if(!this.checkWidgetUriInConfig(e))return null;var t=this.settings[e].rawSettingClazz,i=Object(a.injectIntl)(t),n=a.themeUtils.withTheme(i),r=this.getWidgetManifestByUri(e),p=r.name,c=this.settings[e].settingI18nMessage,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.render=function(){if(r.version!==this.props.version)return null;var e={messages:c},t=Object.assign({},c,this.props.appI18nMessages);return o.createElement(a.IntlProvider,{locale:this.props.locale,defaultLocale:this.props.locale,messages:t},o.createElement(n,u({},this.props,e)))},t.displayName="WidgetSettingWrapper("+p+")",t}(o.PureComponent);return a.ReactRedux.connect((function(e,i){var n={queryObject:e.queryObject,user:e.user,token:e.token,portalUrl:e.portalUrl,portalSelf:e.portalSelf,locale:e.appContext.locale,appI18nMessages:e.appI18nMessages},o=i.widgetId,a=e.appStateInBuilder.appConfig.widgets[o];if(!a)return{};var r=Object.assign(n,a,i);return Object.assign(r,t.mapExtraStateProps?t.mapExtraStateProps(e,r):{})}))(g)},e.prototype.onStoreChange=function(e,t){var i=this;e&&t&&Object.keys(e).forEach((function(e){t[e]||i.deleteWidgetSettingClass(e)}))},e}();t.a=g},function(e,t,i){"use strict";var n,o=i(0),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.getInstance=function(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._widgetManager:o.WidgetManager.getInstance()},t}(o.WidgetManager);t.a=r},function(e,t,i){"use strict";i.r(t),i.d(t,"listenBuilderEvents",(function(){return r})),i.d(t,"publishAppSessionChangeToBuilder",(function(){return s})),i.d(t,"publishAppStateChangeToBuilder",(function(){return u})),i.d(t,"publishAppIsLoadedToBuilder",(function(){return p})),i.d(t,"letBuilderPopupChooseWidget",(function(){return c})),i.d(t,"letBuilderAddResource",(function(){return g})),i.d(t,"letBuilderClearResource",(function(){return d})),i.d(t,"letBuilderResponseToKeyboard",(function(){return l})),i.d(t,"letBuilderShowLayoutToolbar",(function(){return I})),i.d(t,"clearLastAppConfigFromHistory",(function(){return f})),i.d(t,"publishIsBusyToBuilder",(function(){return h})),i.d(t,"publishConfirmDeleteToApp",(function(){return C}));var n=i(0),o=i(1),a=window.parent&&window.parent._builderPubsub;function r(){if(a){a.unsubscribe("to_app");var e=Object(n.getAppStore)();a.subscribe("to_app",(function(e,t){console.debug(e,t)})),a.subscribe("to_app."+o.a.AppConfigChanged,(function(t,i){var o=e.getState();if(o.appRuntimeInfo.currentPageId&&!i.pages[o.appRuntimeInfo.currentPageId]){var a=Object.keys(i.pages).find((function(e){return i.pages[e].isDefault}));n.jimuHistory.changePage(a)}e.dispatch(n.appActions.appConfigChanged(i))})),a.subscribe("to_app."+o.a.AppInfoChanged,(function(t,i){e.dispatch(n.appActions.appInfoChanged(i))})),a.subscribe("to_app."+o.a.PortalSelfChanged,(function(t,i){e.dispatch(n.appActions.setPortalSelf(i))})),a.subscribe("to_app."+o.a.UserSignIn,(function(t,i){e.dispatch(n.appActions.userSignIn(i))})),a.subscribe("to_app."+o.a.DialogInfosChanged,(function(t,i){e.dispatch(n.appActions.dialogInfosChanged(i))})),a.subscribe("to_app."+o.a.ChangeAppMode,(function(t,i){e.dispatch(n.appActions.appModeChanged(i))})),a.subscribe("to_app."+o.a.ChangeWidgetStateProp,(function(t,i){e.dispatch(n.appActions.widgetStatePropChange(i.widgetId,i.propKey,i.value))})),a.subscribe("to_app."+o.a.ChangeWidgetMutableStateProp,(function(e,t){n.MutableStoreManager.getInstance().updateStateValue(t.widgetId,t.propKey,t.value)})),a.subscribe("to_app."+o.a.ChangePage,(function(e,t){var i=Object(n.getAppStore)().getState().appConfig.pages[t];i.type===n.PageType.Link||i.type===n.PageType.Folder||n.urlUtils.parseAppPath(location.pathname).pageId===t?Object(n.getAppStore)().dispatch(n.appActions.currentPageChanged(t)):n.jimuHistory.changePage(t)})),a.subscribe("to_app."+o.a.ChangeDialog,(function(t,i){n.jimuHistory.changeDialog(i),e.dispatch(n.appActions.currentDialogChanged(i))})),a.subscribe("to_app."+o.a.ChangeSelection,(function(t,i){e.dispatch(n.appActions.selectionChanged(i))})),a.subscribe("to_app."+o.a.BuilderTriggerKeyboard,(function(e,t){n.keyboardUtils.triggerEvent(t)})),a.subscribe("to_app."+o.a.ChangeBrowserSizeMode,(function(t,i){e.dispatch(n.appActions.browserSizeModeChanged(i))})),a.subscribe("to_app."+o.a.BuilderSessionChanged,(function(e,t){n.SessionManager.getInstance().syncSessionsFromOtherWindow(t)})),a.subscribe("to_app."+o.a.ChangeZoomScale,(function(t,i){e.dispatch(n.appActions.zoomScaleChange(i))})),a.subscribe("to_app."+o.a.ActivePagePartChanged,(function(t,i){e.dispatch(n.appActions.activePagePartChanged(i))})),a.subscribe("to_app."+o.a.AnimationPreview,(function(t,i){e.dispatch(n.appActions.setupAnimationPreview(i))})),a.subscribe("to_app."+o.a.SectionNavInfoChanged,(function(t,i){e.dispatch(n.appActions.sectionNavInfoChanged(i.sectionId,i.navInfo))})),a.subscribe("to_app."+o.a.ScreenGroupNavInfoChanged,(function(t,i){e.dispatch(n.appActions.screenGroupNavInfoChanged(i.screenGroupId,i.activeIndex))}))}}function s(){y("to_builder."+o.b.AppSessionChanged,n.SessionManager.getInstance().getSessions())}function u(){y("to_builder."+o.b.AppStateChanged,Object(n.getAppStore)().getState())}function p(){y("to_builder."+o.b.AppIsLoaded)}function c(e,t){y("to_builder."+o.b.PopupChooseWidget,{layoutId:e,layoutItemId:t})}function g(e){y("to_builder."+o.b.AppAddResource,e)}function d(e){y("to_builder."+o.b.AppClearResources,e)}function l(e){y("to_builder."+o.b.AppTriggerKeyboard,e)}function I(e){y("to_builder."+o.b.SetLayoutTools,e)}function f(){y("to_builder."+o.b.ClearLastAppConfigFromHistory)}function h(e){y("to_builder."+o.b.SetIsBusy,e)}function C(e){y("to_builder."+o.b.ConfirmDelete,e)}function y(e,t){a&&a.publishSync(e,t)}},,,,,,,function(e,t,i){"use strict";var n=i(0),o={"opening-tour":"OnboardingGuide","whats-new":"WhatsNewGuide"},a=function(){function e(){this.guideModules={}}return e.getInstance=function(){return e.instance||(e.instance=new e,window._guideManager=e.instance),e.instance},e.prototype.registerGuideModule=function(e,t){this.guideModules[e]||(this.guideModules[e]=t)},e.prototype.getGuideModule=function(e){var t=this;if(this.guideModules[e])return Promise.resolve(this.guideModules[e]);var i=/(^|\/)widgets\//.test(e),a=i?e+"/dist/guide/guide":"jimu-ui/basic/guide";return n.moduleLoader.loadModule(a).then((function(n){var a=i?null==n?void 0:n.default:null==n?void 0:n[o[e]];return t.registerGuideModule(e,a),a}))},e}();t.a=a},function(e,t,i){"use strict";i.r(t),i.d(t,"getDefaultTocPageIcon",(function(){return o})),i.d(t,"getDefaultTocDialogIcon",(function(){return a})),i.d(t,"getDefaultSectionIcon",(function(){return r})),i.d(t,"getPageListByDialogId",(function(){return s}));var n=i(0);function o(e){return e.type===n.PageType.Folder?i(70):e.type===n.PageType.Link?i(71):i(72)}function a(){return i(73)}function r(){return i(74)}function s(e,t){var i=[];return Object.keys(e).some((function(n){e[n].autoOpenDialogId===t&&i.push({id:n,label:e[n].label})})),i}},function(e,t,i){"use strict";i.r(t),i.d(t,"processForTemplate",(function(){return c})),i.d(t,"updateWidgetByTemplate",(function(){return g})),i.d(t,"createWidgetFromTemplate",(function(){return d})),i.d(t,"createSectionFromTemplate",(function(){return l})),i.d(t,"createLayoutFromTemplate",(function(){return I})),i.d(t,"createViewFromTemplate",(function(){return f})),i.d(t,"createPageFromTemplate",(function(){return h})),i.d(t,"createScreenGroupFromTemplate",(function(){return C})),i.d(t,"createScreenFromTemplate",(function(){return y})),i.d(t,"createDialogFromTemplate",(function(){return A})),i.d(t,"applyPageTemplateToHeader",(function(){return m})),i.d(t,"applyPageTemplateToFooter",(function(){return S})),i.d(t,"applyPageTemplateToBody",(function(){return M})),i.d(t,"applyPageTemplateToDialog",(function(){return b}));var n=i(0),o=i(13),a=i(6),r=i(2),s=i(25),u=function(e,t,i,n){return new(i||(i=Promise))((function(o,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},p=function(e,t){var i,n,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function c(e,t,i){(null==e?void 0:e.config)&&n.appConfigUtils.fixLayoutIds(e.config);var o=t?n.i18n.getIntl(t,"setting"):n.i18n.getIntl();return e=n.utils.replaceI18nPlaceholdersInObject(e,o,i)}function g(e,t,i,n,a,r){var s,c,g,d,l;return u(this,void 0,void 0,(function(){var r,u,f,h,C,y,A,m,S,M,b,D,v,w,j,N;return p(this,(function(p){switch(p.label){case 0:if(r=Object(o.b)(e),!(u=null===(s=null==e?void 0:e.widgets)||void 0===s?void 0:s[i]))return[2,Promise.resolve(e)];if(f=null==t?void 0:t.config,h=null===(c=null==f?void 0:f.widgets)||void 0===c?void 0:c[n],C=[],!h)return[3,4];if(h.config&&r.editWidgetConfig(i,h.config),h.style&&r.editWidgetProperty(i,"style",h.style),e=r.appConfig,!h.layouts)return[3,4];y=h.layouts,A=[],Object.keys(y).forEach((function(e){var t,i,n=y[e]||{},o=(null!==(i=null===(t=u.manifest)||void 0===t?void 0:t.layouts)&&void 0!==i?i:[]).find((function(t){return t.name===e}));Object.keys(n).forEach((function(t){A.push({layoutName:e,sizeMode:t,layoutId:n[t],layoutLabel:null==o?void 0:o.label})}))})),m=0,p.label=1;case 1:return m<A.length?(S=A[m],M=S.layoutName,b=S.sizeMode,D=S.layoutId,v=S.layoutLabel,[4,I(e,t,D,a)]):[3,4];case 2:w=p.sent(),e=w.appConfig,j=w.newLayoutId,C.push(j),(N=null===(d=null===(g=null==u?void 0:u.layouts)||void 0===g?void 0:g[M])||void 0===d?void 0:d[b])&&(e=Object(o.b)(e).removeLayout(N,!0).appConfig),e=e.setIn(["widgets",u.id,"layouts",M,b],j).setIn(["layouts",j,"label"],(null===(l=null==u?void 0:u.manifest)||void 0===l?void 0:l.i18nMessages["_layout_"+M+"_label"])||v||M),p.label=3;case 3:return m+=1,[3,1];case 4:return(u=e.widgets[u.id]).layouts&&Object.keys(u.layouts).forEach((function(t){var i=u.layouts[t];Object.keys(i).forEach((function(t){var n=i[t];if(!(C.indexOf(n)>-1)){var a=e.layouts[n];a.content&&Object.keys(a.content).forEach((function(t){var i=a.content[t];e=Object(o.b)(e).removeLayoutItem({layoutId:a.id,layoutItemId:i.id},!0).appConfig}))}}))})),[2,Promise.resolve(e)]}}))}))}function d(e,t,i,a,r){var c;return void 0===r&&(r=!1),u(this,void 0,void 0,(function(){var u,l,I,f,h,C,y,A,m,S,M;return p(this,(function(p){switch(p.label){case 0:return a[i]?[2,Promise.resolve({appConfig:e,newWidgetId:a[i]})]:(u=Object(o.b)(e),l=t.config,I=l.widgets[i],f=[],h={uri:I.uri},[4,s.a.getInstance().handleNewWidgetJson(h)]);case 1:if(C=p.sent(),y=n.appConfigUtils.getUniqueId(u.appConfig,"widget"),C.id=y,r?(A=n.i18n.getIntl().formatMessage({id:"block"}),C.label=n.appConfigUtils.getUniqueLabel(u.appConfig,"widget",A)):(C.label=null,n.appConfigUtils.addWidgetDefaultLabelAndIcon(u.appConfig,C)),u.createWidget(Object(n.Immutable)(C),!1),a[i]=y,m=u.appConfig,!((null===(c=I.useMapWidgetIds)||void 0===c?void 0:c.length)>0))return[3,5];S=0,p.label=2;case 2:return S<I.useMapWidgetIds.length?[4,d(m,t,I.useMapWidgetIds[S],a)]:[3,5];case 3:M=p.sent(),m=M.appConfig,f.push(M.newWidgetId),p.label=4;case 4:return S++,[3,2];case 5:return u=Object(o.b)(m),f.length>0&&u.editWidgetProperty(y,"useMapWidgetIds",f),[4,g(u.appConfig,t,y,i,a)];case 6:return m=p.sent(),[2,Promise.resolve({appConfig:m,newWidgetId:y})]}}))}))}function l(e,t,i,o){return u(this,void 0,void 0,(function(){var a,r,s,u,c,g,d,l;return p(this,(function(p){switch(p.label){case 0:if(o[i])return[2,Promise.resolve({appConfig:e,newSectionId:o[i]})];a=e,r=t.config,s=r.sections[i],u=n.appConfigUtils.getUniqueId(e,"section"),a=a.setIn(["sections",u],s).setIn(["sections",u,"id"],u).setIn(["sections",u,"label"],n.appConfigUtils.getUniqueLabel(e,"section",n.i18n.getIntl().formatMessage({id:"section"}))),c=[],g=0,p.label=1;case 1:return g<s.views.length?(d=s.views[g],[4,f(a,t,d,o)]):[3,4];case 2:l=p.sent(),a=l.appConfig,c.push(l.newViewId),p.label=3;case 3:return g+=1,[3,1];case 4:return a=a.setIn(["sections",u,"views"],c),o[i]=u,[2,Promise.resolve({appConfig:a,newSectionId:u})]}}))}))}function I(e,t,i,o){return u(this,void 0,void 0,(function(){var a,r,s,u,c,g,I,f,h,y,A,m,S,M,b,D;return p(this,(function(p){switch(p.label){case 0:a=e,r=t.config,s=r.layouts[i],u=n.appConfigUtils.getUniqueId(e,"layout"),a=a.setIn(["layouts",u],s).setIn(["layouts",u,"id"],u),c=[],Object.keys(s.content||{}).forEach((function(e){var t=s.content[e];t.type===n.LayoutItemType.Widget&&t.widgetId&&r.widgets[t.widgetId]?c.push({type:n.LayoutItemType.Widget,layoutItemId:e,widgetId:t.widgetId}):t.type===n.LayoutItemType.Section&&t.sectionId&&r.sections[t.sectionId]?c.push({type:n.LayoutItemType.Section,layoutItemId:e,sectionId:t.sectionId}):t.type===n.LayoutItemType.ScreenGroup&&t.screenGroupId&&r.screenGroups[t.screenGroupId]&&c.push({type:n.LayoutItemType.ScreenGroup,layoutItemId:e,screenGroupId:t.screenGroupId})})),g=0,p.label=1;case 1:return g<c.length?(I=c[g],f=I.type,h=I.layoutItemId,y=I.widgetId,A=I.sectionId,m=I.screenGroupId,f!==n.LayoutItemType.Widget?[3,3]:[4,d(a,t,y,o,s.type===n.LayoutType.FlowLayout)]):[3,8];case 2:return b=p.sent(),a=b.appConfig,S=b.newWidgetId,a=a.setIn(["layouts",u,"content",h,"widgetId"],S),[3,7];case 3:return f!==n.LayoutItemType.Section?[3,5]:[4,l(a,t,A,o)];case 4:return b=p.sent(),a=b.appConfig,M=b.newSectionId,a=a.setIn(["layouts",u,"content",h,"sectionId"],M),[3,7];case 5:return f!==n.LayoutItemType.ScreenGroup?[3,7]:[4,C(a,t,m,o)];case 6:b=p.sent(),a=b.appConfig,D=b.newScreenGroupId,a=a.setIn(["layouts",u,"content",h,"screenGroupId"],D),p.label=7;case 7:return g+=1,[3,1];case 8:return[2,Promise.resolve({appConfig:a,newLayoutId:u})]}}))}))}function f(e,t,i,o){return u(this,void 0,void 0,(function(){var a,r,s,u,c,g,d,l,f,h,C;return p(this,(function(p){switch(p.label){case 0:a=e,r=t.config,s=r.views[i],u=n.appConfigUtils.getUniqueId(e,"view"),a=a.setIn(["views",u],s).setIn(["views",u,"id"],u).setIn(["views",u,"label"],n.appConfigUtils.getUniqueLabel(e,"view",n.i18n.getIntl().formatMessage({id:"view"}))),c=[],Object.keys(s.layout||{}).forEach((function(e){c.push({sizeMode:e,layoutId:s.layout[e]})})),g=0,p.label=1;case 1:return g<c.length?(d=c[g],l=d.sizeMode,f=d.layoutId,[4,I(a,t,f,o)]):[3,4];case 2:h=p.sent(),a=h.appConfig,C=h.newLayoutId,a=a.setIn(["views",u,"layout",l],C),p.label=3;case 3:return g+=1,[3,1];case 4:return[2,Promise.resolve({appConfig:a,newViewId:u})]}}))}))}function h(e,t,i){return u(this,void 0,void 0,(function(){var o,s,u,c,g,d,l,f,h,C,y,A,m,S;return p(this,(function(p){switch(p.label){case 0:return o=e,t.config?[3,2]:[4,a.appServices.getDefaultTemplateConfig({template:t.name,name:t.name})];case 1:if(s=p.sent(),t.config=s,!t.config)return[2,Promise.resolve({appConfig:o,newPageId:""})];n.appConfigUtils.fixLayoutIds(t.config),n.utils.replaceI18nPlaceholdersInObject(t.config,n.i18n.getIntl(),r.a),p.label=2;case 2:u=t.config,c=Object.keys(u.pages)[0],g=u.pages[c],d=n.appConfigUtils.getUniqueId(e,"page"),l=n.appConfigUtils.getUniqueLabel(e,"page",n.i18n.getIntl().formatMessage({id:"page"})),o=o.setIn(["pages",d],g).setIn(["pages",d,"id"],d).setIn(["pages",d,"isVisible"],!0).setIn(["pages",d,"isDefault"],!1).setIn(["pages",d,"label"],l).setIn(["pages",d,"header"],!1).setIn(["pages",d,"footer"],!1),f=[],Object.keys(g.layout||{}).forEach((function(e){f.push({sizeMode:e,layoutId:g.layout[e]})})),h=0,p.label=3;case 3:return h<f.length?(C=f[h],y=C.sizeMode,A=C.layoutId,[4,I(o,t,A,i)]):[3,6];case 4:m=p.sent(),o=m.appConfig,S=m.newLayoutId,o=o.setIn(["pages",d,"layout",y],S),p.label=5;case 5:return h+=1,[3,3];case 6:return[2,Promise.resolve({appConfig:o,newPageId:d})]}}))}))}function C(e,t,i,o){return u(this,void 0,void 0,(function(){var a,r,s,u,c,g,d,l;return p(this,(function(p){switch(p.label){case 0:if(o[i])return[2,Promise.resolve({appConfig:e,newScreenGroupId:o[i]})];a=e,r=t.config,s=r.screenGroups[i],u=n.appConfigUtils.getUniqueId(e,"screenGroup"),a=a.setIn(["screenGroups",u],s).setIn(["screenGroups",u,"id"],u).setIn(["screenGroups",u,"label"],n.appConfigUtils.getUniqueLabel(e,"screenGroup",n.i18n.getIntl().formatMessage({id:"screenGroup"}))),c=[],g=0,p.label=1;case 1:return g<s.screens.length?(d=s.screens[g],[4,y(a,t,d,o)]):[3,4];case 2:l=p.sent(),a=l.appConfig,c.push(l.newScreenId),p.label=3;case 3:return g+=1,[3,1];case 4:return a=a.setIn(["screenGroups",u,"screens"],c),o[i]=u,[2,Promise.resolve({appConfig:a,newScreenGroupId:u})]}}))}))}function y(e,t,i,o){var a;return u(this,void 0,void 0,(function(){var r,s,u,c,g,d,l,f,h,C,y,A;return p(this,(function(p){switch(p.label){case 0:r=e,s=t.config,u=s.screens[i],c=n.appConfigUtils.getUniqueId(e,"screen"),r=r.setIn(["screens",c],u).setIn(["screens",c,"id"],c).setIn(["screens",c,"label"],n.appConfigUtils.getUniqueLabel(e,"screen",n.i18n.getIntl().formatMessage({id:"screen"}))),g=[],Object.keys((null===(a=u.panel)||void 0===a?void 0:a.layout)||{}).forEach((function(e){g.push({sizeMode:e,isSide:!0,layoutId:u.panel.layout[e]})})),Object.keys(u.main.layout||{}).forEach((function(e){g.push({sizeMode:e,isSide:!1,layoutId:u.main.layout[e]})})),d=0,p.label=1;case 1:return d<g.length?(l=g[d],f=l.sizeMode,h=l.layoutId,C=l.isSide,[4,I(r,t,h,o)]):[3,4];case 2:y=p.sent(),r=y.appConfig,A=y.newLayoutId,r=C?r.setIn(["screens",c,"panel","layout",f],A):r.setIn(["screens",c,"main","layout",f],A),p.label=3;case 3:return d+=1,[3,1];case 4:return[2,Promise.resolve({appConfig:r,newScreenId:c})]}}))}))}function A(e,t,i){return u(this,void 0,void 0,(function(){var o,a,r,s,u,c,g,d,l,f,h,C,y,A;return p(this,(function(p){switch(p.label){case 0:o=e,a=t.config,r=Object.keys(a.dialogs)[0],s=a.dialogs[r],u=n.appConfigUtils.getUniqueId(e,"dialog"),c=n.appConfigUtils.getUniqueLabel(e,"dialog",n.i18n.getIntl().formatMessage({id:"dialog"})),g=Object.keys(Object.keys(o.dialogs).filter((function(e){return o.dialogs[e].mode===s.mode}))).length,o=o.setIn(["dialogs",u],s).setIn(["dialogs",u,"id"],u).setIn(["dialogs",u,"label"],c).setIn(["dialogs",u,"index"],g).setIn(["dialogs",u,"isSplash"],!1).setIn(["dialogs",u,"closeWhenClickOverlay"],s.closeWhenClickOverlay).setIn(["dialogs",u,"width"],s.width).setIn(["dialogs",u,"height"],s.height),d=[],Object.keys(s.layout||{}).forEach((function(e){d.push({sizeMode:e,layoutId:s.layout[e]})})),l=0,p.label=1;case 1:return l<d.length?(f=d[l],h=f.sizeMode,C=f.layoutId,[4,I(o,t,C,i)]):[3,4];case 2:y=p.sent(),o=y.appConfig,A=y.newLayoutId,o=o.setIn(["dialogs",u,"layout",h],A),p.label=3;case 3:return l+=1,[3,1];case 4:return[2,Promise.resolve({appConfig:o,newDialogId:u})]}}))}))}function m(e,t){var i,o,a,r;return u(this,void 0,void 0,(function(){var s,u,c,g;return p(this,(function(p){switch(p.label){case 0:return(null===(i=null==t?void 0:t.config)||void 0===i?void 0:i.header)?(s=null===(o=null==e?void 0:e.header)||void 0===o?void 0:o.layout)?[4,D(e,s,t,Object(n.Immutable)(null===(r=null===(a=null==t?void 0:t.config)||void 0===a?void 0:a.header)||void 0===r?void 0:r.layout))]:[3,2]:[2,Promise.resolve({appConfig:e})];case 1:return u=p.sent(),c=u.appConfig,g=u.updatedSizeModeLayout,c=c.setIn(["header","layout"],g),Object.keys(t.config.header).forEach((function(e){"layout"!==e&&null!=t.config.header[e]&&(c=c.setIn(["header",e],t.config.header[e]))})),[2,Promise.resolve({appConfig:c})];case 2:return[2,Promise.resolve({appConfig:e})]}}))}))}function S(e,t){var i,o,a,r;return u(this,void 0,void 0,(function(){var s,u,c,g;return p(this,(function(p){switch(p.label){case 0:return(null===(i=null==t?void 0:t.config)||void 0===i?void 0:i.footer)?(s=null===(o=null==e?void 0:e.footer)||void 0===o?void 0:o.layout)?[4,D(e,s,t,Object(n.Immutable)(null===(r=null===(a=null==t?void 0:t.config)||void 0===a?void 0:a.footer)||void 0===r?void 0:r.layout))]:[3,2]:[2,Promise.resolve({appConfig:e})];case 1:return u=p.sent(),c=u.appConfig,g=u.updatedSizeModeLayout,c=c.setIn(["footer","layout"],g),Object.keys(t.config.footer).forEach((function(e){"layout"!==e&&null!=t.config.footer[e]&&(c=c.setIn(["footer",e],t.config.footer[e]))})),[2,Promise.resolve({appConfig:c})];case 2:return[2,Promise.resolve({appConfig:e})]}}))}))}function M(e,t,i){var o,s,c,g,d;return u(this,void 0,void 0,(function(){var u,l,I,f,h,C;return p(this,(function(p){switch(p.label){case 0:return i.config?[3,2]:[4,a.appServices.getDefaultTemplateConfig({template:i.name,name:i.name})];case 1:if(u=p.sent(),i.config=u,!i.config)return[2,Promise.resolve({appConfig:e})];n.appConfigUtils.fixLayoutIds(i.config),n.utils.replaceI18nPlaceholdersInObject(i.config,n.i18n.getIntl(),r.a),p.label=2;case 2:return l=Object.keys(i.config.pages)[0],(I=null===(s=null===(o=null==e?void 0:e.pages)||void 0===o?void 0:o[t])||void 0===s?void 0:s.layout)?[4,D(e,I,i,Object(n.Immutable)(null===(d=null===(g=null===(c=null==i?void 0:i.config)||void 0===c?void 0:c.pages)||void 0===g?void 0:g[l])||void 0===d?void 0:d.layout))]:[3,4];case 3:return f=p.sent(),h=f.appConfig,C=f.updatedSizeModeLayout,h=h.setIn(["pages",t,"layout"],C),["mode","maxWidth","bodyBackgroundColor","bodyBackgroundIMage","bodyBackgroundPosition"].forEach((function(e){var n=i.config.pages[l][e];"layout"!==e&&null!=n&&(h=h.setIn(["pages",t,e],n))})),[2,Promise.resolve({appConfig:h})];case 4:return[2,Promise.resolve({appConfig:e})]}}))}))}function b(e,t,i){var o,a,r;return u(this,void 0,void 0,(function(){var s,u,c,g,d,l,I;return p(this,(function(p){switch(p.label){case 0:return s=Object.keys(i.config.dialogs)[0],u=null===(o=null==e?void 0:e.dialogs)||void 0===o?void 0:o[t],(c=null==u?void 0:u.layout)?(g=null===(r=null===(a=null==i?void 0:i.config)||void 0===a?void 0:a.dialogs)||void 0===r?void 0:r[s],[4,D(e,c,i,Object(n.Immutable)(null==g?void 0:g.layout))]):[3,2];case 1:return d=p.sent(),l=d.appConfig,I=d.updatedSizeModeLayout,l=l.setIn(["dialogs",t,"layout"],I),["width","height","mode","position","overlayColor","dialogBackground","interactionType","interactionStyles","confirmBeforeClose","alwaysShowConfirmation","closeWhenClickOverlay"].forEach((function(e){l=l.setIn(["dialogs",t,e],g[e])})),[2,Promise.resolve({appConfig:l})];case 2:return[2,Promise.resolve({appConfig:e})]}}))}))}function D(e,t,i,n){return u(this,void 0,void 0,(function(){var o,a,r,s,u,c,g,d,l;return p(this,(function(p){switch(p.label){case 0:if(!n)return[2,Promise.resolve({appConfig:e,updatedSizeModeLayout:t})];o={},a=e,r=t,s=Object.keys(n),u=0,p.label=1;case 1:if(!(u<s.length))return[3,4];if(c=s[u],g=r[c]){if((d=a.layouts[g])&&d.content&&Object.keys(d.content).length>0)return[3,3];a=a.set("layouts",a.layouts.without(g))}return[4,I(a,i,n[c],o)];case 2:l=p.sent(),a=l.appConfig,r=r.set(c,l.newLayoutId),p.label=3;case 3:return u+=1,[3,1];case 4:return[2,Promise.resolve({updatedSizeModeLayout:r,appConfig:a})]}}))}))}},function(e,t,i){"use strict";var n,o=i(0),a=i(8),r=i(7),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSupportKeyboard=function(){var e=!1;return window.jimuConfig.isBuilder&&"home"!==t.props.currentPageId&&"template"!==t.props.currentPageId?e=!0:e},t.switchAppMode=function(){var e,t;(null===(t=null===(e=Object(o.getAppStore)().getState().appStateInBuilder)||void 0===e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===o.AppMode.Run?a.publishAppModeChangeToApp(o.AppMode.Design):a.publishAppModeChangeToApp(o.AppMode.Run)},t.undo=function(){t.props.stateHistory.past.length<=1||Object(o.getAppStore)().dispatch(r.b.InBuilderAppConfigUndo())},t.redo=function(){t.props.stateHistory.future.length<=0||Object(o.getAppStore)().dispatch(r.b.InBuilderAppConfigRedo())},t.onKeyboardTrigger=function(e){-1===e.key.indexOf("-manual")&&a.publishKeyboardToApp(e)},t.isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},t}return s(t,e),t.prototype.render=function(){var e=this;return this.isMac()?this.isSupportKeyboard()?o.React.createElement(o.Keyboard,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"shift+alt+keyx":function(){return e.switchAppMode()},"command+keyz":function(){return e.undo()},"command+shift+keyz":function(){return e.redo()}}}):null:this.isSupportKeyboard()?o.React.createElement(o.Keyboard,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"shift+alt+keyx":function(){return e.switchAppMode()},"ctrl+keyz":function(){return e.undo()},"ctrl+shift+keyz":function(){return e.redo()}}}):null},t}(o.React.PureComponent);t.a=o.ReactRedux.connect((function(e){return{currentPageId:e.appRuntimeInfo.currentPageId,stateHistory:e.appStateHistory}}))(u)},function(e,t){},function(e,t){e.exports='<svg viewBox="0 0 12 40" xmlns="http://www.w3.org/2000/svg"><path d="M6 30v10H0v-1h5v-9h1zM3.162 18.582a.5.5 0 010 .71l-1.416 1.421a2.497 2.497 0 00-.003 3.545c.983.983 2.56.98 3.544-.003l1.42-1.42a.504.504 0 01.712.713L6 24.968a3.502 3.502 0 01-4.967 0 3.501 3.501 0 010-4.967l1.416-1.422a.504.504 0 01.713.003zm4.967-.71a.5.5 0 010 .71L4.58 22.129a.504.504 0 01-.713-.712l3.548-3.548a.504.504 0 01.713.003zm2.838-2.838a3.501 3.501 0 010 4.967l-1.42 1.419a.504.504 0 01-.713-.712l1.423-1.417a2.5 2.5 0 000-3.547 2.502 2.502 0 00-3.547 0l-1.42 1.419a.504.504 0 01-.713-.712l1.42-1.42a3.506 3.506 0 014.97.003zM6 0v10H5V1H0V0h6z" fill="#A8A8A8" fill-rule="evenodd"></path></svg>'},function(e,t,i){"use strict";i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return d}));var n=i(0),o=i(75),a=i(76),r=i(77),s=i(78),u=i(79),p=i(80),c=i(81),g=[{icon:o,type:n.AnimationType.None},{type:n.AnimationType.FadeIn,icon:a,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView]},{type:n.AnimationType.FloatIn,icon:r,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView],supportedDirections:[n.AnimationDirection.Top,n.AnimationDirection.Bottom,n.AnimationDirection.Left,n.AnimationDirection.Right]},{type:n.AnimationType.FlyIn,icon:s,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView],supportedDirections:[n.AnimationDirection.Top,n.AnimationDirection.Bottom,n.AnimationDirection.Left,n.AnimationDirection.Right]},{type:n.AnimationType.SpinIn,icon:u,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView]},{type:n.AnimationType.WipeIn,icon:p,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView],supportedDirections:[n.AnimationDirection.Top,n.AnimationDirection.Bottom,n.AnimationDirection.Left,n.AnimationDirection.Right]},{type:n.AnimationType.ZoomIn,icon:c,supportedTriggers:[n.AnimationTriggerType.ScrollIntoView]}],d=[{icon:o,type:n.AnimationType.None},{icon:a,type:n.AnimationType.FadeIn},{icon:r,type:n.AnimationType.FloatIn,supportedDirections:[n.AnimationDirection.Top,n.AnimationDirection.Bottom,n.AnimationDirection.Left,n.AnimationDirection.Right]},{icon:p,type:n.AnimationType.WipeIn,supportedDirections:[n.AnimationDirection.Top,n.AnimationDirection.Bottom,n.AnimationDirection.Left,n.AnimationDirection.Right]},{icon:c,type:n.AnimationType.ZoomIn}]},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(0),o=i(82),a=i(83),r=i(84),s=i(85),u=i(86),p=i(87),c=[{icon:o,type:n.TransitionType.None},{type:n.TransitionType.Box,icon:r,supportDirection:!0},{type:n.TransitionType.Cover,icon:p,supportDirection:!0},{type:n.TransitionType.Cube,icon:s,supportDirection:!0},{type:n.TransitionType.Fade,icon:a},{type:n.TransitionType.Push,icon:u,supportDirection:!0}]},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n,o,a,r=i(19),s=i(0),u=i(2),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),c=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},g=function(e){function t(t){var i=e.call(this,t)||this;return i.modalStyle={position:"absolute",top:"0",bottom:"0",width:"259px",height:"auto",borderRight:"",borderBottom:"",paddingBottom:"1px"},i.getInitConfig=function(){var e,t=i.props.messageWidgetId,n=Object(s.getAppStore)().getState().appStateInBuilder.appConfig,o=n.widgets[t],a=null,r=null,u=!0;i.props.config.messageUseDataSource?a=i.checkAndGetInitUseDataSource(i.props.messageWidgetId,i.props.config.messageUseDataSource):o&&o.useDataSources&&o.useDataSources[0]&&1===o.useDataSources.length&&(a=!(e=n.dataSources[o.useDataSources[0].dataSourceId])||e.type!==i.state.ArcGISDataSourceTypes.WebMap&&e.type!==i.state.ArcGISDataSourceTypes.WebScene?Object(s.Immutable)({dataSourceId:o.useDataSources[0].dataSourceId,mainDataSourceId:o.useDataSources[0].mainDataSourceId,dataViewId:o.useDataSources[0].dataViewId,rootDataSourceId:o.useDataSources[0].rootDataSourceId}):null);(void 0!==i.props.config.enableQueryWithCurrentExtent&&(u=i.props.config.enableQueryWithCurrentExtent),i.props.config.actionUseDataSource)?r=(e=n.dataSources[i.props.config.actionUseDataSource&&i.props.config.actionUseDataSource.dataSourceId]||n.dataSources[i.props.config.actionUseDataSource&&i.props.config.actionUseDataSource.rootDataSourceId])?i.props.config.actionUseDataSource:null:r=null;return r&&r.dataSourceId?{messageUseDataSource:a,actionUseDataSource:r,sqlExprObj:i.props.config.sqlExprObj,enableQueryWithCurrentExtent:u}:{messageUseDataSource:a,actionUseDataSource:r,sqlExprObj:null,enableQueryWithCurrentExtent:u}},i.checkAndGetInitUseDataSource=function(e,t){var n=Object(s.getAppStore)().getState().appStateInBuilder.appConfig,o=n.widgets[e],a=null,r=!1,u=o.useDataSources&&o.useDataSources[0]&&o.useDataSources[0].dataSourceId;if(!u)return null;var p=n.dataSources[u];if(!p||p.type!==i.state.ArcGISDataSourceTypes.WebMap&&p.type!==i.state.ArcGISDataSourceTypes.WebScene||(r=!0),r){var c=!1;if(o&&o.useDataSources)for(var g=0;g<o.useDataSources.length;g++)if(o.useDataSources[g].dataSourceId===t.rootDataSourceId){c=!0;break}a=c?t:null}else{c=!1;if(o&&o.useDataSources)for(g=0;g<o.useDataSources.length;g++)if(o.useDataSources[g].dataSourceId===t.dataSourceId){c=!0;break}a=c?t:o&&o.useDataSources&&1===o.useDataSources.length?Object(s.Immutable)({dataSourceId:o.useDataSources[0].dataSourceId,mainDataSourceId:o.useDataSources[0].mainDataSourceId,dataViewId:o.useDataSources[0].dataViewId,rootDataSourceId:o.useDataSources[0].rootDataSourceId}):null}return a},i.handleTriggerLayerChange=function(e){e&&e.length>0?i.handleTriggerLayerSelected(e[0]):i.handleRemoveLayerForTriggerLayer()},i.handleActionLayerChange=function(e){e&&e.length>0?i.handleActionLayerSelected(e[0]):i.handleRemoveLayerForActionLayer()},i.handleTriggerLayerSelected=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",e)})},i.handleActionLayerSelected=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",e).set("sqlExprObj",null)})},i.handleRemoveLayerForTriggerLayer=function(){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",null)})},i.handleRemoveLayerForActionLayer=function(){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",null).set("sqlExprObj",null)})},i.showSqlExprPopup=function(){i.setState({isSqlExprShow:!0})},i.toggleSqlExprPopup=function(){i.setState({isSqlExprShow:!i.state.isSqlExprShow})},i.onSqlExprBuilderChange=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("sqlExprObj",e)})},i.onMessageFieldSelected=function(e,t){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",{dataSourceId:i.props.config.messageUseDataSource.dataSourceId,mainDataSourceId:i.props.config.messageUseDataSource.mainDataSourceId,dataViewId:i.props.config.messageUseDataSource.dataViewId,rootDataSourceId:i.props.config.messageUseDataSource.rootDataSourceId,fields:e.map((function(e){return e.jimuName}))})})},i.onActionFieldSelected=function(e,t){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",{dataSourceId:i.props.config.actionUseDataSource.dataSourceId,mainDataSourceId:i.props.config.actionUseDataSource.mainDataSourceId,dataViewId:i.props.config.actionUseDataSource.dataViewId,rootDataSourceId:i.props.config.actionUseDataSource.rootDataSourceId,fields:e.map((function(e){return e.jimuName}))})})},i.swicthEnabledDataRelationShip=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("enabledDataRelationShip",e)})},i.swicthEnabledQueryWithCurrentExtent=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("enableQueryWithCurrentExtent",e)})},i.checkTrigerLayerIsSameToActionLayer=function(){return!(!i.props.config.messageUseDataSource||!i.props.config.actionUseDataSource)&&(i.props.config.messageUseDataSource.mainDataSourceId===i.props.config.actionUseDataSource.mainDataSourceId&&i.props.config.messageUseDataSource.rootDataSourceId===i.props.config.actionUseDataSource.rootDataSourceId)},i.getDsRootIdsByWidgetId=function(e){var t,n,o,a,r=null===(n=null===(t=Object(s.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===n?void 0:n.appConfig,u=null===(o=null==r?void 0:r.widgets)||void 0===o?void 0:o[e],p=[],c=s.DataSourceManager.getInstance();return null===(a=null==u?void 0:u.useDataSources)||void 0===a||a.forEach((function(e){var t=c.getDataSource(e.dataSourceId);(null==t?void 0:t.type)!==i.state.ArcGISDataSourceTypes.WebMap&&(null==t?void 0:t.type)!==i.state.ArcGISDataSourceTypes.WebScene||p.push(e.dataSourceId)})),p.length>0?Object(s.Immutable)(p):void 0},i.getDsIdsByWidgetId=function(e){var t,i,n,o,a,r=null===(i=null===(t=Object(s.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===i?void 0:i.appConfig,u=null===(n=null==r?void 0:r.widgets)||void 0===n?void 0:n[e];return Object(s.Immutable)(null!==(a=null===(o=null==u?void 0:u.useDataSources)||void 0===o?void 0:o.map((function(e){return e.dataSourceId})))&&void 0!==a?a:[])},i.getDsSelectorSourceData=function(e,t){var n,o,a,r=null===(o=null===(n=Object(s.getAppStore)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===o?void 0:o.appConfig,u=null===(a=null==r?void 0:r.widgets)||void 0===a?void 0:a[e],p=!1,c=i.getDsRootIdsByWidgetId(e);return c&&0===c.length&&u&&u.useDataSources&&1===u.useDataSources.length&&(p=!0),!c&&u&&u.useDataSources&&1===u.useDataSources.length&&(p=!0),{isReadOnly:p,useDataSources:t&&t.dataSourceId?Object(s.Immutable)([t]):Object(s.Immutable)([]),fromRootDsIds:c,fromDsIds:c?void 0:i.getDsIdsByWidgetId(e)}},i.checkIsDisableDataView=function(e){var t,n,o,a;if(i.props.messageType===s.MessageType.DataRecordsSelectionChange)return!0;var r=null===(n=null===(t=Object(s.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===n?void 0:n.appConfig,u=null===(o=null==r?void 0:r.widgets)||void 0===o?void 0:o[e];return!!u&&"Map"===(null===(a=null==u?void 0:u.manifest)||void 0===a?void 0:a.label)},i.modalStyle.borderRight="1px solid black",i.modalStyle.borderBottom="1px solid black",i.state={isShowLayerList:!1,currentLayerType:null,isSqlExprShow:!1},i}return p(t,e),t.prototype.componentDidMount=function(){var e=this;s.moduleLoader.loadModules(["jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-arcgis","jimu-ui/advanced/sql-expression-builder"]).then((function(t){e.setState({Button:t[0].Button,Icon:t[0].Icon,Switch:t[0].Switch,Collapse:t[0].Collapse,SettingSection:t[1].SettingSection,SettingRow:t[1].SettingRow,FieldSelector:t[2].FieldSelector,AllDataSourceTypes:t[2].AllDataSourceTypes,DataSourceSelector:t[2].DataSourceSelector,ArcGISDataSourceTypes:t[3].ArcGISDataSourceTypes,SqlExpressionBuilderPopup:t[4].SqlExpressionBuilderPopup,DSSelectorTypes:Object(s.Immutable)([t[2].AllDataSourceTypes.FeatureLayer,t[2].AllDataSourceTypes.SceneLayer])},(function(){var t=e.getInitConfig();e.props.onSettingChange({actionId:e.props.actionId,config:e.props.config.set("messageUseDataSource",t.messageUseDataSource).set("actionUseDataSource",t.actionUseDataSource).set("sqlExprObj",t.sqlExprObj)})}))}))},t.prototype.getStyle=function(e){return Object(s.css)(o||(o=c(["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n\n      .sql-expr-display {\n        width: 100%;\n        height: auto;\n        min-height: 60px;\n        line-height: 25px;\n        padding: 3px 5px;\n        color: ",";\n        border: 1px solid ",";\n      }\n\n      .relate-panel-left {\n        flex: auto;\n        .action-select-chooser {\n          margin-top: ",";\n        }\n      }\n    "],["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n\n      .sql-expr-display {\n        width: 100%;\n        height: auto;\n        min-height: 60px;\n        line-height: 25px;\n        padding: 3px 5px;\n        color: ",";\n        border: 1px solid ",";\n      }\n\n      .relate-panel-left {\n        flex: auto;\n        .action-select-chooser {\n          margin-top: ",";\n        }\n      }\n    "])),s.polished.rem(10),s.polished.rem(16),s.polished.rem(0),s.polished.rem(16),e.colors.palette.dark[300],e.colors.palette.light[500],s.polished.rem(12))},t.prototype.render=function(){var e,t,n=this,o=this.state.Button,a=this.state.Icon,r=this.state.Switch,p=this.state.Collapse,c=this.state.SettingSection,g=this.state.SettingRow,d=this.state.FieldSelector,l=this.state.AllDataSourceTypes,I=this.state.DataSourceSelector,f=this.state.ArcGISDataSourceTypes,h=this.state.SqlExpressionBuilderPopup;if(!(o&&a&&r&&p&&c&&g&&d&&l&&I&&f&&h))return null;var C=this.getDsSelectorSourceData(this.props.messageWidgetId,this.props.config.messageUseDataSource),y=this.props.config.actionUseDataSource&&s.DataSourceManager.getInstance().getDataSource(this.props.config.actionUseDataSource.dataSourceId),A=this.props.theme;return this.props.messageType===s.MessageType.ExtentChange?Object(s.jsx)("div",{css:this.getStyle(this.props.theme)},Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_ActionLayer",defaultMessage:u.a.frameworkAction_ActionLayer})},Object(s.jsx)(I,{types:this.state.DSSelectorTypes,useDataSources:this.props.config.actionUseDataSource?Object(s.Immutable)([this.props.config.actionUseDataSource]):Object(s.Immutable)([]),closeDataSourceListOnChange:!0,disableAddData:!0,hideTypeDropdown:!0,mustUseDataSource:!0,onChange:this.handleActionLayerChange,widgetId:this.props.widgetId})),Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_Conditions",defaultMessage:u.a.frameworkAction_Conditions})},Object(s.jsx)(g,{label:this.props.intl.formatMessage({id:"frameworkAction_QueryByExtent",defaultMessage:u.a.frameworkAction_QueryByExtent})},Object(s.jsx)(r,{checked:this.props.config.enableQueryWithCurrentExtent,onChange:function(e){n.swicthEnabledQueryWithCurrentExtent(e.target.checked)}})),Object(s.jsx)(g,{label:Object(s.jsx)(o,{className:"p-0",type:"link",disabled:!this.props.config.actionUseDataSource,onClick:this.showSqlExprPopup},this.props.intl.formatMessage({id:"frameworkAction_MoreConditions",defaultMessage:u.a.frameworkAction_MoreConditions}))}),Object(s.jsx)(g,null,this.props.config.actionUseDataSource&&Object(s.jsx)(s.DataSourceComponent,{useDataSource:this.props.config.actionUseDataSource},(function(e){return Object(s.jsx)(h,{dataSource:e,mode:s.SqlExpressionMode.Simple,isOpen:n.state.isSqlExprShow,toggle:n.toggleSqlExprPopup,expression:n.props.config.sqlExprObj,onChange:function(e){n.onSqlExprBuilderChange(e)},id:"filter-widget-sql-expression-builder-popup"})})),Object(s.jsx)("div",{className:"sql-expr-display body-1"},this.props.config.sqlExprObj&&y?s.dataSourceUtils.getArcGISSQL(this.props.config.sqlExprObj,y).displaySQL:this.props.intl.formatMessage({id:"frameworkAction_SetExpression",defaultMessage:u.a.frameworkAction_SetExpression}))))):Object(s.jsx)("div",{css:this.getStyle(this.props.theme)},Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_TriggerLayer",defaultMessage:u.a.frameworkAction_TriggerLayer})},Object(s.jsx)(I,{types:this.state.DSSelectorTypes,useDataSources:C.useDataSources,fromRootDsIds:C.fromRootDsIds,fromDsIds:C.fromDsIds,closeDataSourceListOnChange:!0,disableRemove:function(){return C.isReadOnly},disableDataSourceList:C.isReadOnly,disableAddData:!0,hideTypeDropdown:!0,mustUseDataSource:!0,onChange:this.handleTriggerLayerChange,widgetId:this.props.messageWidgetId,disableDataView:!0,hideDataView:this.checkIsDisableDataView(this.props.messageWidgetId)})),Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_ActionLayer",defaultMessage:u.a.frameworkAction_ActionLayer})},Object(s.jsx)(I,{types:this.state.DSSelectorTypes,useDataSources:this.props.config.actionUseDataSource?Object(s.Immutable)([this.props.config.actionUseDataSource]):Object(s.Immutable)([]),closeDataSourceListOnChange:!0,disableAddData:!0,hideTypeDropdown:!0,mustUseDataSource:!0,onChange:this.handleActionLayerChange,widgetId:this.props.widgetId})),this.props.config&&this.props.config.actionUseDataSource&&this.props.config.messageUseDataSource&&Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_Conditions",defaultMessage:u.a.frameworkAction_Conditions})},Object(s.jsx)(g,{label:this.props.intl.formatMessage({id:"frameworkAction_RelateMessage",defaultMessage:u.a.frameworkAction_RelateMessage})},Object(s.jsx)(r,{checked:this.props.config.enabledDataRelationShip,onChange:function(e){n.swicthEnabledDataRelationShip(e.target.checked)}})),Object(s.jsx)(g,null,Object(s.jsx)(p,{isOpen:this.props.config.enabledDataRelationShip,className:"w-100"},this.checkTrigerLayerIsSameToActionLayer()&&Object(s.jsx)("div",{className:"w-100 border p-1 mr-2"},this.props.intl.formatMessage({id:"frameworkAction_AutoBind",defaultMessage:u.a.frameworkAction_AutoBind})),!this.checkTrigerLayerIsSameToActionLayer()&&Object(s.jsx)("div",{className:"w-100 d-flex align-items-center"},Object(s.jsx)("div",{className:"d-flex flex-column relate-panel-left"},Object(s.jsx)(d,{className:"w-100",useDataSources:Object(s.Immutable)([null===(e=this.props.config.messageUseDataSource)||void 0===e?void 0:e.asMutable({deep:!0})]),isDataSourceDropDownHidden:!0,placeHolder:this.props.intl.formatMessage({id:"frameworkAction_TriggerLayerField",defaultMessage:u.a.frameworkAction_TriggerLayerField}),onChange:this.onMessageFieldSelected,useDropdown:!0,isSearchInputHidden:!0,selectedFields:this.props.config.messageUseDataSource&&this.props.config.messageUseDataSource.fields?this.props.config.messageUseDataSource.fields:Object(s.Immutable)([])}),Object(s.jsx)(d,{className:"w-100 action-select-chooser",placeHolder:this.props.intl.formatMessage({id:"frameworkAction_ActionLayerField",defaultMessage:u.a.frameworkAction_ActionLayerField}),useDataSources:Object(s.Immutable)([null===(t=this.props.config.actionUseDataSource)||void 0===t?void 0:t.asMutable({deep:!0})]),isDataSourceDropDownHidden:!0,onChange:this.onActionFieldSelected,useDropdown:!0,isSearchInputHidden:!0,selectedFields:this.props.config.actionUseDataSource&&this.props.config.actionUseDataSource.fields?this.props.config.actionUseDataSource.fields:Object(s.Immutable)([])})),Object(s.jsx)(a,{className:"flex-none",width:12,height:40,color:A.colors.dark[400],icon:i(38)})))),Object(s.jsx)(g,null,Object(s.jsx)(o,{type:"link",disabled:!this.props.config.actionUseDataSource,className:"w-100 d-flex justify-content-start",onClick:this.showSqlExprPopup},Object(s.jsx)("div",{className:"w-100 text-truncate",style:{textAlign:"start"}},this.props.intl.formatMessage({id:"frameworkAction_MoreConditions",defaultMessage:u.a.frameworkAction_MoreConditions}))),this.props.config.actionUseDataSource&&Object(s.jsx)(s.DataSourceComponent,{useDataSource:this.props.config.actionUseDataSource},(function(e){return Object(s.jsx)(h,{dataSource:e,mode:s.SqlExpressionMode.Simple,isOpen:n.state.isSqlExprShow,toggle:n.toggleSqlExprPopup,expression:n.props.config.sqlExprObj,onChange:function(e){n.onSqlExprBuilderChange(e)},id:"filter-widget-sql-expression-builder-popup"})}))),Object(s.jsx)(g,null,Object(s.jsx)("div",{className:"sql-expr-display"},this.props.config.sqlExprObj&&y?s.dataSourceUtils.getArcGISSQL(this.props.config.sqlExprObj,y).displaySQL:this.props.intl.formatMessage({id:"frameworkAction_SetExpression",defaultMessage:u.a.frameworkAction_SetExpression})))))},t.defaultProps={config:Object(s.Immutable)({messageUseDataSource:null,actionUseDataSource:null,sqlExprObj:null,enabledDataRelationShip:!0,enableQueryWithCurrentExtent:!0})},t}(s.React.PureComponent),d=s.ReactRedux.connect((function(e){return{dataSources:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dataSources,dataSourcesInfo:e.appStateInBuilder&&e.appStateInBuilder.dataSourcesInfo}}))(s.themeUtils.withTheme(g)),l=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},f=function(e){function t(t){var i=e.call(this,t)||this;return i.modalStyle={position:"absolute",top:"0",bottom:"0",width:"259px",height:"auto",borderRight:"",borderBottom:"",paddingBottom:"1px"},i.getInitConfig=function(){var e,t=i.props.messageWidgetId,n=Object(s.getAppStore)().getState().appStateInBuilder.appConfig,o=n.widgets[t],a=null,r=null;i.props.config.messageUseDataSource?a=i.checkAndGetInitUseDataSource(i.props.messageWidgetId,i.props.config.messageUseDataSource):o&&o.useDataSources&&o.useDataSources[0]&&1===o.useDataSources.length&&(a=!(e=n.dataSources[o.useDataSources[0].dataSourceId])||e.type!==i.state.ArcGISDataSourceTypes.WebMap&&e.type!==i.state.ArcGISDataSourceTypes.WebScene?Object(s.Immutable)({dataSourceId:o.useDataSources[0].dataSourceId,mainDataSourceId:o.useDataSources[0].mainDataSourceId,dataViewId:o.useDataSources[0].dataViewId,rootDataSourceId:o.useDataSources[0].rootDataSourceId}):null);i.props.config.actionUseDataSource?r=(e=n.dataSources[i.props.config.actionUseDataSource&&i.props.config.actionUseDataSource.dataSourceId]||n.dataSources[i.props.config.actionUseDataSource&&i.props.config.actionUseDataSource.rootDataSourceId])?i.props.config.actionUseDataSource:null:r=null;return r&&r.dataSourceId?{messageUseDataSource:a,actionUseDataSource:r,sqlExprObj:i.props.config.sqlExprObj}:{messageUseDataSource:a,actionUseDataSource:r,sqlExprObj:null}},i.checkAndGetInitUseDataSource=function(e,t){var n=Object(s.getAppStore)().getState().appStateInBuilder.appConfig,o=n.widgets[e],a=null,r=!1,u=o.useDataSources&&o.useDataSources[0]&&o.useDataSources[0].dataSourceId;if(!u)return null;var p=n.dataSources[u];if(!p||p.type!==i.state.ArcGISDataSourceTypes.WebMap&&p.type!==i.state.ArcGISDataSourceTypes.WebScene||(r=!0),r){var c=!1;if(o&&o.useDataSources)for(var g=0;g<o.useDataSources.length;g++)if(o.useDataSources[g].dataSourceId===t.rootDataSourceId){c=!0;break}a=c?t:null}else{c=!1;if(o&&o.useDataSources)for(g=0;g<o.useDataSources.length;g++)if(o.useDataSources[g].dataSourceId===t.dataSourceId){c=!0;break}a=c?t:o&&o.useDataSources&&1===o.useDataSources.length?Object(s.Immutable)({dataSourceId:o.useDataSources[0].dataSourceId,mainDataSourceId:o.useDataSources[0].mainDataSourceId,dataViewId:o.useDataSources[0].dataViewId,rootDataSourceId:o.useDataSources[0].rootDataSourceId}):null}return a},i.handleTriggerLayerChange=function(e){e&&e.length>0?i.handleTriggerLayerSelected(e[0]):i.handleRemoveLayerForTriggerLayer()},i.handleActionLayerChange=function(e){e&&e.length>0?i.handleActionLayerSelected(e[0]):i.handleRemoveLayerForActionLayer()},i.handleTriggerLayerSelected=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",e)})},i.handleActionLayerSelected=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",e).set("sqlExprObj",null)})},i.handleRemoveLayerForTriggerLayer=function(){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",null)})},i.handleRemoveLayerForActionLayer=function(){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",null).set("sqlExprObj",null)})},i.showSqlExprPopup=function(){i.setState({isSqlExprShow:!0})},i.toggleSqlExprPopup=function(){i.setState({isSqlExprShow:!i.state.isSqlExprShow})},i.onSqlExprBuilderChange=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("sqlExprObj",e)})},i.onMessageFieldSelected=function(e,t){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("messageUseDataSource",{dataSourceId:i.props.config.messageUseDataSource.dataSourceId,mainDataSourceId:i.props.config.messageUseDataSource.mainDataSourceId,dataViewId:i.props.config.messageUseDataSource.dataViewId,rootDataSourceId:i.props.config.messageUseDataSource.rootDataSourceId,fields:e.map((function(e){return e.jimuName}))})})},i.onActionFieldSelected=function(e,t){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("actionUseDataSource",{dataSourceId:i.props.config.actionUseDataSource.dataSourceId,mainDataSourceId:i.props.config.actionUseDataSource.mainDataSourceId,dataViewId:i.props.config.actionUseDataSource.dataViewId,rootDataSourceId:i.props.config.actionUseDataSource.rootDataSourceId,fields:e.map((function(e){return e.jimuName}))})})},i.swicthEnabledDataRelationShip=function(e){i.props.onSettingChange({actionId:i.props.actionId,config:i.props.config.set("enabledDataRelationShip",e)})},i.checkTrigerLayerIsSameToActionLayer=function(){return!(!i.props.config.messageUseDataSource||!i.props.config.actionUseDataSource)&&(i.props.config.messageUseDataSource.mainDataSourceId===i.props.config.actionUseDataSource.mainDataSourceId&&i.props.config.messageUseDataSource.rootDataSourceId===i.props.config.actionUseDataSource.rootDataSourceId)},i.getDsRootIdsByWidgetId=function(e){var t,n,o,a,r=null===(n=null===(t=Object(s.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===n?void 0:n.appConfig,u=null===(o=null==r?void 0:r.widgets)||void 0===o?void 0:o[e],p=[],c=s.DataSourceManager.getInstance();return null===(a=null==u?void 0:u.useDataSources)||void 0===a||a.forEach((function(e){var t=c.getDataSource(e.dataSourceId);(null==t?void 0:t.type)!==i.state.ArcGISDataSourceTypes.WebMap&&(null==t?void 0:t.type)!==i.state.ArcGISDataSourceTypes.WebScene||p.push(e.dataSourceId)})),p.length>0?Object(s.Immutable)(p):void 0},i.getDsIdsByWidgetId=function(e){var t,i,n,o,a,r=null===(i=null===(t=Object(s.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===i?void 0:i.appConfig,u=null===(n=null==r?void 0:r.widgets)||void 0===n?void 0:n[e];return Object(s.Immutable)(null!==(a=null===(o=null==u?void 0:u.useDataSources)||void 0===o?void 0:o.map((function(e){return e.dataSourceId})))&&void 0!==a?a:[])},i.getDsSelectorSourceData=function(e,t){var n,o,a,r=null===(o=null===(n=Object(s.getAppStore)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===o?void 0:o.appConfig,u=null===(a=null==r?void 0:r.widgets)||void 0===a?void 0:a[e],p=!1,c=i.getDsRootIdsByWidgetId(e);return c&&0===c.length&&u&&u.useDataSources&&1===u.useDataSources.length&&(p=!0),!c&&u&&u.useDataSources&&1===u.useDataSources.length&&(p=!0),{isReadOnly:p,useDataSources:t&&t.dataSourceId?Object(s.Immutable)([t]):Object(s.Immutable)([]),fromRootDsIds:c,fromDsIds:c?void 0:i.getDsIdsByWidgetId(e)}},i.modalStyle.borderRight="1px solid black",i.modalStyle.borderBottom="1px solid black",i.state={isShowLayerList:!1,currentLayerType:null,isSqlExprShow:!1},i}return l(t,e),t.prototype.componentDidMount=function(){var e=this;s.moduleLoader.loadModules(["jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-arcgis","jimu-ui/advanced/sql-expression-builder"]).then((function(t){e.setState({Button:t[0].Button,Icon:t[0].Icon,Switch:t[0].Switch,Collapse:t[0].Collapse,SettingSection:t[1].SettingSection,SettingRow:t[1].SettingRow,FieldSelector:t[2].FieldSelector,AllDataSourceTypes:t[2].AllDataSourceTypes,DataSourceSelector:t[2].DataSourceSelector,ArcGISDataSourceTypes:t[3].ArcGISDataSourceTypes,SqlExpressionBuilderPopup:t[4].SqlExpressionBuilderPopup,DSSelectorTypes:Object(s.Immutable)([t[2].AllDataSourceTypes.FeatureLayer,t[2].AllDataSourceTypes.SceneLayer])},(function(){var t=e.getInitConfig();e.props.onSettingChange({actionId:e.props.actionId,config:e.props.config.set("messageUseDataSource",t.messageUseDataSource).set("actionUseDataSource",t.actionUseDataSource).set("sqlExprObj",t.sqlExprObj)})}))}))},t.prototype.getStyle=function(e){return Object(s.css)(a||(a=I(["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n\n      .sql-expr-display {\n        width: 100%;\n        height: auto;\n        min-height: 60px;\n        line-height: 25px;\n        padding: 3px 5px;\n        color: ",";\n        border: 1px solid ",";\n      }\n\n      .relate-panel-left {\n        flex: auto;\n        .action-select-chooser {\n          margin-top: ",";\n        }\n      }\n    "],["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n\n      .sql-expr-display {\n        width: 100%;\n        height: auto;\n        min-height: 60px;\n        line-height: 25px;\n        padding: 3px 5px;\n        color: ",";\n        border: 1px solid ",";\n      }\n\n      .relate-panel-left {\n        flex: auto;\n        .action-select-chooser {\n          margin-top: ",";\n        }\n      }\n    "])),s.polished.rem(10),s.polished.rem(16),s.polished.rem(0),s.polished.rem(16),e.colors.palette.dark[300],e.colors.palette.light[500],s.polished.rem(12))},t.prototype.render=function(){var e,t,n=this,o=this.state.Button,a=this.state.Icon,r=this.state.Switch,p=this.state.Collapse,c=this.state.SettingSection,g=this.state.SettingRow,d=this.state.FieldSelector,l=this.state.AllDataSourceTypes,I=this.state.DataSourceSelector,f=this.state.ArcGISDataSourceTypes,h=this.state.SqlExpressionBuilderPopup;if(!(o&&a&&r&&p&&c&&g&&d&&l&&I&&f&&h))return null;var C=this.getDsSelectorSourceData(this.props.messageWidgetId,this.props.config.messageUseDataSource),y=this.props.config.actionUseDataSource&&s.DataSourceManager.getInstance().getDataSource(this.props.config.actionUseDataSource.dataSourceId),A=this.props.theme;return Object(s.jsx)("div",{css:this.getStyle(this.props.theme)},Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_TriggerLayer",defaultMessage:u.a.frameworkAction_TriggerLayer})},Object(s.jsx)(I,{types:this.state.DSSelectorTypes,useDataSources:C.useDataSources,fromRootDsIds:C.fromRootDsIds,fromDsIds:C.fromDsIds,closeDataSourceListOnChange:!0,disableRemove:function(){return C.isReadOnly},disableDataSourceList:C.isReadOnly,disableAddData:!0,hideTypeDropdown:!0,mustUseDataSource:!0,onChange:this.handleTriggerLayerChange,widgetId:this.props.messageWidgetId,hideDataView:!0})),Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_ActionLayer",defaultMessage:u.a.frameworkAction_ActionLayer})},Object(s.jsx)(I,{types:this.state.DSSelectorTypes,useDataSources:this.props.config.actionUseDataSource?Object(s.Immutable)([this.props.config.actionUseDataSource]):Object(s.Immutable)([]),closeDataSourceListOnChange:!0,disableAddData:!0,hideTypeDropdown:!0,mustUseDataSource:!0,onChange:this.handleActionLayerChange,widgetId:this.props.widgetId,hideDataView:!0})),this.props.config&&this.props.config.actionUseDataSource&&this.props.config.messageUseDataSource&&Object(s.jsx)(c,{title:this.props.intl.formatMessage({id:"frameworkAction_Conditions",defaultMessage:u.a.frameworkAction_Conditions})},Object(s.jsx)(g,{label:this.props.intl.formatMessage({id:"frameworkAction_RelateMessage",defaultMessage:u.a.frameworkAction_RelateMessage})},Object(s.jsx)(r,{checked:this.props.config.enabledDataRelationShip,onChange:function(e){n.swicthEnabledDataRelationShip(e.target.checked)}})),Object(s.jsx)(g,null,Object(s.jsx)(p,{isOpen:this.props.config.enabledDataRelationShip,className:"w-100"},this.checkTrigerLayerIsSameToActionLayer()&&Object(s.jsx)("div",{className:"w-100 border p-1 mr-2"},this.props.intl.formatMessage({id:"frameworkAction_AutoBind",defaultMessage:u.a.frameworkAction_AutoBind})),!this.checkTrigerLayerIsSameToActionLayer()&&Object(s.jsx)("div",{className:"w-100 d-flex align-items-center"},Object(s.jsx)("div",{className:"d-flex flex-column relate-panel-left"},Object(s.jsx)(d,{className:"w-100",useDataSources:Object(s.Immutable)([null===(e=this.props.config.messageUseDataSource)||void 0===e?void 0:e.asMutable({deep:!0})]),isDataSourceDropDownHidden:!0,placeHolder:this.props.intl.formatMessage({id:"frameworkAction_TriggerLayerField",defaultMessage:u.a.frameworkAction_TriggerLayerField}),onChange:this.onMessageFieldSelected,useDropdown:!0,isSearchInputHidden:!0,selectedFields:this.props.config.messageUseDataSource&&this.props.config.messageUseDataSource.fields?this.props.config.messageUseDataSource.fields:Object(s.Immutable)([])}),Object(s.jsx)(d,{className:"w-100 action-select-chooser",placeHolder:this.props.intl.formatMessage({id:"frameworkAction_ActionLayerField",defaultMessage:u.a.frameworkAction_ActionLayerField}),useDataSources:Object(s.Immutable)([null===(t=this.props.config.actionUseDataSource)||void 0===t?void 0:t.asMutable({deep:!0})]),isDataSourceDropDownHidden:!0,onChange:this.onActionFieldSelected,useDropdown:!0,isSearchInputHidden:!0,selectedFields:this.props.config.actionUseDataSource&&this.props.config.actionUseDataSource.fields?this.props.config.actionUseDataSource.fields:Object(s.Immutable)([])})),Object(s.jsx)(a,{className:"flex-none",width:12,height:40,color:A.colors.dark[400],icon:i(38)})))),Object(s.jsx)(g,null,Object(s.jsx)(o,{type:"link",disabled:!this.props.config.actionUseDataSource,className:"w-100 d-flex justify-content-start",onClick:this.showSqlExprPopup},Object(s.jsx)("div",{className:"w-100 text-truncate",style:{textAlign:"start"}},this.props.intl.formatMessage({id:"frameworkAction_MoreConditions",defaultMessage:u.a.frameworkAction_MoreConditions}))),this.props.config.actionUseDataSource&&Object(s.jsx)(s.DataSourceComponent,{useDataSource:this.props.config.actionUseDataSource},(function(e){return Object(s.jsx)(h,{dataSource:e,mode:s.SqlExpressionMode.Simple,isOpen:n.state.isSqlExprShow,toggle:n.toggleSqlExprPopup,expression:n.props.config.sqlExprObj,onChange:function(e){n.onSqlExprBuilderChange(e)},id:"filter-widget-sql-expression-builder-popup"})}))),Object(s.jsx)(g,null,Object(s.jsx)("div",{className:"sql-expr-display"},this.props.config.sqlExprObj&&y?s.dataSourceUtils.getArcGISSQL(this.props.config.sqlExprObj,y).displaySQL:this.props.intl.formatMessage({id:"frameworkAction_SetExpression",defaultMessage:u.a.frameworkAction_SetExpression})))))},t.defaultProps={config:Object(s.Immutable)({messageUseDataSource:null,actionUseDataSource:null,sqlExprObj:null,enabledDataRelationShip:!0})},t}(s.React.PureComponent),h=s.ReactRedux.connect((function(e){return{dataSources:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dataSources,dataSourcesInfo:e.appStateInBuilder&&e.appStateInBuilder.dataSourcesInfo}}))(s.themeUtils.withTheme(f));function C(){return r.a.getInstance().registerActionRawSettingClass("filter-data-record-action",d),r.a.getInstance().registerActionRawSettingClass("select-data-record-action",h),Promise.resolve({})}},,,function(e,t,i){"use strict";i.r(t);var n=i(17);i.d(t,"BaseWidgetSetting",(function(){return n.a}));var o=i(24);i.d(t,"WidgetSettingManager",(function(){return o.a}));var a=i(19);i.d(t,"AppMessageManager",(function(){return a.a}));var r=i(25);i.d(t,"AppWidgetManager",(function(){return r.a}));var s=i(33);i.d(t,"GuideManager",(function(){return s.a}));var u=i(10);i.d(t,"AppStateReduxStoreExtension",(function(){return u.c}));var p=i(7);i.d(t,"AppStateHistoryExtension",(function(){return p.c}));var c=i(5);i.d(t,"BuilderStateReduxStoreExtension",(function(){return c.d}));var g=i(14);i.d(t,"BuilderStateResourceExtension",(function(){return g.c}));var d=i(8);i.d(t,"builderAppSync",(function(){return d}));var l=i(26);i.d(t,"appBuilderSync",(function(){return l}));var I=i(13);i.d(t,"getAppConfigAction",(function(){return I.b})),i.d(t,"AppConfigAction",(function(){return I.a}));var f=i(2);i.d(t,"defaultMessages",(function(){return f.a}));var h=i(34);i.d(t,"utils",(function(){return h}));var C=i(4);i.d(t,"appConfigUtils",(function(){return C}));var y=i(35);i.d(t,"templateUtils",(function(){return y}));var A=i(36);i.d(t,"BuilderKeyboardComponent",(function(){return A.a}));var m=i(37);for(var S in m)["BaseWidgetSetting","WidgetSettingManager","AppStateReduxStoreExtension","BuilderStateReduxStoreExtension","BuilderStateResourceExtension","AppMessageManager","GuideManager","AppStateHistoryExtension","builderAppSync","appBuilderSync","templateUtils","utils","BuilderKeyboardComponent","appConfigUtils","defaultMessages","AppWidgetManager","getAppConfigAction","AppConfigAction","default"].indexOf(S)<0&&function(e){i.d(t,e,(function(){return m[e]}))}(S);i.d(t,"ExtActionKeys",(function(){return u.a})),i.d(t,"appStateActions",(function(){return u.b})),i.d(t,"appStateHistoryActions",(function(){return p.b})),i.d(t,"AppStateHistoryActionKeys",(function(){return p.a})),i.d(t,"BuilderStateActionTypes",(function(){return c.a})),i.d(t,"builderActions",(function(){return c.c})),i.d(t,"builderActionKeys",(function(){return c.b})),i.d(t,"builderStateResourceActions",(function(){return g.b})),i.d(t,"BuilderStateResourceActionKeys",(function(){return g.a}));var M=i(15);i.d(t,"AppResourceManager",(function(){return M.a}));var b=i(66);i.d(t,"init",(function(){return b.a}));var D=i(18);i.d(t,"loadI18nMessage",(function(){return D.a}));var v=i(39);i.d(t,"animationInfos",(function(){return v.a})),i.d(t,"oneByOneAnimationInfos",(function(){return v.b}));var w=i(40);i.d(t,"transitionInfos",(function(){return w.a}))},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M1 0h3a1 1 0 011 1v1h6a1 1 0 011 1v8a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1zm0 1v10h10V3H4V1H1zm0 3.5h10v1H1v-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.839a.5.5 0 010 .71L6 10.966a3.502 3.502 0 01-4.967 0 3.501 3.501 0 010-4.966l1.416-1.422a.504.504 0 01.713.712L1.746 6.713a2.497 2.497 0 00-.003 3.545c.983.983 2.56.98 3.544-.003l1.42-1.42a.504.504 0 01.712.004zm1.415-2.132l1.422-1.416a2.5 2.5 0 000-3.547 2.502 2.502 0 00-3.547 0L5.29 3.163a.504.504 0 01-.713-.712l1.42-1.42a3.506 3.506 0 014.97.003 3.501 3.501 0 010 4.967L9.547 7.42a.504.504 0 01-.713-.712zm-4.967.71l3.548-3.548a.504.504 0 01.713.713L4.58 8.129a.504.504 0 01-.713-.712z" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 10 12" xmlns="http://www.w3.org/2000/svg"><path d="M1 0h8a1 1 0 011 1v10a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1zm0 1v10h8V1H1zm2 2h4a.5.5 0 010 1H3a.5.5 0 010-1zm0 2.5h4a.5.5 0 010 1H3a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M11 0l.117.007A1 1 0 0112 1v7l-.007.117A1 1 0 0111 9H4l-4 3V1L.007.883A1 1 0 011 0h10zm0 1H1v9l2.667-2H11V1zM8.5 5a.5.5 0 010 1h-5a.5.5 0 010-1h5zm0-2a.5.5 0 010 1h-5a.5.5 0 010-1h5z" fill="#C5C5C5" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a2 2 0 012 2v4h4a2 2 0 012 2v10a2 2 0 01-2 2H8a2 2 0 01-2-2v-4H2a2 2 0 01-2-2V2a2 2 0 012-2h10zm6 7h-4v5a2 2 0 01-2 2H7v4a1 1 0 001 1h10a1 1 0 001-1V8a1 1 0 00-1-1zm-6-6H2a1 1 0 00-1 1v10a1 1 0 001 1h4V8a2 2 0 012-2h5V2a1 1 0 00-1-1zm1 6H8a1 1 0 00-1 1v5h5a1 1 0 001-1V7z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9ub25lPC90aXRsZT4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQxLjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi9pbi9ub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMDAwMDAsIDE0MC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTUiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyLUNvcHktNiIgZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSI0NiA0OCAzMS44OTMxNTM5IDU1LjQxNjQwNzkgMzQuNTg3MzIxOCAzOS43MDgyMDM5IDIzLjE3NDY0MzYgMjguNTgzNTkyMSAzOC45NDY1NzcgMjYuMjkxNzk2MSA0NiAxMiA1My4wNTM0MjMgMjYuMjkxNzk2MSA2OC44MjUzNTY0IDI4LjU4MzU5MjEgNTcuNDEyNjc4MiAzOS43MDgyMDM5IDYwLjEwNjg0NjEgNTUuNDE2NDA3OSI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9mYWRlPC90aXRsZT4NCiAgICA8ZGVmcz4NCiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI5NS4yNjAxNjk1JSIgeTE9IjQyLjI4Mzg2NzglIiB4Mj0iMzIuOTA2MzY3MyUiIHkyPSI0Mi4yODM4Njc4JSIgaWQ9ImZhZGVpbi1saW5lYXJHcmFkaWVudC0xIj4NCiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2QTZBNkEiIG9mZnNldD0iMCUiPjwvc3RvcD4NCiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyODI4MjgiIG9mZnNldD0iMTAwJSI+PC9zdG9wPg0KICAgICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgIDwvZGVmcz4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA2MS4wMDAwMDAsIC0xOTIuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iU2V0dGluZ1BhbmVsLUwyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTcuMDAwMDAwLCA1Mi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbi9hbmltYXRpb24vaW4vZmFkZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjAwMDAwMCwgMTQwLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMTMiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyIiBmaWxsPSJ1cmwoI2ZhZGVpbi1saW5lYXJHcmFkaWVudC0xKSIgcG9pbnRzPSI0NiA0OCAzMS44OTMxNTM5IDU1LjQxNjQwNzkgMzQuNTg3MzIxOCAzOS43MDgyMDM5IDIzLjE3NDY0MzYgMjguNTgzNTkyMSAzOC45NDY1NzcgMjYuMjkxNzk2MSA0NiAxMiA1My4wNTM0MjMgMjYuMjkxNzk2MSA2OC44MjUzNTY0IDI4LjU4MzU5MjEgNTcuNDEyNjc4MiAzOS43MDgyMDM5IDYwLjEwNjg0NjEgNTUuNDE2NDA3OSI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY0cHgiIGhlaWdodD0iNDhweCIgdmlld0JveD0iMCAwIDY0IDQ4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9mbG9hdGluPC90aXRsZT4NCiAgICA8ZGVmcz4NCiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSI5Mi4wNjIxNTEyJSIgeDI9IjUwJSIgeTI9IjQxLjc0NDE3NDUlIiBpZD0iZm9hdGluLWxpbmVhckdyYWRpZW50LTEiPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgb2Zmc2V0PSIwJSI+PC9zdG9wPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI4MjgyOCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+DQogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iMCUiIHkxPSI1MCUiIHgyPSIxMDAlIiB5Mj0iNTAlIiBpZD0iZm9hdGluLWxpbmVhckdyYWRpZW50LTIiPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgb2Zmc2V0PSIwJSI+PC9zdG9wPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4NCiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4NCiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSIwJSIgeTE9IjUwJSIgeDI9IjEwMCUiIHkyPSI1MCUiIGlkPSJmb2F0aW4tbGluZWFyR3JhZGllbnQtMyI+DQogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNkE2QTZBIiBvZmZzZXQ9IjAlIj48L3N0b3A+DQogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNkE2QTZBIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMTAwJSI+PC9zdG9wPg0KICAgICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgIDwvZGVmcz4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIwNC4wMDAwMDAsIC02MTEuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iaWNvbi9hbmltYXRpb24vaW4vZmxvYXRJbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwNC4wMDAwMDAsIDYxMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNyIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSIwIiB5PSIwIiB3aWR0aD0iNjQiIGhlaWdodD0iNDgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iU3Rhci1Db3B5IiBmaWxsPSJ1cmwoI2ZvYXRpbi1saW5lYXJHcmFkaWVudC0xKSIgcG9pbnRzPSIzMiAzMiAyMi4xODY1NDE5IDM2Ljk0NDI3MTkgMjQuMDYwNzQ1NiAyNi40NzIxMzYgMTYuMTIxNDkxMiAxOS4wNTU3MjgxIDI3LjA5MzI3MDkgMTcuNTI3ODY0IDMyIDggMzYuOTA2NzI5MSAxNy41Mjc4NjQgNDcuODc4NTA4OCAxOS4wNTU3MjgxIDM5LjkzOTI1NDQgMjYuNDcyMTM2IDQxLjgxMzQ1ODEgMzYuOTQ0MjcxOSI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtQ29weS0xOSIgZmlsbD0idXJsKCNmb2F0aW4tbGluZWFyR3JhZGllbnQtMikiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2LjE3MzkxMywgMzguNjY2NjY3KSByb3RhdGUoLTI3MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzYuMTczOTEzLCAtMzguNjY2NjY3KSAiIHBvaW50cz0iMzMuNTA3MjQ2NCAzNy45NzEwMTQ1IDM4Ljg0MDU3OTcgMzcuOTcxMDE0NSAzOC44NDA1Nzk3IDM5LjM2MjMxODggMzMuNTA3MjQ2NCAzOS4zNjIzMTg4Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS1Db3B5LTIwIiBmaWxsPSJ1cmwoI2ZvYXRpbi1saW5lYXJHcmFkaWVudC0yKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcuODI2MDg3LCAzOC42NjY2NjcpIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0yNy44MjYwODcsIC0zOC42NjY2NjcpICIgcG9pbnRzPSIyNS4xNTk0MjAzIDM3Ljk3MTAxNDUgMzAuNDkyNzUzNiAzNy45NzEwMTQ1IDMwLjQ5Mjc1MzYgMzkuMzYyMzE4OCAyNS4xNTk0MjAzIDM5LjM2MjMxODgiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUmVjdGFuZ2xlLUNvcHktMjEiIGZpbGw9InVybCgjZm9hdGluLWxpbmVhckdyYWRpZW50LTMpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMi4wMDAwMDAsIDM4LjAwMDAwMCkgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTMyLjAwMDAwMCwgLTM4LjAwMDAwMCkgIiBwb2ludHM9IjI4LjMzMzMzMzMgMzcuMzA0MzQ3OCAzNS42NjY2NjY3IDM3LjMwNDM0NzggMzUuNjY2NjY2NyAzOC42OTU2NTIyIDI4LjMzMzMzMzMgMzguNjk1NjUyMiI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9mbHlpbjwvdGl0bGU+DQogICAgPGRlZnM+DQogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iMCUiIHkxPSI1MCUiIHgyPSIxMDAlIiB5Mj0iNTAlIiBpZD0iZmx5aW4tbGluZWFyR3JhZGllbnQtMSI+DQogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNkE2QTZBIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiPjwvc3RvcD4NCiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2QTZBNkEiIG9mZnNldD0iMTAwJSI+PC9zdG9wPg0KICAgICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjAlIiB5MT0iNTAlIiB4Mj0iMTAwJSIgeTI9IjUwJSIgaWQ9ImZseWluLWxpbmVhckdyYWRpZW50LTIiPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjAlIj48L3N0b3A+DQogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNkE2QTZBIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4NCiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4NCiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSIwJSIgeTE9IjUwJSIgeDI9IjEwMCUiIHkyPSI1MCUiIGlkPSJmbHlpbi1saW5lYXJHcmFkaWVudC0zIj4NCiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2QTZBNkEiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIwJSI+PC9zdG9wPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+DQogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iMCUiIHkxPSI1MCUiIHgyPSIxMDAlIiB5Mj0iNTAlIiBpZD0iZmx5aW4tbGluZWFyR3JhZGllbnQtNCI+DQogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNkE2QTZBIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiPjwvc3RvcD4NCiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2QTZBNkEiIG9mZnNldD0iMTAwJSI+PC9zdG9wPg0KICAgICAgICA8L2xpbmVhckdyYWRpZW50Pg0KICAgIDwvZGVmcz4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQxLjAwMDAwMCwgLTMxMi4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi9pbi9mbHlJbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuMDAwMDAwLCAyNjAuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS02IiBvcGFjaXR5PSIwLjEwMDAwMDAwMSIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSIwIiB5PSIwIiB3aWR0aD0iOTIiIGhlaWdodD0iNzIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxLjAwMDAwMCwgMTIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iU3RhciIgZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSIyNiAzNiAxMS44OTMxNTM5IDQzLjQxNjQwNzkgMTQuNTg3MzIxOCAyNy43MDgyMDM5IDMuMTc0NjQzNjEgMTYuNTgzNTkyMSAxOC45NDY1NzcgMTQuMjkxNzk2MSAyNiAwIDMzLjA1MzQyMyAxNC4yOTE3OTYxIDQ4LjgyNTM1NjQgMTYuNTgzNTkyMSAzNy40MTI2NzgyIDI3LjcwODIwMzkgNDAuMTA2ODQ2MSA0My40MTY0MDc5Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMiIgZmlsbD0idXJsKCNmbHlpbi1saW5lYXJHcmFkaWVudC0xKSIgeD0iMCIgeT0iNCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS0zIiBmaWxsPSJ1cmwoI2ZseWluLWxpbmVhckdyYWRpZW50LTIpIiB4PSIwIiB5PSIxMCIgd2lkdGg9IjE3IiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS00IiBmaWxsPSJ1cmwoI2ZseWluLWxpbmVhckdyYWRpZW50LTMpIiB4PSIwIiB5PSIyNCIgd2lkdGg9IjkiIGhlaWdodD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTE1IiBmaWxsPSJ1cmwoI2ZseWluLWxpbmVhckdyYWRpZW50LTMpIiB4PSIwIiB5PSIzNiIgd2lkdGg9IjkiIGhlaWdodD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTE0IiBmaWxsPSJ1cmwoI2ZseWluLWxpbmVhckdyYWRpZW50LTQpIiB4PSIwIiB5PSIzMCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl9zcGluPC90aXRsZT4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA2MS4wMDAwMDAsIC01NTIuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iU2V0dGluZ1BhbmVsLUwyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTcuMDAwMDAwLCA1Mi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvbi9hbmltYXRpb24vaW4vc3BpbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjAwMDAwMCwgNTAwLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMTEiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik00NS42NjY2NjY3LDEzIEw1Mi43MjAwODk3LDI3LjI5MTc5NjEgTDY4LjQ5MjAyMzEsMjkuNTgzNTkyMSBMNTcuMDc5MzQ0OSw0MC43MDgyMDM5IEw1OS43NzM1MTI3LDU2LjQxNjQwNzkgTDQ1LjY2NjY2NjcsNDkgTDMxLjU1OTgyMDYsNTYuNDE2NDA3OSBMMzQuMjUzOTg4NSw0MC43MDgyMDM5IEwyMi44NDEzMTAzLDI5LjU4MzU5MjEgTDM4LjYxMzI0MzYsMjcuMjkxNzk2MSBMNDUuNjY2NjY2NywxMyBaIE03Ni42NjY2NjY3LDIzLjY2NjY2NjcgTDc2LjY2NjY2NjcsMjUgTDczLjA4OTMzMzMsMjUgQzczLjUyNTMzMzMsMjUuMzMzMzMzMyA3NC4wODQsMjUuNzY2NjY2NyA3NC4zOTEzMzMzLDI2LjA0NjY2NjcgQzc1LjgyOCwyNy4zNTY2NjY3IDc2LjY2NjY2NjcsMjguODQxMzMzMyA3Ni42NjY2NjY3LDMwLjY2NjY2NjcgQzc2LjY2NjY2NjcsMzQuOTI2NjY2NyA3My43MjUzMzMzLDM3IDcwLDM3IEw3MCwzNS42NjY2NjY3IEM3My4wNjg2NjY3LDM1LjY2NjY2NjcgNzUuMzMzMzMzMywzNC4wNyA3NS4zMzMzMzMzLDMwLjY2NjY2NjcgQzc1LjMzMzMzMzMsMjkuMjcyNjY2NyA3NC42NzgsMjguMTEyIDczLjQ5MzMzMzMsMjcuMDMzMzMzMyBDNzMuMTg0LDI2Ljc1MDY2NjcgNzIuNDc4NjY2NywyNi4yMTMzMzMzIDcyLDI1Ljg0NTMzMzMgTDcyLDI5LjY2NjY2NjcgTDcwLjY2NjY2NjcsMjkuNjY2NjY2NyBMNzAuNjY2NjY2NywyMy42NjY2NjY3IEw3Ni42NjY2NjY3LDIzLjY2NjY2NjcgWiBNMTksMjMuNjY2NjY2NyBMMTksMjUgQzE1LjkzMTMzMzMsMjUgMTMuNjY2NjY2NywyNi41OTY2NjY3IDEzLjY2NjY2NjcsMzAgQzEzLjY2NjY2NjcsMzEuMzk0IDE0LjMyMiwzMi41NTQ2NjY3IDE1LjUwNjY2NjcsMzMuNjMzMzMzMyBDMTUuODE2LDMzLjkxNiAxNi41MjEzMzMzLDM0LjQ1MzMzMzMgMTcsMzQuODIxMzMzMyBMMTcsMzEgTDE4LjMzMzMzMzMsMzEgTDE4LjMzMzMzMzMsMzcgTDEyLjMzMzMzMzMsMzcgTDEyLjMzMzMzMzMsMzUuNjY2NjY2NyBMMTUuOTEwNjY2NywzNS42NjY2NjY3IEMxNS40NzQ2NjY3LDM1LjMzMzMzMzMgMTQuOTE2LDM0LjkgMTQuNjA4NjY2NywzNC42MiBDMTMuMTcyLDMzLjMxIDEyLjMzMzMzMzMsMzEuODI1MzMzMyAxMi4zMzMzMzMzLDMwIEMxMi4zMzMzMzMzLDI1Ljc0IDE1LjI3NDY2NjcsMjMuNjY2NjY2NyAxOSwyMy42NjY2NjY3IFogTTQwLjMzMzMzMzMsNCBMNDAuMzMzMzMzMyw3LjU3NzMzMzMzIEM0MC42NjY2NjY3LDcuMTQxMzMzMzMgNDEuMSw2LjU4MjY2NjY2IDQxLjM4LDYuMjc1MzMzMzMgQzQyLjY5LDQuODM4NjY2NjcgNDQuMTc0NjY2Nyw0IDQ2LDQgQzUwLjI2LDQgNTIuMzMzMzMzMyw2Ljk0MTMzMzMzIDUyLjMzMzMzMzMsMTAuNjY2NjY2NyBMNTEsMTAuNjY2NjY2NyBDNTEsNy41OTggNDkuNDAzMzMzMyw1LjMzMzMzMzM0IDQ2LDUuMzMzMzMzMzMgQzQ0LjYwNiw1LjMzMzMzMzMzIDQzLjQ0NTMzMzMsNS45ODg2NjY2NiA0Mi4zNjY2NjY3LDcuMTczMzMzMzMgQzQyLjA4NCw3LjQ4MjY2NjY2IDQxLjU0NjY2NjcsOC4xODggNDEuMTc4NjY2Nyw4LjY2NjY2NjY3IEw0NSw4LjY2NjY2NjY3IEw0NSwxMCBMMzksMTAgTDM5LDQgTDQwLjMzMzMzMzMsNCBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGw9IiM2QTZBNkEiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl93aXBlPC90aXRsZT4NCiAgICA8ZGVmcz4NCiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSI5Mi4wNjIxNTEyJSIgeDI9IjUwJSIgeTI9IjQxLjc0NDE3NDUlIiBpZD0id2lwZWluLWxpbmVhckdyYWRpZW50LTEiPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZBNkE2QSIgb2Zmc2V0PSIwJSI+PC9zdG9wPg0KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI4MjgyOCIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+DQogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgPC9kZWZzPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vSW4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05NDEuMDAwMDAwLCAtNTUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbC1MMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb24vYW5pbWF0aW9uL2luL3dpcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjAwMDAwMCwgNTAwLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMTYiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyLUNvcHktNCIgZmlsbD0idXJsKCN3aXBlaW4tbGluZWFyR3JhZGllbnQtMSkiIHBvaW50cz0iNDYgNDggMzEuODkzMTUzOSA1NS40MTY0MDc5IDM0LjU4NzMyMTggMzkuNzA4MjAzOSAyMy4xNzQ2NDM2IDI4LjU4MzU5MjEgMzguOTQ2NTc3IDI2LjI5MTc5NjEgNDYgMTIgNTMuMDUzNDIzIDI2LjI5MTc5NjEgNjguODI1MzU2NCAyOC41ODM1OTIxIDU3LjQxMjY3ODIgMzkuNzA4MjAzOSA2MC4xMDY4NDYxIDU1LjQxNjQwNzkiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl9pbl96b29tPC90aXRsZT4NCiAgICA8ZyBpZD0iU3R5bGVTZXR0aW5nXzIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQW5pbWF0aW9uL0luIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTQxLjAwMDAwMCwgLTQzMi4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi9pbi96b29tIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC4wMDAwMDAsIDM4MC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTgiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcm91cC00IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOS4wMDAwMDAsIDExLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlN0YXItQ29weS0yIiBmaWxsPSIjMzYzNjM2IiBwb2ludHM9IjI2IDM2IDExLjg5MzE1MzkgNDMuNDE2NDA3OSAxNC41ODczMjE4IDI3LjcwODIwMzkgMy4xNzQ2NDM2MSAxNi41ODM1OTIxIDE4Ljk0NjU3NyAxNC4yOTE3OTYxIDI2IDAgMzMuMDUzNDIzIDE0LjI5MTc5NjEgNDguODI1MzU2NCAxNi41ODM1OTIxIDM3LjQxMjY3ODIgMjcuNzA4MjAzOSA0MC4xMDY4NDYxIDQzLjQxNjQwNzkiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJTdGFyLUNvcHktMiIgZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSIyNiAzMCAxOC45NDY1NzcgMzMuNzA4MjAzOSAyMC4yOTM2NjA5IDI1Ljg1NDEwMiAxNC41ODczMjE4IDIwLjI5MTc5NjEgMjIuNDczMjg4NSAxOS4xNDU4OTggMjYgMTIgMjkuNTI2NzExNSAxOS4xNDU4OTggMzcuNDEyNjc4MiAyMC4yOTE3OTYxIDMxLjcwNjMzOTEgMjUuODU0MTAyIDMzLjA1MzQyMyAzMy43MDgyMDM5Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjYuMDk4OTk5NSw0MSBDMjYuMzg5MjQ2Niw0MS4wMDI2ODc3IDI2LjYzNDczNzQsNDEuMjM4NDYxNCAyNi42NDczMTgzLDQxLjUyNjY1NjMgTDI2LjY0OTIyMjIsNDguOTMwMzk5OCBMMzAuMDU3MDE1LDQ1LjQyNTg3NTEgQzMwLjI1MzM1NDgsNDUuMjIzOTYyIDMwLjU4NjEwOCw0NS4yMjY5OTY0IDMwLjgwMDIzOTksNDUuNDMyNjUyNSBDMzEuMDE0MzcxOCw0NS42MzgzMDg1IDMxLjAyODc5NTIsNDUuOTY4NzA4NiAzMC44MzI0NTUzLDQ2LjE3MDYyMTcgTDI2LjIxMDg5MzMsNTAuOTIzMzY5MSBMMjEuMTcwNTMxMiw0Ni4wODI1MTYyIEMyMC45NTYzOTkyLDQ1Ljg3Njg2MDIgMjAuOTQxOTc1OSw0NS41NDY0NjAxIDIxLjEzODMxNTgsNDUuMzQ0NTQ3IEMyMS4zMzQ2NTU2LDQ1LjE0MjYzMzkgMjEuNjY3NDA4OCw0NS4xNDU2NjgyIDIxLjg4MTU0MDcsNDUuMzUxMzI0MyBMMjUuNTk4MTQzNCw0OC45MjA4MTUyIEwyNS41OTYyMzk1LDQxLjUxNzA3MTcgQzI1LjU4MzY1ODYsNDEuMjI4ODc2OCAyNS44MDg3NTE4LDQwLjk5NzM5NDIgMjYuMDk4OTk5NSw0MSBaIE00OS4yMjkxODExLDI3LjIwMzgyIEM0OS40ODgwNDUxLDI3LjA5Mjg4MDEgNDkuNzkxMzMxMywyNy4yMjQ3NTAzIDQ5LjkwNjU4OTcsMjcuNDk4MzYwMiBMNDkuOTA2NTg5NywyNy40OTgzNjAyIEw1Mi42MTk2MTEsMzMuOTM4NzUwMSBMNDYuNTI2MzE5MywzNi41NTAxMTc2IEM0Ni4yNjc0NTUzLDM2LjY2MTA1NzUgNDUuOTY0MTY5MSwzNi41MjkxODc0IDQ1Ljg0ODkxMDYsMzYuMjU1NTc3NSBDNDUuNzMzNjUyMiwzNS45ODE5Njc1IDQ1Ljg1MDA2NzQsMzUuNjcwMjI4MyA0Ni4xMDg5MzE1LDM1LjU1OTI4ODQgTDQ2LjEwODkzMTUsMzUuNTU5Mjg4NCBMNTAuNjAxOTMwOSwzMy42MzM3NDkxIEw0My42OTA2MjMxLDMwLjk3ODcwNzMgQzQzLjQyNjA3ODYsMzAuODYzNjgyMiA0My4yOTM5NDA5LDMwLjU1MDAwMyA0My4zOTU0ODUzLDMwLjI3ODA4NTIgQzQzLjQ5NzAyOTcsMzAuMDA2MTY3NSA0My43OTM4MDM1LDI5Ljg3ODk4MDggNDQuMDU4MzQ4LDI5Ljk5NDAwNTkgTDQ0LjA1ODM0OCwyOS45OTQwMDU5IEw1MC45Njk2NTU4LDMyLjY0OTA0NzcgTDQ4Ljk2OTE2MDMsMjcuOTAwMTA5MSBDNDguODUzOTAxOCwyNy42MjY0OTkxIDQ4Ljk3MDMxNzEsMjcuMzE0NzU5OSA0OS4yMjkxODExLDI3LjIwMzgyIFogTTMuMzkwNDI5OSwyNy4yMDM4MiBDMy42NDkyOTM5MSwyNy4zMTQ3NTk5IDMuNzY1NzA5MTgsMjcuNjI2NDk5MSAzLjY1MDQ1MDcsMjcuOTAwMTA5MSBMMS42NDk5NTUxNiwzMi42NDkwNDc3IEw4LjU2MTI2MjkyLDI5Ljk5NDAwNTkgQzguODI1ODA3NDYsMjkuODc4OTgwOCA5LjEyMjU4MTIyLDMwLjAwNjE2NzUgOS4yMjQxMjU2NiwzMC4yNzgwODUyIEM5LjMyNTY3MDEsMzAuNTUwMDAzIDkuMTkzNTMyNDEsMzAuODYzNjgyMiA4LjkyODk4Nzg2LDMwLjk3ODcwNzMgTDIuMDE3NjgwMTEsMzMuNjMzNzQ5MSBMNi41MTA2Nzk1MSwzNS41NTkyODg0IEM2Ljc2OTU0MzUyLDM1LjY3MDIyODMgNi44ODU5NTg3OSwzNS45ODE5Njc1IDYuNzcwNzAwMzEsMzYuMjU1NTc3NSBDNi42NTU0NDE4MywzNi41MjkxODc0IDYuMzUyMTU1NjQsMzYuNjYxMDU3NSA2LjA5MzI5MTYzLDM2LjU1MDExNzYgTC02LjMxMDg4NzI0ZS0zMCwzMy45Mzg3NTAxIEwyLjcxMzAyMTIyLDI3LjQ5ODM2MDIgQzIuODI4Mjc5NywyNy4yMjQ3NTAzIDMuMTMxNTY1OSwyNy4wOTI4ODAxIDMuMzkwNDI5OSwyNy4yMDM4MiBaIE00My4wMDI2NzIxLDEgTDQzLjk5NDIwNTEsNy45MTc4MDA4NyBDNDQuMDM2MzI4OCw4LjIxMTY5Mjg2IDQzLjg0NDI3OTksOC40ODA5MzE1NiA0My41NjUyNTE5LDguNTE5MTYyMzQgQzQzLjI4NjIyMzksOC41NTczOTMxMiA0My4wMjU4NzksOC4zNTAxMzg3NiA0Mi45ODM3NTUyLDguMDU2MjQ2NzYgTDQyLjI1MjYzMDQsMi45NTUyODA0OCBMMzcuNjk1OTMxLDguNzkwNjgyMTIgQzM3LjUyODQxNDMsOS4wMjU1MjgzOCAzNy4yMDg1MjM2LDkuMDY5MzU3OTMgMzYuOTgxNDM1LDguODg4NTc4MTUgQzM2Ljc1NDM0NjQsOC43MDc3OTgzNyAzNi43MDYwNTM4LDguMzcwODY2ODkgMzYuODczNTcwNSw4LjEzNjAyMDYzIEw0MS40MzAyNjk5LDIuMzAwNjE4OTkgTDM2LjU4NzI5MTYsMi45NjQxNzU0IEMzNi4zMDgyNjM2LDMuMDAyNDA2MTggMzYuMDQ3OTE4NywyLjc5NTE1MTgyIDM2LjAwNTc5NDksMi41MDEyNTk4MiBDMzUuOTYzNjcxMiwyLjIwNzM2NzgzIDM2LjE1NTcyMDEsMS45MzgxMjkxMiAzNi40MzQ3NDgxLDEuODk5ODk4MzUgTDQzLjAwMjY3MjEsMSBaIE04Ljk5NzMyNzg3LDEgTDE1LjU2NTI1MTksMS44OTk4OTgzNSBDMTUuODQ0Mjc5OSwxLjkzODEyOTEyIDE2LjAzNjMyODgsMi4yMDczNjc4MyAxNS45OTQyMDUxLDIuNTAxMjU5ODIgQzE1Ljk1MjA4MTMsMi43OTUxNTE4MiAxNS42OTE3MzY0LDMuMDAyNDA2MTggMTUuNDEyNzA4NCwyLjk2NDE3NTQgTDE1LjQxMjcwODQsMi45NjQxNzU0IEwxMC41Njk3MzAxLDIuMzAwNjE4OTkgTDE1LjEyNjQyOTUsOC4xMzYwMjA2MyBDMTUuMjkzOTQ2Miw4LjM3MDg2Njg5IDE1LjI0NTY1MzYsOC43MDc3OTgzNyAxNS4wMTg1NjUsOC44ODg1NzgxNSBDMTQuNzkxNDc2NCw5LjA2OTM1NzkzIDE0LjQ3MTU4NTcsOS4wMjU1MjgzOCAxNC4zMDQwNjksOC43OTA2ODIxMiBMMTQuMzA0MDY5LDguNzkwNjgyMTIgTDkuNzQ3MzY5NjMsMi45NTUyODA0OCBMOS4wMTYyNDQ3OCw4LjA1NjI0Njc2IEM4Ljk3NDEyMTA1LDguMzUwMTM4NzYgOC43MTM3NzYxMSw4LjU1NzM5MzEyIDguNDM0NzQ4MDksOC41MTkxNjIzNCBDOC4xNTU3MjAwNyw4LjQ4MDkzMTU2IDcuOTYzNjcxMTksOC4yMTE2OTI4NiA4LjAwNTc5NDkzLDcuOTE3ODAwODcgTDguMDA1Nzk0OTMsNy45MTc4MDA4NyBMOC45OTczMjc4NywxIFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iIzZBNkE2QSIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX25vbmU8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MS4wMDAwMDAsIC0xNTAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi90cmFuc2l0aW9uL25vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjAwMDAwMCwgOTguMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS01IiB4PSIwIiB5PSIwIiB3aWR0aD0iOTIiIGhlaWdodD0iNzIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS1Db3B5LTUiIGZpbGw9IiM2QTZBNkEiIHg9IjAiIHk9IjAiIHdpZHRoPSI5MiIgaGVpZ2h0PSI3MiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX2ZhZGU8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNjEuMDAwMDAwLCAtMTUwLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbC1MMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb24vYW5pbWF0aW9uL3RyYW5zaXRpb24vZmFkZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjAwMDAwMCwgOTguMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS0xMyIgb3BhY2l0eT0iMC4xMDAwMDAwMDEiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtQ29weS0yIiBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMjQiIHdpZHRoPSI2NCIgaGVpZ2h0PSI0OCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsLW9wYWNpdHk9IjAuNSIgZmlsbD0iIzM2MzYzNiIgeD0iMCIgeT0iMCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjQ4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02NCwwIEw2NCw0OCBMMCw0OCBMMCwwIEw2NCwwIFogTTYzLDEgTDEsMSBMMSw0NyBMNjMsNDcgTDYzLDEgWiIgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzZBNkE2QSIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX2Rvb3J3YXk8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MS4wMDAwMDAsIC02MzAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi90cmFuc2l0aW9uL2Rvb3J3YXkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjAwMDAwMCwgNTc4LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUmVjdGFuZ2xlLUNvcHktMTQiIGZpbGw9IiMzNjM2MzYiIHBvaW50cz0iMCAtMS4xNDAxOTkwNWUtMTMgMjQgMTIgMjQgNjAgMCA3MiI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktMTQiIGZpbGw9IiM2QTZBNkEiIHg9IjI2IiB5PSIyMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjMyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJSZWN0YW5nbGUtQ29weS0yNiIgZmlsbD0iIzM2MzYzNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAuMDAwMDAwLCAzNi4wMDAwMDApIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTgwLjAwMDAwMCwgLTM2LjAwMDAwMCkgIiBwb2ludHM9IjY4IC0xLjE0MDE5OTA1ZS0xMyA5MiAxMSA5MiA2MCA2OCA3MiI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX2N1YmU8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwNjEuMDAwMDAwLCAtMjcwLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IlNldHRpbmdQYW5lbC1MMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTE3LjAwMDAwMCwgNTIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb24vYW5pbWF0aW9uL3RyYW5zaXRpb24vY3ViZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjAwMDAwMCwgMjE4LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNyIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSIwIiB5PSIwIiB3aWR0aD0iOTIiIGhlaWdodD0iNzIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSIxMiAxOC40IDUxIDEyIDUxIDYwIDEyIDUzLjYiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlJlY3RhbmdsZS1Db3B5LTMiIGZpbGw9IiMzNjM2MzYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY1LjUwMDAwMCwgMzYuMDAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC02NS41MDAwMDAsIC0zNi4wMDAwMDApICIgcG9pbnRzPSI1MSAxOC40IDgwIDEyIDgwIDYwIDUxIDUzLjYiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjkycHgiIGhlaWdodD0iNzJweCIgdmlld0JveD0iMCAwIDkyIDcyIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDx0aXRsZT5pY29uX2FuaW1hdGlvbl90cmFuc2l0aW9uX3B1c2g8L3RpdGxlPg0KICAgIDxnIGlkPSJTdHlsZVNldHRpbmdfMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBbmltYXRpb24vdHJhbnNpdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTk0MS4wMDAwMDAsIC0yNzAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIGlkPSJTZXR0aW5nUGFuZWwtTDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkxNy4wMDAwMDAsIDUyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uL2FuaW1hdGlvbi90cmFuc2l0aW9uL3B1c2giIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjAwMDAwMCwgMjE4LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLUNvcHktNiIgeD0iMCIgeT0iMCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjcyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05MiwwIEw5Miw3MiBMMCw3MiBMMCwwIEw5MiwwIFogTTkxLDM3IEwxLDM3IEwxLDcxIEw5MSw3MSBMOTEsMzcgWiBNNDYsNDQgTDU2LDU0IEw1MC4xNjY2NjY3LDU0IEw1MC4xNjY2NjY3LDY0IEw0MS44MzMzMzMzLDY0IEw0MS44MzMzMzMzLDU0IEwzNiw1NCBMNDYsNDQgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlIiBmaWxsPSIjNkE2QTZBIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTIiIGhlaWdodD0iNzIiIHZpZXdCb3g9IjAgMCA5MiA3MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjgiIHdpZHRoPSI3NiIgaGVpZ2h0PSI0MCIgZmlsbD0iIzM2MzYzNiIgZmlsbC1vcGFjaXR5PSIwLjUiLz4NCjxyZWN0IHk9IjI0IiB3aWR0aD0iOTIiIGhlaWdodD0iNDgiIGZpbGw9IiM1MjUyNTIiLz4NCjwvc3ZnPg0K"}]))}}}));