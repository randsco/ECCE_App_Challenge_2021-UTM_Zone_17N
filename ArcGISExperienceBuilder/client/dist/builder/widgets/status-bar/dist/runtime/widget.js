System.register(["jimu-core","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components"],(function(n){var e,t,r,o;return{setters:[function(n){e=n},function(n){t=n},function(n){r=n},function(n){o=n}],execute:function(){n(function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=115)}({0:function(n,t){n.exports=e},1:function(n,e){n.exports=t},115:function(n,e,t){"use strict";t.r(e);var r,o=t(0),a=t(1),i=t(2),l=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n};function p(n){var e,t,a,i,p,c,d;return Object(o.css)(r||(r=l(["\n    overflow: hidden;\n    height: 100%;\n    background-color: var(--secondary);\n    border-top: 1px solid var(--light-800);\n\n    .zoom-section {\n      .percentage-label {\n        width: 4rem;\n      }\n      .form-control-range {\n        margin: 0 8px 1px;\n      }\n    }\n\n    .btn {\n      padding: 0 0 2px;\n\n      .jimu-icon {\n        margin-right: 0;\n        margin-left: 0;\n      }\n    }\n\n    .dropdown-toggle-content {\n      font-size: 12px;\n      line-height: 16px;\n    }\n\n    .setting-panel-visible {\n      background-color: var(--light-700);\n      .btn {\n        color: var(--black);\n      }\n    }\n\n    .jimu-dropdown .jimu-icon {\n      transform: rotate(180deg);\n    }\n\n    .page-list {\n      .page-label {\n        color: var(--dark-400);\n        margin-right: 8px;\n      }\n      .icon-btn {\n        color: var(--dark-400);\n        &:hover {\n          color: var(--black);\n        }\n        .jimu-icon {\n          margin-left: 6px;\n        }\n      }\n    }\n\n    input[type='range'] {\n      -webkit-appearance: none;\n      background: transparent;\n    }\n    input[type='range']:focus {\n      outline: none;\n    }\n    input[type='range']::-webkit-slider-runnable-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: var(--light-800);\n      border-radius: 2px;\n    }\n    input[type='range']::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      height: 12px;\n      width: 12px;\n      border-radius: 6px;\n      cursor: pointer;\n      background: var(--light-300);\n      border: 2px solid var(--dark-600);\n      margin-top: -5px;\n\n      &:hover {\n        border-color: var(--black);\n      }\n    }\n    input[type='range']:focus::-webkit-slider-runnable-track {\n      background: var(--light-800);\n    }\n    input[type='range']::-moz-range-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: var(--light-800);\n      border-radius: 2px;\n    }\n    input[type='range']::-moz-range-thumb {\n      height: 10px;\n      width: 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      background: var(--light-300);\n      border: 2px solid var(--dark-600);\n      margin-top: -5px;\n      &:hover {\n        border-color: var(--black);\n      }\n    }\n    input[type='range']::-ms-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: ",";\n      border-radius: 2px;\n    }\n    input[type='range']::-ms-thumb {\n      height: 10px;\n      width: 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      background: ",";\n      border: 2px solid ",";\n      margin-top: 0px;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  "],["\n    overflow: hidden;\n    height: 100%;\n    background-color: var(--secondary);\n    border-top: 1px solid var(--light-800);\n\n    .zoom-section {\n      .percentage-label {\n        width: 4rem;\n      }\n      .form-control-range {\n        margin: 0 8px 1px;\n      }\n    }\n\n    .btn {\n      padding: 0 0 2px;\n\n      .jimu-icon {\n        margin-right: 0;\n        margin-left: 0;\n      }\n    }\n\n    .dropdown-toggle-content {\n      font-size: 12px;\n      line-height: 16px;\n    }\n\n    .setting-panel-visible {\n      background-color: var(--light-700);\n      .btn {\n        color: var(--black);\n      }\n    }\n\n    .jimu-dropdown .jimu-icon {\n      transform: rotate(180deg);\n    }\n\n    .page-list {\n      .page-label {\n        color: var(--dark-400);\n        margin-right: 8px;\n      }\n      .icon-btn {\n        color: var(--dark-400);\n        &:hover {\n          color: var(--black);\n        }\n        .jimu-icon {\n          margin-left: 6px;\n        }\n      }\n    }\n\n    input[type='range'] {\n      -webkit-appearance: none;\n      background: transparent;\n    }\n    input[type='range']:focus {\n      outline: none;\n    }\n    input[type='range']::-webkit-slider-runnable-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: var(--light-800);\n      border-radius: 2px;\n    }\n    input[type='range']::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      height: 12px;\n      width: 12px;\n      border-radius: 6px;\n      cursor: pointer;\n      background: var(--light-300);\n      border: 2px solid var(--dark-600);\n      margin-top: -5px;\n\n      &:hover {\n        border-color: var(--black);\n      }\n    }\n    input[type='range']:focus::-webkit-slider-runnable-track {\n      background: var(--light-800);\n    }\n    input[type='range']::-moz-range-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: var(--light-800);\n      border-radius: 2px;\n    }\n    input[type='range']::-moz-range-thumb {\n      height: 10px;\n      width: 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      background: var(--light-300);\n      border: 2px solid var(--dark-600);\n      margin-top: -5px;\n      &:hover {\n        border-color: var(--black);\n      }\n    }\n    input[type='range']::-ms-track {\n      width: 100%;\n      height: 2px;\n      cursor: pointer;\n      background: ",";\n      border-radius: 2px;\n    }\n    input[type='range']::-ms-thumb {\n      height: 10px;\n      width: 10px;\n      border-radius: 8px;\n      cursor: pointer;\n      background: ",";\n      border: 2px solid ",";\n      margin-top: 0px;\n      &:hover {\n        border-color: ",";\n      }\n    }\n  "])),null===(t=null===(e=null==n?void 0:n.colors)||void 0===e?void 0:e.palette)||void 0===t?void 0:t.light[800],null===(i=null===(a=null==n?void 0:n.colors)||void 0===a?void 0:a.palette)||void 0===i?void 0:i.light[300],null===(c=null===(p=null==n?void 0:n.colors)||void 0===p?void 0:p.palette)||void 0===c?void 0:c.dark[600],null===(d=null==n?void 0:n.colors)||void 0===d?void 0:d.black)}var c=t(3);function d(n){var e=n.pageId,t=n.label,r=n.isInFolder,i=n.isFolder,l=n.isActive,p=n.hasSubPage,c=n.onSelect,d=o.React.useCallback((function(){c(e)}),[e,c]);return Object(o.jsx)(a.DropdownItem,{className:Object(o.classNames)({"page-item":!i||p,"in-folder":r,folder:i&&!p,"has-subpage":p,active:l}),active:l,header:i&&!p,onClick:d},t)}var s=function(){return(s=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function u(n){Object(c.changeCurrentPage)(n)}function g(n){var e=o.ReactRedux.useSelector((function(n){var e,t;return null===(t=null===(e=n.appStateInBuilder)||void 0===e?void 0:e.appConfig)||void 0===t?void 0:t.pageStructure})),t=[];if(e){var r=Object(i.getAppConfigAction)().appConfig.pages;e.forEach((function(n){var e,a,i=Object.keys(n)[0],l=r[i];if(l.type===o.PageType.Normal)if((null===(e=n[i])||void 0===e?void 0:e.length)>0){var p=[];n[i].forEach((function(n){var e=r[n];e.type===o.PageType.Normal&&p.push({pageId:n,label:e.label,isInFolder:!0})})),p.length>0?(t.push({pageId:i,label:l.label,isFolder:!0,hasSubPage:!0}),t.push.apply(t,p)):t.push({pageId:i,label:l.label})}else t.push({pageId:i,label:l.label});else if(l.type===o.PageType.Folder){var c=[];(null===(a=n[i])||void 0===a?void 0:a.length)>0&&n[i].forEach((function(n){var e=r[n];e.type===o.PageType.Normal&&c.push({pageId:n,label:e.label,isInFolder:!0})})),c.length>0&&(t.push({pageId:i,label:l.label,isFolder:!0}),t.push.apply(t,c))}}))}return Object(o.jsx)(o.React.Fragment,null,t.map((function(e){return Object(o.jsx)(d,s({key:e.pageId,onSelect:u,isActive:e.pageId===n.currentPageId},e))})))}function h(n){Object(c.changeCurrentDialog)(n)}function m(n){var e=o.ReactRedux.useSelector((function(n){var e,t;return null===(t=null===(e=n.appStateInBuilder)||void 0===e?void 0:e.appConfig)||void 0===t?void 0:t.dialogs}));if(!e||0===Object.keys(e).length)return null;var t=[],r=[];return Object.keys(e).forEach((function(n){var a=e[n];a.mode===o.DialogMode.Fixed?t.push({id:n,label:a.label}):a.mode===o.DialogMode.Anchored&&r.push({id:n,label:a.label})})),Object(o.jsx)(o.React.Fragment,null,Object(o.jsx)(a.DropdownItem,{header:!0,className:"page-header"},n.formatMessage("dialog")),Object(o.jsx)(a.DropdownItem,{className:"folder",header:!0},n.formatMessage("fixedWindows")),t.map((function(e){return Object(o.jsx)(a.DropdownItem,{key:e.id,className:Object(o.classNames)("page-item in-folder",{active:n.currentDialogId===e.id}),active:n.currentDialogId===e.id,onClick:function(){return h(e.id)}},e.label)})),Object(o.jsx)(a.DropdownItem,{className:"folder",header:!0},n.formatMessage("anchoredWindows")),r.map((function(e){return Object(o.jsx)(a.DropdownItem,{key:e.id,className:Object(o.classNames)("page-item in-folder",{active:n.currentDialogId===e.id}),active:n.currentDialogId===e.id,onClick:function(){return h(e.id)}},e.label)})))}var v,b,f,x=(v=function(n,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])})(n,e)},function(n,e){function t(){this.constructor=n}v(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),j=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},k=t(91),y=t(92),w=function(n){function e(e){var t=n.call(this,e)||this;return t.formatMessage=function(n,e){return t.props.intl.formatMessage({id:n},e)},t.onPreviewScaleChange=function(n){n.stopPropagation();var e=t.fromRangeToZoomScale(Number(n.currentTarget.value));t.updateScale(e)},t.zoomout=function(n){n.stopPropagation();var e,r=t.props.zoomScale,o=Math.round(100*r),a=10*Math.floor(o/10);e=o===a?r-.1:a/100,e=Math.round(10*e)/10,e=Math.max(.5,e),t.updateScale(e)},t.zoomin=function(n){n.stopPropagation();var e,r=t.props.zoomScale,o=Math.round(100*r),a=10*Math.ceil(o/10);e=o===a?r+.1:a/100,e=Math.round(10*e)/10,e=Math.min(2,e),t.updateScale(e)},t.zoomToFit=function(n){n.stopPropagation();var e=t.props.viewportSize,r=t.calAvailableWidth()/e.width;r=Math.floor(100*r)/100,r=Math.max(.5,Math.min(2,r)),t.updateScale(r)},t.stopPropgation=function(n){n.stopPropagation()},t.toggleSettingPanel=function(){Object(o.getAppStore)().dispatch(o.appActions.widgetStatePropChange("right-sidebar","collapse",!t.props.settingPanelVisible))},t.onDropDownToggle=function(n){var e=t.state.isPageListOpen;t.setState({isPageListOpen:!e}),n.stopPropagation()},t.handlePageListItemClick=function(n,e){n.stopPropagation(),e!==t.props.currentPageId&&(i.builderAppSync.publishChangeSelectionToApp(null),i.builderAppSync.publishPageChangeToApp(e))},t.getDropdownStyle=function(){return Object(o.css)(b||(b=j(["\n      padding: unset;\n\n      .page-header {\n        height: 2rem;\n        background-color: var(--light-700);\n        color: var(--dark-800) !important;\n        font-size: 14px;\n        line-height: 2rem;\n        display: flex !important;\n        align-items: center;\n      }\n\n      .page-item {\n        font-size: 13px;\n        color: var(--black) !important;\n        padding: 0 24px !important;\n        height: 2rem;\n\n        &:not(.active):hover {\n          background: var(--light-600) !important;\n        }\n\n        &.active {\n          background: var(--primary);\n        }\n      }\n\n      .folder {\n        font-size: 13px;\n        color: var(--dark-500) !important;\n        padding: 0 !important;\n        margin: 0 24px;\n        height: 2rem;\n        line-height: 2rem;\n      }\n\n      .page-header,\n      .folder {\n        &:focus {\n          outline: none;\n        }\n      }\n\n      .in-folder {\n        padding-left: 2.25rem !important;\n      }\n    "],["\n      padding: unset;\n\n      .page-header {\n        height: 2rem;\n        background-color: var(--light-700);\n        color: var(--dark-800) !important;\n        font-size: 14px;\n        line-height: 2rem;\n        display: flex !important;\n        align-items: center;\n      }\n\n      .page-item {\n        font-size: 13px;\n        color: var(--black) !important;\n        padding: 0 24px !important;\n        height: 2rem;\n\n        &:not(.active):hover {\n          background: var(--light-600) !important;\n        }\n\n        &.active {\n          background: var(--primary);\n        }\n      }\n\n      .folder {\n        font-size: 13px;\n        color: var(--dark-500) !important;\n        padding: 0 !important;\n        margin: 0 24px;\n        height: 2rem;\n        line-height: 2rem;\n      }\n\n      .page-header,\n      .folder {\n        &:focus {\n          outline: none;\n        }\n      }\n\n      .in-folder {\n        padding-left: 2.25rem !important;\n      }\n    "])))},t.renderPageList=function(){var n,e=t.state.isPageListOpen,r=t.props,i=r.pages,l=r.currentPageId,p=r.currentDialogId,c=r.currentDialogLabel;return Object(o.jsx)("div",{className:"d-flex page-list align-items-center ml-3"},Object(o.jsx)("div",{className:"page-label"},p?t.formatMessage("dialog"):t.formatMessage("page"),":"),Object(o.jsx)(a.Dropdown,{direction:"up",size:"sm",toggle:t.onDropDownToggle,isOpen:e},Object(o.jsx)(a.DropdownToggle,{icon:!0,size:"sm",type:"tertiary",caret:!0},p?c:null===(n=null==i?void 0:i[l])||void 0===n?void 0:n.label),Object(o.jsx)(a.DropdownMenu,{css:t.getDropdownStyle()},Object(o.jsx)(a.DropdownItem,{header:!0,className:"page-header"},t.formatMessage("page")),Object(o.jsx)(g,{currentPageId:p?null:l}),Object(o.jsx)(m,{currentDialogId:p,formatMessage:t.formatMessage}))))},t.state={isPageListOpen:!1},t}return x(e,n),e.prototype.calAvailableWidth=function(){var n=document.querySelector('div[data-widgetid="app-loader"]').getBoundingClientRect(),e=parseFloat(a.styleUtils.remToPixel("3rem"));isNaN(e)&&(e=48);return n.width-e-10},e.prototype.updateScale=function(n){i.builderAppSync.publichChangeZoomScaleToApp(n)},e.prototype.percentageZoomScale=function(){var n=this.props,e=n.zoomScale,t=n.locale,r=(null!=t?t:"").toLowerCase();return"ar"===r||"tr"===r?"%"+Math.round(100*e):Math.round(100*e)+"%"},e.prototype.mapStep=function(){return.1},e.prototype.fromZoomScaleToRange=function(n){return n<1?50*(n-.5)/.5+0:n>1?50*(n-1)/1+50:50},e.prototype.fromRangeToZoomScale=function(n){return n<50?.5*(n-0)/50+.5:n>50?1*(n-50)/50+1:1},e.prototype.calBackground=function(){var n=100*(this.fromZoomScaleToRange(this.props.zoomScale)-0)/100+"%",e="linear-gradient(to right, var(--dark-600) 0%, var(--dark-600) "+n+", var(--light-800) "+n+", var(--light-600))";return Object(o.css)(f||(f=j(["\n      &::-webkit-slider-runnable-track {\n        background: "," !important;\n      }\n      &::-moz-range-track {\n        background: "," !important;\n      }\n      &::-ms-track {\n        background: "," !important;\n      }\n    "],["\n      &::-webkit-slider-runnable-track {\n        background: "," !important;\n      }\n      &::-moz-range-track {\n        background: "," !important;\n      }\n      &::-ms-track {\n        background: "," !important;\n      }\n    "])),e,e,e)},e.prototype.render=function(){var n=this.props,e=n.zoomScale,t=n.settingPanelVisible;return Object(o.jsx)("div",{css:p(this.props.theme),className:"jimu-widget widget-status-bar d-flex"},this.renderPageList(),Object(o.jsx)("div",{className:"zoom-section flex-grow-1 d-flex justify-content-end align-items-center"},Object(o.jsx)(a.Button,{type:"tertiary",disabled:e<=.5,title:this.formatMessage("zoomOut"),onClick:this.zoomout},Object(o.jsx)(a.Icon,{icon:k,width:12,height:12})),Object(o.jsx)("input",{css:this.calBackground(),type:"range",className:"form-control-range",min:0,max:100,step:this.mapStep(),value:this.fromZoomScaleToRange(e),onClick:this.stopPropgation,onChange:this.onPreviewScaleChange}),Object(o.jsx)(a.Button,{type:"tertiary",disabled:e>=2,title:this.formatMessage("zoomIn"),onClick:this.zoomin},Object(o.jsx)(a.Icon,{icon:y,width:12,height:12})),Object(o.jsx)("span",{className:"text-center percentage-label"},this.percentageZoomScale()),Object(o.jsx)(a.Button,{type:"tertiary",onClick:this.zoomToFit,title:this.formatMessage("zoomToFit")},Object(o.jsx)(a.Icon,{icon:"./widgets/status-bar/dist/runtime/assets/tool-width-max.svg",width:12,height:12,className:"m-0"}))),Object(o.jsx)("div",{className:Object(o.classNames)("setting-panel-section d-flex justify-content-center align-items-center ml-4 mr-2",{"setting-panel-visible":t})},Object(o.jsx)(a.Button,{type:"tertiary",title:t?this.formatMessage("closeSettingPanel"):this.formatMessage("openSettingPanel"),className:"px-2",onClick:this.toggleSettingPanel},Object(o.jsx)(a.Icon,{icon:"./widgets/status-bar/dist/runtime/assets/setting-panel.svg",width:12,height:12,className:"m-0"}))))},e.mapExtraStateProps=function(n,e){var t,r,a,i,l,p,c,d,s,u,g,h,m,v,b,f,x,j,k,y=null!==(a=null===(r=null===(t=n.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===r?void 0:r.zoomScale)&&void 0!==a?a:1,w=null!==(l=null===(i=n.appStateInBuilder)||void 0===i?void 0:i.browserSizeMode)&&void 0!==l?l:o.BrowserSizeMode.Large,S=o.utils.findViewportSize(null===(p=n.appStateInBuilder)||void 0===p?void 0:p.appConfig,w),O=null===(d=null===(c=null==n?void 0:n.appStateInBuilder)||void 0===c?void 0:c.appConfig)||void 0===d?void 0:d.pages,P=null===(u=null===(s=null==n?void 0:n.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===u?void 0:u.pageStructure,I=null===(h=null===(g=null==n?void 0:n.appStateInBuilder)||void 0===g?void 0:g.appRuntimeInfo)||void 0===h?void 0:h.currentPageId,z=null===(v=null===(m=null==n?void 0:n.appStateInBuilder)||void 0===m?void 0:m.appRuntimeInfo)||void 0===v?void 0:v.currentDialogId,M=z?null===(b=null==n?void 0:n.appStateInBuilder)||void 0===b?void 0:b.appConfig.dialogs[z].label:null;return{zoomScale:y,viewportSize:S,settingPanelVisible:null===(j=null===(x=null===(f=n.widgetsState)||void 0===f?void 0:f["right-sidebar"])||void 0===x?void 0:x.collapse)||void 0===j||j,pages:O,pageStructure:P,currentPageId:I,currentDialogId:z,currentDialogLabel:M,locale:null===(k=null==n?void 0:n.appContext)||void 0===k?void 0:k.locale}},e}(o.React.PureComponent);e.default=w},2:function(n,e){n.exports=r},3:function(n,e){n.exports=o},91:function(n,e){n.exports='<svg viewBox="0 0 8 1" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h8v1H0z" fill-rule="evenodd"></path></svg>'},92:function(n,e){n.exports='<svg viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 3.5v-3a.5.5 0 011 0v3h3a.5.5 0 010 1h-3v3a.5.5 0 01-1 0v-3h-3a.5.5 0 010-1h3z" fill-rule="evenodd"></path></svg>'}}))}}}));