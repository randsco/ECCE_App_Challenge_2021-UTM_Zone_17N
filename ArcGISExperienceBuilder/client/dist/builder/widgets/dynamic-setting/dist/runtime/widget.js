System.register(["jimu-core","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-layouts/layout-runtime","jimu-layouts/layout-builder","jimu-ui/advanced/style-setting-components","jimu-core/dnd","jimu-for-builder/templates","jimu-ui/basic/color-picker","jimu-ui/advanced/resource-selector"],(function(e){var t,n,o,i,r,a,s,c,l,p,d;return{setters:[function(e){t=e},function(e){n=e},function(e){o=e},function(e){i=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){c=e},function(e){l=e},function(e){p=e},function(e){d=e}],execute:function(){e(function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=107)}([function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=r},,function(e,t){e.exports=a},function(e,t){e.exports=s},,function(e,t){e.exports=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var o,i=n(0),r=n(1),a=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){var n=e.call(this,t)||this;return n.onDropDownToggle=function(e){var t=n.state.isOpen;e.stopPropagation(),!n.dontDismiss&&n.setState({isOpen:!t}),n.dontDismiss=!1},n.onItemClick=function(e,t){t.autoHide||void 0===t.autoHide?n.setState({isOpen:!1}):n.dontDismiss=!0,t.event(e),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.state={isOpen:!1},n}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.items,a=t.toggleContent,s=t.direction,c=t.disabled,l=t.title,p=t.icon,d=t.caret,g=this.state.isOpen;return Object(i.jsx)("div",{className:"d-flex align-items-center"},Object(i.jsx)(r.Dropdown,{direction:s||"down",size:"sm",toggle:this.onDropDownToggle,isOpen:g},Object(i.jsx)(r.DropdownButton,{title:l,arrow:d,icon:p||void 0===p,disabled:c,size:"sm",type:"tertiary"},a||Object(i.jsx)(r.Icon,{size:12,icon:n(15)})),Object(i.jsx)(r.DropdownMenu,null,o.map((function(t,n){var o;return(t.visible||void 0===t.visible)&&(t.isBtn?Object(i.jsx)(i.React.Fragment,{key:n},t.label):Object(i.jsx)(r.DropdownItem,{key:n,title:null!==(o=t.title)&&void 0!==o?o:"",className:"no-user-select",onClick:function(n){return e.onItemClick(n,t)}},t.label))})))))},t.defaultProps={caret:!1},t}(i.React.PureComponent),c=function(e){function t(t){var n=e.call(this,t)||this;return n.onItemClick=function(e,t){t.event(e),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.state={},n}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.items,a=t.toggleContent,s=t.direction,c=t.disabled,l=t.title,p=t.icon,d=t.caret;return Object(i.jsx)(r.DropdownSubMenuItem,{direction:s},Object(i.jsx)(r.DropdownButton,{title:l,arrow:d,icon:p||void 0===p,disabled:c,size:"sm",type:"tertiary"},a||Object(i.jsx)(r.Icon,{size:12,icon:n(15)})),Object(i.jsx)(r.DropdownMenu,null,o.map((function(t,n){var o,a;return(t.visible||void 0===t.visible)&&(t.isBtn?Object(i.jsx)(r.DropdownSubMenuItem,{key:n,title:null!==(o=t.title)&&void 0!==o?o:"",onClick:function(n){return e.onItemClick(n,t)}},t.label):Object(i.jsx)(r.DropdownItem,{key:n,title:null!==(a=t.title)&&void 0!==a?a:"",className:"no-user-select",onClick:function(n){return e.onItemClick(n,t)}},t.label))}))))},t}(i.React.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={};n.r(o),n.d(o,"isSupportLanguage",(function(){return s})),n.d(o,"getBuildAppsHelpLink",(function(){return c})),n.d(o,"getHomeHelpLink",(function(){return l})),n.d(o,"getWhatsNewLink",(function(){return p})),n.d(o,"getWidgetHelpLink",(function(){return d}));var i=n(0),r=n(30),a=["en","de","es","fr","ja","ru","zh-cn"];function s(){var e=window.locale.toLowerCase(),t=!1;if(a.indexOf(e)>-1)t=!0;else for(var n=e.split("-")[0],o=0;o<a.length;o++)if(n===a[o].split("-")[0]){t=!0;break}return t}function c(e){return g("build-apps",e)}function l(){return window.jimuConfig.isDevEdition?g(void 0,"home",!0):g("get-started","what-is-arcgis-experience-builder",!0)}function p(){return g("get-started","whats-new",!0)}function d(e){return g("widgets",e)}function g(e,t,n){var o,a,c=null;if(t=t.toLowerCase(),window.jimuConfig.isDevEdition){a="https://developers.arcgis.com/experience-builder/";var p=r.dev,d=a+"#";return(c=e?""+p[e].prefix+p[e][t]:""+p[t])?(d=a+c,Promise.resolve(d)):Promise.resolve(d)}var g=null===(o=i.SessionManager.getInstance().getMainPortal())||void 0===o?void 0:o.portalUrl;if(window.jimuConfig.isInPortal){var u=window.locale||"en";p=r.portal;c=e?""+p[e][t]:""+p[t];var h=function(e,t){var n="",o=Object(i.getAppStore)().getState().portalSelf,r=null==o?void 0:o.helpBase.split("/");if(r.includes("https:")){var a=s()?window.locale:"en";n=r.slice(0,3).join("/")+"/"+a}else n=e+"/"+r[2]+"/"+t;return n}(g,u),f=h.includes("https:")?h+"/experience-builder":h;return fetch(g+"/sharing/rest/portals/helpmap?f=json",{method:"get",headers:{"Content-Type":"text/json"}}).then((function(e){return e.json()})).then((function(e){if(e&&e.helpMap&&e.helpMap.m&&c&&e.helpMap.m[c]){var t=h+"/"+e.helpMap.m[c];return Promise.resolve(t)}return n?Promise.resolve(f):l()})).catch((function(e){return console.warn(e),n?Promise.resolve(f):l()}))}var p=r.online;c=e?""+p[e].prefix+p[e][t]:""+p[t];d=(a="https://"+(g.indexOf("maps.arcgis.com")>-1||g.indexOf("www.arcgis.com")>-1?"doc":"docdev")+".arcgis.com/en/experience-builder/")+"#";if(!c)return Promise.resolve(d);if(d=a+c,s()){i.portalUrlUtils.getPortalSelfInfoUrl(g);var m=function(e,t,n){var o,r=Object(i.getAppStore)().getState().portalSelf;if(r&&r.helpBase){try{var a=r.helpBase.split("/").slice(0,4);o=a.join("/")+"/experience-builder/"}catch(e){return n}return o?o+t:n}return n}(0,c,d);return Promise.resolve(m)}return Promise.resolve(d)}},,function(e,t){e.exports=l},,function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M9.5 6.25a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0zm-4.75 0a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0zM0 6.25a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M7.745 7l4.1 4.1a.527.527 0 01-.745.746L7 7.746l-4.1 4.1a.527.527 0 01-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 01.746-.746l4.1 4.1 4.1-4.1a.527.527 0 01.746.746L7.746 7z" fill="#000"></path><path d="M1 1h12v12H1z"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm8.282-1.718a.961.961 0 011.359 0l4.077 4.077a.961.961 0 01-1.359 1.36l-4.077-4.078a.961.961 0 010-1.36z" fill="#000" fill-rule="nonzero"></path></svg>'},,function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1a7 7 0 000 14zm0 1A8 8 0 118 0a8 8 0 010 16zm-.5-4.5v-5H7a.5.5 0 010-1h1.5v6H9a.5.5 0 010 1H7a.5.5 0 010-1h.5zm.5-7a.5.5 0 110-1 .5.5 0 010 1z" fill="#000" fill-rule="nonzero"></path></svg>'},,function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.185 0c.105 0 .195.118.232.24l.013.062.245 1.567c.294.145.588.29.85.465l.19.138 1.53-.603c.154-.05.264-.016.332.031l.036.03 1.224 2.11c.051.1.06.201-.01.302l-.05.06-1.286 1.025c.061.181.061.362.061.603 0 .181-.034.328-.052.467l-.01.136 1.409.965c.105.052.12.192.083.307l-.022.055-1.224 2.11c-.053.104-.195.163-.312.14l-.056-.019-1.53-.603a4.796 4.796 0 01-.82.494l-.22.109-.245 1.568c0 .103-.135.207-.25.234L7.246 12H4.798c-.157 0-.27-.089-.298-.19l-.253-1.619c-.293-.145-.587-.29-.85-.465l-.19-.138-1.53.603c-.153.05-.264.017-.332-.03l-.036-.03L.085 8.02c-.05-.101-.06-.202.01-.302l.051-.06 1.286-1.026c-.061-.18-.061-.362-.061-.603 0-.18.034-.328.051-.466l.01-.137-1.286-.965c-.104-.103-.164-.25-.14-.329L1.247 1.99c.102-.1.204-.16.342-.141l.087.02 1.469.603.419-.281c.135-.09.268-.17.407-.236l.214-.086.245-1.628c0-.103.135-.207.25-.234L4.738 0h2.448zm-.658 1h-1.2l-.243 1.627-.586.192a1.42 1.42 0 00-.3.154l-.503.335-.441.29-1.439-.593-.59 1.017 1.207.905v.5c0 .088-.003.147-.013.228l-.044.31a.577.577 0 00-.004.065l.005.26.005.027.223.66L1.258 8.05l.581 1.001 1.536-.604.45.356c.162.126.334.226.712.416l.618.304.23 1.476h1.274l.23-1.476.751-.371c.206-.106.342-.182.453-.258l.126-.091.451-.356 1.506.595.587-1.01-1.272-.872v-.607l.009-.117.048-.341.003-.035v-.18l-.003-.098-.004-.034-.225-.665 1.345-1.073-.581-1.002-1.535.605-.451-.355-.126-.092a5.312 5.312 0 00-.59-.326l-.614-.303L6.527 1zM6 3.75a2.25 2.25 0 110 4.5 2.25 2.25 0 010-4.5zm0 1a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 6 12" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h2v2H0V0zm0 5h2v2H0V5zm0 5h2v2H0v-2zM4 0h2v2H4V0zm0 5h2v2H4V5zm0 5h2v2H4v-2z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.305 7.294L10.693.215a.79.79 0 011.083 0c.299.287.299.751 0 1.038L4.736 8l7.04 6.747c.299.287.299.751 0 1.038a.79.79 0 01-1.083 0l-7.388-7.08a.968.968 0 010-1.41z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(e,t){e.exports=p},,,,,function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M6.732 9.4l1.43 1.215a2.794 2.794 0 01-.507 4.602c-2.21 1.153-4.63 1.033-7.26-.362l-.293-.16a.2.2 0 01.087-.374c1.847-.11 2.771-.888 2.771-2.334 0-1.063.299-1.96 1.18-2.59.88-.631 1.832-.457 2.592.003zm-1.945.761c-.56.472-.825 1.055-.825 1.826 0 1.22-1.19 2.713-1.987 2.713 1.3.517 3.745.799 5.212-.368.174-.139.383-.251.531-.425a1.793 1.793 0 00-.205-2.53l-1.43-1.214a1.003 1.003 0 00-1.296-.002zM15.55.251c.45.355.58.988.307 1.495L11.696 9.49a1.967 1.967 0 01-2.958.622l-.996-.788a2.018 2.018 0 01-.12-3.054l6.42-5.959a1.158 1.158 0 011.509-.06zm-.84.798l-6.42 5.96a1.01 1.01 0 00.06 1.527l.997.787a.984.984 0 001.479-.31l4.162-7.745a.182.182 0 00-.047-.229.177.177 0 00-.23.01z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e){e.exports=JSON.parse('{"online":{"home":"#","get-started":{"prefix":"get-started/","what-is-arcgis-experience-builder":"what-is-arcgis-experience-builder.htm","whats-new":"whats-new.htm"},"build-apps":{"prefix":"build-apps/","add-a-page":"add-a-page.htm","add-a-dialog":"add-windows.htm","add-screen-groups":"add-screen-groups.htm","select-data":"select-data.htm"},"widgets":{"prefix":"configure-widgets/","overview":"widgets-overview.htm","table":"table-widget.htm","button":"button-widget.htm","bookmark":"bookmark-widget.htm","card":"card-widget.htm","column":"column-widget.htm","divider":"divider-widget.htm","embed":"embed-widget.htm","feature-info":"feature-info-widget.htm","filter":"filter-widget.htm","fixed":"fixed-panel-widget.htm","fly-controller":"fly-controller-widget.htm","image":"image-widget.htm","legend":"legend-widget.htm","list":"list-widget.htm","arcgis-map":"map-widget.htm","map-layers":"map-layers-widget.htm","menu":"menu-widget.htm","placeholder":"placeholder-widget.htm","row":"row-widget.htm","section":"section-widget.htm","share":"share-widget.htm","sidebar":"sidebar-widget.htm","survey123":"survey-widget.htm","text":"text-widget.htm","navigator":"view-navigation-widget.htm","controller":"widget-controller-widget.htm"}},"portal":{"home":"120001864","get-started":{"what-is-arcgis-experience-builder":"120001877"},"build-apps":{"add-a-page":"120001863","add-a-dialog":"120002539","add-screen-groups":"120002592","select-data":"120002590"},"widgets":{"overview":"#","table":"120002591","button":"120001841","bookmark":"120002536","card":"120002537","column":"120001842","divider":"120002538","embed":"120001843","feature-info":"120001844","filter":"120001845","fixed":"120001846","fly-controller":"120001847","image":"120001848","legend":"120001849","list":"120001850","arcgis-map":"120001851","map-layers":"120001852","menu":"120001853","placeholder":"120001854","row":"120001855","section":"120001856","share":"120001857","sidebar":"120001858","survey123":"120001859","text":"120001860","navigator":"120001861","controller":"120001862"}},"dev":{"home":"#","get-started":{"prefix":"guide/","what-is-arcgis-experience-builder":"getting-started-widget","whats-new":"whats-new"},"build-apps":{"prefix":"guide/","add-a-page":"add-a-page","add-a-dialog":"add-windows","add-screen-groups":"add-screen-groups","select-data":"select-data"},"widgets":{"prefix":"guide/","overview":"widgets-overview","table":"table-widget","button":"button-widget","bookmark":"bookmark-widget","card":"card-widget","column":"column-widget","divider":"divider-widget","embed":"embed-widget","feature-info":"feature-info-widget","filter":"filter-widget","fixed":"fixed-panel-widget","fly-controller":"fly-controller-widget","image":"image-widget","legend":"legend-widget","list":"list-widget","arcgis-map":"map-widget","map-layers":"map-layers-widget","menu":"menu-widget","placeholder":"placeholder-widget","row":"row-widget","section":"section-widget","share":"share-widget","sidebar":"sidebar-widget","survey123":"survey-widget","text":"text-widget","navigator":"view-navigation-widget","controller":"widget-controller-widget"}}}')},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M20 18a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2h16a2 2 0 012 2v16zm-1-3H1v3a1 1 0 001 1h16a1 1 0 001-1v-3zm0-9H1v8h18V6zm-1-5H2a1 1 0 00-1 1v3h18V2a1 1 0 00-1-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 1h14v5H1V1zM0 7V0h16v7H0zm1 3h14v5H1v-5zm-1 6V9h16v7H0z" fill="#F0F0F0"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 011.415 0l2.12 2.121a1 1 0 010 1.414l-8.935 8.937a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.087l.212-2.333a1 1 0 01.289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 010 1H.5a.5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},,function(e,t,n){(function(e){var o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++)n[t[o]]=Object.getOwnPropertyDescriptor(e,t[o]);return n},i=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,r=o.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}})),c=o[n];n<r;c=o[++n])f(c)||!j(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,o){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,o).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return n.apply(this,arguments)}};var r,a={};function s(e,n){var o={seen:[],stylize:l};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),h(n)?o.showHidden=n:n&&t._extend(o,n),v(o.showHidden)&&(o.showHidden=!1),v(o.depth)&&(o.depth=2),v(o.colors)&&(o.colors=!1),v(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=c),p(o,e,o.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function l(e,t){return e}function p(e,n,o){if(e.customInspect&&n&&I(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(o,e);return b(i)||(i=p(e,i,o)),i}var r=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,n);if(r)return r;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),y(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(I(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(y(n))return d(n)}var l,j="",S=!1,O=["{","}"];(u(n)&&(S=!0,O=["[","]"]),I(n))&&(j=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(j=" "+RegExp.prototype.toString.call(n)),x(n)&&(j=" "+Date.prototype.toUTCString.call(n)),y(n)&&(j=" "+d(n)),0!==a.length||S&&0!=n.length?o<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=S?function(e,t,n,o,i){for(var r=[],a=0,s=t.length;a<s;++a)M(t,String(a))?r.push(g(e,t,n,o,String(a),!0)):r.push("");return i.forEach((function(i){i.match(/^\d+$/)||r.push(g(e,t,n,o,i,!0))})),r}(e,n,o,s,a):a.map((function(t){return g(e,n,o,s,t,S)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,j,O)):O[0]+j+O[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,n,o,i,r){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),M(o,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=f(n)?p(e,c.value,null):p(e,c.value,n-1)).indexOf("\n")>-1&&(s=r?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(r&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function u(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function f(e){return null===e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function w(e){return j(e)&&"[object RegExp]"===S(e)}function j(e){return"object"==typeof e&&null!==e}function x(e){return j(e)&&"[object Date]"===S(e)}function y(e){return j(e)&&("[object Error]"===S(e)||e instanceof Error)}function I(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(r)&&(r=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(r)){var o=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,o,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=u,t.isBoolean=h,t.isNull=f,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=w,t.isObject=j,t.isDate=x,t.isError=y,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(74);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(75),t._extend=function(e,t){if(!t||!j(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t;if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,o=new Promise((function(e,o){t=e,n=o})),i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);i.push((function(e,o){e?n(e):t(o)}));try{e.apply(this,i)}catch(e){n(e)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=T,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var r=this,a=function(){return i.apply(r,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(k,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,o(t)),n}}).call(this,n(73))},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.637 15.866L30.951 27.18a2.667 2.667 0 01-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 01.781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 014.552.781l11.314 11.314L27.18.781a2.667 2.667 0 013.771 3.771L19.637 15.866z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M4.586 8.657l6.01-6.01a.5.5 0 01.707.707l-6.01 6.01a1 1 0 01-1.414 0L.697 6.182a.5.5 0 01.707-.707l3.182 3.182z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14 8a.522.522 0 01-.516.527H3.976L7.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L2 8l4.743-4.846a.508.508 0 01.73 0 .535.535 0 010 .746L3.976 7.473h9.508c.285 0 .516.236.516.527z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M.5 0a.5.5 0 01.5.5v15a.5.5 0 01-1 0V.5A.5.5 0 01.5 0zm5.973 3.154a.535.535 0 010 .746L2.976 7.473h12.508c.285 0 .516.236.516.527a.522.522 0 01-.516.527H2.976L6.473 12.1a.535.535 0 010 .746.508.508 0 01-.73 0L1 8l4.743-4.846a.508.508 0 01.73 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M18 14h10.667a2 2 0 110 4H18v10.667a2 2 0 11-4 0V18H3.333a2 2 0 110-4H14V3.333a2 2 0 114 0V14z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 3h11a1 1 0 011 1v11a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1zm0 1v11h11V4H4zm-4 7.5V1a1 1 0 011-1h9.5a.5.5 0 010 1H1v10.5a.5.5 0 01-1 0z" fill-rule="nonzero"></path></svg>'},,function(e,t){e.exports=d},,,,,,,,,,,,,,,function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IkNvbXBvbmVudHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iJDE1LUl0ZW0tU2VsZWN0b3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODcuMDAwMDAwLCAtMzA4LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9IkN1c3RvbSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg2LjAwMDAwMCwgMzA3LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iTGF5b3V0IiBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMTQiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMjgyODI4IiB4PSI4NyIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjY4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSI4NyIgeTE9IjAiIHgyPSI4NyIgeTI9IjY4IiBpZD0iRGFzaC1saW5lIiBzdHJva2U9IiM1MjUyNTIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjQsNCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMjgyODI4IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjIwIiB5MT0iMCIgeDI9IjIwIiB5Mj0iNjgiIGlkPSJEYXNoLWxpbmUiIHN0cm9rZT0iIzUyNTI1MiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iNCw0Ij48L2xpbmU+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJTY3JvbGwtYmFyIiBmaWxsPSIjNkE2QTZBIiB4PSIxMDEiIHk9IjMiIHdpZHRoPSIzIiBoZWlnaHQ9IjQwIiByeD0iMS41Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJDb21wb25lbnRzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IiQxNS1JdGVtLVNlbGVjdG9yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTA2LjAwMDAwMCwgLTMwOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJBdXRvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MDUuMDAwMDAwLCAzMDcuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS4wMDAwMDAsIDEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDciIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IkxheW91dCIgZmlsbD0iIzUyNTI1MiIgeD0iNiIgeT0iMTQiIHdpZHRoPSI5MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iU2Nyb2xsLWJhciIgZmlsbD0iIzZBNkE2QSIgeD0iMTAxIiB5PSIzIiB3aWR0aD0iMyIgaGVpZ2h0PSI0MCIgcng9IjEuNSI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports='<svg viewBox="0 0 9 12" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 0A2.5 2.5 0 017 2.5V4h1a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h1V2.5A2.5 2.5 0 014.5 0zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2zm0-6a1.5 1.5 0 00-1.493 1.356L3 2.5V4h3V2.5a1.5 1.5 0 00-1.356-1.493L4.5 1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 11 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 2.5C6 1.12 7.122 0 8.507 0c1.263 0 2.308.932 2.481 2.144l.011.145a.487.487 0 01-.463.51l-.024.001a.525.525 0 01-.524-.483 1.28 1.28 0 00-.023-.185 1.504 1.504 0 00-1.313-1.125L8.507 1c-.782 0-1.425.595-1.497 1.356l-.007.144V4H8a1 1 0 011 1v6a1 1 0 01-1 1H1a1 1 0 01-1-1V5a1 1 0 011-1h5V2.5zM8 5H1v6h7V5zM4.5 7a1 1 0 110 2 1 1 0 010-2z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h50v4H14z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="9" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 68 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="9" width="6" height="6" rx="2" fill="#6A6A6A"></rect><rect x="51" y="16" width="13" height="6" rx="2" fill="#6A6A6A"></rect><path fill="#6A6A6A" d="M14 10h33v4H14z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.84a.502.502 0 010 .71L6 10.97A3.515 3.515 0 111.03 6l1.42-1.42a.502.502 0 11.71.71L1.74 6.71a2.51 2.51 0 103.55 3.55l1.42-1.42a.502.502 0 01.71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 10-3.55-3.55L5.29 3.16a.502.502 0 11-.71-.71L6 1.03A3.515 3.515 0 1110.97 6L9.55 7.42a.502.502 0 11-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 01.71.71L4.58 8.13a.502.502 0 01-.71-.71z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 8c0-.291.231-.527.516-.527h9.508L8.527 3.9a.535.535 0 010-.746.508.508 0 01.73 0L14 8l-4.743 4.846a.508.508 0 01-.73 0 .535.535 0 010-.746l3.497-3.573H2.516A.522.522 0 012 8z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M7.294 4.305L.215 11.693a.79.79 0 000 1.083c.287.299.751.299 1.038 0L8 5.736l6.747 7.04c.287.299.751.299 1.038 0a.79.79 0 000-1.083l-7.08-7.388a.968.968 0 00-1.41 0z" fill="#000"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 0a.5.5 0 01.5.5v15a.5.5 0 11-1 0V.5A.5.5 0 018 0zm4.973 5.154a.535.535 0 010 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527a.522.522 0 01-.516.527h-3.508l1.497 1.573a.535.535 0 010 .746.508.508 0 01-.73 0L9.5 8l2.743-2.846a.508.508 0 01.73 0zm-9.946 0a.508.508 0 01.73 0L6.5 8l-2.743 2.846a.508.508 0 01-.73 0 .535.535 0 010-.746l1.497-1.573H1.016A.522.522 0 01.5 8c0-.291.231-.527.516-.527h3.508L3.027 5.9a.535.535 0 010-.746z" fill="#000" fill-rule="nonzero"></path><path d="M0 0h16v16H0z"></path></g></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 0a.5.5 0 01.5.5v15a.5.5 0 01-1 0V.5a.5.5 0 01.5-.5zm-5.243 3.154L15 8l-4.743 4.846a.508.508 0 01-.73 0 .535.535 0 010-.746l3.497-3.573H.516A.522.522 0 010 8c0-.291.231-.527.516-.527h12.508L9.527 3.9a.535.535 0 010-.746.508.508 0 01.73 0z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 0a2 2 0 012 2v16a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2h16zm1 5H1v13a1 1 0 00.883.993L2 19h16a1 1 0 00.993-.883L19 18V5zm-8.5 9a.5.5 0 010 1h-7a.5.5 0 010-1h7zm6-4a.5.5 0 010 1h-13a.5.5 0 010-1h13zM18 1H2a1 1 0 00-.993.883L1 2v2h18V2a1 1 0 00-.883-.993L18 1zM2.5 2a.5.5 0 110 1 .5.5 0 010-1zm2 0a.5.5 0 110 1 .5.5 0 010-1zm2 0a.5.5 0 110 1 .5.5 0 010-1z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M1.1 3H.5a.5.5 0 010-1H3V1a1 1 0 011-1h4a1 1 0 011 1v1h2.5a.5.5 0 010 1h-.6l-.81 8.1a1 1 0 01-.995.9h-6.19a1 1 0 01-.995-.9L1.1 3zm1.005 0l.8 8h6.19l.8-8h-7.79zM4 2h4V1H4v1zm.5 2a.5.5 0 01.5.5v5a.5.5 0 01-1 0v-5a.5.5 0 01.5-.5zm3 0a.5.5 0 01.5.5v5a.5.5 0 01-1 0v-5a.5.5 0 01.5-.5z" fill-rule="evenodd"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.598L14.308.29a.991.991 0 011.402 1.402L9.402 8l6.308 6.308a.991.991 0 01-1.402 1.402L8 9.402 1.692 15.71A.991.991 0 01.29 14.308L6.598 8 .29 1.692A.991.991 0 011.692.29L8 6.598z" fill="#000" fill-rule="nonzero"></path></svg>'},function(e,t){var n,o,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var c,l=[],p=!1,d=-1;function g(){p&&c&&(p=!1,c.length?l=c.concat(l):d=-1,l.length&&u())}function u(){if(!p){var e=s(g);p=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||p||s(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){try{var o=n(35);if("function"!=typeof o.inherits)throw"";e.exports=o.inherits}catch(t){e.exports=n(76)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0c4.4 0 8 3.6 8 8s-3.6 8-8 8-8-3.6-8-8 3.6-8 8-8zm0 12a1 1 0 100 2 1 1 0 000-2zM7.938 2C6.387 2 5.058 3.06 4.57 4.465c-.07.174-.07.342-.07.342a.74.74 0 00.765.793l.114-.007c.458-.053.775-.314.947-.742.09-.189.123-.238.14-.262a1.778 1.778 0 011.47-.789c.98 0 1.782.81 1.782 1.8 0 .54-.178.99-.535 1.26L8.116 8.03c-.578.51-.921 1.198-1.03 1.968a.701.701 0 00-.006.073v.133a.855.855 0 00.858.796l.104-.006c.45-.049.817-.409.849-.845l.037-.185c.151-.652.474-1.046.969-1.484.495-.438.801-.81.801-.81.446-.54.802-1.26.802-2.07C11.5 3.62 9.897 2 7.938 2z" fill="#000" fill-rule="evenodd"></path></svg>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var o,i,r,a,s,c,l,p,d,g,u,h,f,m,b,v,w,j,x,y,I,S,O,C,A,M,T,k,N,P,R,z=n(0),D={previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"Add view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view"},B=n(2),L=n(1),_=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),E=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return n.props.formatMessage(e)},n.onSettingChange=function(e,t){return Object(B.getAppConfigAction)().editWidget(e,t).exec()},n.renderWidgetSetting=function(e){var t=n.props.widgetsSettingRuntimeInfo[e]&&n.props.widgetsSettingRuntimeInfo[e].isClassLoaded?B.WidgetSettingManager.getInstance().getWidgetSettingClass(e):null;return t&&n.props.widgetJson.config?z.React.createElement(z.ErrorBoundary,null,z.React.createElement(t,{key:e,widgetId:e,onSettingChange:n.onSettingChange})):z.React.createElement(L.Loading,{type:L.LoadingType.Secondary})},n}return _(t,e),t.prototype.componentDidUpdate=function(){this.loadWidgetSettingClass()},t.prototype.componentDidMount=function(){this.loadWidgetSettingClass()},t.prototype.loadWidgetSettingClass=function(){var e=this.props.widgetId;e&&!B.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&B.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)},t.prototype.render=function(){if(!this.props.widgetJson)return z.React.createElement(L.Loading,{type:L.LoadingType.Secondary});var e=this.props.widgetId;return z.React.createElement("div",{className:"setting-container h-100"},e?this.renderWidgetSetting(e):z.React.createElement("div",null,"Â Â ",this.formatMessage("noWidget")))},t}(z.React.PureComponent),W=z.ReactRedux.connect((function(e,t){return{widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]}}))(E),U=n(3),H=n(24),F=n(7),V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},G={width:110},J=function(e){function t(t){var n=e.call(this,t)||this;return n.isOpen=function(){var e=n.props,t=e.pagePart,o=e.pageId,i=n.getAppConfig();return"body"===t||!!(i&&i.pages[o]&&i[t]&&i.pages[o][t])},n.formatMessage=function(e){return n.props.formatMessage(e)},n.onSwitchChange=function(){var e=n.props,t=e.pageId,o=e.pagePart,i=e.emptyLayout,r=n.getAppConfig(),a=r.pages[t],s=r[o],c=Object(B.getAppConfigAction)();if(!s){var l=z.appConfigUtils.getUniqueId(r,"layout"),p=Object(z.Immutable)(Z(Z({},i),{id:l,type:z.LayoutType.FixedLayout}));s=Object(z.Immutable)({}).setIn(["layout",z.BrowserSizeMode.Large],l).setIn(["height",z.BrowserSizeMode.Large],75),"header"===o?c.editHeader(s,[p]):c.editFooter(s,[p])}var d=a.set(o,!a[o]);c.editPage(d).exec(),"body"===o||d[o]||B.builderAppSync.publichActivePagePartChangeToApp(z.PagePart.Body),n.setState({isOpen:d[o]})},n.onHeightChange=function(e){var t=L.utils.stringOfLinearUnit(e),o=n.props,i=o.pagePart,r=o.browserSizeMode,a=n.getAppConfig();"header"===i?Object(B.getAppConfigAction)().editHeader(a.header.setIn(["height",r],t)).exec():Object(B.getAppConfigAction)().editFooter(a.footer.setIn(["height",r],t)).exec()},n.onStickHeaderChange=function(e){var t=n.getAppConfig();Object(B.getAppConfigAction)().editHeader(t.header.set("sticky",e.target.checked)).exec()},n.onBackgroundColorChange=function(e){var t=n.props,o=t.pageId,i=t.pagePart,r=n.getAppConfig(),a=r.pages[o];"body"===i?Object(B.getAppConfigAction)().editPage(a.set("bodyBackgroundColor",e)).exec():"header"===i?Object(B.getAppConfigAction)().editHeader(r.header.set("backgroundColor",e)).exec():Object(B.getAppConfigAction)().editFooter(r.footer.set("backgroundColor",e)).exec()},n.state={isOpen:n.isOpen()},n}return V(t,e),t.prototype.getAppConfig=function(){return Object(z.getAppStore)().getState().appStateInBuilder&&Object(z.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}},t.prototype.componentDidUpdate=function(e){if(this.props.pageId!==e.pageId){var t=this.props,n=t.pageJson,o=t.pagePart;this.setState({isOpen:"body"===o||n&&n[o]})}},t.prototype.render=function(){var e,t,n,o,i,r,a,s,c={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},l=this.props,p=l.pageId,d=l.pagePart,g=l.browserSizeMode,u=l.theme,h=l.header,f=this.getAppConfig(),m=f.pages[p];!(s="body"===d?m.bodyBackgroundColor:null===(e=f[d])||void 0===e?void 0:e.backgroundColor)&&u&&(s="header"===d?null===(t=u.header)||void 0===t?void 0:t.bg:"footer"===d?null===(n=u.footer)||void 0===n?void 0:n.bg:null===(o=u.body)||void 0===o?void 0:o.bg);var b=z.React.createElement("div",{className:"setting-title d-flex justify-content-between"},z.React.createElement("div",null,z.React.createElement("span",null,c[this.props.pagePart])),z.React.createElement("div",{className:"d-flex align-items-center"},"body"===d?null:z.React.createElement(L.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange}))),v=L.utils.stringOfLinearUnit(null!==(a=null===(r=null===(i=f[d])||void 0===i?void 0:i.height)||void 0===r?void 0:r[g])&&void 0!==a?a:75);return z.React.createElement(U.SettingSection,{title:b},z.React.createElement(L.Collapse,{isOpen:this.state.isOpen},"body"===d?null:z.React.createElement(U.SettingRow,{label:""+this.formatMessage("dynamicHeight")},z.React.createElement(F.InputUnit,{value:v,min:0,onChange:this.onHeightChange,style:G})),z.React.createElement(U.SettingRow,{label:this.formatMessage("dsFill")},z.React.createElement(H.ThemeColorPicker,{specificTheme:u,value:s,onChange:this.onBackgroundColorChange})),"header"===d&&m.mode===z.PageMode.AutoScroll&&z.React.createElement(U.SettingRow,{label:z.React.createElement(L.Label,{check:!0,className:"justify-content-start align-items-start"},z.React.createElement(L.Checkbox,{className:"mr-2",checked:Boolean(null==h?void 0:h.sticky),onChange:this.onStickHeaderChange}),this.formatMessage("keepFixedOnScroll"))})))},t}(z.React.PureComponent),X=n(6),K=n(4),Y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},q=n(19),$={},ee=function(e){function t(t){var n=e.call(this,t)||this;n.onMaxWidthChange=function(e){var t=n.props.pageJson;t=t.set("maxWidth",e),Object(B.getAppConfigAction)().editPage(t).exec()},n.formatMessage=function(e){return n.props.formatMessage(e)},n.setPageWidthModeAuto=function(){var e=n.props.pageJson;e=e.without("maxWidth"),Object(B.getAppConfigAction)().editPage(e).exec(),n.setState({pageWidthMode:1})},n.setPageWidthModeFixed=function(){var e=n.props.pageJson;e=e.set("maxWidth",1024),Object(B.getAppConfigAction)().editPage(e).exec(),n.setState({pageWidthMode:0})},n.openWithDialogChanged=function(e){var t=n.props.pageJson;t=t.set("autoOpenDialogId",e.target.value),Object(B.getAppConfigAction)().editPage(t).exec()},n.onEffectSettingChange=function(e,t){var o=n.props.pageJson;Object(B.getAppConfigAction)().editPage(o.set("oneByOneEffect",t)).exec(),(null==t?void 0:t.type)!==z.AnimationType.None&&B.builderAppSync.publishAnimationPreviewToApp({pageId:o.id,playMode:e,id:Symbol("preview animation")})},n.previewAnimation=function(e){var t=n.props.pageJson;t.oneByOneEffect&&t.oneByOneEffect.type!==z.AnimationType.None&&B.builderAppSync.publishAnimationPreviewToApp({pageId:t.id,playMode:e,id:Symbol("preview animation")})};var o=t.pageJson;return n.state={isSetImageUrl:!1,currentImgUrlInput:"",pageWidthMode:o.maxWidth>0?0:1},n.fileInput=z.React.createRef(),n}return Y(t,e),t.prototype.getAppConfig=function(){return Object(z.getAppStore)().getState().appStateInBuilder&&Object(z.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}},t.prototype.layoutSetting=function(){var e,t=this.props.pageId,n=this.getAppConfig(),o=n.pages[t];if(o&&o.layout){var i=K.searchUtils.findLayoutId(o.layout,null===(e=Object(z.getAppStore)().getState().appStateInBuilder)||void 0===e?void 0:e.browserSizeMode,n.mainSizeMode),r=n.layouts[i];if(r&&r.type===z.LayoutType.FlowLayout)return Object(z.jsx)(X.FlowLayoutSetting,{layoutId:i,formatMessage:this.props.formatMessage})}},t.prototype.getDialogList=function(){var e=[{value:"",index:-1,label:this.formatMessage("none")}],t=this.props.dialogs;return t&&(Object.keys(t).map((function(n){t[n].isSplash||t[n].mode!==z.DialogMode.Fixed||e.push({value:n,index:t[n].index,label:t[n].label})})),e.sort((function(e,t){return e.index-t.index}))),e},t.prototype.getStyle=function(){var e=this.props.theme;return Object(z.css)(i||(i=Q(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    input, select {\n      width: 130px;\n      max-width: 130px;\n    }\n    .setting-row-label{\n      line-height: 30px;\n      font-size: 0.8125rem;\n      font-weight: 500;\n      margin-bottom: 0.5rem;\n      color: ",";\n    }\n    .content-width-item {\n      width: 110px;\n      overflow-x: hidden;\n      .img-container {\n        width: auto;\n        height: auto;\n        cursor: pointer;\n        border: 1px solid ",";\n        background-color: ",";\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 5px;\n        .thumbnail {\n          width: 107px;\n        }\n        &.active {\n          border: 2px solid ",";\n          .thumbnail {\n            width: 105px;\n          }\n        }\n      }\n      span {\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        width: 100%;\n      }\n    }\n\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    input, select {\n      width: 130px;\n      max-width: 130px;\n    }\n    .setting-row-label{\n      line-height: 30px;\n      font-size: 0.8125rem;\n      font-weight: 500;\n      margin-bottom: 0.5rem;\n      color: ",";\n    }\n    .content-width-item {\n      width: 110px;\n      overflow-x: hidden;\n      .img-container {\n        width: auto;\n        height: auto;\n        cursor: pointer;\n        border: 1px solid ",";\n        background-color: ",";\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 5px;\n        .thumbnail {\n          width: 107px;\n        }\n        &.active {\n          border: 2px solid ",";\n          .thumbnail {\n            width: 105px;\n          }\n        }\n      }\n      span {\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        width: 100%;\n      }\n    }\n\n    "])),e.colors.palette.dark[400],e.colors.palette.light[800],e.colors.white,e.colors.palette.primary[700])},t.prototype.render=function(){var e=this.props,t=e.pageMode,o=e.maxWidth,i=e.pageJson,r=this.props.pageJson.autoOpenDialogId||"",a=i.oneByOneEffect;return Object(z.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},Object(z.jsx)(U.SettingSection,null,Object(z.jsx)("div",{className:"setting-row-label"},this.formatMessage("openWithWindow"),Object(z.jsx)(L.Tooltip,{title:this.formatMessage("openWithWindowTip"),placement:"bottom"},Object(z.jsx)("div",{className:"ml-2 d-inline"},Object(z.jsx)(L.Icon,{size:16,icon:q})))),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(L.Select,{value:r,onChange:this.openWithDialogChanged},this.getDialogList().map((function(e,t){return Object(z.jsx)("option",{value:e.value,key:t,selected:e.value===r},e.label)}))))),t===z.PageMode.AutoScroll&&Object(z.jsx)(U.SettingSection,{title:this.formatMessage("contentWidth")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex w-100 justify-content-between"},Object(z.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},Object(z.jsx)("div",{className:"img-container "+(0===this.state.pageWidthMode?"active":""),onClick:this.setPageWidthModeFixed},Object(z.jsx)("img",{className:"thumbnail",src:n(58)})),Object(z.jsx)("span",{className:"text-center"},this.formatMessage("dsCustom"))),Object(z.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},Object(z.jsx)("div",{className:"img-container "+(1===this.state.pageWidthMode?"active":""),onClick:this.setPageWidthModeAuto},Object(z.jsx)("img",{className:"thumbnail",src:n(59)})),Object(z.jsx)("span",{className:"text-center"},this.formatMessage("dsAuto"))))),0===this.state.pageWidthMode&&Object(z.jsx)(U.SettingRow,{label:this.formatMessage("maxWidth")},Object(z.jsx)(L.NumericInput,{className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(o)?"":o,style:{width:"110px"}}))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("animation")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.AnimationSettingComponent,{oneByOneSetting:a,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!1,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),Object(z.jsx)(J,{formatMessage:this.formatMessage,emptyLayout:$,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"body",pageJson:this.props.pageJson,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),Object(z.jsx)(J,{formatMessage:this.formatMessage,emptyLayout:$,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"header",pageJson:this.props.pageJson,header:this.props.header,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),Object(z.jsx)(J,{formatMessage:this.formatMessage,emptyLayout:$,dispatch:this.props.dispatch,pageJson:this.props.pageJson,pageId:this.props.pageId,pagePart:"footer",footer:this.props.footer,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),this.layoutSetting())},t}(z.React.PureComponent),te=z.ReactRedux.connect((function(e,t){return{pageJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.pages[t.pageId]||{},dialogs:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs,header:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.header,footer:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.footer}}))(ee),ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ie=n(60),re=n(61),ae=n(62),se=n(63),ce=n(64),le="260px",pe="300px",de="480px",ge="432px",ue=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return n.props.formatMessage(e)},n.updateDialogMask=function(e){n.editDialogProperty("overlayColor",e)},n.getDialogBackgroud=function(){var e,t=n.props.dialogJson;return"var(--light)"===(null===(e=t.dialogBackground)||void 0===e?void 0:e.color)?t.dialogBackground.set("color",""):t.dialogBackground},n.updateDialogBackgroud=function(e){""===e.color&&(e.color="var(--light)"),n.editDialogProperty("dialogBackground",e)},n.updateBorder=function(e){n.editDialogProperty("border",e)},n.updateBorderRadius=function(e){n.editDialogProperty("borderRadius",e)},n.updateShadow=function(e){n.editDialogProperty("boxShadow",e)},n.onEffectSettingChange=function(e,t){var o=n.props.dialogJson,i=e===z.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";Object(B.getAppConfigAction)().editDialog(o.set(i,t)).exec(),B.builderAppSync.publishAnimationPreviewToApp({dialogId:o.id,playMode:e,id:Symbol("preview dialog animation")})},n.previewAnimation=function(e){var t=n.props.dialogJson;(t.effect||t.oneByOneEffect)&&B.builderAppSync.publishAnimationPreviewToApp({dialogId:t.id,playMode:e,id:Symbol("preview dialog animation")})},n.state={isRenderer:!1},n.isRTL=Object(z.getAppStore)().getState().appContext.isRTL,n}return ne(t,e),t.prototype.defaultInteractionStyles=function(){return{text:"",textSize:"13px",buttonText:"",buttonTextSize:"16px"}},t.prototype.getAppConfig=function(){return Object(z.getAppStore)().getState().appStateInBuilder&&Object(z.getAppStore)().getState().appStateInBuilder.appConfig||{dialogs:{empty:{}}}},t.prototype.getBrowserSizeMode=function(){return Object(z.getAppStore)().getState().appStateInBuilder&&Object(z.getAppStore)().getState().appStateInBuilder.browserSizeMode},t.prototype.editDialogProperty=function(e,t){Object(B.getAppConfigAction)().editDialogProperty(this.props.dialogId,e,t).exec()},t.prototype.editDialog=function(e){Object(B.getAppConfigAction)().editDialog(e).exec()},t.prototype.setDialogMode=function(e){var t=this.props.dialogJson;if(e!==t.mode){if(e===z.DialogMode.Anchored){var n=de,o=ge;if(t.position===z.DialogPosition.Center){var i=z.utils.findViewportSize(this.getAppConfig(),this.getBrowserSizeMode());n=t.width.indexOf(L.UnitTypes.PIXEL)>=0?t.width:i.width*parseFloat(t.width.split("%")[0])/100+"px",o=t.height.indexOf(L.UnitTypes.PIXEL)>=0?t.height:i.height*parseFloat(t.height.split("%")[0])/100+"px"}t=t.set("width",n).set("height",o).set("position",null).set("overlayColor",null)}else t=t.set("position",z.DialogPosition.Center).set("overlayColor","var(--dark-900)");t=t.set("mode",e).set("interactionType",null).set("interactionStyles",null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(t)}},t.prototype.setDialogPosition=function(e){var t=this.props.dialogJson;t=t.set("position",e),t=e===z.DialogPosition.Left||e===z.DialogPosition.Right?t.set("aspectRatio",!1).set("width",le):e===z.DialogPosition.Top||e===z.DialogPosition.Bottom?t.set("aspectRatio",!1).set("height",pe):t.set("width",de).set("height",ge),this.editDialog(t)},t.prototype.getDialogSize=function(e){var t=this.props.dialogJson[e];if(!t)return null;var n=t.indexOf(L.UnitTypes.PIXEL)>=0?L.UnitTypes.PIXEL:L.UnitTypes.PERCENTAGE;return{distance:t.split(n)[0],unit:n}},t.prototype.setDialogSize=function(e,t){var n=this.props.dialogJson;if((n[e].indexOf(L.UnitTypes.PIXEL)>=0?L.UnitTypes.PIXEL:L.UnitTypes.PERCENTAGE)!==t.unit){var o=z.utils.findViewportSize(this.getAppConfig(),this.getBrowserSizeMode()),i="height"===e?o.height:o.width;t.unit===L.UnitTypes.PIXEL?t.distance=i*t.distance/100:t.distance=100*t.distance/i}else if(n.aspectRatio){var r="width"===e?"height":"width",a=t.distance*parseFloat(n[r].split(L.UnitTypes.PIXEL)[0].split(L.UnitTypes.PERCENTAGE)[0])/parseFloat(n[e].split(t.unit)[0])+(n[r].indexOf(L.UnitTypes.PIXEL)>=0?L.UnitTypes.PIXEL:L.UnitTypes.PERCENTAGE);n=n.set(r,a)}n=n.set(e,t.distance+t.unit),this.editDialog(n)},t.prototype.getFontSize=function(e){var t=this.interactionStyles[e],n=t.indexOf(L.UnitTypes.PIXEL)>=0?L.UnitTypes.PIXEL:L.UnitTypes.REM;return{distance:t.split(n)[0],unit:n}},t.prototype.setInteraction=function(e){var t=this.props.dialogJson;t=t.set("interactionType",e?z.DialogInteractionType.NoButton:null).set("interactionStyles",e?this.defaultInteractionStyles():null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(t)},t.prototype.changeInteractionType=function(e){var t=this.props.dialogJson;e!==t.interactionType&&(t=t.set("interactionType",e),this.editDialog(t))},t.prototype.setConfirmationType=function(e){var t=this.props.dialogJson;t=t.set("confirmBeforeClose",e).set("alwaysShowConfirmation",!e),this.editDialog(t)},t.prototype.updateInteractionStyles=function(e,t){this.editDialogProperty("interactionStyles",this.interactionStyles.set(e,t))},t.prototype.updateCheckboxTextSize=function(e,t){this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t)},t.prototype.updateCheckboxText=function(e,t,n){n===t&&(t=""),this.interactionStyles[e]!==t?this.updateInteractionStyles(e,t):""===t&&this.setState({isRenderer:!this.state.isRenderer})},t.prototype.getStyle=function(){return Object(z.css)(r||(r=oe(["\n      .mode-radio{\n        cursor: pointer;\n        &.mode-label-disabled{\n          cursor: inherit;\n        }\n      }\n      .mode-label{\n        margin-left: 0.5rem;\n        cursor: pointer;\n        &.mode-label-disabled{\n          cursor: inherit;\n          color: var(--dark-200);\n        }\n      }\n      .confirmation-container {\n        .confirmation-item{\n          margin-top: 0.5rem;\n          margin-bottom: 0.5rem;\n        }\n      }\n\n      .position-size-setting{\n        display: flex;\n        justify-content: space-between;\n\n        .position-container{\n          position: relative;\n          width: 90px;\n          height: 90px;\n          border: 1px solid var(--light-500);\n\n          .content {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            padding: 6px;\n            justify-content: space-between;\n          }\n\n          .w-part {\n            width: 19px;\n            position: relative;\n            z-index: 0;\n            &.w-center {\n              width: 24px;\n              justify-content: space-between;\n            }\n          }\n          .h-part {\n            width: 100%;\n            height: 19px;\n            position: relative;\n            z-index: 0;\n            &.h-center {\n              height: 24px;\n            }\n          }\n\n          .from-left {\n            &.line-h{\n              &:after {\n                left: 6px;\n              }\n              &.is-selected:after {\n                border-left: none;\n              }\n            }\n          }\n          .from-top {\n            &.line-v{\n              &:after {\n                position: absolute;\n                top: 6px;\n              }\n              &.is-selected:after {\n                border-top: none;\n              }\n            }\n          }\n\n          .from-center {\n            border: 2px solid var(--dark-100);\n          }\n\n          .from-right {\n            &.line-h{\n              &:before {\n                position: absolute;\n                right: 0;\n              }\n              &:after {\n\n                right: 6px;\n              }\n              &.is-selected:after {\n                border-right: none;\n              }\n            }\n          }\n\n          .from-bottom {\n            &.line-v{\n              &:before {\n                position: absolute;\n                bottom: 0;\n              }\n              &:after {\n                position: absolute;\n                top: -2px;\n              }\n              &.is-selected:after {\n                border-bottom: none;\n              }\n            }\n          }\n          .line-h.is-selected,\n          .line-v.is-selected {\n            border-color: var(--primary-700);\n\n            &:before, &:after{\n              background: var(--primary-100);\n              border: 2px solid var(--primary-700);\n            }\n          }\n          .line-h {\n            position: absolute;\n            width: 100%;\n            top: 50%;\n            transform: translateY(-50%);\n            height: 24px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            z-index: 0;\n            cursor: pointer;\n\n            &:before {\n              content: '';\n              width: 6px;\n              height: 100%;\n              background: var(--dark-100);\n            }\n            &.is-selected:before {\n              width: 8px;\n            }\n\n            &:after {\n              position: absolute;\n              top: 9px;\n              content: '';\n              height: 6px;\n              width: 15px;\n              background: var(--dark-100);\n            }\n            &.is-selected:after {\n              height: 8px;\n            }\n          }\n          .line-v {\n            position: absolute;\n            height: 100%;\n            width: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n            display: flex;\n            justify-content: center;\n            z-index: 0;\n            cursor: pointer;\n\n            &:before {\n              content: '';\n              width: 100%;\n              height: 6px;\n              background: var(--dark-100);\n            }\n            &.is-selected:before {\n              height: 8px;\n            }\n\n            &:after {\n              content: '';\n              width: 6px;\n              height: 15px;\n              background: var(--dark-100);\n            }\n            &.is-selected:after {\n              width: 8px;\n            }\n          }\n          .line-center {\n            height: 100%;\n            width: 100%;\n            z-index: 0;\n            cursor: pointer;\n            background: var(--dark-100);\n            &.is-selected {\n              background: var(--primary-100);\n              border-color: var(--primary-700);\n            }\n          }\n        }\n\n        .size-container{\n          width: calc(100% - 106px);\n          height: 90px;\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n\n          .size-label{\n            color: var(--dark-400);\n          }\n\n          .size-input{\n            margin-left: 6px;\n            width: 100%;\n            &.size-auto-input{\n              color: var(--dark-400);\n              background: var(--light-400);\n            }\n          }\n        }\n      }\n\n\n      .size-setting{\n        width: 100%;\n\n        .size-container{\n          height: 26px;\n          display: flex;\n          justify-content: space-between;\n\n          .unit-container{\n            display: flex;\n            width: calc(50% - 18px);\n\n            .size-label{\n              color: var(--dark-400);\n            }\n\n            .size-input{\n              margin-left: 6px;\n            }\n          }\n        }\n\n      }\n\n      .interaction-container{\n        .interaction-type-container{\n          display: flex;\n          justify-content: space-between;\n          .jimu-btn{\n            padding: 0;\n            background-color: var(--light-200);\n            &.active{\n              outline: 2px solid var(--primary-600);\n            }\n          }\n        }\n      }\n\n    "],["\n      .mode-radio{\n        cursor: pointer;\n        &.mode-label-disabled{\n          cursor: inherit;\n        }\n      }\n      .mode-label{\n        margin-left: 0.5rem;\n        cursor: pointer;\n        &.mode-label-disabled{\n          cursor: inherit;\n          color: var(--dark-200);\n        }\n      }\n      .confirmation-container {\n        .confirmation-item{\n          margin-top: 0.5rem;\n          margin-bottom: 0.5rem;\n        }\n      }\n\n      .position-size-setting{\n        display: flex;\n        justify-content: space-between;\n\n        .position-container{\n          position: relative;\n          width: 90px;\n          height: 90px;\n          border: 1px solid var(--light-500);\n\n          .content {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            padding: 6px;\n            justify-content: space-between;\n          }\n\n          .w-part {\n            width: 19px;\n            position: relative;\n            z-index: 0;\n            &.w-center {\n              width: 24px;\n              justify-content: space-between;\n            }\n          }\n          .h-part {\n            width: 100%;\n            height: 19px;\n            position: relative;\n            z-index: 0;\n            &.h-center {\n              height: 24px;\n            }\n          }\n\n          .from-left {\n            &.line-h{\n              &:after {\n                left: 6px;\n              }\n              &.is-selected:after {\n                border-left: none;\n              }\n            }\n          }\n          .from-top {\n            &.line-v{\n              &:after {\n                position: absolute;\n                top: 6px;\n              }\n              &.is-selected:after {\n                border-top: none;\n              }\n            }\n          }\n\n          .from-center {\n            border: 2px solid var(--dark-100);\n          }\n\n          .from-right {\n            &.line-h{\n              &:before {\n                position: absolute;\n                right: 0;\n              }\n              &:after {\n\n                right: 6px;\n              }\n              &.is-selected:after {\n                border-right: none;\n              }\n            }\n          }\n\n          .from-bottom {\n            &.line-v{\n              &:before {\n                position: absolute;\n                bottom: 0;\n              }\n              &:after {\n                position: absolute;\n                top: -2px;\n              }\n              &.is-selected:after {\n                border-bottom: none;\n              }\n            }\n          }\n          .line-h.is-selected,\n          .line-v.is-selected {\n            border-color: var(--primary-700);\n\n            &:before, &:after{\n              background: var(--primary-100);\n              border: 2px solid var(--primary-700);\n            }\n          }\n          .line-h {\n            position: absolute;\n            width: 100%;\n            top: 50%;\n            transform: translateY(-50%);\n            height: 24px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            z-index: 0;\n            cursor: pointer;\n\n            &:before {\n              content: '';\n              width: 6px;\n              height: 100%;\n              background: var(--dark-100);\n            }\n            &.is-selected:before {\n              width: 8px;\n            }\n\n            &:after {\n              position: absolute;\n              top: 9px;\n              content: '';\n              height: 6px;\n              width: 15px;\n              background: var(--dark-100);\n            }\n            &.is-selected:after {\n              height: 8px;\n            }\n          }\n          .line-v {\n            position: absolute;\n            height: 100%;\n            width: 100%;\n            left: 50%;\n            transform: translateX(-50%);\n            display: flex;\n            justify-content: center;\n            z-index: 0;\n            cursor: pointer;\n\n            &:before {\n              content: '';\n              width: 100%;\n              height: 6px;\n              background: var(--dark-100);\n            }\n            &.is-selected:before {\n              height: 8px;\n            }\n\n            &:after {\n              content: '';\n              width: 6px;\n              height: 15px;\n              background: var(--dark-100);\n            }\n            &.is-selected:after {\n              width: 8px;\n            }\n          }\n          .line-center {\n            height: 100%;\n            width: 100%;\n            z-index: 0;\n            cursor: pointer;\n            background: var(--dark-100);\n            &.is-selected {\n              background: var(--primary-100);\n              border-color: var(--primary-700);\n            }\n          }\n        }\n\n        .size-container{\n          width: calc(100% - 106px);\n          height: 90px;\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n\n          .size-label{\n            color: var(--dark-400);\n          }\n\n          .size-input{\n            margin-left: 6px;\n            width: 100%;\n            &.size-auto-input{\n              color: var(--dark-400);\n              background: var(--light-400);\n            }\n          }\n        }\n      }\n\n\n      .size-setting{\n        width: 100%;\n\n        .size-container{\n          height: 26px;\n          display: flex;\n          justify-content: space-between;\n\n          .unit-container{\n            display: flex;\n            width: calc(50% - 18px);\n\n            .size-label{\n              color: var(--dark-400);\n            }\n\n            .size-input{\n              margin-left: 6px;\n            }\n          }\n        }\n\n      }\n\n      .interaction-container{\n        .interaction-type-container{\n          display: flex;\n          justify-content: space-between;\n          .jimu-btn{\n            padding: 0;\n            background-color: var(--light-200);\n            &.active{\n              outline: 2px solid var(--primary-600);\n            }\n          }\n        }\n      }\n\n    "])))},t.prototype.render=function(){var e,t,n=this,o=this.props.dialogJson,i=o.isSplash||B.utils.getPageListByDialogId(this.getAppConfig().pages,o.id).length>0;if(!o.id)return null;var r=o.mode===z.DialogMode.Anchored?[L.UnitTypes.PIXEL]:[L.UnitTypes.PIXEL,L.UnitTypes.PERCENTAGE];this.interactionStyles=o.interactionStyles?o.interactionStyles:this.defaultInteractionStyles();var a=o.interactionType?this.formatMessage(o.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText"):"";return Object(z.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},Object(z.jsx)(U.SettingSection,{title:this.formatMessage("mode")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("fixedModeTip")},Object(z.jsx)("div",{className:"align-items-center d-flex"},Object(z.jsx)(L.Radio,{className:"mode-radio",onChange:function(){return n.setDialogMode(z.DialogMode.Fixed)},checked:o.mode===z.DialogMode.Fixed}),Object(z.jsx)("label",{className:"mode-label",onClick:function(){return n.setDialogMode(z.DialogMode.Fixed)}},this.formatMessage("fixedMode")))))),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:i?this.formatMessage(o.isSplash?"splashDlgWarning":"pageDlgWarning"):this.formatMessage("anchoredModeTip")},Object(z.jsx)("div",{className:"align-items-center d-flex"},Object(z.jsx)(L.Radio,{className:Object(z.classNames)("mode-radio",i?"mode-radio-disabled":""),onChange:function(){return n.setDialogMode(z.DialogMode.Anchored)},checked:o.mode===z.DialogMode.Anchored,disabled:i}),Object(z.jsx)("label",{className:Object(z.classNames)("mode-label",i?"mode-label-disabled":""),onClick:function(){return!i&&n.setDialogMode(z.DialogMode.Anchored)}},this.formatMessage("anchoredMode"))))))),Object(z.jsx)(U.SettingSection,{title:o.mode===z.DialogMode.Fixed?this.formatMessage("position")+" & "+this.formatMessage("size"):this.formatMessage("size")},Object(z.jsx)(U.SettingRow,null,o.mode===z.DialogMode.Fixed?Object(z.jsx)("div",{className:"position-size-setting"},Object(z.jsx)("div",{className:"position-container"},Object(z.jsx)("div",{className:"content d-flex"},Object(z.jsx)("div",{className:"w-part flex-column justify-content-center align-items-center"},Object(z.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("left")},Object(z.jsx)("div",{className:Object(z.classNames)("from-left line-h flex-grow-1 flex-shrink-1",{"is-selected":o.position===z.DialogPosition.Left}),onClick:function(){n.setDialogPosition(z.DialogPosition.Left)}})))),Object(z.jsx)("div",{className:"d-flex w-part w-center h-100 flex-column"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("top")},Object(z.jsx)("div",{className:"h-part"},Object(z.jsx)("div",{className:Object(z.classNames)("from-top line-v flex-grow-1 flex-shrink-1",{"is-selected":o.position===z.DialogPosition.Top}),onClick:function(){n.setDialogPosition(z.DialogPosition.Top)}}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("center")},Object(z.jsx)("div",{className:"h-part h-center"},Object(z.jsx)("div",{className:Object(z.classNames)("from-center line-center flex-grow-1 flex-shrink-1",{"is-selected":o.position===z.DialogPosition.Center}),onClick:function(){n.setDialogPosition(z.DialogPosition.Center)}}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("bottom")},Object(z.jsx)("div",{className:"h-part"},Object(z.jsx)("div",{className:Object(z.classNames)("from-bottom line-v flex-grow-1 flex-shrink-1",{"is-selected":o.position===z.DialogPosition.Bottom}),onClick:function(){n.setDialogPosition(z.DialogPosition.Bottom)}})))),Object(z.jsx)("div",{className:"w-part flex-column"},Object(z.jsx)("div",{className:"d-flex w-100 justify-content-center align-items-center"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("right")},Object(z.jsx)("div",{className:Object(z.classNames)("from-right line-h flex-grow-1 flex-shrink-1",{"is-selected":o.position===z.DialogPosition.Right}),onClick:function(){n.setDialogPosition(z.DialogPosition.Right)}})))))),Object(z.jsx)("div",{className:"size-container"},Object(z.jsx)("div",{className:"d-flex"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("width")},Object(z.jsx)("label",{className:"size-label"},"W")),o.mode!==z.DialogMode.Fixed||o.position!==z.DialogPosition.Top&&o.position!==z.DialogPosition.Bottom?Object(z.jsx)(F.InputUnit,{className:"size-input",units:r,value:this.getDialogSize("width"),min:0,onChange:function(e){return n.setDialogSize("width",e)}}):Object(z.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))),Object(z.jsx)("div",{className:"d-flex justify-content-center"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:o.position!==z.DialogPosition.Center?"":this.formatMessage("aspectRatio")},Object(z.jsx)(L.Button,{icon:!0,type:"tertiary",disabled:o.position!==z.DialogPosition.Center,onClick:function(){return n.editDialogProperty("aspectRatio",!o.aspectRatio)}},Object(z.jsx)(L.Icon,{size:12,icon:o.aspectRatio?ie:re})))),Object(z.jsx)("div",{className:"d-flex"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("height")},Object(z.jsx)("label",{className:"size-label"},"H")),o.mode!==z.DialogMode.Fixed||o.position!==z.DialogPosition.Left&&o.position!==z.DialogPosition.Right?Object(z.jsx)(F.InputUnit,{className:"size-input",units:r,value:this.getDialogSize("height"),min:0,onChange:function(e){return n.setDialogSize("height",e)}}):Object(z.jsx)("div",{className:"size-input p-1 size-auto-input"},this.formatMessage("auto"))))):Object(z.jsx)("div",{className:"size-setting"},Object(z.jsx)("div",{className:"size-container"},Object(z.jsx)("div",{className:"unit-container"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("width")},Object(z.jsx)("label",{className:"size-label"},"W")),Object(z.jsx)(F.InputUnit,{className:"size-input",units:r,value:this.getDialogSize("width"),min:0,onChange:function(e){return n.setDialogSize("width",e)}})),Object(z.jsx)("div",null,Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("aspectRatio")},Object(z.jsx)(L.Button,{icon:!0,type:"tertiary",size:"sm",onClick:function(){return n.editDialogProperty("aspectRatio",!o.aspectRatio)}},Object(z.jsx)(L.Icon,{size:12,icon:o.aspectRatio?ie:re})))),Object(z.jsx)("div",{className:"unit-container"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("height")},Object(z.jsx)("label",{className:"size-label"},"H")),Object(z.jsx)(F.InputUnit,{className:"size-input",units:r,value:this.getDialogSize("height"),min:0,onChange:function(e){return n.setDialogSize("height",e)}})))))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("closeOptions")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(L.Label,{check:!0,className:"justify-content-start align-items-start"},Object(z.jsx)(L.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:o.closeWhenClickOverlay,onChange:function(){return n.editDialogProperty("closeWhenClickOverlay",!o.closeWhenClickOverlay)}}),this.formatMessage("clickOutside"))),o.mode===z.DialogMode.Fixed&&Object(z.jsx)("div",{className:"mt-3"},Object(z.jsx)(U.SettingRow,{label:this.formatMessage("interaction")},Object(z.jsx)(L.Switch,{checked:!!o.interactionType,onChange:function(e,t){return n.setInteraction(t)}})),o.interactionType&&Object(z.jsx)("div",{className:"interaction-container mt-3"},Object(z.jsx)(U.SettingRow,{className:"confirmation-item",label:this.formatMessage("style")}),Object(z.jsx)("div",{className:"interaction-type-container mt-3 mb-3"},Object(z.jsx)(L.Tooltip,{title:this.formatMessage("interactionStyle1"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,size:"sm",type:"tertiary",onClick:function(){return n.changeInteractionType(z.DialogInteractionType.NoButton)},active:o.interactionType===z.DialogInteractionType.NoButton},Object(z.jsx)(L.Icon,{width:68,height:26,icon:ae,flip:this.isRTL?"horizontal":null}))),Object(z.jsx)(L.Tooltip,{title:this.formatMessage("interactionStyle2"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,size:"sm",type:"tertiary",onClick:function(){return n.changeInteractionType(z.DialogInteractionType.ButtonInline)},active:o.interactionType===z.DialogInteractionType.ButtonInline},Object(z.jsx)(L.Icon,{width:68,height:26,icon:se,flip:this.isRTL?"horizontal":null}))),Object(z.jsx)(L.Tooltip,{title:this.formatMessage("interactionStyle3"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,size:"sm",type:"tertiary",onClick:function(){return n.changeInteractionType(z.DialogInteractionType.ButtonBlock)},active:o.interactionType===z.DialogInteractionType.ButtonBlock},Object(z.jsx)(L.Icon,{width:68,height:26,icon:ce,flip:this.isRTL?"horizontal":null})))),Object(z.jsx)(U.SettingRow,{className:"confirmation-item",label:this.formatMessage("type")}),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},Object(z.jsx)("div",{className:"align-items-center d-flex"},Object(z.jsx)(L.Radio,{className:"mode-radio",onChange:function(){return n.setConfirmationType(!0)},checked:o.confirmBeforeClose}),Object(z.jsx)("label",{className:"mode-label",onClick:function(){return n.setConfirmationType(!0)}},this.formatMessage("confirmation"))))),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},Object(z.jsx)("div",{className:"align-items-center d-flex"},Object(z.jsx)(L.Radio,{className:"mode-radio",onChange:function(){return n.setConfirmationType(!1)},checked:!o.confirmBeforeClose}),Object(z.jsx)("label",{className:"mode-label",onClick:function(){return n.setConfirmationType(!1)}},this.formatMessage("preventDisplayAgain"))))),Object(z.jsx)("div",{className:"confirmation-container mt-3 mb-3"},Object(z.jsx)(U.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxText")}),Object(z.jsx)("div",{className:"confirmation-item"},Object(z.jsx)(L.TextInput,{type:"textarea",className:"w-100",style:{height:"60px"},spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:(null===(e=this.interactionStyles)||void 0===e?void 0:e.text)||a,onBlur:function(e){n.updateCheckboxText("text",e.target.value,a)}})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("fontSize")},Object(z.jsx)(F.InputUnit,{style:{width:"80px"},units:[L.UnitTypes.PIXEL,L.UnitTypes.REM],value:this.getFontSize("textSize"),onChange:function(e){n.updateCheckboxTextSize("textSize",e.distance+e.unit)}})),o.interactionType!==z.DialogInteractionType.NoButton&&Object(z.jsx)("div",null,Object(z.jsx)(U.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxButtonText")}),Object(z.jsx)(U.SettingRow,{className:"confirmation-item"},Object(z.jsx)(L.TextInput,{type:"text",size:"sm",className:"w-100",spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:(null===(t=this.interactionStyles)||void 0===t?void 0:t.buttonText)||this.formatMessage("ok"),onBlur:function(e){n.updateCheckboxText("buttonText",e.target.value,n.formatMessage("ok"))}})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("fontSize")},Object(z.jsx)(F.InputUnit,{style:{width:"80px"},units:[L.UnitTypes.PIXEL,L.UnitTypes.REM],value:this.getFontSize("buttonTextSize"),onChange:function(e){n.updateCheckboxTextSize("buttonTextSize",e.distance+e.unit)}})))),o.confirmBeforeClose&&Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(L.Label,{check:!0,className:"justify-content-start align-items-start"},Object(z.jsx)(L.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:o.alwaysShowConfirmation,onChange:function(){return n.editDialogProperty("alwaysShowConfirmation",!o.alwaysShowConfirmation)}}),this.formatMessage("alwaysShow")))))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("animation")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.AnimationSettingComponent,{effectSetting:o.effect,oneByOneSetting:o.oneByOneEffect,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),o.mode===z.DialogMode.Fixed&&Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,{label:this.formatMessage("maskColor")},Object(z.jsx)(H.ThemeColorPicker,{specificTheme:this.props.appTheme,value:o.overlayColor,onChange:this.updateDialogMask}))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("background")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.BackgroundSetting,{background:this.getDialogBackgroud(),onChange:this.updateDialogBackgroud}))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("border")},Object(z.jsx)(U.SettingRow,{flow:"wrap"},Object(z.jsx)(F.BorderSetting,{value:o.border,onChange:this.updateBorder})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("borderRadius"),flow:"wrap"},Object(z.jsx)(F.BorderRadiusSetting,{value:o.borderRadius,onChange:this.updateBorderRadius}))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("boxShadow")},Object(z.jsx)(U.SettingRow,{flow:"wrap"},Object(z.jsx)(F.BoxShadowSetting,{value:o.boxShadow,onChange:this.updateShadow}))))},t}(z.React.PureComponent),he=z.ReactRedux.connect((function(e,t){return{dialogJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs[t.dialogId]||{}}}))(ue),fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},be=n(36),ve=n(37),we=n(65),je={value:"",openType:U.OpenTypes.NewWindow,linkType:z.LinkType.WebAddress},xe=function(e){function t(t){var n=e.call(this,t)||this;return n.getCurrentPageName=function(e){var t=e.appConfig,n=e.pageId;return t.pages[n].label||""},n.openBrowseImage=function(){var e=n.fileInput.current.files;if(e&&e[0]){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(e){var t=e.target;n.changeIcon(t.result)}}},n.setImageUrl=function(){var e=n.state.currentImgUrlInput;""!=e&&(n.setState({isSetImageUrl:!1}),n.changeIcon(e))},n.getPageType=function(e){var t=n.props.appConfig.pages;for(var o in t){var i=t[o];if(i.id===e)return i}return{}},n.settingLinkConfirm=function(e){n.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&n.setState({currentUrl:e.value}),n.changeUrl(e.value,e.openType)},n.changeUrl=function(e,t){var o=n.props.appConfig.pages[n.props.pageId],i=Object(z.Immutable)(o).merge({linkUrl:e||"#",openTarget:t});Object(B.getAppConfigAction)().editPage(i).exec(),je.value=e,je.openType=t},n.changeIcon=function(e){var t=n.props.appConfig.pages[n.props.pageId],o=Object(z.Immutable)(t).merge({icon:e});Object(B.getAppConfigAction)().editPage(o).exec()},n.formatMessage=function(e){return n.props.formatMessage(e)},n.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:n.props.currentUrl||""},n.fileInput=z.React.createRef(),n}return fe(t,e),t.prototype.resetLinkParam=function(){je.value="",je.openType=U.OpenTypes.NewWindow;var e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!=e.linkUrl&&(je.value=e.linkUrl),e&&e.openTarget&&(je.openType=e.openTarget)},t.prototype.getStyle=function(e){return Object(z.css)(a||(a=me(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "])))},t.prototype.render=function(){var e=this,t=this.state,n=t.isSetImageUrl,o=t.currentImgUrlInput,i=t.isShowLinkSetting;return this.resetLinkParam(),Object(z.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},Object(z.jsx)(U.SettingSection,null,n&&Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},Object(z.jsx)(L.TextInput,{className:"border-0 w-100",value:o,placeholder:this.formatMessage("urlIsHere")+"...",onChange:function(t){e.setState({currentImgUrlInput:t.target.value})},onKeyUp:this.setImageUrl}),Object(z.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},Object(z.jsx)(L.Icon,{icon:ve,className:"float-right"})),Object(z.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:function(){e.setState({isSetImageUrl:!1})}},Object(z.jsx)(L.Icon,{icon:be,className:"float-right"})))),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(L.Button,{className:"w-100 text-dark set-link-btn",onClick:function(){e.setState({isShowLinkSetting:!i})}},Object(z.jsx)(L.Icon,{icon:we,className:"mr-3"}),"Set link"))),i&&Object(z.jsx)(U.LinkSettingPopup,{isOpen:i,isLinkPageSetting:!0,linkParam:je,onSettingCancel:function(){e.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm}))},t.mapExtraStateProps=function(e){return{pageId:e.appRuntimeInfo.currentPageId}},t}(z.React.PureComponent),ye=z.themeUtils.withTheme(xe),Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Se=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Oe=n(36),Ce=n(37),Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.getCurrentPageName=function(e){var t=e.appConfig,n=e.pageId;return t.pages[n].label||""},n.openBrowseImage=function(){var e=n.fileInput.current.files;if(e&&e[0]){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(e){var t=e.target;n.changeIcon(t.result)}}},n.setImageUrl=function(){var e=n.state.currentImgUrlInput;""!=e&&(n.setState({isSetImageUrl:!1}),n.changeIcon(e))},n.formatMessage=function(e){return n.props.formatMessage(e)},n.getPageType=function(e){var t=n.props.appConfig.pages;for(var o in t){var i=t[o];if(i.id===e)return i}return{}},n.changeIcon=function(e){var t=n.props.appConfig.pages[n.props.pageId],o=Object(z.Immutable)(t).merge({icon:e});Object(B.getAppConfigAction)().editPage(o).exec()},n.state={isSetImageUrl:!1,currentImgUrlInput:""},n.fileInput=z.React.createRef(),n}return Ie(t,e),t.prototype.getStyle=function(){return Object(z.css)(s||(s=Se(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "])))},t.prototype.render=function(){var e=this,t=this.state,n=t.isSetImageUrl,o=t.currentImgUrlInput;return Object(z.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(L.TextInput,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),n&&Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},Object(z.jsx)(L.TextInput,{className:"border-0 w-100",value:o,placeholder:this.formatMessage("urlIsHere")+"...",onChange:function(t){e.setState({currentImgUrlInput:t.target.value})},onKeyUp:this.setImageUrl}),Object(z.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},Object(z.jsx)(L.Icon,{icon:Ce,className:"float-right"})),Object(z.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:function(){e.setState({isSetImageUrl:!1})}},Object(z.jsx)(L.Icon,{icon:Oe,className:"float-right"}))))))},t.mapExtraStateProps=function(e){return{pageId:e.appRuntimeInfo.currentPageId}},t}(z.React.PureComponent),Me=n(10),Te=n(9),ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ne=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Pe=function(e){function t(t){var n=e.call(this,t)||this;return n.onDidDrop=function(e,t,o){var i=n.props.sectionId;"moveInto"===o||Object(B.getAppConfigAction)().moveViewInSection(i,e.id,t.id,o).exec()},n.onDropHover=function(e){n.state.dropType!==e&&n.setState({dropType:e})},n.formatMessage=function(e){return n.props.formatMessage(e)},n._select=function(e){e.stopPropagation(),n.props.onSelect(n.props.view.id)},n._enableEditing=function(e){e.stopPropagation(),n.dragInteractable.draggable(!1),n.setState({editingLabel:!0})},n._disableEditing=function(){n._onLabelUpdate(n.inputRef.value),n.dragInteractable.draggable(!0),n.setState({editingLabel:!1})},n._onLabelUpdate=function(e){if(e&&(""+e).trim().length>0){var t=n.props.view,o=Object(z.Immutable)(t).set("label",e);Object(B.getAppConfigAction)().editView(o).exec()}else n.inputRef.value=n.props.view.label},n._showBackgroundWidget=function(){n.props.showBackgroundWidget(n.props.index)},n.state={editingLabel:!1,dropType:"none",isDragging:!1,isHovering:!1},n.dropDownItems=[Object(z.Immutable)({label:n.formatMessage("rename"),event:n._enableEditing.bind(n),visible:!0}),Object(z.Immutable)({label:n.formatMessage("duplicate"),event:n._duplicateView.bind(n),visible:!0}),Object(z.Immutable)({label:n.formatMessage("sectionDelete"),event:n._removeView.bind(n),visible:!0})],n.readonlyDropDownItems=[n.dropDownItems[0]],n.dropDownItemsWithoutDelete=[n.dropDownItems[0],n.dropDownItems[1]],n}return ke(t,e),t.prototype.componentWillUnmount=function(){this.dragInteractable&&(this.dragInteractable.unset(),this.dragInteractable=null),this.dropZoneInteractable&&(this.dropZoneInteractable.unset(),this.dropZoneInteractable=null)},t.prototype.componentDidUpdate=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype.componentDidMount=function(){var e=this;if(this.inputRef&&(this.inputRef.select(),this.inputRef.focus()),this.dropZoneRef&&this.dragRef){var t=this.props.view,n=null;this.dragRef.setAttribute("itemJson",JSON.stringify(t)),this.dropZoneInteractable=Object(Te.interact)(this.dropZoneRef).dropzone({accept:".view-item-drag",overlap:"pointer",ondropactivate:function(e){},ondropmove:function(n){var o=n.relatedTarget,i=n.target,r=JSON.parse(o.getAttribute("itemJson")),a=i.getBoundingClientRect(),s=(a.bottom-a.top)/2,c=n.dragEvent.client.y-a.top,l=e.state.dropType;l=r.id!==t.id?0===e.props.index?c>s?"below":"above":"below":"none",e.onDropHover(l)},ondragenter:function(e){},ondragleave:function(t){e.onDropHover("none")},ondrop:function(n){var o=e.state.dropType;if("none"!==o){var i=n.relatedTarget,r=JSON.parse(i.getAttribute("itemJson"));e.onDidDrop(r,t,o),e.onDropHover("none")}},ondropdeactivate:function(e){}}),this.dragInteractable=Object(Te.interact)(this.dragRef).draggable({inertia:!1,modifiers:[],autoScroll:!0,onstart:function(t){e.setState({isDragging:!0});var n=e.props.onTocDragStatusChage;n&&n(!0)},onmove:function(e){var t=e.clientX,o=e.clientY,i=e.clientX0,r=e.clientY0,a=e.target,s=parseFloat(a.getAttribute("start-x"))||0,c=parseFloat(a.getAttribute("start-y"))||0,l=t-i+s,p=o-r+c,d=-a.clientWidth/2,g=a.clientWidth/2;l<d?l=d:l>g&&(l=g),n&&cancelAnimationFrame(n),n=requestAnimationFrame((function(){a.style.webkitTransform=a.style.transform="translate("+l+"px, "+p+"px)",n=null}))},onend:function(t){var o=t.target;n&&cancelAnimationFrame(n),o.style.webkitTransform=o.style.transform="translate(0px, 0px)",e.setState({isDragging:!1});var i=e.props.onTocDragStatusChage;i&&i(!1)}})}},t.prototype._removeView=function(){var e=this.props,t=e.view,n=e.sectionId,o=e.selected,i=Object(B.getAppConfigAction)().appConfig.sections[n].views;if(o){var r=i.indexOf(t.id),a=void 0;a=r>0?i[r-1]:i[1],B.builderAppSync.publishSectionNavInfoToApp(n,{currentViewId:a,useProgress:!1})}Object(B.getAppConfigAction)().removeView(t.id,n).exec()},t.prototype._duplicateView=function(){var e=this;if(this.props.view){var t=Object(B.getAppConfigAction)(),n=t.duplicateView(this.props.view.id,this.props.sectionId,!0);t.exec(),z.lodash.defer((function(){e.props.onSelect(n.id)}))}},t.prototype._focusInput=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype._getStyle=function(){var e=this.props,t=e.theme,n=e.isListDragging,o=this.state,i=o.isHovering,r=o.isDragging;return Object(z.css)(c||(c=Ne(["\n    padding: 2px 10px;\n    cursor: pointer;\n    position: relative;\n    .drop-down {\n      visibility: hidden;\n      text-align:right;\n      .popover{\n        .popover-inner {\n          box-shadow: 0 0 0;\n        }\n      }\n    }\n    .drag-icon {\n      visibility: hidden;\n      margin-right:",";\n      color:",";\n    }\n    .view-item-drag:hover {\n      cursor: pointer !important;\n    }\n    .label-con {\n      width: ",";\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      display: flex;\n      align-items: center;\n    }\n    .label-input {\n      width: ",";\n    }\n    .view-item-drag {\n      pointer-events: ",";\n      z-index: 1;\n      position: absolute;\n      padding: 2px 10px;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background-color: ",";\n      box-shadow: ",";\n    }\n\n    .drag-move-out-order-bottom {\n      background-color: ",";\n      :after{\n        content: '';\n        position: absolute;\n        left: 0;\n        top: auto;\n        bottom: 0;\n        right: auto;\n        height: 2px;\n        width: 100%;\n        background-color: ",";\n      }\n    }\n\n    .drag-move-out-order-top {\n      background-color: ",";\n      :before {\n\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: auto;\n        right: auto;\n        height: 2px;\n        width: 100%;\n        background-color: ",";\n      }\n    }\n\n\n    &.selected {\n      ","\n      border: 0;\n      background-color: ",";\n    }\n\n    &:hover {\n      .drop-down {\n        visibility: visible;\n      }\n      .drag-icon {\n        visibility: visible;\n      }\n    }\n\n    &:not(.selected):hover {\n      background-color: ",";\n    }\n    "],["\n    padding: 2px 10px;\n    cursor: pointer;\n    position: relative;\n    .drop-down {\n      visibility: hidden;\n      text-align:right;\n      .popover{\n        .popover-inner {\n          box-shadow: 0 0 0;\n        }\n      }\n    }\n    .drag-icon {\n      visibility: hidden;\n      margin-right:",";\n      color:",";\n    }\n    .view-item-drag:hover {\n      cursor: pointer !important;\n    }\n    .label-con {\n      width: ",";\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      display: flex;\n      align-items: center;\n    }\n    .label-input {\n      width: ",";\n    }\n    .view-item-drag {\n      pointer-events: ",";\n      z-index: 1;\n      position: absolute;\n      padding: 2px 10px;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background-color: ",";\n      box-shadow: ",";\n    }\n\n    .drag-move-out-order-bottom {\n      background-color: ",";\n      :after{\n        content: '';\n        position: absolute;\n        left: 0;\n        top: auto;\n        bottom: 0;\n        right: auto;\n        height: 2px;\n        width: 100%;\n        background-color: ",";\n      }\n    }\n\n    .drag-move-out-order-top {\n      background-color: ",";\n      :before {\n\n        content: '';\n        position: absolute;\n        left: 0;\n        top: 0;\n        bottom: auto;\n        right: auto;\n        height: 2px;\n        width: 100%;\n        background-color: ",";\n      }\n    }\n\n\n    &.selected {\n      ","\n      border: 0;\n      background-color: ",";\n    }\n\n    &:hover {\n      .drop-down {\n        visibility: visible;\n      }\n      .drag-icon {\n        visibility: visible;\n      }\n    }\n\n    &:not(.selected):hover {\n      background-color: ",";\n    }\n    "])),z.polished.rem(8),t.colors.palette.dark[600],z.polished.rem(123),z.polished.rem(123),i?"all":"none",r?z.polished.rgba(t.colors.palette.light[400],.6):"transparent",r?t.boxShadows.lg:"none",z.polished.rgba(t.colors.palette.light[400],.4),t.colors.palette.primary[700],z.polished.rgba(t.colors.palette.light[400],.4),t.colors.palette.primary[700],n?"":"background-color: "+t.colors.palette.light[500]+";",t.colors.palette.light[500],z.polished.rgba(t.colors.palette.light[500],.4))},t.prototype.render=function(){var e=this,t=this.props,o=t.theme,i=t.selected,r=t.listDraggingStatus,a=t.isListDragging,s=t.isLastItem,c=t.isFirstItem,l=t.editable,p=this.props.view.label,d=this.state,g=d.editingLabel,u="drag-move-out-order-"+d.dropType;a&&"on"!==r&&("below"===r&&s||"above"===r&&c)&&(u="drag-move-out-order-"+r),g&&this._focusInput();var h=Object(z.classNames)("d-flex justify-content-between w-100",{selected:i}),f=l?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return Object(z.jsx)("div",{ref:function(t){return e.dropZoneRef=t},css:this._getStyle(),className:h,onClick:this._select,"data-testid":"viewItem",onMouseEnter:function(t){return setTimeout((function(){e.setState({isHovering:!0})}),100)},onMouseLeave:function(t){return setTimeout((function(){e.setState({isHovering:!1})}),100)}},Object(z.jsx)("div",{className:"w-100 d-flex justify-content-between"},Object(z.jsx)("div",{className:"d-flex align-items-center"},Object(z.jsx)("div",{className:"toc-item-icon drag-icon"},Object(z.jsx)(L.Icon,{size:"12",icon:n(22),className:"header-title-icon"})),Object(z.jsx)("div",{className:"label-con",onDoubleClick:this._enableEditing},p)),Object(z.jsx)("div",{className:"drop-down d-flex toc-item-icon"},Object(z.jsx)(L.Button,{size:"sm",type:"tertiary",icon:!0},Object(z.jsx)(L.Icon,{size:"12",icon:n(29),className:"header-title-icon"})),Object(z.jsx)("div",{title:this.formatMessage("titleOption")},Object(z.jsx)(Me.a,{theme:o,items:f})))),Object(z.jsx)("div",{className:"w-100 view-item-drag  d-flex justify-content-between "+u,ref:function(t){return e.dragRef=t}},Object(z.jsx)("div",{className:"d-flex align-items-center"},Object(z.jsx)("div",{className:"toc-item-icon drag-icon"},Object(z.jsx)(L.Icon,{size:"12",icon:n(22),className:"header-title-icon"})),!g&&Object(z.jsx)("div",{title:p,className:"label-con",onDoubleClick:this._enableEditing},p),g&&Object(z.jsx)("div",null,Object(z.jsx)(L.TextInput,{title:p,className:"label-input",type:"text",value:p,ref:function(t){e.inputRef=t},onBlur:this._disableEditing}))),Object(z.jsx)("div",{className:"drop-down d-flex toc-item-icon"},Object(z.jsx)(L.Button,{size:"sm",type:"tertiary",icon:!0,onClick:this._showBackgroundWidget,title:this.formatMessage("titleBackground")},Object(z.jsx)(L.Icon,{size:"12",icon:n(29),className:"header-title-icon"})),Object(z.jsx)("div",{title:this.formatMessage("titleOption")},Object(z.jsx)(Me.a,{theme:o,items:f})))))},t}(z.React.PureComponent),Re=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ze=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},De=function(e){function t(t){var n=e.call(this,t)||this;return n.getEchoBackground=function(){var e,t,o,i=n.props,r=i.view,a=i.appTheme,s=r.backgroundPosition?r.backgroundPosition.toUpperCase():"";return t=null==r.backgroundColor&&a?null===(e=null==a?void 0:a.body)||void 0===e?void 0:e.bg:""===r.backgroundColor?"rgba(0,0,0,0)":r.backgroundColor?r.backgroundColor:"",r.backgroundIMage&&(o="object"==typeof r.backgroundIMage?r.backgroundIMage:{}),{fillType:s?L.FillType[s]:L.FillType.FIT,color:t,image:o}},n.onBackgroundStyleChange=function(e){n.setState({config:e});var t=e.image?e.image:{},o=Object(z.Immutable)({id:n.props.view.id,label:n.props.view.label,layout:n.props.view.layout,backgroundPosition:e.fillType,backgroundColor:e.color?e.color:null,backgroundIMage:t});Object(B.getAppConfigAction)().editView(o).exec()},n._getStyle=function(){var e=n.props.theme?n.props.theme.colors.palette.dark[600]:"#c5c5c5",t=n.props.theme?n.props.theme.colors.palette.dark[600]:"#a8a8a8";return Object(z.css)(l||(l=ze(["\n      &{\n        width: 100%;\n      }\n      .back-btn-con {\n        cursor: pointer;\n        align-items:center;\n      }\n      .back-button {\n        margin-right:",";\n        color:",";\n        font-size:",";\n      }\n      .background-set-back {\n        color:",";\n        font-weight:500;\n      }\n      .bg-section {\n        padding: 0;\n      }\n      .background-setting-header {\n        color: ",";\n        font-weight: 500;\n      }\n    "],["\n      &{\n        width: 100%;\n      }\n      .back-btn-con {\n        cursor: pointer;\n        align-items:center;\n      }\n      .back-button {\n        margin-right:",";\n        color:",";\n        font-size:",";\n      }\n      .background-set-back {\n        color:",";\n        font-weight:500;\n      }\n      .bg-section {\n        padding: 0;\n      }\n      .background-setting-header {\n        color: ",";\n        font-weight: 500;\n      }\n    "])),z.polished.rem(8),e,z.polished.rem(14),t,e)},n}return Re(t,e),t.prototype.render=function(){var e=this,t=this.props.theme?this.props.theme.colors.palette.dark[600]:"#a8a8a8";return this.props.view?Object(z.jsx)("div",{css:this._getStyle()},Object(z.jsx)(U.SettingSection,{className:"bg-section"},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"d-flex back-btn-con",onClick:this.props.hideBackgroundWidget},Object(z.jsx)("div",{className:"back-button"},Object(z.jsx)(L.Icon,{size:"16",color:t,autoFlip:!0,icon:n(38),className:"sort-arrow-down-icon"})),Object(z.jsx)("div",{className:"flex-grow-1 background-set-back"},this.props.formatMessage("actionBack")))),Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("h6",{className:"w-100 text-truncate background-setting-header"},this.props.formatMessage("background"))),Object(z.jsx)(U.SettingRow,{className:"background-setting-con",flow:"wrap"},Object(z.jsx)(F.BackgroundSetting,{background:this.getEchoBackground(),onChange:function(t){return e.onBackgroundStyleChange(t)}})))):null},t}(z.React.PureComponent),Be=z.ReactRedux.connect((function(e,t){var n=t.viewId;return{view:e.appStateInBuilder.appConfig.views[n]}}))(De),Le=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ee=n(66),We=n(39),Ue=n(40),He=n(41),Fe=n(67),Ve=[L.UnitTypes.PIXEL],Ze=function(e){function t(t){var n=e.call(this,t)||this;return n.onDidDrop=function(e,t,o){var i=n.props.sectionId;"moveInto"===o||Object(B.getAppConfigAction)().moveViewInSection(i,e.id,t.id,o).exec()},n.handleDraggingStatusChange=function(e){n.setState({draggingStatus:e})},n.formatMessage=function(e,t){return void 0===t&&(t=!1),t?n.props.intl.formatMessage({id:e,defaultMessage:z.defaultMessages[e]}):n.props.formatMessage(e)},n._addView=function(){var e,t=n.props,o=t.section,i=t.browserSizeMode,r=Object(B.getAppConfigAction)().appConfig,a=z.appConfigUtils.getUniqueId(r,"layout"),s=Object(z.Immutable)({}).merge({id:a,type:z.LayoutType.FixedLayout}),c=Object(z.Immutable)({}).merge({id:z.appConfigUtils.getUniqueId(r,"view"),label:z.appConfigUtils.getUniqueLabel(r,"view",n.formatMessage("view",!0)),layout:(e={},e[i]=a,e)});Object(B.getAppConfigAction)().addView(c,o.id,[s]).exec(),z.lodash.defer((function(){n._selectView(c.id)}))},n._duplicateView=function(){var e=n.props,t=e.activeViewId,o=e.sectionId,i=Object(B.getAppConfigAction)(),r=i.duplicateView(t,o,!0);i.exec(),z.lodash.defer((function(){n._selectView(r.id)}))},n._toggleViewList=function(){n.setState({isShowViewList:!n.state.isShowViewList})},n._selectView=function(e){var t=n.props.section;n.setState({selectedViewId:e}),B.builderAppSync.publishSectionNavInfoToApp(t.id,{previousViewId:n.props.activeViewId,currentViewId:e,useProgress:!1})},n._sortView=function(e,t){var o=n.props.section,i=o.views.asMutable(),r=i[e],a=i[t],s=(i=i.splice(e,1)).indexOf(a);i=i.splice(s,0,r);var c=Object(z.Immutable)(o).set("views",i);Object(B.getAppConfigAction)().editSection(c).exec()},n.handleOnTocDragStatusChange=function(e){n.setState({isViewListDragging:e})},n.getStyle=function(){return Object(z.css)(p||(p=_e(["\n      .toc-dropzone {\n        margin-top: 0.5rem;\n      }\n      .toc-dropzone .jimu-widget-setting--row.row{\n        margin-top: 0;\n      }\n      .jimu-widget-setting--row-label{\n        color:",";\n      }\n    "],["\n      .toc-dropzone {\n        margin-top: 0.5rem;\n      }\n      .toc-dropzone .jimu-widget-setting--row.row{\n        margin-top: 0;\n      }\n      .jimu-widget-setting--row-label{\n        color:",";\n      }\n    "])),n.props.theme.colors.palette.dark[600])},n.showBackgroundWidget=function(e){n.setState({isShowBackgroundWidget:!0,selectedViewId:n.props.section.views[e]})},n.hideBackgroundWidget=function(){n.setState({isShowBackgroundWidget:!1,selectedViewId:n.props.activeViewId})},n.onAutoPlayChanged=function(e){var t=n.props.section,o=Object(z.Immutable)(t).set("autoPlay",e.target.checked);Object(B.getAppConfigAction)().editSection(o).exec()},n.onLoopChanged=function(e){var t=n.props.section,o=Object(z.Immutable)(t).set("loop",e.target.checked);Object(B.getAppConfigAction)().editSection(o).exec()},n.onIntervalChanged=function(e){var t=+e;if(t>=1){var o=n.props.section,i=Object(z.Immutable)(o).set("interval",t);Object(B.getAppConfigAction)().editSection(i).exec()}},n.updateNav=function(e,t,o){var i=n.props.section,r=Object(z.Immutable)(i).setIn([e,t],o);Object(B.getAppConfigAction)().editSection(r).exec()},n.dropZoneRef=z.React.createRef(),n.viewListRef=z.React.createRef(),n.state={isViewListDragging:!1,draggingStatus:"on",isShowBackgroundWidget:!1,selectedViewId:n.props.activeViewId,isShowViewList:!0},n}return Le(t,e),t.prototype.componentDidMount=function(){var e=this;this.dropZoneRef.current&&(this.dropZoneInteractable=Object(Te.interact)(this.dropZoneRef.current).dropzone({accept:".view-item-drag",overlap:"pointer",ondropactivate:function(e){},ondropmove:function(e){},ondragenter:function(t){console.log("enter view-list");var n=e.props.views,o=t.relatedTarget,i=t.dragEvent;if(e.viewListRef.current&&n&&n.length>0){var r=JSON.parse(o.getAttribute("itemJson")),a=e.viewListRef.current.getBoundingClientRect().top;if(i.client.y<a)n[0].id!==r.id&&e.handleDraggingStatusChange("top");else n[n.length-1].id!==r.id&&e.handleDraggingStatusChange("bottom")}},ondragleave:function(t){e.handleDraggingStatusChange("on"),console.log("leave view-list")},ondrop:function(t){var n=e.props.views,o=e.state.draggingStatus;if("on"!==o){var i=void 0;if("below"===o)i=n[n.length-1];else i=n[0];var r=t.relatedTarget,a=JSON.parse(r.getAttribute("itemJson"));e.onDidDrop(a,i,o),e.handleDraggingStatusChange("on")}},ondropdeactivate:function(e){}}))},t.prototype.componentDidUpdate=function(e){var t=this.props.activeViewId;e.activeViewId!==t&&t!==this.state.selectedViewId&&this.hideBackgroundWidget()},t.prototype.componentWillUnmount=function(){this.dropZoneInteractable&&(this.dropZoneInteractable.unset(),this.dropZoneInteractable=null)},t.prototype.render=function(){var e,t,n,o,i,r,a,s,c,l,p,I,S,O,C,A,M,T=this,k=this.props,N=k.section,P=k.views,R=k.theme,D=k.dispatch,B=k.activeViewId,_=k.editable,E=this.state,W=E.isViewListDragging,H=E.draggingStatus,V=E.isShowBackgroundWidget;if(!N)return null;var Z=Object(z.css)(d||(d=_e(["\n      cursor:pointer;\n      margin-top: ",";\n\n      .toggle-view {\n        transform: ",";\n        transition: transform 500ms;\n      }\n    "],["\n      cursor:pointer;\n      margin-top: ",";\n\n      .toggle-view {\n        transform: ",";\n        transition: transform 500ms;\n      }\n    "])),z.polished.rem(-8),this.state.isShowViewList?null:"rotate(180deg)"),G=null!==(t=null===(e=N.dotsNav)||void 0===e?void 0:e.position)&&void 0!==t?t:"b";return Object(z.jsx)("div",{className:"flexbox-layout-setting h-100",css:this.getStyle()},Object(z.jsx)("div",{ref:this.dropZoneRef,className:"h-100 w-100"},!V&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,{label:this.formatMessage("views")},this.state.isShowViewList&&_&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)(L.Button,{css:Z,type:"link",onClick:this._addView,title:this.formatMessage("newView")},Object(z.jsx)(L.Icon,{icon:Ue,color:this.props.theme.colors.palette.dark[400],className:"mr-0"})),Object(z.jsx)(L.Button,{css:Z,type:"link",onClick:this._duplicateView,title:this.formatMessage("dsDuplicateView")},Object(z.jsx)(L.Icon,{icon:He,color:this.props.theme.colors.palette.dark[400],className:"mr-0"}))),Object(z.jsx)(L.Button,{css:Z,type:"link",onClick:this._toggleViewList,title:this.formatMessage("toggleViewList")},Object(z.jsx)(L.Icon,{icon:Fe,color:this.props.theme.colors.palette.dark[400],className:"mr-0 toggle-view"}))),this.state.isShowViewList&&Object(z.jsx)("div",{ref:this.viewListRef,className:"toc-dropzone"},P.asMutable().map((function(e,t){return Object(z.jsx)(U.SettingRow,{key:e.id},Object(z.jsx)(Pe,{index:t,canRemove:P.length>1,formatMessage:T.formatMessage,isLastItem:t===P.length-1,dispatch:D,sectionId:N.id,theme:R,view:e,isFirstItem:0===t,onSelect:T._selectView,isListDragging:W,listDraggingStatus:H,selected:B===e.id,onTocDragStatusChage:T.handleOnTocDragStatusChange,moveItem:T._sortView,showBackgroundWidget:T.showBackgroundWidget,editable:_}))})))),Object(z.jsx)(U.SettingSection,{title:this.formatMessage("tools")},Object(z.jsx)(U.SettingRow,{label:this.formatMessage("arrows")},Object(z.jsx)(L.Switch,{checked:null===(n=N.arrowsNav)||void 0===n?void 0:n.visible,onChange:function(){var e,t;return T.updateNav("arrowsNav","visible",!(null!==(t=null===(e=N.arrowsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(o=N.arrowsNav)||void 0===o?void 0:o.visible)&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)(U.SettingRow,{label:this.formatMessage("direction")},Object(z.jsx)(L.ButtonGroup,{size:"sm"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("horizontal")},Object(z.jsx)(L.Button,{icon:!0,active:"v"!==N.arrowsNav.direction,onClick:function(){return T.updateNav("arrowsNav","direction","h")}},Object(z.jsx)(L.Icon,{size:12,icon:Ee}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("vertical")},Object(z.jsx)(L.Button,{icon:!0,active:"v"===N.arrowsNav.direction,onClick:function(){return T.updateNav("arrowsNav","direction","v")}},Object(z.jsx)(L.Icon,{size:12,icon:Ee,rotate:90}))))),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("size"),flow:"wrap"},Object(z.jsx)(L.Slider,{min:5,max:100,step:1,value:null!==(i=N.arrowsNav.size)&&void 0!==i?i:12,css:Object(z.css)(g||(g=_e(["width: 50%"],["width: 50%"]))),onChange:function(e){return T.updateNav("arrowsNav","size",e.target.value)}}),Object(z.jsx)(F.InputUnit,{min:5,max:100,units:Ve,value:(null!==(r=N.arrowsNav.size)&&void 0!==r?r:12)+"px",onChange:function(e){return T.updateNav("arrowsNav","size",e.distance)},css:Object(z.css)(u||(u=_e(["width: 40%; margin-left: auto;"],["width: 40%; margin-left: auto;"])))})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("offset"),flow:"wrap"},Object(z.jsx)(L.Slider,{min:-100,max:100,step:1,value:null!==(a=N.arrowsNav.offset)&&void 0!==a?a:0,css:Object(z.css)(h||(h=_e(["width: 50%"],["width: 50%"]))),onChange:function(e){return T.updateNav("arrowsNav","offset",e.target.value)}}),Object(z.jsx)(F.InputUnit,{min:-100,max:100,units:Ve,value:(null!==(s=N.arrowsNav.offset)&&void 0!==s?s:0)+"px",onChange:function(e){return T.updateNav("arrowsNav","offset",e.distance)},css:Object(z.css)(f||(f=_e(["width: 40%; margin-left: auto;"],["width: 40%; margin-left: auto;"])))}))),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("dots")},Object(z.jsx)(L.Switch,{checked:null===(c=N.dotsNav)||void 0===c?void 0:c.visible,onChange:function(){var e,t;return T.updateNav("dotsNav","visible",!(null!==(t=null===(e=N.dotsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(l=N.dotsNav)||void 0===l?void 0:l.visible)&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)(U.SettingRow,{label:this.formatMessage("position")},Object(z.jsx)(L.ButtonGroup,{size:"sm"},Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("left")},Object(z.jsx)(L.Button,{icon:!0,active:"l"===G,onClick:function(){return T.updateNav("dotsNav","position","l")}},Object(z.jsx)(L.Icon,{size:12,icon:We}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("top")},Object(z.jsx)(L.Button,{icon:!0,active:"t"===G,onClick:function(){return T.updateNav("dotsNav","position","t")}},Object(z.jsx)(L.Icon,{size:12,icon:We,rotate:90}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("right")},Object(z.jsx)(L.Button,{icon:!0,active:"r"===G,onClick:function(){return T.updateNav("dotsNav","position","r")}},Object(z.jsx)(L.Icon,{size:12,icon:We,rotate:180}))),Object(z.jsx)(L.Tooltip,{placement:"bottom",title:this.formatMessage("bottom")},Object(z.jsx)(L.Button,{icon:!0,active:"b"===G,onClick:function(){return T.updateNav("dotsNav","position","b")}},Object(z.jsx)(L.Icon,{size:12,icon:We,rotate:-90}))))),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("size"),flow:"wrap"},Object(z.jsx)(L.Slider,{min:5,max:30,step:1,value:null!==(p=N.dotsNav.size)&&void 0!==p?p:8,css:Object(z.css)(m||(m=_e(["width: 50%"],["width: 50%"]))),onChange:function(e){return T.updateNav("dotsNav","size",e.target.value)}}),Object(z.jsx)(F.InputUnit,{min:5,max:30,units:Ve,value:(null!==(I=N.dotsNav.size)&&void 0!==I?I:8)+"px",onChange:function(e){return T.updateNav("dotsNav","size",e.distance)},css:Object(z.css)(b||(b=_e(["width: 40%; margin-left: auto;"],["width: 40%; margin-left: auto;"])))})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("offset"),flow:"wrap"},Object(z.jsx)(L.Slider,{min:-100,max:100,step:1,value:null!==(S=N.dotsNav.offset)&&void 0!==S?S:50,css:Object(z.css)(v||(v=_e(["width: 50%"],["width: 50%"]))),onChange:function(e){return T.updateNav("dotsNav","offset",e.target.value)}}),Object(z.jsx)(F.InputUnit,{min:-100,max:100,units:Ve,value:(null!==(O=N.dotsNav.offset)&&void 0!==O?O:50)+"px",onChange:function(e){return T.updateNav("dotsNav","offset",e.distance)},css:Object(z.css)(w||(w=_e(["width: 40%; margin-left: auto;"],["width: 40%; margin-left: auto;"])))})),Object(z.jsx)(U.SettingRow,{label:this.formatMessage("spacing"),flow:"wrap"},Object(z.jsx)(L.Slider,{min:0,max:30,step:1,value:null!==(C=N.dotsNav.spacing)&&void 0!==C?C:10,css:Object(z.css)(j||(j=_e(["width: 50%"],["width: 50%"]))),onChange:function(e){return T.updateNav("dotsNav","spacing",e.target.value)}}),Object(z.jsx)(F.InputUnit,{min:0,max:30,units:Ve,value:(null!==(A=N.dotsNav.spacing)&&void 0!==A?A:10)+"px",onChange:function(e){return T.updateNav("dotsNav","spacing",e.distance)},css:Object(z.css)(x||(x=_e(["width: 40%; margin-left: auto;"],["width: 40%; margin-left: auto;"])))})))),Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,{label:this.formatMessage("autoPlay")},Object(z.jsx)(L.Switch,{checked:N.autoPlay,onChange:this.onAutoPlayChanged})),N.autoPlay&&Object(z.jsx)(U.SettingRow,{label:this.formatMessage("interval")},Object(z.jsx)(L.NumericInput,{size:"sm",css:Object(z.css)(y||(y=_e(["width: 4rem"],["width: 4rem"]))),value:null!==(M=N.interval)&&void 0!==M?M:K.DEFAULT_AUTOPLAY_INTERVAL,min:1,onChange:this.onIntervalChanged})),N.autoPlay&&Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(L.Label,{check:!0},Object(z.jsx)(L.Checkbox,{checked:!1!==N.loop,onChange:this.onLoopChanged,className:"mr-2"}),this.formatMessage("loop"))))),V&&Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(Be,{formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.appTheme,viewId:B,view:P[B],hideBackgroundWidget:this.hideBackgroundWidget})))))},t}(z.React.PureComponent),Ge=z.ReactRedux.connect((function(e,t){var n,o,i,r,a,s,c,l,p,d,g=t.sectionId,u=e.appStateInBuilder.appConfig,h=u.sections[g];if(!h)return null;var f=h.views.map((function(e){return u.views[e]})),m=null===(i=null===(o=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===i?void 0:i[h.id],b=null!==(r=null==m?void 0:m.currentViewId)&&void 0!==r?r:h.views[0],v=null!==(l=null===(c=null===(s=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===s?void 0:s.forBuilderAttributes)||void 0===c?void 0:c.lockLayout)&&void 0!==l&&l,w=null===(d=null===(p=e.appStateInBuilder)||void 0===p?void 0:p.appRuntimeInfo)||void 0===d?void 0:d.appMode;return{section:h,views:f,activeViewId:b,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode,editable:w===z.AppMode.Design&&!v}}))(Ze),Je=n(13),Xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ke=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ye=n(22),Qe=n(29),qe=function(e){function t(t){var n=e.call(this,t)||this;return n.onDidDrop=function(e,t){var o=n.props,i=o.screenGroupId,r=o.index;Object(B.getAppConfigAction)().moveScreenInGroup(i,e,r,t).exec()},n.onDropHover=function(e){n.state.dropType!==e&&n.setState({dropType:e})},n.formatMessage=function(e){return n.props.formatMessage(e)},n._select=function(e){e.stopPropagation(),n.props.onSelect(n.props.index)},n._enableEditing=function(e){e.stopPropagation(),n.dragInteractable.draggable(!1),n.setState({editingLabel:!0})},n._disableEditing=function(){n._onLabelUpdate(n.inputRef.value),n.dragInteractable.draggable(!0),n.setState({editingLabel:!1})},n._onLabelUpdate=function(e){var t=n.props.screen;if(e&&(""+e).trim().length>0){var o=Object(z.Immutable)(t).set("label",e);Object(B.getAppConfigAction)().editScreen(o).exec()}else n.inputRef.value=t.label},n._showBackgroundWidget=function(){n.props.showBackgroundWidget(n.props.index)},n.state={editingLabel:!1,dropType:"none",isDragging:!1},n.dropDownItems=[Object(z.Immutable)({label:n.formatMessage("rename"),event:n._enableEditing.bind(n),visible:!0}),Object(z.Immutable)({label:n.formatMessage("duplicate"),event:n._duplicateView.bind(n),visible:!0}),Object(z.Immutable)({label:n.formatMessage("sectionDelete"),event:n._removeScreen.bind(n),visible:!0})],n.readonlyDropDownItems=[n.dropDownItems[0]],n.dropDownItemsWithoutDelete=[n.dropDownItems[0],n.dropDownItems[1]],n}return Xe(t,e),t.prototype.componentWillUnmount=function(){this.dragInteractable&&(this.dragInteractable.unset(),this.dragInteractable=null),this.dropZoneInteractable&&(this.dropZoneInteractable.unset(),this.dropZoneInteractable=null)},t.prototype.componentDidUpdate=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype.componentDidMount=function(){var e=this;if(this.inputRef&&(this.inputRef.select(),this.inputRef.focus()),this.dropZoneRef&&this.dragRef){var t,n=0,o=0,i=this.props.index;this.dropZoneInteractable=Object(Te.interact)(this.dropZoneRef).dropzone({accept:".screen-item-drag",overlap:"pointer",ondropmove:function(n){var o=n.relatedTarget.getAttribute("data-index");t||(t=n.dropzone.getRect());var r=(t.bottom-t.top)/2,a=n.dragEvent.client.y-t.top,s=e.state.dropType;s=+o!==i?a>r?"below":"above":"none",e.onDropHover(s)},ondragenter:function(e){t=e.dropzone.getRect()},ondragleave:function(){t=null,e.onDropHover("none")},ondrop:function(n){t=null;var o=e.state.dropType;if("none"!==o){var i=n.relatedTarget.getAttribute("data-index");e.onDidDrop(+i,o),e.onDropHover("none")}},ondropdeactivate:function(e){}}),this.dragInteractable=Object(Te.interact)(this.dragRef).draggable({inertia:!1,autoScroll:!0,onstart:function(t){e.setState({isDragging:!0}),n=0,o=0},onmove:function(e){n+=e.dx,o+=e.dy;var t=e.target;t.style.webkitTransform=t.style.transform="translate("+n+"px, "+o+"px)"},onend:function(t){var n=t.target;n.style.webkitTransform=n.style.transform=null,e.setState({isDragging:!1})}})}},t.prototype._removeScreen=function(){var e=this.props.index;this.props.onRemove(e)},t.prototype._duplicateView=function(){var e=this.props.index;this.props.onDuplicate(e)},t.prototype._focusInput=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype._getStyle=function(){var e=this.props.theme,t=this.state.isDragging;return Object(z.css)(I||(I=Ke(["\n      cursor: pointer;\n      position: relative;\n      height: ",";\n\n      .drop-down {\n        visibility: hidden;\n        text-align: right;\n        .popover {\n          .popover-inner {\n            box-shadow: 0 0 0;\n          }\n        }\n      }\n      .drag-icon {\n        visibility: hidden;\n        color: ",";\n        cursor: move;\n      }\n      .screen-item-drag:hover {\n        cursor: pointer !important;\n      }\n      .label-con {\n        width: ",";\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      .label-input {\n        width: ",";\n      }\n      .screen-item-drag {\n        z-index: 1;\n        background-color: ",";\n        box-shadow: ",";\n      }\n\n      .drag-move-out-order-below {\n        background-color: ",";\n        :after {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: auto;\n          bottom: 0;\n          right: auto;\n          height: 2px;\n          width: 100%;\n          background-color: ",";\n        }\n      }\n\n      .drag-move-out-order-above {\n        background-color: ",";\n        :before {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: auto;\n          right: auto;\n          height: 2px;\n          width: 100%;\n          background-color: ",";\n        }\n      }\n\n      &.selected {\n        border: 0;\n        background-color: ",";\n      }\n\n      &:hover {\n        .drop-down {\n          visibility: visible;\n        }\n        .drag-icon {\n          visibility: visible;\n        }\n      }\n\n      &:not(.selected):hover {\n        background-color: ",";\n      }\n    "],["\n      cursor: pointer;\n      position: relative;\n      height: ",";\n\n      .drop-down {\n        visibility: hidden;\n        text-align: right;\n        .popover {\n          .popover-inner {\n            box-shadow: 0 0 0;\n          }\n        }\n      }\n      .drag-icon {\n        visibility: hidden;\n        color: ",";\n        cursor: move;\n      }\n      .screen-item-drag:hover {\n        cursor: pointer !important;\n      }\n      .label-con {\n        width: ",";\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      .label-input {\n        width: ",";\n      }\n      .screen-item-drag {\n        z-index: 1;\n        background-color: ",";\n        box-shadow: ",";\n      }\n\n      .drag-move-out-order-below {\n        background-color: ",";\n        :after {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: auto;\n          bottom: 0;\n          right: auto;\n          height: 2px;\n          width: 100%;\n          background-color: ",";\n        }\n      }\n\n      .drag-move-out-order-above {\n        background-color: ",";\n        :before {\n          content: '';\n          position: absolute;\n          left: 0;\n          top: 0;\n          bottom: auto;\n          right: auto;\n          height: 2px;\n          width: 100%;\n          background-color: ",";\n        }\n      }\n\n      &.selected {\n        border: 0;\n        background-color: ",";\n      }\n\n      &:hover {\n        .drop-down {\n          visibility: visible;\n        }\n        .drag-icon {\n          visibility: visible;\n        }\n      }\n\n      &:not(.selected):hover {\n        background-color: ",";\n      }\n    "])),z.polished.rem(32),e.colors.palette.dark[600],z.polished.rem(123),z.polished.rem(123),t?z.polished.rgba(e.colors.palette.light[400],.6):"transparent",t?e.boxShadows.lg:"none",z.polished.rgba(e.colors.palette.light[400],.4),e.colors.palette.primary[700],z.polished.rgba(e.colors.palette.light[400],.4),e.colors.palette.primary[700],e.colors.palette.light[500],z.polished.rgba(e.colors.palette.light[500],.4))},t.prototype.render=function(){var e=this,t=this.props,n=t.theme,o=t.selected,i=t.index,r=t.browserSizeMode,a=t.editable,s=this.props.screen.label,c=this.state,l=c.editingLabel,p="drag-move-out-order-"+c.dropType,d=!a||r!==z.BrowserSizeMode.Large?this.readonlyDropDownItems:this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete;l&&this._focusInput();var g=Object(z.classNames)("d-flex justify-content-between w-100",{selected:o});return Object(z.jsx)("div",{ref:function(t){return e.dropZoneRef=t},css:this._getStyle(),className:g,onClick:this._select,"data-testid":"screenItem"},Object(z.jsx)("div",{className:"w-100 screen-item-drag d-flex justify-content-between "+p,"data-index":i,ref:function(t){return e.dragRef=t}},Object(z.jsx)("div",{className:"d-flex align-items-center"},Object(z.jsx)("div",{className:"toc-item-icon drag-icon"},Object(z.jsx)(L.Icon,{size:"12",icon:Ye,className:"header-title-icon"})),!l&&Object(z.jsx)("div",{title:s,className:"label-con",onDoubleClick:this._enableEditing},s),l&&Object(z.jsx)("div",null,Object(z.jsx)(L.TextInput,{title:s,className:"label-input",type:"text",value:s,ref:function(t){e.inputRef=t},onBlur:this._disableEditing}))),Object(z.jsx)("div",{className:"drop-down d-flex toc-item-icon"},Object(z.jsx)(L.Tooltip,{title:this.formatMessage("settings"),placement:"bottom"},Object(z.jsx)(L.Button,{size:"sm",type:"tertiary",icon:!0,onClick:this._showBackgroundWidget},Object(z.jsx)(L.Icon,{size:"12",icon:Qe,className:"header-title-icon"}))),Object(z.jsx)("div",{title:this.formatMessage("titleOption"),css:Object(z.css)(S||(S=Ke(["\n              & > div {\n                height: 100%;\n              }\n            "],["\n              & > div {\n                height: 100%;\n              }\n            "])))},Object(z.jsx)(Me.a,{theme:n,items:d})))))},t}(z.React.PureComponent),$e=z.ReactRedux.connect((function(e,t){var n=t.screenId;return{screen:e.appStateInBuilder.appConfig.screens[n]}}))(qe),et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},nt=n(38),ot=n(39),it=n(68),rt=n(69),at=[L.UnitTypes.PIXEL,L.UnitTypes.PERCENTAGE],st=[L.Sides.T,L.Sides.R,L.Sides.B,L.Sides.L],ct=function(e){function t(t){var n=e.call(this,t)||this;return n.onMainBackgroundChange=function(e){var t=n.props.screen.setIn(["main","background"],e);Object(B.getAppConfigAction)().editScreen(t).exec()},n.onSideBackgroundChange=function(e){var t=n.props.screen.setIn(["panel","background"],e);Object(B.getAppConfigAction)().editScreen(t).exec()},n.setOverlay=function(e){var t=n.props.screen,o=t.setIn(["panel","overlay"],e);e||(o=o.setIn(["panel","offset"],0),"center"===t.panel.side&&(o=o.setIn(["panel","side"],"left"))),Object(B.getAppConfigAction)().editScreen(o).exec()},n.updateWidth=function(e){var t,o,i,r,a=n.props,s=a.screen,c=a.viewportSize,l=e.distance,p=e.unit;if(K.utils.isPercentage(null===(t=s.panel)||void 0===t?void 0:t.size)&&p===L.UnitTypes.PIXEL){var d=K.utils.fromRatio(null===(o=s.panel)||void 0===o?void 0:o.size,c.width);r=s.setIn(["panel","size"],""+Math.round(d)+e.unit)}else if(K.utils.isPercentage(null===(i=s.panel)||void 0===i?void 0:i.size)||p!==L.UnitTypes.PERCENTAGE)r=s.setIn(["panel","size"],""+e.distance+e.unit);else{d=K.utils.toRatio(l,c.width);r=s.setIn(["panel","size"],""+d)}Object(B.getAppConfigAction)().editScreen(r).exec()},n.updateSide=function(e){var t=n.props.screen.setIn(["panel","side"],e);Object(B.getAppConfigAction)().editScreen(t).exec()},n.updateOffsetX=function(e){var t=n.props.screen.setIn(["panel","offset"],e+"px");Object(B.getAppConfigAction)().editScreen(t).exec()},n.updatePadding=function(e){var t=n.props.screen.setIn(["panel","padding"],e);Object(B.getAppConfigAction)().editScreen(t).exec()},n._getStyle=function(){var e=n.props.theme?n.props.theme.colors.palette.dark[600]:"#c5c5c5",t=n.props.theme?n.props.theme.colors.palette.dark[600]:"#a8a8a8";return Object(z.css)(O||(O=tt(["\n      & {\n        width: 100%;\n      }\n      .inner-section {\n        border-bottom: none;\n        padding-bottom: 0;\n      }\n      .back-btn-con {\n        margin: 1rem 0.25rem 0;\n        cursor: pointer;\n        align-items: center;\n      }\n      .screen-group-title {\n        margin: 1rem 1rem 0;\n      }\n      .background-set-back {\n        color: ",";\n        font-weight: 500;\n      }\n      .background-setting-con .form-group {\n        margin-bottom: ",";\n      }\n      .background-setting-header {\n        color: ",";\n        font-weight: 500;\n      }\n    "],["\n      & {\n        width: 100%;\n      }\n      .inner-section {\n        border-bottom: none;\n        padding-bottom: 0;\n      }\n      .back-btn-con {\n        margin: 1rem 0.25rem 0;\n        cursor: pointer;\n        align-items: center;\n      }\n      .screen-group-title {\n        margin: 1rem 1rem 0;\n      }\n      .background-set-back {\n        color: ",";\n        font-weight: 500;\n      }\n      .background-setting-con .form-group {\n        margin-bottom: ",";\n      }\n      .background-setting-header {\n        color: ",";\n        font-weight: 500;\n      }\n    "])),t,z.polished.rem(16),e)},n.isRTL=Object(z.getAppStore)().getState().appContext.isRTL,n}return et(t,e),t.prototype.render=function(){var e,t,n=this,o=this.props.theme?this.props.theme.colors.palette.dark[600]:"#a8a8a8",i=this.props,r=i.screen,a=i.formatMessage;return r?Object(z.jsx)("div",{css:this._getStyle()},Object(z.jsx)("div",{className:"d-flex align-items-center back-btn-con",onClick:this.props.hideBackgroundWidget},Object(z.jsx)(L.Button,{type:"link",icon:!0},Object(z.jsx)(L.Icon,{size:"16",color:o,autoFlip:!0,icon:nt,className:"sort-arrow-down-icon"})),Object(z.jsx)("div",{className:"flex-grow-1 background-set-back"},a("actionBack"))),Object(z.jsx)("div",{className:"screen-group-title"},a("mainStage")),Object(z.jsx)(U.SettingSection,{title:a("background")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.BackgroundSetting,{background:r.main.background,onChange:function(e){return n.onMainBackgroundChange(e)}}))),r.panel&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)("div",{className:"screen-group-title"},a("scrollingPanel")),Object(z.jsx)(U.SettingSection,{className:"inner-section",title:a("mode")},Object(z.jsx)("div",null,Object(z.jsx)(L.Label,{className:"mr-3"},Object(z.jsx)(L.Radio,{className:"mr-2",onChange:function(){return n.setOverlay(!1)},value:"docked",checked:!0!==r.panel.overlay}),a("docked"))),Object(z.jsx)("div",null,Object(z.jsx)(L.Label,{className:"mr-3"},Object(z.jsx)(L.Radio,{className:"mr-2",onChange:function(){return n.setOverlay(!0)},value:"floating",checked:!0===r.panel.overlay}),a("floatingScreen")))),Object(z.jsx)(U.SettingSection,{className:"inner-section",title:a("size")},Object(z.jsx)(U.SettingRow,{label:a("width")},Object(z.jsx)("div",{style:{width:110}},Object(z.jsx)(F.SizeEditor,{label:"W",availableUnits:at,mode:K.LayoutItemSizeModes.Custom,disableModeSelect:!0,value:r.panel.size,onChange:this.updateWidth})))),Object(z.jsx)(U.SettingSection,{className:"inner-section",title:a("position")},Object(z.jsx)(U.SettingRow,{label:a("align")},Object(z.jsx)(L.ButtonGroup,{size:"sm"},Object(z.jsx)(L.Tooltip,{title:a(this.isRTL?"right":"left"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,active:"left"===r.panel.side,onClick:function(){return n.updateSide("left")}},Object(z.jsx)(L.Icon,{size:12,icon:ot,autoFlip:!0}))),r.panel.overlay&&Object(z.jsx)(L.Tooltip,{title:a("center"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,active:"center"===r.panel.side,onClick:function(){return n.updateSide("center")}},Object(z.jsx)(L.Icon,{size:12,icon:it}))),Object(z.jsx)(L.Tooltip,{title:a(this.isRTL?"left":"right"),placement:"bottom"},Object(z.jsx)(L.Button,{icon:!0,active:"right"===r.panel.side,onClick:function(){return n.updateSide("right")}},Object(z.jsx)(L.Icon,{size:12,icon:rt,autoFlip:!0}))))),(null===(e=r.panel)||void 0===e?void 0:e.overlay)&&Object(z.jsx)(U.SettingRow,{label:a("offsetX")},Object(z.jsx)(L.NumericInput,{value:parseInt(null!==(t=r.panel.offset)&&void 0!==t?t:"0"),onChange:this.updateOffsetX,size:"sm",css:Object(z.css)(C||(C=tt(["width: 110px"],["width: 110px"])))}))),Object(z.jsx)(U.SettingSection,{className:"inner-section",title:a("padding")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.FourSides,{showTip:!0,sides:st,value:r.panel.padding,onChange:this.updatePadding}))),Object(z.jsx)(U.SettingSection,{className:"inner-section",title:a("background")},Object(z.jsx)(U.SettingRow,null,Object(z.jsx)(F.BackgroundSetting,{background:r.panel.background,onChange:function(e){return n.onSideBackgroundChange(e)}}))))):null},t}(z.React.PureComponent),lt=z.ReactRedux.connect((function(e,t){var n=t.screenId,o=e.appStateInBuilder.appConfig,i=z.utils.findViewportSize(o,e.browserSizeMode||z.BrowserSizeMode.Large);return{screen:o.screens[n],viewportSize:i}}))(ct),pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},gt=n(40),ut=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e,t){return void 0===t&&(t=!1),t?n.props.intl.formatMessage({id:e,defaultMessage:z.defaultMessages[e]}):n.props.formatMessage(e)},n._addScreen=function(e){var t=Object(B.getAppConfigAction)(),o=n.props.screenGroupId;B.templateUtils.createScreenFromTemplate(t.appConfig,e,e.screenId,{}).then((function(e){var t=e.appConfig,n=e.newScreenId;t=t.setIn(["screenGroups",o,"screens"],[].concat(t.screenGroups[o].screens,n)),B.builderAppSync.publishAppConfigChangeToApp(t),B.builderAppSync.publishScreenGroupNavInfoToApp(o,t.screenGroups[o].screens.length-1)})),n.closeScreenPopper()},n._duplicateScreen=function(e){var t=n.props.screenGroupId,o=Object(B.getAppConfigAction)();o.duplicateScreenByIndex(e,t),o.exec(),B.builderAppSync.publishScreenGroupNavInfoToApp(t,e+1)},n._duplicateActiveScreen=function(){n._duplicateScreen(n.props.activeScreen)},n._selectScreen=function(e){var t=n.props.screenGroupId;n.setState({selectedScreenIndex:e}),B.builderAppSync.publishScreenGroupNavInfoToApp(t,e)},n._removeScreen=function(e){var t=n.props,o=t.screenGroupId,i=t.screens,r=t.activeScreen;Object(B.getAppConfigAction)().removeScreen(i[e],o).exec(),(r>e||r===e&&r===i.length-1)&&B.builderAppSync.publishScreenGroupNavInfoToApp(o,r-1)},n.getStyle=function(){return Object(z.css)(A||(A=dt(["\n      .screen-list {\n        padding: 1rem;\n      }\n\n      .setting-header {\n        margin-bottom: 1rem;\n      }\n\n      .screen-group-title {\n        font-size: 14px;\n        color: var(--dark-900);\n      }\n    "],["\n      .screen-list {\n        padding: 1rem;\n      }\n\n      .setting-header {\n        margin-bottom: 1rem;\n      }\n\n      .screen-group-title {\n        font-size: 14px;\n        color: var(--dark-900);\n      }\n    "])))},n.showBackgroundWidget=function(e){n.setState({isShowBackgroundWidget:!0,selectedScreenIndex:e})},n.hideBackgroundWidget=function(){n.setState({isShowBackgroundWidget:!1})},n.toggleScreenPopper=function(){n.props.hasPanel?n.setState({showPopper:!n.state.showPopper}):n._addScreen(Object(Je.getBlankScreenTemplate)())},n.closeScreenPopper=function(){n.setState({showPopper:!1})},n.popperRef=z.React.createRef(),n.state={showPopper:!1,isShowBackgroundWidget:!1,selectedScreenIndex:n.props.activeScreen},n}return pt(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props.activeScreen;e.activeScreen!==t&&t!==this.state.selectedScreenIndex&&this.hideBackgroundWidget()},t.prototype.showEditButtons=function(){var e=this.props,t=e.editable,n=e.browserSizeMode===z.BrowserSizeMode.Large;return t&&n},t.prototype.render=function(){var e=this,t=this.props,o=t.screenGroupId,i=t.screens,r=t.theme,a=t.dispatch,s=t.activeScreen,c=t.browserSizeMode,l=t.editable,p=this.state.isShowBackgroundWidget;if(!i)return null;var d=Object(z.css)(M||(M=dt(["\n      cursor: pointer;\n      margin-top: ",";\n    "],["\n      cursor: pointer;\n      margin-top: ",";\n    "])),z.polished.rem(-8));return Object(z.jsx)("div",{className:"screen-group-setting mb-4",css:this.getStyle()},!p&&Object(z.jsx)("div",{className:"h-100 screen-list"},Object(z.jsx)("div",{className:"d-flex align-items-center setting-header"},Object(z.jsx)("div",{className:"screen-group-title"},this.formatMessage("screen")),this.showEditButtons()&&Object(z.jsx)(z.React.Fragment,null,Object(z.jsx)("div",{ref:this.popperRef,css:Object(z.css)(T||(T=dt(["margin-left: auto;"],["margin-left: auto;"])))},Object(z.jsx)(L.Tooltip,{title:this.formatMessage("addScreen"),placement:"bottom"},Object(z.jsx)(L.Button,{css:d,type:"link",onClick:this.toggleScreenPopper,className:"rounded-circle"},Object(z.jsx)(L.Icon,{icon:gt,className:"mr-0",color:"var(--dark-400)",size:16})))),this.state.showPopper&&Object(z.jsx)(U.ScreenTemplatePopper,{referenceElement:this.popperRef.current,theme:r,onItemSelect:this._addScreen,onClose:this.closeScreenPopper}),Object(z.jsx)(L.Tooltip,{title:this.formatMessage("dsDuplicateScreen"),placement:"bottom"},Object(z.jsx)(L.Button,{css:d,type:"link",onClick:this._duplicateActiveScreen},Object(z.jsx)(L.Icon,{icon:n(41),color:this.props.theme.colors.palette.dark[400],className:"mr-0"}))))),i.map((function(t,n){return Object(z.jsx)($e,{key:t,index:n,screenGroupId:o,screenId:t,canRemove:i.length>1,formatMessage:e.formatMessage,dispatch:a,theme:r,editable:l,onSelect:e._selectScreen,onRemove:e._removeScreen,onDuplicate:e._duplicateScreen,selected:i[s]===t,browserSizeMode:c,showBackgroundWidget:e.showBackgroundWidget})}))),p&&Object(z.jsx)(lt,{formatMessage:this.formatMessage,theme:this.props.theme,screenId:i[s],hideBackgroundWidget:this.hideBackgroundWidget}))},t}(z.React.PureComponent),ht=z.ReactRedux.connect((function(e,t){var n,o,i,r,a,s,c,l,p,d,g=t.screenGroupId,u=e.appStateInBuilder.appConfig,h=u.screenGroups[g];if(!h)return null;var f=u.screens[h.screens[0]],m=null!==(r=null===(i=null===(o=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appConfig)||void 0===o?void 0:o.forBuilderAttributes)||void 0===i?void 0:i.lockLayout)&&void 0!==r&&r,b=null===(s=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appRuntimeInfo)||void 0===s?void 0:s.appMode;return{browserSizeMode:e.appStateInBuilder.browserSizeMode,hasPanel:null!=f.panel,screens:h.screens,activeScreen:null!==(d=null===(p=null===(l=null===(c=e.appStateInBuilder.appRuntimeInfo)||void 0===c?void 0:c.screenGroupNavInfos)||void 0===l?void 0:l[g])||void 0===p?void 0:p.activeIndex)&&void 0!==d?d:0,editable:b===z.AppMode.Design&&!m}}))(ut),ft=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItemSetting=function(){var e=null;if(t.props.layoutType===z.LayoutType.FixedLayout)e=X.FixedLayoutItemSetting;else if(t.props.layoutType===z.LayoutType.FlowLayout)e=X.FlowLayoutItemSetting;else if(t.props.layoutType===z.LayoutType.ColumnLayout)e=X.ColumnLayoutItemSetting;else{var n=t.props,o=n.containerWidgetId;n.hasLayoutSetting&&(e=B.WidgetSettingManager.getInstance().getItemSettingClass(o))}return e?z.React.createElement(z.ErrorBoundary,null,z.React.createElement(e,{layoutId:t.props.layoutId,layoutItem:t.props.layoutItem,isLockLayout:t.props.isLockLayout,style:t.props.style,onSettingChange:t.props.onSettingChanged,onStyleChange:t.props.onStyleChange,onPosChange:t.props.onPosChanged,formatMessage:t.props.formatMessage})):z.React.createElement(U.SettingSection,null,z.React.createElement("div",{className:"w-100 justify-content-center d-flex"},t.props.formatMessage("noStyle")))},t}return ft(t,e),t.prototype.componentDidUpdate=function(){this.loadItemSettingClass()},t.prototype.componentDidMount=function(){this.loadItemSettingClass()},t.prototype.loadItemSettingClass=function(){var e=this.props,t=e.containerWidgetId,n=e.hasLayoutSetting;t&&n&&!B.WidgetSettingManager.getInstance().getItemSettingClass(t)&&B.WidgetSettingManager.getInstance().loadItemSettingClass(t)},t.prototype.render=function(){return z.React.createElement("div",{className:"setting-container"},this.renderItemSetting())},t}(z.React.PureComponent),bt=z.ReactRedux.connect((function(e,t){var n,o,i,r,a,s=t.layoutId,c=t.layoutItemId,l=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appConfig.layouts,p=null==l?void 0:l[s],d=null;if(!p)return null;var g=K.searchUtils.findLayoutItem(e.appStateInBuilder.appConfig,{layoutId:s,layoutItemId:c}),u=K.searchUtils.getWidgetIdThatUseTheLayoutId(e.appStateInBuilder.appConfig,s),h=!1;if(u){var f=e.appStateInBuilder.appConfig.widgets[u];h=f.manifest&&f.manifest.properties&&f.manifest.properties.hasLayoutItemSettingPage}var m=null==g?void 0:g.type;return m===z.LayoutItemType.Widget&&g.widgetId?d=e.appStateInBuilder.appConfig.widgets[g.widgetId].style:m===z.LayoutItemType.Section&&(d=e.appStateInBuilder.appConfig.sections[g.sectionId].style),{containerWidgetId:u,hasLayoutSetting:h,style:d,layoutType:p.type,layoutItem:g,runtimeInfo:e.builder.widgetsSettingRuntimeInfo[u],isLockLayout:null!==(a=null===(r=null===(i=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===i?void 0:i.forBuilderAttributes)||void 0===r?void 0:r.lockLayout)&&void 0!==a&&a}}))(mt),vt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},jt=n(17),xt=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.onSelectMessageType=function(e){var t={id:z.appConfigUtils.getUniqueId(n.props.appConfig,"messageConfig"),widgetId:n.props.widgetId,messageType:e,actions:[]};n.props.onSelected(Object(z.Immutable)(t))},n.getPublishMessages=function(){var e=n.props.appConfig.widgets[n.props.widgetId].manifest.publishMessages,t=[];if(e)for(var o=0;o<e.length;o++){var i=!1;if(n.props.messages)for(var r=0;r<n.props.messages.length;r++)if(n.props.messages[r].messageType===e[o]){i=!0;break}i||t.push({messageType:e[o],messageLabel:Object(z.getMessageTypeLabel)(e[o],n.props.intl)})}return t},n}return vt(t,e),t.prototype.getStyle=function(e){return Object(z.css)(k||(k=wt(["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .choose-message-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n          color: "," !important;\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .choose-message-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n          color: "," !important;\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),z.polished.rgba(e.colors.white,1),e.colors.palette.dark[200],e.colors.palette.light[500],z.polished.rem(13),e.colors.palette.light[600],e.colors.white)},t.prototype.render=function(){var e=this,t=this.getPublishMessages();return Object(z.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},Object(z.jsx)("div",{className:"w-100 choose-message-list"},Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"w-100",style:{display:"none"}},Object(z.jsx)(L.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),Object(z.jsx)(L.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:jt})),Object(z.jsx)("div",{className:"w-100 list"},0===t.length&&Object(z.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noMessage")),t.length>0&&t.map((function(t,n){return Object(z.jsx)("div",{className:"list-item mb-2 pt-1 pb-1 pl-2 pr-2",key:n,onClick:function(){return e.onSelectMessageType(t.messageType)},title:t.messageLabel},t.messageLabel)})))))))},t}(z.React.PureComponent),yt=z.themeUtils.withTheme(Object(z.injectIntl)(xt)),It=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),St=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Ot=n(17),Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.getActions=function(){var e=[],t=[],o=null;o=(n.props.target.id,n.props.target);for(var i=B.AppMessageManager.getInstance().getFilteredActions(n.props.message.messageType),r=0;r<i.length;r++)-1===t.indexOf(i[r].name)&&i[r].widgetId===o.id&&(t.push(i[r].name),e.push(i[r]));return e},n.onSelectAction=function(e){var t,o=n.props.message,i=null;t=(i=(n.props.target.id,n.props.target)).id?Object(z.getAppStore)().getState().appStateInBuilder?Object(z.getAppStore)().getState().appStateInBuilder.appConfig.widgets[i.id].manifest.version:null:z.version;var r={actionId:e.id+"-"+(new Date).getTime().toString(),widgetId:i.id,messageWidgetId:n.props.widgetId,actionName:e.name,description:null,config:n.checkIsSupportActionSetting(e)?null:void 0,version:t};o=o.set("actions",o.actions.concat(r)),n.props.onSelected(o,r)},n.checkIsSupportActionSetting=function(e){var t=!1,o=null;return n.props.target.id?e.getSettingComponentUri&&e.getSettingComponentUri(n.props.message.messageType,n.props.message.widgetId)?t=!0:t:((o=n.props.target).uri&&B.AppMessageManager.getInstance().getActionRawSettingClass(o.uri)&&(t=!0),t)},n}return It(t,e),t.prototype.getStyle=function(e){return Object(z.css)(N||(N=St(["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .action-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .action-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),z.polished.rgba(e.colors.white,1),e.colors.palette.light[500],z.polished.rem(13),e.colors.palette.light[600],e.colors.white)},t.prototype.render=function(){var e=this,t=this.getActions();return Object(z.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},Object(z.jsx)("div",{className:"w-100 action-choose-list"},Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"w-100",style:{display:"none"}},Object(z.jsx)(L.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),Object(z.jsx)(L.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:Ot})),Object(z.jsx)("div",{className:"w-100 list"},0===t.length&&Object(z.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noAction")),t.length>0&&t.map((function(t,n){return Object(z.jsx)("div",{className:"d-flex list-item mb-2 pt-1 pb-1 pl-2 pr-2",key:n,onClick:function(){return e.onSelectAction(t)}},t.label)})))))))},t}(z.React.PureComponent),At=z.themeUtils.withTheme(Ct),Mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},kt=n(17),Nt=n(70),Pt=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.getTargets=function(){for(var e=[],t=[],o=[],i=B.AppMessageManager.getInstance().getFilteredActions(n.props.message.messageType),r=0;r<i.length;r++)if(-1===o.indexOf(i[r].widgetId))if(o.push(i[r].widgetId),i[r].widgetId){var a=n.props.appConfig.widgets[i[r].widgetId];if(a){if(a.id===n.props.message.widgetId)continue;e.push(a)}}else t.push({uri:i[r].id,label:"Framework"});return{widgetTargets:e,frameWorkTargets:t}},n.onSelectTarget=function(e){n.props.onSelected(e)},n}return Mt(t,e),t.prototype.getStyle=function(e){return Object(z.css)(P||(P=Tt(["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .target-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .seperateline-mt {\n          margin-top: ",";\n        }\n\n        .seperateline-mb {\n          margin-bottom: ",";\n        }\n\n        .seperateline {\n          border-top: 1px solid ",";\n        }\n\n        .widgets-title {\n          font-weight: 600;\n          font-size: ",";\n          color: ",";\n        }\n\n        .nodata {\n          font-size: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      height: calc(100% - 3.125rem);\n      overflow-y: auto;\n\n      .target-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .seperateline-mt {\n          margin-top: ",";\n        }\n\n        .seperateline-mb {\n          margin-bottom: ",";\n        }\n\n        .seperateline {\n          border-top: 1px solid ",";\n        }\n\n        .widgets-title {\n          font-weight: 600;\n          font-size: ",";\n          color: ",";\n        }\n\n        .nodata {\n          font-size: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),z.polished.rgba(e.colors.white,1),z.polished.rem(5),z.polished.rem(1),e.colors.palette.light[500],z.polished.rem(14),e.colors.palette.dark[300],z.polished.rem(13),e.colors.palette.light[500],z.polished.rem(13),e.colors.palette.light[600],e.colors.white)},t.prototype.render=function(){var e=this,t=this.getTargets(),n=t.frameWorkTargets,o=t.widgetTargets;return Object(z.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},Object(z.jsx)("div",{className:"w-100 target-choose-list"},Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,null,Object(z.jsx)("div",{className:"w-100",style:{display:"none"}},Object(z.jsx)(L.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),Object(z.jsx)(L.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:kt})),Object(z.jsx)("div",{className:"w-100 list"},0===n.length&&0===o.length&&Object(z.jsx)("div",{className:"d-flex justify-content-center nodata text-break"},this.props.formatMessage("noTargetWidgets")),n.map((function(t,n){return Object(z.jsx)("div",{className:"d-flex list-item pt-1 pb-1 pl-2 pr-2",key:n,onClick:function(){return e.onSelectTarget(t)}},Object(z.jsx)(L.Icon,{width:16,height:16,icon:Nt}),Object(z.jsx)("div",{className:"ml-2"},e.props.formatMessage("action"+t.label)))})),n.length>0&&0===o.length&&Object(z.jsx)("div",{className:"w-100"},Object(z.jsx)("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},Object(z.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),Object(z.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),Object(z.jsx)("div",{className:"d-flex mt-2 nodata text-break"},this.props.formatMessage("noTargetWidgets"))),o.length>0&&Object(z.jsx)("div",{className:"w-100"},n.length>0&&Object(z.jsx)("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},Object(z.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),Object(z.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),o.map((function(t,n){var o,i=t.icon;return o=i&&i.svg?i:{svg:i},Object(z.jsx)("div",{className:"d-flex list-item mt-2 p-1 align-items-center",key:n,onClick:function(){return e.onSelectTarget(t)}},Object(z.jsx)(L.Icon,{width:16,height:16,icon:o.svg,color:o.properties&&o.properties.color}),Object(z.jsx)("div",{className:"ml-2"},t.label))}))))))))},t}(z.React.PureComponent),Rt=z.themeUtils.withTheme(Pt),zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zt(t,e),t.prototype.componentDidMount=function(){this._initInteractive()},t.prototype._initInteractive=function(){var e=this;if(this.ref){var t=this.ref,n=null,o=null,i=null;this.dropZoneInteractable=Object(Te.interact)(t).dropzone({accept:"."+this.props.dragItemName,overlap:"center",ondropmove:function(t){e.dragElement=t.relatedTarget,e.dropzoneElement=t.target;var n=e.dropzoneElement.getAttribute("data-item-index"),r=e.dragElement.getAttribute("data-item-index"),a=e.dropzoneElement.offsetTop+e.dropzoneElement.clientHeight/2;parseFloat(e.dragElement.getAttribute("move-relative-top"))+e.dragElement.clientHeight/2>a?(o=parseInt(r),i=parseInt(n)):(o=parseInt(r),i=parseInt(n)-1)},ondrop:function(t){e.props.onDragChanged&&e.props.onDragChanged(o,i)}}),this.interactable=Object(Te.interact)(t).draggable({startAxis:"y",lockAxis:"y",inertia:!1,modifiers:[],autoScroll:!0,onstart:function(e){var t=e.clientY0,n=e.target,o=n.getBoundingClientRect(),i=n.clientHeight,r=t-o.top-i/2;n.style.webkitTransform="translate(0px, "+r+"px)",n.style.transform="translate(0px, "+r+"px)",n.setAttribute("start-y",r),n.setAttribute("start-relative-top",n.offsetTop)},onmove:function(e){var t=e.clientY,o=e.clientY0,i=e.target,r=t-o+(parseFloat(i.getAttribute("start-y"))||0);n&&cancelAnimationFrame(n),r<0?-1*r>parseFloat(i.getAttribute("start-relative-top"))+.8*i.clientHeight&&(r=-1*(parseFloat(i.getAttribute("start-relative-top"))+.8*i.clientHeight)):r>i.parentElement.clientHeight-parseFloat(i.getAttribute("start-relative-top"))-.2*i.clientHeight&&(r=i.parentElement.clientHeight-parseFloat(i.getAttribute("start-relative-top"))-.2*i.clientHeight),i.setAttribute("move-relative-top",r+parseFloat(i.getAttribute("start-relative-top"))),n=requestAnimationFrame((function(){i.style.webkitTransform="translate(0px, "+r+"px)",i.style.transform="translate(0px, "+r+"px)",n=null}))},onend:function(e){var t=e.target;n&&cancelAnimationFrame(n),t.style.webkitTransform="translate(0px, 0px)",t.style.transform="translate(0px, 0px)"}})}},t.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.style,i=Object(z.classNames)(this.props.dragItemName,"drag-item",n);return z.React.createElement("div",{className:i,style:o,ref:function(t){return e.ref=t},"data-item-index":this.props.dragItemIndex,onMouseEnter:function(){e.props.onMouseEnter(e.props.dragItemIndex)},onMouseLeave:function(){e.props.onMouseLeave(e.props.dragItemIndex)}},this.props.children)},t}(z.React.PureComponent),Bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=n(71),_t=n(16),Et=n(21),Wt=n(22),Ut=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.onEditAction=function(e){e.config&&n.props.onClickEditAction(n.props.message,e)},n.onRemoveAction=function(e){for(var t=n.props.message,o=Object.assign([],t.actions),i=[],r=0;r<o.length;r++)o[r].actionName==e.actionName&&i.push(o[r]);for(r=0;r<o.length;r++)if(o[r].actionName===e.actionName&&o[r].widgetId===e.widgetId){var a=Object.assign([],o);a.splice(r,1),t=t.set("actions",a);var s=B.AppMessageManager.getInstance().getAction(e.widgetId,e.actionName);s&&s.onRemoveListen(t.messageType,t.widgetId);break}n.props.onMessageChanged(t)},n.onActionOrderChanged=function(e,t){if(e!==t){var o=n.props.message,i=[];if(e<t){for(var r=0;r<e;r++)i.push(o.actions[r]);for(r=e+1;r<t+1;r++)i.push(o.actions[r]);i.push(o.actions[e]);for(r=t+1;r<o.actions.length;r++)i.push(o.actions[r])}else{for(r=0;r<t+1;r++)i.push(o.actions[r]);i.push(o.actions[e]);for(r=t+1;r<e;r++)i.push(o.actions[r]);for(r=e+1;r<o.actions.length;r++)i.push(o.actions[r])}o=o.set("actions",i),n.props.onMessageChanged(o)}},n.getActionList=function(){return z.React.createElement("div",{style:{position:"relative"}},n.props.message.actions.asMutable().map((function(e,t){var o=null;return o=e.widgetId?n.props.appConfig.widgets[e.widgetId]:{label:"Framework"},z.React.createElement(Dt,{dragItemIndex:t,dragItemName:n.props.message.messageType,style:{touchAction:"none",userSelect:"none"},key:t,onDragChanged:n.onActionOrderChanged,onMouseEnter:function(e){n.setState({itemSelected:!0,itemSelectedIndex:e})},onMouseLeave:function(e){n.setState({itemSelected:!1,itemSelectedIndex:void 0})}},z.React.createElement("div",{className:Object(z.classNames)("mb-2 mt-2 action-item",{"active-border":n.props.action&&n.props.action.actionId&&n.props.action.actionId===e.actionId}),style:{position:"relative"}},z.React.createElement("div",{className:"d-flex w-100 justify-content-between align-items-center"},"Framework"===o.label&&z.React.createElement("div",{className:"widget-name text-truncate",title:n.props.formatMessage("action"+o.label)},n.props.formatMessage("action"+o.label)),"Framework"!==o.label&&z.React.createElement("div",{className:"widget-name text-truncate",title:o.label},o.label),n.state.itemSelected&&n.state.itemSelectedIndex===t&&z.React.createElement("div",{className:"d-flex"},z.React.createElement("div",{style:{position:"absolute",top:"23px",left:0}},z.React.createElement(L.Icon,{className:"p-0 deleteIcon",width:11,height:11,icon:Wt})),z.React.createElement("div",{className:"mr-2",onClick:function(){return n.onEditAction(e)},title:n.props.formatMessage("actionSettings")},(e.config||null===e.config)&&z.React.createElement(L.Icon,{className:"p-0 deleteIcon",width:12,height:12,icon:Et}),void 0===e.config&&null),z.React.createElement("div",{onClick:function(){return n.onRemoveAction(e)},title:n.props.formatMessage("actionDelete")},z.React.createElement(L.Icon,{className:"p-0 deleteIcon",width:11,height:11,icon:Lt})))),z.React.createElement("div",{className:"text-dark-600 pl-2 mt-2 d-flex align-items-center action-name"},z.React.createElement("div",{className:"w-100 text-truncate",title:en(e)},en(e)))))})))},n.state={itemSelected:!1,itemSelectedIndex:void 0},n}return Bt(t,e),t.prototype.render=function(){var e=this,t=Object(z.getMessageTypeLabel)(this.props.message.messageType,this.props.intl);return z.React.createElement("div",{className:"w-100"},z.React.createElement("div",{className:Object(z.classNames)("w-100 message-item message-item-container mb-3",this.props.isActive?"active-border":"")},z.React.createElement("div",{className:"w-100 d-flex justify-content-between align-items-start mt-1"},z.React.createElement("h2",{className:"message-item-title",title:t},t),z.React.createElement("div",{onClick:function(){return e.props.onMessageRemoved(e.props.message)}},z.React.createElement(L.Icon,{className:"p-0 deleteIcon",width:14,height:14,icon:_t}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),z.React.createElement("div",{className:"mt-2 item-add-action text-truncate",onClick:function(){return e.props.onClickAddAction(e.props.message)}},"+ "+this.props.formatMessage("addAction"))))},t}(z.React.PureComponent),Ht=Object(z.injectIntl)(Ut),Ft=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vt=function(e){function t(t){var n=e.call(this,t)||this;return n.getActionSettingClass=function(){var e=n.getActionSettingClassUri();B.AppMessageManager.getInstance().loadActionSettingClass(n.props.action,e).then((function(e){n.setState({settingClass:e})}))},n.onSettingChange=function(e){var t=e.actionId,o=e.config;n.state.cacheActionJson.config!==o&&t===n.state.cacheActionJson.actionId&&n.setState({cacheActionJson:n.state.cacheActionJson.set("config",o)},(function(){n.updateAction(!1)}))},n.updateAction=function(e){for(var t=n.props.message,o=Object.assign([],t.actions),i=null,r=0;r<o.length;r++)if(o[r].actionId===n.state.cacheActionJson.actionId&&o[r].widgetId===n.state.cacheActionJson.widgetId){o[r]=o[r].set("config",n.state.cacheActionJson.config),i=o[r];break}t=t.set("actions",o),n.props.onUpdateAction(t,i,e)},n.onDisableDoneBtn=function(e){n.setState({isDisableDoneBtn:e})},n.renderActionSetting=function(){var e=n.state.settingClass;return e?z.React.createElement(z.ErrorBoundary,null,z.React.createElement(e,{actionId:n.state.cacheActionJson.actionId,widgetId:n.props.action.widgetId,messageWidgetId:n.props.widgetId,config:n.state.cacheActionJson.config?n.state.cacheActionJson.config:void 0,messageType:n.props.message.messageType,onSettingChange:n.onSettingChange,onDisableDoneBtn:n.onDisableDoneBtn})):z.React.createElement("div",null,n.props.formatMessage("actionSettingLoading"))},n.getActionSettingClassUri=function(){for(var e=B.AppMessageManager.getInstance().getAllActions(),t=null,o=null,i=0;i<e.length;i++)if(n.props.action.actionId.indexOf(e[i].id)>-1){t=e[i];break}return t&&(o=t.getSettingComponentUri(n.props.message.messageType,n.props.action.messageWidgetId)),o},n.state={settingClass:null,cacheActionJson:n.props.action,isDisableDoneBtn:!1},n}return Ft(t,e),t.prototype.componentDidMount=function(){this.getActionSettingClass()},t.prototype.componentDidUpdate=function(e){this.getActionSettingClass(),this.props.action!==e.action&&this.setState({cacheActionJson:this.props.action})},t.prototype.render=function(){var e=this.getActionSettingClassUri();return z.React.createElement("div",{className:"setting-container h-100",style:{overflowY:"auto"}},e?this.renderActionSetting():z.React.createElement("div",null,"Â Â No widget"),z.React.createElement("div",{className:"w-100",style:{height:"50px"}}))},t}(z.React.PureComponent),Zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(R||(R={}));var Jt,Xt=n(23),Kt=n(72),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zt(t,e),t.prototype.getStyle=function(e){return Object(z.css)(Jt||(Jt=Gt(["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .setting-title {\n        font-size: ",";\n      }\n    "],["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .setting-title {\n        font-size: ",";\n      }\n    "])),z.polished.rem(10),z.polished.rem(16),z.polished.rem(0),z.polished.rem(16),z.polished.rem(16))},t.prototype.render=function(){return Object(z.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},Object(z.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0 mt-2",style:{height:"38px"}},this.props.Routes.length>1&&!this.props.hideBackArrow?Object(z.jsx)("div",{className:"h-100"},Object(z.jsx)("div",{className:"d-flex align-items-center h-100",style:{cursor:"pointer"},onClick:this.props.onBack},Object(z.jsx)("div",{className:"d-flex align-items-center"},Object(z.jsx)(L.Icon,{icon:Xt,autoFlip:!0,size:"14",className:"text-dark"})),Object(z.jsx)("div",{className:"pl-2 setting-title",style:{maxWidth:"190px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.title))):Object(z.jsx)("div",{className:"setting-title mt-1",style:{maxWidth:"190px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.title),Object(z.jsx)(L.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.props.onClose},Object(z.jsx)(L.Icon,{icon:Kt,size:"16"}))),this.props.children)},t}(z.React.PureComponent),Qt=z.themeUtils.withTheme(Yt),qt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$t=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};function en(e){var t=null;t=e.widgetId?Object(z.getAppStore)().getState().appStateInBuilder.appConfig.widgets[e.widgetId]:{label:"Framework"};var n=e.actionName;if(t.manifest)if(t.manifest.i18nMessages["_action_"+e.actionName+"_label"])n=t.manifest.i18nMessages["_action_"+e.actionName+"_label"];else{var o=t.manifest.messageActions;if(o)for(var i=0;i<o.length;i++)if(o[i].name===e.actionName){n=o[i].label;break}}else if("Framework"===t.label){var r=B.AppMessageManager.getInstance().getAllActions();for(i=0;i<r.length;i++)if(e.actionId.indexOf(r[i].id)>-1){n=r[i].label;break}}return n}var tn,nn=function(e){function t(t){var n=e.call(this,t)||this;return n.modalStyle={position:"absolute",top:"0",bottom:"0",width:"259px",height:"100%",borderRight:"",borderBottom:"",paddingBottom:"1px"},n.updateLocalState=function(e,t){var o=Object(B.getAppConfigAction)().appConfig;if(e.messageConfigs&&e.messageConfigs!==t.messageConfigs){var i=null,r=null,a=null;if(n.state.currentTriggeredMessage&&n.state.currentTriggeredMessage.messageType){for(var s=Object.keys(e.messageConfigs),c=0;c<s.length;c++)if(e.messageConfigs[s[c]].messageType===n.state.currentTriggeredMessage.messageType&&e.messageConfigs[s[c]].widgetId===n.state.currentTriggeredMessage.widgetId){i=e.messageConfigs[s[c]];break}if(i&&n.state.currentTriggeredTarget)if(n.state.currentTriggeredTarget.id){var l=n.state.currentTriggeredTarget;if(n.state.panelRoutes&&n.state.panelRoutes.length>0&&n.state.panelRoutes[n.state.panelRoutes.length-1].pathType===R.ActionChoose)r=o.widgets[l.id];else for(c=0;c<i.actions.length;c++)if(i.actions[c].widgetId===l.id){r=o.widgets[l.id];break}}else{l=n.state.currentTriggeredTarget;if(n.state.panelRoutes&&n.state.panelRoutes.length>0&&n.state.panelRoutes[n.state.panelRoutes.length-1].pathType===R.ActionChoose)r=l;else for(c=0;c<i.actions.length;c++)if(!i.actions[c].widgetId){r=l;break}}if(i&&n.state.currentTriggeredAction&&n.state.currentTriggeredAction.actionName)for(c=0;c<i.actions.length;c++)if(i.actions[c].actionId===n.state.currentTriggeredAction.actionId&&i.actions[c].widgetId===n.state.currentTriggeredAction.widgetId&&i.actions[c].actionName===n.state.currentTriggeredAction.actionName){a=i.actions[c];break}}n.setState({currentTriggeredMessage:i,currentTriggeredTarget:r,currentTriggeredAction:a})}},n.resetState=function(){n.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},n.onMessageRemoved=function(e){e.actions.forEach((function(t){var n=B.AppMessageManager.getInstance().getAction(t.widgetId,t.actionName);n&&n.onRemoveListen(e.messageType,e.widgetId)})),Object(B.getAppConfigAction)().removeMessage(e).exec()},n.onMessageChanged=function(e){n.setState({currentTriggeredMessage:e},(function(){Object(B.getAppConfigAction)().editMessage(e).exec()}))},n.onUpdateAction=function(e,t,o){o?n.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:[]},(function(){Object(B.getAppConfigAction)().editMessage(e).exec()})):n.setState({currentTriggeredMessage:e,currentTriggeredAction:t},(function(){Object(B.getAppConfigAction)().editMessage(e).exec()}))},n.getMessages=function(){var e=n.props.messageConfigs,t=[],o=Object.keys(e);if(o.length>0)for(var i=0;i<o.length;i++)e[o[i]]&&e[o[i]].widgetId===n.props.widgetId&&t.push(e[o[i]]);return t},n.onShowMessageChooseList=function(){var e=[{pathType:R.MessageChoose,message:null}];n.setState({panelRoutes:e})},n.onShowTargetChooseList=function(e){var t=[{pathType:R.TargetChoose,message:e}];n.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},n.onShowActionSettingPage=function(e,t){var o=[{pathType:R.ActionSetting,message:e}];n.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:o})},n.onMessageChooseListSelected=function(e){var t=Object.assign([],n.state.panelRoutes);t.push({pathType:R.TargetChoose,message:e}),n.setState({currentTriggeredMessage:e,panelRoutes:t},(function(){Object(B.getAppConfigAction)().addMessage(e).exec()}))},n.onTargetChooseListSelected=function(e){var t=Object.assign([],n.state.panelRoutes);t.push({pathType:R.ActionChoose,message:n.state.currentTriggeredMessage}),n.setState({currentTriggeredTarget:e,panelRoutes:t})},n.onActionChooseListSelected=function(e,t){if(null===t.config){var o=Object.assign([],n.state.panelRoutes);o.push({pathType:R.ActionSetting,message:e}),n.setState({currentTriggeredMessage:e,currentTriggeredAction:Object(z.Immutable)(t),panelRoutes:o},(function(){Object(B.getAppConfigAction)().editMessage(e).exec()}))}else n.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:[]},(function(){Object(B.getAppConfigAction)().editMessage(e).exec()}))},n.backForwardPanel=function(){var e=Object.assign([],n.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){var t=e[e.length-1].message;n.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},(function(){Object(B.getAppConfigAction)().editMessage(t).exec()}))}else{var o=n.state.panelRoutes[n.state.panelRoutes.length-1].message;n.setState({panelRoutes:e,currentTriggeredMessage:null},(function(){Object(B.getAppConfigAction)().removeMessage(o).exec()}))}},n.formatMessage=function(e){return n.props.formatMessage(e)},n.closePanel=function(){n.setState({panelRoutes:[]})},n.modalStyle.borderRight="1px solid "+n.props.theme.colors.white,n.modalStyle.borderBottom="1px solid "+n.props.theme.colors.white,n.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]},n}return qt(t,e),t.prototype.getStyle=function(e){return Object(z.css)(tn||(tn=$t(["\n      .message-setting {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n        }\n\n        .listItem {\n          cursor: pointer;\n          padding: 5px 0px;\n        }\n\n        .listItem.active {\n          background-color: ",";\n          border: 0;\n        }\n\n        .listItem:hover {\n          background-color: ",";\n        }\n\n        .active-border {\n          border: 1px solid "," !important;\n        }\n\n        .message-item-container {\n          background-color: ",";\n          border: 1px solid ",";\n        }\n\n        .message-item {\n\n          .widget-name {\n            font-size: ",";\n            font-weight: 400;\n          }\n\n          .action-name {\n            font-size: ",";\n            height: ",";\n          }\n\n          padding: 5px 12px 6px 12px;\n\n          .action-item {\n            padding: 5px 10px 10px 10px;\n            border: 1px solid ",";\n            background-color: ",";\n          }\n\n          .drag-item {\n            &:hover {\n\n              .action-item {\n                border: 1px solid ",";\n              }\n\n              .action-name {\n                background-color: ",";\n              }\n            }\n          }\n\n          .message-item-title {\n            font-size: ",";\n            width: 190px;\n            overflow: hidden;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            display: -webkit-box;\n          }\n\n          .deleteIcon-disable {\n            opacity: .3;\n          }\n\n          .deleteIcon {\n            cursor: pointer;\n            opacity: .8;\n          }\n\n          .deleteIcon:hover {\n            opacity: 1;\n          }\n\n          .item-add-action {\n            cursor: pointer;\n            color: ",";\n\n            &:hover {\n              color: ",";\n            }\n          }\n        }\n      }\n    "],["\n      .message-setting {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n        }\n\n        .listItem {\n          cursor: pointer;\n          padding: 5px 0px;\n        }\n\n        .listItem.active {\n          background-color: ",";\n          border: 0;\n        }\n\n        .listItem:hover {\n          background-color: ",";\n        }\n\n        .active-border {\n          border: 1px solid "," !important;\n        }\n\n        .message-item-container {\n          background-color: ",";\n          border: 1px solid ",";\n        }\n\n        .message-item {\n\n          .widget-name {\n            font-size: ",";\n            font-weight: 400;\n          }\n\n          .action-name {\n            font-size: ",";\n            height: ",";\n          }\n\n          padding: 5px 12px 6px 12px;\n\n          .action-item {\n            padding: 5px 10px 10px 10px;\n            border: 1px solid ",";\n            background-color: ",";\n          }\n\n          .drag-item {\n            &:hover {\n\n              .action-item {\n                border: 1px solid ",";\n              }\n\n              .action-name {\n                background-color: ",";\n              }\n            }\n          }\n\n          .message-item-title {\n            font-size: ",";\n            width: 190px;\n            overflow: hidden;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n            display: -webkit-box;\n          }\n\n          .deleteIcon-disable {\n            opacity: .3;\n          }\n\n          .deleteIcon {\n            cursor: pointer;\n            opacity: .8;\n          }\n\n          .deleteIcon:hover {\n            opacity: 1;\n          }\n\n          .item-add-action {\n            cursor: pointer;\n            color: ",";\n\n            &:hover {\n              color: ",";\n            }\n          }\n        }\n      }\n    "])),e.colors.palette.primary[100],z.polished.rgba(e.colors.palette.primary[100],.4),e.colors.palette.primary[700],e.colors.palette.light[500],e.colors.palette.light[500],z.polished.rem(14),z.polished.rem(13),z.polished.rem(25),e.colors.palette.light[400],e.colors.palette.light[400],e.colors.palette.primary[700],e.colors.palette.secondary[200],z.polished.rem(14),e.colors.palette.primary[700],e.colors.palette.primary[800])},t.prototype.componentDidUpdate=function(e){this.props.widgetId!==e.widgetId?this.resetState():this.updateLocalState(this.props,e)},t.prototype.render=function(){var e=this,t=this.getMessages(),n=Object(B.getAppConfigAction)().appConfig,o=this.props.widgets[this.props.widgetId]&&this.props.widgets[this.props.widgetId].manifest&&this.props.widgets[this.props.widgetId].manifest.publishMessages;return Object(z.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},Object(z.jsx)("div",{className:"jimu-widget message-setting"},(!o||0===o.length)&&Object(z.jsx)(U.SettingSection,null,Object(z.jsx)("div",{className:"w-100 justify-content-center d-flex"},this.formatMessage("noTrigger"))),o&&o.length>0&&Object(z.jsx)(U.SettingSection,null,Object(z.jsx)(U.SettingRow,{flow:"wrap"},Object(z.jsx)("div",{className:"w-100 justify-content-center d-flex"},Object(z.jsx)(L.Button,{className:"w-100",type:"primary",onClick:this.onShowMessageChooseList},Object(z.jsx)("div",{className:"w-100 text-truncate"},this.formatMessage("addTrigger"))))),Object(z.jsx)(U.SettingRow,{flow:"wrap"},t.map((function(t,o){return Object(z.jsx)(Ht,{key:o,message:t,appConfig:n,onMessageRemoved:e.onMessageRemoved,isActive:t===e.state.currentTriggeredMessage&&e.state.panelRoutes.length>0,onMessageChanged:e.onMessageChanged,onClickAddAction:e.onShowTargetChooseList,onClickEditAction:e.onShowActionSettingPage,formatMessage:e.props.formatMessage,action:e.state.panelRoutes.length>0&&e.state.currentTriggeredAction})}))),this.state.panelRoutes.length>0&&!this.props.pageId?Object(z.jsx)("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===R.MessageChoose&&Object(z.jsx)(U.SidePopper,{isOpen:!0,position:"right"},Object(z.jsx)("div",{className:"bg-light-300 border-color-gray-400",style:this.modalStyle},Object(z.jsx)(Qt,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},Object(z.jsx)(yt,{widgetId:this.props.widgetId,appConfig:n,onSelected:this.onMessageChooseListSelected,messages:t,formatMessage:this.props.formatMessage})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===R.TargetChoose&&this.state.currentTriggeredMessage&&Object(z.jsx)(U.SidePopper,{isOpen:!0,position:"right"},Object(z.jsx)("div",{className:"bg-light-300 border-color-gray-400",style:this.modalStyle},Object(z.jsx)(Qt,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},Object(z.jsx)(Rt,{appConfig:n,onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:this.props.formatMessage})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===R.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&Object(z.jsx)(U.SidePopper,{isOpen:!0,position:"right"},Object(z.jsx)("div",{className:"bg-light-300 border-color-gray-400",style:this.modalStyle},Object(z.jsx)(Qt,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},Object(z.jsx)(At,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:this.props.formatMessage})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===R.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&Object(z.jsx)(U.SidePopper,{isOpen:!0,position:"right"},Object(z.jsx)("div",{className:"bg-light-300 border-color-gray-400",style:this.modalStyle},Object(z.jsx)(Qt,{hideBackArrow:!0,formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:""+this.formatMessage("actionSet"),onBack:this.backForwardPanel,onClose:this.closePanel},Object(z.jsx)(Vt,{widgetId:this.props.widgetId,appConfig:n,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:this.props.formatMessage}))))):null)))},t}(z.React.PureComponent),on=z.ReactRedux.connect((function(e){return{messageConfigs:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.messageConfigs,widgets:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets}}))(z.themeUtils.withTheme(nn)),rn={pageSetting:"Page settings",dialogSetting:"Dialog settings",openWithWindow:"Open with Window",openWithWindowTip:"Only fixed windows are supported (except splash).",folderSetting:"Folder settings",linkSetting:"Link settings",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",fitToContainer:"Fit to container",keepAspectRatio:"Keep aspect ratio",aspectRatio:"Aspect ratio",fixedHeight:"Fixed height",content:"Content",dynamicSettingStyle:"Style",action:"Action",daynamicLayout:"Layout",displayMode:"Display mode",dynamicWidth:"Width",dynamicHeight:"Height",dynamicLoading:"Loading",heightMode:"Height mode",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",sectionDelete:"Delete",noWidget:"No widget",maxWidth:"Max width",docked:"Docked",floatingScreen:"Floating",verticalSpacing:"Vertical spacing",triggerPosition:"Trigger position",upper:"Upper",lower:"Lower",dsDuplicateView:"Duplicate view",dsDuplicateScreen:"Duplicate screen",newView:"New view",noSettingOptions:"No setting options",contentWidth:"Content width",dsCustom:"Custom",dsAuto:"Auto",gap:"Gap",size:"Size",lockParent:"Kept within the parent container",margin:"Margin",noStyle:"This widget does not support style settings.",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Action settings",actionSettings:"Settings",actionDelete:"Delete",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",noAction:"No action",chooseSearchTrigger:"Select or search a trigger",chooseSearchTarget:"Select or search a target",chooseSearchAction:"Select or search an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading...",turnTo:"Switch to:",dsFill:"Fill",keepFixedOnScroll:"Stays at the top of the page when scrolling",titleBackground:"Background",titleOption:"Options",copyPage:"Copy",align:"Align",start:"Start",end:"End",placeholder:"Placeholder",mode:"Mode",fixedMode:"Fixed",anchoredMode:"Anchored",fixedModeTip:"Display in a fixed position.",anchoredModeTip:"Appears next to the linked widget.",splashDlgWarning:"Splash cannot be set to Anchored.",pageDlgWarning:"Window opened with pages cannot be set to Anchored.",keepLeft:"Keep left",keepRight:"Keep right",keepCenter:"Keep center",keepTop:"Keep top",keepBottom:"Keep bottom",closeOptions:"Close options",clickOutside:"Click outside to close Window",interaction:"Interaction",interactionStyle1:"Checkbox only",interactionStyle2:"Button in the same line",interactionStyle3:"Button in a different line",confirmation:"Confirmation",confirmationRequiredText:"Check to proceed",confirmationButtonTextHolder:"Required",closeIcon:"Close icon",closeIconPosition:"Position",closeIconPositionTL:"Top left",closeIconPositionTR:"Top right",preventDisplayAgain:'"Do not show again" option',checkboxText:"Checkbox text",checkboxButtonText:"Button text",alwaysShow:"Always show this window",arrows:"Arrows",dots:"Dots",autoPlay:"Auto play",offset:"Offset",interval:"Interval (Second)",loop:"Loop",toggleViewList:"Toggle view list",spacing:"Spacing",scrollToSwitch:"Scroll to switch"},an=n(11),sn=n(35),cn=n(43),ln=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},pn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dn=z.React.useState,gn=z.React.useEffect,un=n(31),hn=n(32),fn={svg:un},mn={svg:hn},bn=Object.assign({},rn,L.defaultMessages,D,z.defaultMessages);var vn,wn,jn,xn=function(e){var t=dn("#"),o=t[0],i=t[1],r=e.id,a=e.type,s=e.theme,c=e.intl,l=e.linkTitle;return gn((function(){(function(e,t){var n,o,i,r,a,s,c=null===(o=null===(n=Object(z.getAppStore)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===o?void 0:o.appConfig;if("page"===t||"dialog"===t)return an.a.getBuildAppsHelpLink("add-a-"+t);if("screen"===t)return an.a.getBuildAppsHelpLink("add-screen-groups");if("section"===t)s="section";else if("placeholder"===t)s="placeholder";else if(!(s=null===(a=null===(r=null===(i=null==c?void 0:c.widgets)||void 0===i?void 0:i[e])||void 0===r?void 0:r.manifest)||void 0===a?void 0:a.name))return Promise.resolve(null);return an.a.getWidgetHelpLink(s)})(r,a).then((function(e){i(e)}))}),[r,a]),Object(z.jsx)(L.Link,{themeStyle:{icon:!0,type:"link"},to:o,target:"_blank",title:l,css:Object(z.css)(vn||(vn=ln(["\n        margin-right: ",";\n        padding: 0 !important;\n        .jimu-icon {\n          margin-right: 0;\n          color: ",";\n        }\n        :hover {\n          .jimu-icon{\n            color: ",";\n          }\n        }\n      "],["\n        margin-right: ",";\n        padding: 0 !important;\n        .jimu-icon {\n          margin-right: 0;\n          color: ",";\n        }\n        :hover {\n          .jimu-icon{\n            color: ",";\n          }\n        }\n      "])),z.polished.rem(-9),s.colors.palette.dark[400],s.colors.black)},Object(z.jsx)(L.Icon,{icon:n(77),autoFlip:!z.i18n.isSameLanguage(null==c?void 0:c.locale,"he"),size:16}))},yn=function(e){var t,o=e.hideColorSelector,i=e.headTitle,r=e.icon,a=e.customIcon,s=e.id,c=e.type,l=e.needIconFlip,p=e.theme,d=e.intl,g=e.handleIconChange,u=e.handleTitleInputBlur,h=e.handleKeydown,f=e.focusEditTitle,m=e.headTitleInput,b=dn(""),v=b[0],w=b[1],j=[{svg:a}];t=r&&r.svg?r:{svg:r},gn((function(){w(i)}),[i]);return Object(z.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},Object(z.jsx)("div",{className:"d-flex align-items-center"},Object(z.jsx)(cn.IconPicker,{previewOptions:{autoFlip:l,color:!0},configurableOption:o?"none":"color",className:"flex-none",icon:t,customIcons:j,onChange:g,hideRemove:!0}),Object(z.jsx)("div",{className:"d-flex position-relative"},Object(z.jsx)("span",{className:"size-placeholder"},v||""),Object(z.jsx)("div",{className:"position-absolute d-flex header-title-input-con"},Object(z.jsx)(L.TextInput,{className:"header-title-input h5",ref:m,title:v,value:v||"",onChange:function(e){return w(e.target.value)},onBlur:function(e){return u(e,s,c)},onKeyDown:h}),Object(z.jsx)(L.Button,{type:"tertiary",size:"sm",className:"toollist-edit-icon",onClick:f},Object(z.jsx)(L.Icon,{icon:n(33),width:16,height:16}))))),Object(z.jsx)(xn,{id:s,type:c,theme:p,intl:d,linkTitle:function(e){return d.formatMessage({id:e,defaultMessage:bn[e]})}("help")}))},In=function(e){function t(t){var n=e.call(this,t)||this;n.spanText=z.React.createRef(),n.headTitleInput=z.React.createRef(),n.getCss=function(){var e,t,o,i,r,a,s=n.props.theme;return Object(z.css)(wn||(wn=ln(["\n      height: 100%;\n      overflow: hidden;\n      overflow-x: hidden;\n\n      .jimu-widget-setting {\n        overflow-x: hidden;\n      }\n      .widget-setting-tab{\n        position: absolute;\n        background-color: ",";\n      }\n\n      .widget-setting, .section-setting {\n        margin-top: calc(18px - ",");\n        height: calc(100% - "," + ",");\n      }\n\n      .jimu-widget-setting--row {\n        label {\n          user-select: none;\n        }\n      }\n      .jimu-widget-setting--section-header {\n        user-select: none;\n      }\n      .tab-content {\n        height: calc(100% - ",");\n        overflow: auto;\n        overflow-x: hidden;\n      }\n      .tab-pane{\n        width: 100%;\n      }\n\n      .tab-title-item{\n        width: 30%;\n      }\n\n      .edit-label-input {\n        width: 50%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n\n      .title-span-hide {\n        &.h5 {\n          font-weight: ",";\n          font-size: 1rem;\n        }\n      }\n\n      .header-title-input {\n        width: auto;\n        border: 1px solid transparent;\n        width: ",";\n        height: auto;\n        min-width: ",";\n        max-width: ",";\n        margin: 0;\n        padding: 0 ",";\n        margin-left: ",";\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        color: ",";\n        background-color: transparent;\n        &.h5 {\n          font-weight: ",";\n          font-size: 1rem;\n        }\n      }\n\n      .header-title-input:hover {\n        border: 1px solid ",";\n      }\n\n      .header-title-input:focus {\n        border: 1px solid ",";\n      }\n      .header-title-input-con {\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        svg {\n          margin: 0;\n        }\n        button {\n          color: ",";\n          padding-left: ",";\n        }\n      }\n      .size-placeholder {\n        height: ",";\n        display: block;\n        opacity: 0;\n        padding-left: ",";\n        padding-right: ",";\n        font-size: ",";\n        overflow: hidden;\n        max-width: ",";\n      }\n\n      .setting-container {\n        overflow-y: auto;\n        overflow-x: auto;\n      }\n\n      .help-btn {\n        color: ",";\n      }\n      .help-btn:hover {\n        color: ",";\n      }\n    "],["\n      height: 100%;\n      overflow: hidden;\n      overflow-x: hidden;\n\n      .jimu-widget-setting {\n        overflow-x: hidden;\n      }\n      .widget-setting-tab{\n        position: absolute;\n        background-color: ",";\n      }\n\n      .widget-setting, .section-setting {\n        margin-top: calc(18px - ",");\n        height: calc(100% - "," + ",");\n      }\n\n      .jimu-widget-setting--row {\n        label {\n          user-select: none;\n        }\n      }\n      .jimu-widget-setting--section-header {\n        user-select: none;\n      }\n      .tab-content {\n        height: calc(100% - ",");\n        overflow: auto;\n        overflow-x: hidden;\n      }\n      .tab-pane{\n        width: 100%;\n      }\n\n      .tab-title-item{\n        width: 30%;\n      }\n\n      .edit-label-input {\n        width: 50%;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      }\n\n      .title-span-hide {\n        &.h5 {\n          font-weight: ",";\n          font-size: 1rem;\n        }\n      }\n\n      .header-title-input {\n        width: auto;\n        border: 1px solid transparent;\n        width: ",";\n        height: auto;\n        min-width: ",";\n        max-width: ",";\n        margin: 0;\n        padding: 0 ",";\n        margin-left: ",";\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        color: ",";\n        background-color: transparent;\n        &.h5 {\n          font-weight: ",";\n          font-size: 1rem;\n        }\n      }\n\n      .header-title-input:hover {\n        border: 1px solid ",";\n      }\n\n      .header-title-input:focus {\n        border: 1px solid ",";\n      }\n      .header-title-input-con {\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        svg {\n          margin: 0;\n        }\n        button {\n          color: ",";\n          padding-left: ",";\n        }\n      }\n      .size-placeholder {\n        height: ",";\n        display: block;\n        opacity: 0;\n        padding-left: ",";\n        padding-right: ",";\n        font-size: ",";\n        overflow: hidden;\n        max-width: ",";\n      }\n\n      .setting-container {\n        overflow-y: auto;\n        overflow-x: auto;\n      }\n\n      .help-btn {\n        color: ",";\n      }\n      .help-btn:hover {\n        color: ",";\n      }\n    "])),s.body.bg,null!==(o=null===(t=null===(e=null==s?void 0:s.components)||void 0===e?void 0:e.navbar)||void 0===t?void 0:t.paddingY)&&void 0!==o?o:0,z.polished.rem(18),null!==(a=null===(r=null===(i=null==s?void 0:s.components)||void 0===i?void 0:i.navbar)||void 0===r?void 0:r.paddingY)&&void 0!==a?a:0,z.polished.rem(40),s.typography.weights.extraBold,z.polished.rem(170),z.polished.rem(10),z.polished.rem(170),z.polished.rem(4),z.polished.rem(4),s.colors.palette.dark[600],s.typography.weights.bold,s.colors.palette.dark[100],s.colors.primary,s.colors.palette.dark[600],z.polished.rem(2),z.polished.rem(26),z.polished.rem(8),z.polished.rem(34),z.polished.rem(16),z.polished.rem(175),s.colors.palette.light[800],s.colors.black)},n.onLayoutItemSettingChanged=function(e,t){Object(B.getAppConfigAction)().editLayoutItemSetting(e,t).exec()},n.onLayoutItemStyleChanged=function(e,t){var n=Object(B.getAppConfigAction)(),o=e.layoutId,i=e.layoutItemId,r=n.appConfig.layouts[o].content[i];r.type===z.LayoutItemType.Widget?n.editWidgetProperty(r.widgetId,"style",t).exec():r.type===z.LayoutItemType.Section&&n.editSectionProperty(r.sectionId,"style",t).exec()},n.onLayoutPosChanged=function(e,t){Object(B.getAppConfigAction)().editLayoutItemBBox(e,t).exec()},n.getPageType=function(e,t){for(var n in t){var o=t[n];if(o.id===e)return o}return{}},n.formatMessage=function(e){var t=Object.assign({},rn,L.defaultMessages,D,z.defaultMessages);return n.props.intl.formatMessage({id:e,defaultMessage:t[e]})},n.handleTitleInputBlur=function(e,t,o){n.editTitle(t,e.target.value,o)},n.editTitle=function(e,t,n){var o=Object(B.getAppConfigAction)();(t=null==t?void 0:t.trim())?"widget"===n||"block"===n?o.editWidgetProperty(e,"label",t).exec():"section"===n?o.editSectionProperty(e,"label",t).exec():"screen"===n?o.editScreenGroupProperty(e,"label",t).exec():"page"===n?o.editPageProperty(e,"label",t).exec():"dialog"===n&&o.editDialogProperty(e,"label",t).exec():"widget"===n?t=o.appConfig.widgets[e].label:"section"===n?t=o.appConfig.sections[e].label:"screen"===n?t=o.appConfig.screenGroups[e].label:"page"===n&&(t=o.appConfig.pages[e].label)},n.handleKeydown=function(e){13===e.keyCode&&n.headTitleInput.current&&n.headTitleInput.current.blur()},n.handleIconChange=function(e){var t=n.getDisplay(),o=n.props,i=o.selection,r=o.currentPageId,a=o.currentDialogId,s=Object(B.getAppConfigAction)(),c=s.appConfig;if(t.page)s.editPageProperty(r,"icon",e).exec();else if(t.dialog)s.editDialogProperty(a,"icon",e).exec();else if(t.widget){(l=K.searchUtils.findLayoutItem(c,i))&&s.editWidgetProperty(l.widgetId,"icon",e).exec()}else if(t.section){(l=K.searchUtils.findLayoutItem(c,i))&&s.editSectionProperty(l.sectionId,"icon",e).exec()}else{if(!t.screen)return;var l;(l=K.searchUtils.findLayoutItem(c,i))&&s.editScreenGroupProperty(l.screenGroupId,"icon",e).exec()}},n.focusEditTitle=function(e){n.headTitleInput.current&&(n.headTitleInput.current.select(),n.headTitleInput.current.focus())},n.getDisplay=function(){var e,t=n.props.selection,o=n.getAppConfig(),i={widget:!1,section:!1,screen:!1,layoutItem:!1,placeholder:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1};if(t){var r=K.searchUtils.findLayoutItem(o,t);r?r.type===z.LayoutItemType.Widget?r.widgetId?i.widget=!0:(i.layoutItem=!0,i.placeholder=!0):r.type===z.LayoutItemType.Section&&!1!==(null===(e=t.additionalInfo)||void 0===e?void 0:e.commonSection)?i.section=!0:r.type===z.LayoutItemType.ScreenGroup?i.screen=!0:i.layoutItem=!0:i.noSelection=!0}else n.props.currentDialogId?i.dialog=!0:n.props.currentPageId?(i.page=!0,i.link=n.getPageType(n.props.currentPageId,o.pages).type===z.PageType.Link,i.folder=n.getPageType(n.props.currentPageId,o.pages).type===z.PageType.Folder):i.noSelection=!0;return i};var o={titleText:"",headTitleText:"",helpLink:""},i=t.selection,r=t.appConfig,a=t.editingSectionId,s=t.currentPageId;if(i){var c=K.searchUtils.findLayoutItem(r,i);c&&(c.type===z.LayoutItemType.Widget?c.widgetId&&(o.headTitleText=r.widgets[c.widgetId].label):c.type===z.LayoutItemType.Section&&(o.headTitleText=r.sections[c.sectionId].label))}else!a&&s&&(o.headTitleText=r.pages[s].label);return n.state=o,n}return pn(t,e),t.prototype.getAppConfig=function(){return Object(z.getAppStore)().getState().appStateInBuilder&&Object(z.getAppStore)().getState().appStateInBuilder.appConfig},t.prototype.getDefaultPageIcon=function(e){return B.utils.getDefaultTocPageIcon(e).toString()},t.prototype.getDefaultDialogIcon=function(){return B.utils.getDefaultTocDialogIcon().toString()},t.prototype.getDefaultWidgetIcon=function(e){return z.urlUtils.getAbsoluteRootUrl()+e.uri+"/icon.svg"},t.prototype.renderWidgetSettings=function(e,t,n,o,i){var r,a,s,c=this.props,l=c.currentSelectionIcon,p=c.currentSelectionTitle,d=null==n?void 0:n.layouts[null==o?void 0:o.layoutId],g=K.searchUtils.findLayoutItem(n,o),u=n.widgets[g.widgetId],h=u.manifest;return s=(null==h?void 0:h.properties.hasConfig)&&(null==h?void 0:h.properties.hasConfigInSettingPage)?Object(z.jsx)(L.Tabs,{underline:!0,key:"widget-setting",className:"widget-setting flex-grow-1 w-100",fill:!0},Object(z.jsx)(L.Tab,{id:"content",title:this.formatMessage("content"),defaultActive:!0,className:"tab-title-item"},Object(z.jsx)(W,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:g.widgetId,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),Object(z.jsx)(L.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle"),className:"tab-title-item"},Object(z.jsx)("div",{className:"setting-container"},Object(z.jsx)(bt,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged}))),Object(z.jsx)(L.Tab,{id:"action",title:this.formatMessage("action"),className:"tab-title-item"},Object(z.jsx)("div",{className:"setting-container"},Object(z.jsx)(on,{widgetId:g.widgetId,formatMessage:this.formatMessage,pageId:z.urlUtils.getAppIdPageIdFromUrl().pageId})))):Object(z.jsx)("div",{className:"h-100"},Object(z.jsx)(bt,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})),s=Object(z.jsx)("div",{css:i&&Object(z.css)(jn||(jn=ln(["z-index: -1"],["z-index: -1"]))),className:"w-100 h-100 d-flex flex-column widget-setting-tab","data-is-parent":!!i||void 0},Object(z.jsx)(yn,{headTitle:p,icon:l,customIcon:this.getDefaultWidgetIcon(u),id:u.id,type:d.type===z.LayoutType.FlowLayout?"block":"widget",needIconFlip:null===(a=null===(r=null==u?void 0:u.manifest)||void 0===r?void 0:r.properties)||void 0===a?void 0:a.flipIcon,theme:e,intl:t,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),Object(z.jsx)("div",{style:{flex:1,overflow:"auto"}},s))},t.prototype.render=function(){var e,t=this.getAppConfig(),n=this.props,o=n.selection,i=n.browserSizeMode,r=n.theme,a=n.intl,s=n.currentSelectionIcon,c=n.currentSelectionTitle;if(!t)return Object(z.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},Object(z.jsx)(te,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode,appTheme:this.props.appTheme}));var l,p=this.getDisplay();if(p.widget){var d=K.searchUtils.findLayoutItem(t,o);if(t.widgets[null==d?void 0:d.widgetId]){var g=d.widgetId,u=K.searchUtils.getParentWidgetIdOfContent(t,g,z.LayoutItemType.Widget,i),h=t.widgets[u];if(u&&(null===(e=null==h?void 0:h.manifest)||void 0===e?void 0:e.widgetType)!==z.WidgetType.Layout){var f=K.searchUtils.getLayoutInfosHoldcontent(t,z.LayoutItemType.Widget,u,i)[0];l=Object(z.jsx)(z.React.Fragment,null,f&&this.renderWidgetSettings(r,a,t,f,!0),this.renderWidgetSettings(r,a,t,o))}else l=Object(z.jsx)(z.React.Fragment,null,this.renderWidgetSettings(r,a,t,o))}else l=Object(z.jsx)("div",null,this.formatMessage("noSelection"))}if(p.layoutItem){var m=p.placeholder?this.formatMessage("placeholder"):this.formatMessage("daynamicLayout");l=Object(z.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(z.jsx)("h4",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},Object(z.jsx)("div",null,m),p.placeholder&&Object(z.jsx)(xn,{type:"placeholder",theme:r,intl:a,linkTitle:this.formatMessage("help")})),Object(z.jsx)("div",{className:"flex-grow-1 setting-container"},Object(z.jsx)(bt,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))}if(p.section){d=K.searchUtils.findLayoutItem(t,o);var b=t.sections[d.sectionId];l=Object(z.jsx)(L.Tabs,{underline:!0,className:"flex-grow-1 section-setting",fill:!0},Object(z.jsx)(L.Tab,{id:"content",key:"section-setting",title:this.formatMessage("content"),defaultActive:!0},Object(z.jsx)(Ge,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.appTheme,dispatch:this.props.dispatch,sectionId:b.id})),Object(z.jsx)(L.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle")},Object(z.jsx)("div",{className:"h-100 setting-container"},Object(z.jsx)(bt,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))),l=Object(z.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(z.jsx)(yn,{headTitle:c,icon:s,customIcon:B.utils.getDefaultSectionIcon().toString(),id:b.id,type:"section",theme:r,intl:a,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),Object(z.jsx)("div",{className:"h-100 setting-container"},l))}if(p.screen){d=K.searchUtils.findLayoutItem(t,o);l=Object(z.jsx)(ht,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,screenGroupId:d.screenGroupId}),l=Object(z.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(z.jsx)(yn,{headTitle:c,icon:s,customIcon:B.utils.getDefaultSectionIcon().toString(),id:d.screenGroupId,type:"screen",theme:r,intl:a,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),Object(z.jsx)("div",{className:"h-100 setting-container"},l))}if(p.page){l=Object(z.jsx)(te,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.appTheme}),p.link?l=Object(z.jsx)(ye,{dispatch:this.props.dispatch,appConfig:t,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):p.folder&&(l=Object(z.jsx)(Ae,{dispatch:this.props.dispatch,appConfig:t,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));var v=this.props.currentPageId,w=t.pages[v];l=Object(z.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(z.jsx)(yn,{hideColorSelector:!0,headTitle:c,icon:s,customIcon:this.getDefaultPageIcon(w),id:w.id,type:"page",theme:r,intl:a,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),Object(z.jsx)("div",{className:"h-100 setting-container"},l))}if(p.dialog){var j=this.props.currentDialogId;l=Object(z.jsx)(he,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,dialogId:j,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.appTheme});var x=t.dialogs[j];l=Object(z.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},Object(z.jsx)(yn,{headTitle:c,icon:s,customIcon:this.getDefaultDialogIcon(),id:x.id,type:"dialog",theme:r,intl:a,handleIconChange:this.handleIconChange,handleTitleInputBlur:this.handleTitleInputBlur,handleKeydown:this.handleKeydown,focusEditTitle:this.focusEditTitle,headTitleInput:this.headTitleInput}),Object(z.jsx)("div",{className:"h-100 setting-container"},l))}return p.noSelection&&(l=Object(z.jsx)("div",{className:"h-100"},this.formatMessage("noSelection"))),Object(z.jsx)("div",{css:this.getCss(),className:"builder-dynamic-setting bg-light-300"},Object(z.jsx)("span",{ref:this.spanText,className:"title-span-hide px-1 border h5",style:{width:"auto",position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1}},this.state.headTitleText||""),l)},t.mapExtraStateProps=function(e,t){var n,o,i,r,a,s,c,l,p,d,g=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.currentPageId,u=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appRuntimeInfo.currentDialogId,h=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig;g&&(p=null===(a=null===(r=null==h?void 0:h.pages)||void 0===r?void 0:r[g])||void 0===a?void 0:a.mode,d=null===(c=null===(s=null==h?void 0:h.pages)||void 0===s?void 0:s[g])||void 0===c?void 0:c.maxWidth);var f=null===(l=e.appStateInBuilder)||void 0===l?void 0:l.appRuntimeInfo.selection,m=function(e,t,n,o){var i,r,a;if(e){var s=K.searchUtils.findLayoutItem(o,e);if(s)if(s.type===z.LayoutItemType.Widget){if(s.widgetId){var c=o.widgets[s.widgetId],l=o.layouts[e.layoutId];a=c&&c.label,r=l.type===z.LayoutType.FlowLayout?!Object(sn.isString)(null==c?void 0:c.icon)&&(null==c?void 0:c.icon)||fn:c&&c.icon}}else if(s.type===z.LayoutItemType.Section){if(s.sectionId){var p=o.sections[s.sectionId];a=p&&p.label,r=p&&p.icon||B.utils.getDefaultSectionIcon().toString()}}else if(s.type===z.LayoutItemType.ScreenGroup&&s.screenGroupId){var d=o.screenGroups[s.screenGroupId];a=null==d?void 0:d.label,r=null!==(i=null==d?void 0:d.icon)&&void 0!==i?i:mn}}else if(o)if(t){var g=o.dialogs[t];g&&(a=g.label,r=g.icon||B.utils.getDefaultTocDialogIcon())}else if(n){var u=o.pages[n];u&&(a=u.label,r=u.icon||B.utils.getDefaultTocPageIcon(u))}return{icon:r,title:a}}(f,u,g,h),b=m.icon,v=m.title;return{currentPageId:g,pageMode:p,maxPageWidth:d,widgetsSettingRuntimeInfo:e.builder.widgetsSettingRuntimeInfo,currentDialogId:u,selection:f,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode,appTheme:e.appStateInBuilder&&e.appStateInBuilder.theme,currentSelectionIcon:b,currentSelectionTitle:v}},t}(z.React.PureComponent);t.default=In}]))}}}));