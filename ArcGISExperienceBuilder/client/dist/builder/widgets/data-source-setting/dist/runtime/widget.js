System.register(["jimu-core","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-ui/basic/item-selector"],(function(e){var t,n,s,a,i,o;return{setters:[function(e){t=e},function(e){n=e},function(e){s=e},function(e){a=e},function(e){i=e},function(e){o=e}],execute:function(){e(function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=108)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},108:function(e,t,n){"use strict";n.r(t);var s,a,i,o=n(0),r=n(1),c=n(3),p=n(5),l=n(42),d=n(2),u=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},m=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemove=function(e){if(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.toggle){var t=n.props.dsJson&&n.props.dsJson.id;0===p.dataComponentsUtils.getWidgetsUsingDsOrItsDescendantDss(t,n.props.widgets).length?(Object(d.getAppConfigAction)().removeDataSource(t).exec(),o.DataSourceManager.getInstance().destroyDataSource(t),n.props.toggle()):n.setState({isRemoveOptionsShown:!0})}},n.onRename=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n.props.onRenameItem&&(n.props.onRenameItem&&n.props.onRenameItem(),n.props.toggle())},n.hideRemovePopup=function(){n.setState({isRemoveOptionsShown:!1})},n.togglePopper=function(){n.hideRemovePopup(),n.props.toggle()},n.getStyle=function(e){return Object(o.css)(a||(a=h(["\n      .ds-more-options{\n        position: fixed;\n        background-color: ",";\n        color: ",";\n        z-index: 3;\n        user-select: none;\n        font-size: 13px;\n        border: 1px solid ",";\n        box-shadow: 0 0 6px 0 ",";\n        margin-left: ",";\n        border-radius: 2px;\n        .ds-more-option{\n          word-wrap: break-word;\n          white-space: nowrap;\n          line-height: ",";\n          border-bottom: 1px;\n          cursor: pointer;\n          padding-left: 12px;\n          padding-right: 12px;\n        }\n        .ds-more-option:hover{\n          background-color: ",";\n        }\n        .ds-more-option:active.ds-more-option:hover{\n          background-color: ",";\n        }\n      }\n    "],["\n      .ds-more-options{\n        position: fixed;\n        background-color: ",";\n        color: ",";\n        z-index: 3;\n        user-select: none;\n        font-size: 13px;\n        border: 1px solid ",";\n        box-shadow: 0 0 6px 0 ",";\n        margin-left: ",";\n        border-radius: 2px;\n        .ds-more-option{\n          word-wrap: break-word;\n          white-space: nowrap;\n          line-height: ",";\n          border-bottom: 1px;\n          cursor: pointer;\n          padding-left: 12px;\n          padding-right: 12px;\n        }\n        .ds-more-option:hover{\n          background-color: ",";\n        }\n        .ds-more-option:active.ds-more-option:hover{\n          background-color: ",";\n        }\n      }\n    "])),e.colors.secondary,e.colors.dark,e.colors.palette.light[600],o.polished.rgba(e.colors.white,.2),o.polished.rem(-32),o.polished.rem(26),e.colors.primary,e.colors.palette.primary[600])},n.state={isRemoveOptionsShown:!1,selectedWidgets:[]},n}return u(t,e),t.prototype.render=function(){var e;return this.props.reference&&this.props.dsJson?Object(o.jsx)(r.Popper,{css:this.getStyle(this.props.theme),reference:this.props.reference,open:this.props.isOpen,placement:"right-start",offset:this.props.offset||[25,0],toggle:this.togglePopper},Object(o.jsx)("div",{className:"ds-more-options py-2"},this.props.onRenameItem&&Object(o.jsx)("div",{className:"ds-more-option",onClick:this.onRename},this.props.intl.formatMessage({id:"rename",defaultMessage:r.defaultMessages.rename})),this.props.onRemoveItem&&Object(o.jsx)("div",{className:"ds-more-option",onClick:this.onRemove},this.props.intl.formatMessage({id:"remove",defaultMessage:r.defaultMessages.remove})),Object(o.jsx)(p.DataSourceRemoveWarningPopup,{dataSourceId:null===(e=this.props.dsJson)||void 0===e?void 0:e.id,isOpen:this.state.isRemoveOptionsShown,toggle:this.hideRemovePopup}))):null},t}(o.React.PureComponent),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemoveItem=function(){n.toggleMoreOptions()},n.onRenameItem=function(){n.toggleMoreOptions(),n.setState({isRenameShown:!0})},n.toggleMoreOptions=function(){n.props.toggleMoreOptions&&n.props.toggleMoreOptions(n.props.ds.id)},n.onChildDataIconClick=function(){n.props.onChildDataIconClick&&n.props.onChildDataIconClick(n.props.ds)},n.onRelatedWidgetsIconClick=function(){n.props.onRelatedWidgetsIconClick&&n.props.onRelatedWidgetsIconClick(n.props.ds)},n.onRename=function(e){if(e){var t=n.props.ds.getDataSourceJson().setIn(["label"],e),s=p.dataComponentsUtils.editDataSourceJson(t);Object(d.getAppConfigAction)().editDataSource(s).exec(),n.setState({isRenameShown:!1})}else n.setState({isRenameShown:!1})},n.onDataSourceItemClick=function(){n.props.onDataSourceItemClick(n.props.ds)},n.onMappingIconClick=function(){n.props.onMappingIconClick(n.props.ds)},n.state={isRenameShown:!1},n}return g(t,e),t.prototype.render=function(){var e=this;if(!this.props.ds)return null;var t=!this.props.ds.parentDataSource;return o.React.createElement("div",{className:"m-3 list-item",ref:function(t){e.rootDom=t}},o.React.createElement(p.DataSourceItem,{dataSourceJson:this.props.ds.getDataSourceJson().merge({label:this.props.ds.getLabel()}),isMappingIconShown:!1,onDataSourceItemClick:this.onDataSourceItemClick,isMoreIconShown:t,isRenameInputShown:this.state.isRenameShown&&t,isRelatedWidgetsShown:!0,onMoreIconClick:this.toggleMoreOptions,onMappingIconClick:this.onMappingIconClick,onRename:this.onRename,onChildDataIconClick:this.onChildDataIconClick,onRelatedWidgetsIconClick:this.onRelatedWidgetsIconClick,onToggleHidden:this.props.onToggleHidden,isHideable:this.props.isHideable}),o.React.createElement(m,{isOpen:this.props.isMoreOptionsShown,reference:this.rootDom,intl:this.props.intl,widgets:this.props.widgets,dsJson:this.props.ds&&this.props.ds.getDataSourceJson(),onRemoveItem:this.onRemoveItem,onRenameItem:this.onRenameItem,theme:this.props.theme,toggle:this.toggleMoreOptions}))},t}(o.React.PureComponent),S=o.ReactRedux.connect((function(e,t){var n;return{dataSourceJson:null===(n=t.ds)||void 0===n?void 0:n.getDataSourceJson()}}))(f),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),D=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemoveItem=function(){n.toggleMoreOptions()},n.toggleMoreOptions=function(){n.props.toggleMoreOptions&&n.props.toggleMoreOptions(n.props.dsJson.id)},n}return w(t,e),t.prototype.render=function(){var e=this;return this.props.dsJson?o.React.createElement("div",{className:"m-3 list-item list-error-item",ref:function(t){e.rootDom=t}},o.React.createElement(p.DataSourceErrorItem,{dataSourceJson:this.props.dsJson,isErrorIconShown:this.props.isDataSourceInited&&this.props.isErrorIconShown,isMoreIconShown:this.props.isMoreIconShown,isRelatedWidgetsShown:!0,onMoreIconClick:this.toggleMoreOptions,isHideable:this.props.isHideable,onToggleHidden:this.props.onToggleHidden}),o.React.createElement(m,{isOpen:this.props.isMoreOptionsShown,reference:this.rootDom,intl:this.props.intl,dsJson:this.props.dsJson,onRemoveItem:this.onRemoveItem,widgets:this.props.widgets,theme:this.props.theme,toggle:this.toggleMoreOptions})):null},t}(o.React.PureComponent),v="Failed to create data!",b="No supported data available.",y="No in use fields need to be mapped.",x="No child data needs to be mapped.",M="In use",R="No related widget",I="No used field",O="No layer",C="No data in the experience.<br/>Please add your data.",j="Data views",E="Source",k="Auto refresh",_="Last update: {minutes} minutes ago",N="Last update: a minute ago",A="Last update: a few seconds ago",H="Refresh settings",P="Interval",T="Honor layer's settings",z="minutes",L=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),J=n(20),U=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.getInUseAndOthers=function(){var e={hidden:[],visible:[]},t={hidden:[],visible:[]};return n.state.childDataSources&&n.state.childDataSources.forEach((function(s){var a,i;s&&s.id&&(p.dataComponentsUtils.getWidgetsUsingDsOrItsViews(s.id,n.props.widgets).length>0?(null===(a=null==s?void 0:s.getDataSourceJson())||void 0===a?void 0:a.isHidden)?e.hidden.push(s):e.visible.push(s):(null===(i=null==s?void 0:s.getDataSourceJson())||void 0===i?void 0:i.isHidden)?t.hidden.push(s):t.visible.push(s))})),{inUseDss:e,otherDss:t}},n.onToggleHidden=function(e){if(e){var t=!e.isHidden,s=e.setIn(["isHidden"],t);t||(s=n.traversUnhideChildDss(s));var a=p.dataComponentsUtils.editDataSourceJson(s);Object(d.getAppConfigAction)().editDataSource(a).exec()}},n.traversUnhideChildDss=function(e){if(e){var t=e;return t=t.setIn(["isHidden"],!1),e.childDataSourceJsons&&Object.keys(e.childDataSourceJsons).forEach((function(e){t=t.setIn(["childDataSourceJsons",e],n.traversUnhideChildDss(t.getIn(["childDataSourceJsons",e])))})),t}},n.state={isMapping:!1,childDataSources:null},n}return L(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.props.ds&&this.setState({childDataSources:this.props.ds.getChildDataSources()})},t.prototype.componentDidUpdate=function(e,t){e.ds!==this.props.ds&&(this.props.ds?this.setState({childDataSources:this.props.ds.getChildDataSources()}):this.setState({childDataSources:null}))},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e=this;if(!this.props.ds)return o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}));var t=this.getInUseAndOthers();return 0===t.inUseDss.visible.length&&0===t.inUseDss.hidden.length&&0===t.otherDss.visible.length&&0===t.otherDss.hidden.length?o.React.createElement("div",{className:"empty-placeholder w-100"},o.React.createElement("div",{className:"empty-placeholder-icon"},o.React.createElement(r.Icon,{icon:J,width:80,height:71})),o.React.createElement("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"noLayer",defaultMessage:O})}})):o.React.createElement(o.React.Fragment,null,t.inUseDss.visible.length>0||t.inUseDss.hidden.length>0?o.React.createElement("div",null,o.React.createElement("h5",{className:"m-3 data-setting-secondary-title"},this.props.intl.formatMessage({id:"inUse",defaultMessage:M})),o.React.createElement("div",null,o.dataSourceUtils.getSortedArrayByLabel(t.inUseDss.visible).map((function(t,n){return t&&t.id?o.React.createElement(S,{ds:t,key:n,onDataSourceItemClick:e.props.onDataSourceItemClick,isDataSourceInited:e.props.isDataSourceInited,intl:e.props.intl,widgets:e.props.widgets,theme:e.props.theme,isHideable:!1,onChildDataIconClick:e.props.onChildDataIconClick,onRelatedWidgetsIconClick:e.props.onRelatedWidgetsIconClick,onToggleHidden:e.onToggleHidden}):null})),o.dataSourceUtils.getSortedArrayByLabel(t.inUseDss.hidden).map((function(t,n){return t&&t.id?o.React.createElement(D,{dsJson:t.getDataSourceJson(),key:n,isDataSourceInited:e.props.isDataSourceInited,intl:e.props.intl,widgets:e.props.widgets,theme:e.props.theme,isHideable:!1,onToggleHidden:e.onToggleHidden}):null})))):null,t.otherDss.visible.length>0||t.otherDss.hidden.length>0?o.React.createElement("div",null,(t.inUseDss.visible.length>0||t.inUseDss.hidden.length>0)&&o.React.createElement("h5",{className:"m-3 data-setting-secondary-title"},this.props.intl.formatMessage({id:"others",defaultMessage:r.defaultMessages.others})),o.React.createElement("div",null,o.dataSourceUtils.getSortedArrayByLabel(t.otherDss.visible).map((function(t,n){return t&&t.id?o.React.createElement(S,{ds:t,key:n,onDataSourceItemClick:e.props.onDataSourceItemClick,isDataSourceInited:e.props.isDataSourceInited,intl:e.props.intl,widgets:e.props.widgets,theme:e.props.theme,isHideable:!0,onChildDataIconClick:e.props.onChildDataIconClick,onRelatedWidgetsIconClick:e.props.onRelatedWidgetsIconClick,onToggleHidden:e.onToggleHidden}):null})),o.dataSourceUtils.getSortedArrayByLabel(t.otherDss.hidden).map((function(t,n){return t&&t.id?o.React.createElement(D,{dsJson:t.getDataSourceJson(),key:n,isDataSourceInited:e.props.isDataSourceInited,intl:e.props.intl,widgets:e.props.widgets,theme:e.props.theme,isHideable:!0,onToggleHidden:e.onToggleHidden}):null})))):null)},t}(o.React.PureComponent),V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),W=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},F=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(e){return Object(o.css)(i||(i=W(["\n    .list-refresh-setting-popup{\n      width: ",";\n      .interval-label{\n        .jimu-widget-setting--section-header>*, .jimu-widget-setting--row>*{\n          font-size: ",";\n          font-weight: normal;\n          color: ",";\n        }\n      }\n      .interval-custom{\n        position: relative;\n      }\n      .interval-custom-input{\n        height: ",";\n        input{\n          height: ",";\n          padding-right: ",";\n        }\n      }\n      .interval-custom-placeholder{\n        position: absolute;\n        right: 8px;\n        color: ",";\n      }\n      .disabled-label{\n        color: ",";\n      }\n      .disabled{\n        border-color: "," !important;\n      }\n    }\n    "],["\n    .list-refresh-setting-popup{\n      width: ",";\n      .interval-label{\n        .jimu-widget-setting--section-header>*, .jimu-widget-setting--row>*{\n          font-size: ",";\n          font-weight: normal;\n          color: ",";\n        }\n      }\n      .interval-custom{\n        position: relative;\n      }\n      .interval-custom-input{\n        height: ",";\n        input{\n          height: ",";\n          padding-right: ",";\n        }\n      }\n      .interval-custom-placeholder{\n        position: absolute;\n        right: 8px;\n        color: ",";\n      }\n      .disabled-label{\n        color: ",";\n      }\n      .disabled{\n        border-color: "," !important;\n      }\n    }\n    "])),o.polished.rem(240),o.polished.rem(13),e.colors.palette.dark[400],o.polished.rem(26),o.polished.rem(26),o.polished.rem(80),e.colors.palette.dark[400],e.colors.palette.light[800],e.colors.palette.light[800])},n.onToggleAutoRefresh=function(e,t){t?n.props.hasOriginalDataRefreshInterval?n.props.onChange(null):n.props.onChange(600):n.props.onChange(0)},n.onToggleCustom=function(){"number"==typeof n.props.refreshInterval?n.props.onChange(null):n.props.onChange(600)},n.onIntervalChange=function(e){n.setState({interval:"number"==typeof e?e:600})},n.onIntervalDone=function(){n.props.onChange(60*n.state.interval)},n.getWhetherAutoRefresh=function(){return n.props.refreshInterval>0||0!==n.props.refreshInterval&&n.props.hasOriginalDataRefreshInterval},n.getWhetherHonorLayerSetting=function(){return"number"!=typeof n.props.refreshInterval&&n.props.hasOriginalDataRefreshInterval},n.state={interval:(n.props.refreshInterval||600)/60},n}return V(t,e),t.prototype.render=function(){if(!this.props.reference)return null;var e=this.getWhetherAutoRefresh(),t=this.getWhetherHonorLayerSetting();return Object(o.jsx)(r.Popper,{css:this.getStyle(this.props.theme),reference:this.props.reference,open:this.props.isOpen,placement:"bottom",toggle:this.props.toggle,showArrow:!0},Object(o.jsx)("div",{className:"list-refresh-setting-popup"},Object(o.jsx)(c.SettingSection,{className:"border-0"},Object(o.jsx)(c.SettingRow,{label:this.props.intl.formatMessage({id:"autoRefresh",defaultMessage:k}),className:"interval-label"},Object(o.jsx)(r.Switch,{checked:e,onChange:this.onToggleAutoRefresh}))),e&&Object(o.jsx)(c.SettingSection,{className:"pt-0 interval-label",title:this.props.intl.formatMessage({id:"interval",defaultMessage:P})},this.props.canOriginalDataSetRefreshInterval&&Object(o.jsx)("div",null,Object(o.jsx)(c.SettingRow,null,Object(o.jsx)("div",{className:"align-items-center d-flex"},Object(o.jsx)(r.Radio,{id:"honor-layer-setting",onChange:this.onToggleCustom,checked:t,className:"mr-2",disabled:!this.props.hasOriginalDataRefreshInterval}),Object(o.jsx)(r.Label,{for:"honor-layer-setting",disabled:!this.props.hasOriginalDataRefreshInterval,className:!this.props.hasOriginalDataRefreshInterval&&"disabled-label"},this.props.intl.formatMessage({id:"honorLayer",defaultMessage:T})))),Object(o.jsx)(c.SettingRow,null,Object(o.jsx)("div",{className:"align-items-center d-flex"},Object(o.jsx)(r.Radio,{id:"custom",onChange:this.onToggleCustom,checked:!t,className:"mr-2"}),Object(o.jsx)(r.Label,{for:"custom"},this.props.intl.formatMessage({id:"custom",defaultMessage:r.defaultMessages.custom}))))),(!t||!this.props.canOriginalDataSetRefreshInterval)&&Object(o.jsx)(c.SettingRow,{className:"mt-3 interval-custom"},Object(o.jsx)(r.NumericInput,{className:"w-100 interval-custom-input",value:this.state.interval,min:.1,max:999,precision:1,showHandlers:!1,onChange:this.onIntervalChange,onAcceptValue:this.onIntervalDone}),Object(o.jsx)("span",{className:"interval-custom-placeholder"},this.props.intl.formatMessage({id:"minutes",defaultMessage:z}))))))},t}(o.React.PureComponent),B=function(){return(B=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function q(e,t){var n,s,a,i,r,c,l=Y(e);if(!l)return null;if(e.isDataSourceSet){n={childSchemas:{}};var d=(s=$(o.appConfigUtils.getAllWidgets(p.dataComponentsUtils.getAppConfig()).filter((function(e){return!1!==e.useDataSourcesEnabled}))),c=p.dataComponentsUtils.getAppConfig(),a=$(c&&c.messageConfigs?Object.keys(c.messageConfigs).map((function(e){return c.messageConfigs[e]})):[]),i=function(){var e=p.dataComponentsUtils.getAppConfig(),t=e&&e.dataSources,n=[];return t&&Object.keys(t).forEach((function(e){t[e]&&!t[e].isOutputFromWidget&&t[e].originDataSources&&t[e].originDataSources.length>0&&(n=n.concat(t[e].originDataSources.asMutable().map((function(e){return e.dataSourceId}))))})),n}(),r=s.concat(a).concat(i),Array.from(new Set(r)));Object.keys(l.childSchemas).filter((function(t){return d.some((function(n){return e.getChildDataSourceId(t)===n}))})).forEach((function(s){return n.childSchemas[s]=Object.assign({},q(e.getChildDataSource(s),t))}))}else{n=B(B({},Y(e)),{fields:{}});var u=function(e){if(!e)return[];var t=e.getDataSourceJson()&&e.getDataSourceJson().useFields&&e.getDataSourceJson().useFields.asMutable()||[],n=Q(e.id),s=function(e){var t=p.dataComponentsUtils.getAppConfig();return K(t&&t.messageConfigs?Object.keys(t.messageConfigs).map((function(e){return t.messageConfigs[e]})):[],e)}(e.id),a=function(e){if(!e)return[];var t=p.dataComponentsUtils.getOutputDssFromOriginDs(e).map((function(t){return function(e,t){if(!t||!e)return[];var n,s,a=Q(t.id),i=t.getSchema(),o=i&&i.fields,r=[];return a.forEach((function(t){n=o[t],(s=n&&n.originFields&&n.originFields.asMutable()||[]).length>0?s.some((function(t){return t.split(e.id+".").length>1}))&&(s=s.filter((function(t){return t.split(e.id+".").length>1})).map((function(t){return t.split(e.id+".")[1]}))):s=[t],r=r.concat(s)})),r}(e,t)})),n=Array.prototype.concat.apply([],t);return Array.from(new Set(n))}(e),i=t.concat(n).concat(s).concat(a);return Array.from(new Set(i))}(e);l.fields&&Object.keys(l.fields).filter((function(e){return u.some((function(t){return e===t}))})).forEach((function(e){n.fields[e]=Object.assign({},l.fields[e]),"function"==typeof t&&(n.fields[e]=t(n.fields[e]))}))}return n}function $(e){if(!e)return[];var t=[];return e.forEach((function(e){return e.useDataSources&&e.useDataSources.forEach((function(e){t=t.concat(e.dataSourceId)}))})),t}function Q(e){return K(o.appConfigUtils.getAllWidgets(p.dataComponentsUtils.getAppConfig()).filter((function(e){return!1!==e.useDataSourcesEnabled})),e)}function K(e,t){if(!e)return[];var n=[];return e.forEach((function(e){return e.useDataSources&&e.useDataSources.forEach((function(e){e.fields&&e.mainDataSourceId&&e.mainDataSourceId===t&&(n=n.concat(e.fields))}))})),n}function G(e,t){return!(!e||!t)&&(X(e)?Object.keys(e.childSchemas).every((function(n){return G(e.childSchemas[n],t.childSchemas[n])})):e.fields&&Object.keys(e.fields).every((function(e){return!(!t.fields||!t.fields[e])})))}function X(e){return!!e&&!!e.childSchemas}function Y(e){return e&&e.getSchema?e.getSchema():null}function Z(e,t,n){var s=t.merge({});return s=(s=s.set("id",e.id)).set("schema",Object(o.Immutable)(n))}function ee(e,t,n){var s,a,i={};if(!e||!t)return e&&X(e)&&(i.childSchemas={}),i;X(e)&&X(t)?(i={childSchemas:{}},Object.keys(e.childSchemas).forEach((function(o){s=e.childSchemas[o].childId,a=n&&n.childSchemas&&n.childSchemas[o],i.childSchemas[o]=t.childSchemas[s]?ee(e.childSchemas[o],t.childSchemas[s],a):null}))):X(e)||X(t)?console.error("types of data sources are not matched"):i=B(B({},t),{fields:te(e,t,n),jimuChildId:e.jimuChildId});return i}function te(e,t,n){var s,a,i,o,r={};return e&&e.fields&&t&&t.fields?(Object.keys(e.fields).forEach((function(c){i=e.fields[c],s=i.jimuName,a=i.name,(o=t.fields[a])&&o.esriFieldType===i.esriFieldType&&(r[s]=ne(i,o,n))})),r):r}function ne(e,t,n){var s;return n&&n.fields&&n.fields[e.jimuName]?(s=n.asMutable({deep:!0}).fields[e.jimuName]).name=t.name:(s=function(e){if(!e)return null;var t=B({},e);t.alias&&delete t.alias;return t}(B({},t))).jimuName=e.jimuName,s}function se(e,t){return!!(e&&t&&t.childSchemas)&&Object.keys(t.childSchemas).some((function(n){return t.childSchemas[n].childId===e}))}function ae(e,t){if(!e||!t)return null;var n,s,a,i=B({},e),o=t.jimuChildId,r=t.childId;return function(e,t){return!!(e&&t&&t.childSchemas)&&Object.keys(t.childSchemas).some((function(t){return t===e}))}(o,e)&&!se(r,e)&&(n=o+"-$"+function(e,t){var n,s=0;if(!t||!e)return s;var a=e.split("-$")[0];return Object.keys(t.childSchemas).forEach((function(e){(n=e.split("-$")||[]).length>1&&n[0]===a&&parseInt(n[1])>s&&(s=parseInt(n[1]))})),s+1}(o,e),s=X(t)?B(B({},t),{jimuChildId:n}):B(B({},t),{fields:{},jimuChildId:n}),i.childSchemas[n]=ee(s,s,null)),Object.keys(e.childSchemas).filter((function(t){return e.childSchemas[t].childId===r})).forEach((function(n){(a=e.childSchemas[n])&&(X(t)&&X(a)?Object.keys(t.childSchemas).forEach((function(e){i.childSchemas[n]=ae(a,t.childSchemas[e])})):X(t)||X(a)?console.error("types of data sources are not matched"):Object.keys(t.fields).forEach((function(e){i.childSchemas[n]=ie(a,t.fields[e])})))})),i}function ie(e,t){var n,s,a,i,o=B({},e),r=t.jimuName;return!function(e,t){return!!(e&&t&&t.fields)&&!!t.fields[e]}(r,o)||(a=t.name,i=o,a&&i&&i.fields&&Object.keys(i.fields).some((function(e){return i.fields[e].name===a})))||(n=r+"-$"+function(e,t){var n,s=0;if(!t||!t.fields)return s;var a=e.split("-$")[0];return Object.keys(t.fields).forEach((function(e){(n=t.fields[e].jimuName?t.fields[e].jimuName.split("-$"):[]).length>1&&n[0]===a&&parseInt(n[1])>s&&(s=parseInt(n[1]))})),s+1}(r,o),s=B(B({},t),{jimuName:n}),o.fields[n]=ne(s,s,null)),o}function oe(e){return Object.keys(e).sort((function(e,t){return e.localeCompare(t)}))}function re(e){return e.getDataSourceJson().itemId||Y(e)&&Y(e).childId}var ce,pe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),le=n(15),de=n(27),ue=n(21),he=n(51),me=function(e){function t(t){var n=e.call(this,t)||this;return n.getLastUpdateString=function(){var e,t,s;if(!(null===(t=null===(e=n.props)||void 0===e?void 0:e.ds)||void 0===t?void 0:t.getLastRefreshTime))return"";var a=null===(s=n.props.ds.getLastRefreshTime())||void 0===s?void 0:s.getTime();if("number"==typeof a){var i=Math.round((n.state.currentTime.getTime()-a)/1e3/60);return i<1?n.props.intl.formatMessage({id:"updateSecondsAgo",defaultMessage:A}):i>=1&&i<2?n.props.intl.formatMessage({id:"updateOneMinuteAgo",defaultMessage:N}):n.props.intl.formatMessage({id:"updateMinutesAgo",defaultMessage:_},{minutes:i})}return""},n.onRemoveItem=function(){n.setState({isMoreOptionsShown:!1})},n.onShowDetailClick=function(){n.props.onShowDetailClick(n.props.ds)},n.onRenameItem=function(){n.setState({isMoreOptionsShown:!1,isRenameShown:!0})},n.onRename=function(){var e=n.state.newName.trim();if(e){var t=n.props.ds.getDataSourceJson().setIn(["label"],e),s=p.dataComponentsUtils.editDataSourceJson(t);Object(d.getAppConfigAction)().editDataSource(s).exec(),n.setState({isRenameShown:!1})}else n.setState({isRenameShown:!1})},n.onRenameChange=function(e){n.setState({newName:e.target.value})},n.onQueryApply=function(e){if(n.toggleViewSetting(),e){var t=p.dataComponentsUtils.editDataSourceJson(n.props.ds.getDataSourceJson().setIn(["query"],e));Object(d.getAppConfigAction)().editDataSource(t).exec()}},n.onAutoRefreshChange=function(e){var t,s=n.props.ds.getDataSourceJson();(null===(t=s.query)||void 0===t?void 0:t.id)||(s=s.setIn(["query"],{id:s.id,label:n.props.ds.getLabel()})),s=s.setIn(["query","refreshInterval"],e);var a=p.dataComponentsUtils.editDataSourceJson(s);Object(d.getAppConfigAction)().editDataSource(a).exec()},n.toggleMoreOptions=function(){return n.setState({isMoreOptionsShown:!n.state.isMoreOptionsShown})},n.toggleViewSetting=function(){return n.setState({isViewSettingShown:!n.state.isViewSettingShown})},n.toggleAutoRefresh=function(){return n.setState({isAutoRefreshShown:!n.state.isAutoRefreshShown})},n.onMappingIconClick=function(){n.props.onMappingIconClick(n.props.ds)},n.getOriginalLabel=function(){var e,t,s=n.props.intl.formatMessage({id:"originalDsLabel",defaultMessage:E});if(n.props.ds.map)t=null===(e=n.props.ds.map.portalItem)||void 0===e?void 0:e.title;else if(n.props.ds.layer)t=n.props.ds.layer.title;else if(n.props.ds.layerDefinition)t=n.props.ds.layerDefinition.name;else if(n.props.ds.serviceDefinition){var a=n.props.ds.getDataSourceJson(),i=null==a?void 0:a.url;t=o.dataSourceUtils.getServiceLabelFromUrl(i)}return t||s},n.state={isMoreOptionsShown:!1,isMappingDetailShown:!1,isRenameShown:!1,isViewSettingShown:!1,isAutoRefreshShown:!1,newName:n.props.ds?n.props.ds.getLabel()||n.props.ds.id:"",currentTime:new Date},n}return pe(t,e),t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(e,t){t.isRenameShown!==this.state.isRenameShown&&this.state.isRenameShown&&this.renameInput&&(this.renameInput.focus(),this.renameInput.select()),e.ds!==this.props.ds&&this.setState({newName:this.props.ds?this.props.ds.getLabel()||this.props.ds.id:""})},t.prototype.componentWillUnmount=function(){},t.prototype.render=function(){var e,t,n,s=this;if(!this.props.ds)return null;var a=!!this.props.ds.query,i=p.dataComponentsUtils.getOriginalDataUrl(this.props.ds.getDataSourceJson()),c=null===(e=this.props.ds.getSchema())||void 0===e?void 0:e.refreshInterval,l="number"==typeof c,d=!this.props.ds.parentDataSource;return o.React.createElement("div",{className:"px-3 pb-3 ds-info"},o.React.createElement("div",{className:"d-flex justify-content-between ds-thumbnail-type-label w-100"},o.React.createElement("div",{className:"d-flex align-items-center ds-thumbnail-type"},o.React.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},o.React.createElement(r.Icon,{icon:p.dataComponentsUtils.getDsIcon(this.props.ds.getDataSourceJson()),className:"text-dark",size:12})),o.React.createElement("div",{className:"d-flex pl-2 ds-type"},o.React.createElement("div",{className:"flex-shrink-0 text-dark-600 text-truncate w-100 ds-type-name"},p.dataComponentsUtils.getDsTypeString(this.props.ds.type,this.props.intl)))),o.React.createElement("div",{className:"d-flex justify-content-between"},re(this.props.ds)&&o.React.createElement(r.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.onShowDetailClick},o.React.createElement("span",{title:this.props.intl.formatMessage({id:"details",defaultMessage:r.defaultMessages.details})},o.React.createElement(r.Icon,{icon:de,size:12}))),a&&o.React.createElement(r.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.toggleViewSetting},o.React.createElement("span",{title:this.props.intl.formatMessage({id:"settings",defaultMessage:r.defaultMessages.settings})},o.React.createElement(r.Icon,{icon:ue,size:12}))),o.React.createElement(r.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.toggleMoreOptions,ref:function(e){return s.moreOptionsRef=e}},o.React.createElement("span",{title:this.props.intl.formatMessage({id:"more",defaultMessage:r.defaultMessages.more})},o.React.createElement(r.Icon,{icon:le,size:12}))))),this.state.isRenameShown?o.React.createElement(r.TextInput,{className:"my-3 flex-grow-1 text-truncate ds-label-input ds-label",ref:function(e){return s.renameInput=e},onBlur:this.onRename,onKeyUp:this.onRename,onChange:this.onRenameChange,value:this.state.newName}):o.React.createElement("div",{className:"my-3 flex-grow-1 three-line-truncate ds-label text-left",title:this.props.ds.getLabel()||this.props.ds.id},this.props.ds.getLabel()||this.props.ds.id),i&&o.React.createElement("div",{className:"ds-origin-label flex-grow-1 d-flex align-items-center",title:this.props.intl.formatMessage({id:"source",defaultMessage:r.defaultMessages.source})},o.React.createElement(r.Link,{to:i,className:"p-0 ds-origin-label-link w-100 text-left",themeStyle:{type:"link"},target:"_blank"},o.React.createElement("span",{className:"align-middle text-truncate ds-origin-label-link-text"},this.getOriginalLabel()))),a&&o.React.createElement("div",{className:"d-flex align-items-center"},o.React.createElement("div",{className:"mr-2 flex-grow-1 refresh-last-update-label"},this.props.intl.formatMessage({id:"refreshSetting",defaultMessage:H})),o.React.createElement(r.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.toggleAutoRefresh,ref:function(e){return s.autoRefreshRef=e},className:Object(o.classNames)({"highlight-refresh-icon":!!this.props.ds.getAutoRefreshInterval()})},o.React.createElement("span",{title:this.props.intl.formatMessage({id:"refreshSetting",defaultMessage:H})},o.React.createElement(r.Icon,{icon:he,size:12})))),o.React.createElement(m,{isOpen:this.state.isMoreOptionsShown,reference:this.moreOptionsRef,intl:this.props.intl,widgets:this.props.widgets,dsJson:this.props.ds&&this.props.ds.getDataSourceJson(),onRemoveItem:d?this.onRemoveItem:null,onRenameItem:this.onRenameItem,theme:this.props.theme,offset:[25,0],toggle:this.toggleMoreOptions}),a&&o.React.createElement(p.DataViewSettingPopup,{isOpen:this.state.isViewSettingShown,toggle:this.toggleViewSetting,onApply:this.onQueryApply,mainDataSource:this.props.ds,dataView:this.props.ds.getDataSourceJson().query,disableRename:!0,disableRemove:!0,disableDuplicate:!0,isSettingMainDataSource:!0,newDataViewLabel:this.props.ds.getLabel(),newDataViewId:"default"}),a&&o.React.createElement(F,{isOpen:this.state.isAutoRefreshShown,intl:this.props.intl,theme:this.props.theme,reference:this.autoRefreshRef,refreshInterval:null===(n=null===(t=this.props.ds.getDataSourceJson())||void 0===t?void 0:t.query)||void 0===n?void 0:n.refreshInterval,onChange:this.onAutoRefreshChange,toggle:this.toggleAutoRefresh,canOriginalDataSetRefreshInterval:l,hasOriginalDataRefreshInterval:l&&c>0}))},t}(o.React.PureComponent),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),fe=n(20),Se=function(e){function t(t){var n=e.call(this,t)||this;return n.Item=function(e){var t=e.widgetJson,n="string"==typeof t.icon?t.icon:t.icon&&t.icon.svg,s="string"==typeof t.icon?null:t.icon&&t.icon.properties&&t.icon.properties.color;return o.React.createElement("div",{className:"d-flex align-content-center mb-3 mx-3",key:t.id},o.React.createElement("div",{className:"widget-icon"},o.React.createElement(r.Icon,{icon:n,color:s})),o.React.createElement("div",{className:"flex-grow-1 text-truncate px-2",title:t.label},t.label))},n}return ge(t,e),t.prototype.render=function(){if(!this.props.ds)return o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}));var e=p.dataComponentsUtils.getWidgetsUsingDsOrItsViews(this.props.ds.id,this.props.widgets);if(!e||0===e.length)return o.React.createElement("div",{className:"empty-placeholder w-100"},o.React.createElement("div",{className:"empty-placeholder-icon"},o.React.createElement(r.Icon,{icon:fe,width:80,height:71})),o.React.createElement("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"noRelatedWidget",defaultMessage:R})}}));var t,n=this.Item;return o.React.createElement(o.React.Fragment,null,o.React.createElement("h5",{className:"m-3 data-setting-secondary-title"},this.props.intl.formatMessage({id:"relatedWidgets",defaultMessage:r.defaultMessages.relatedWidgets})),(t=e,t.sort((function(e,t){return e.label.localeCompare(t.label)}))).map((function(e){return o.React.createElement(n,{widgetJson:e,key:e.id})})))},t}(o.React.PureComponent),we=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),De=function(e){function t(t){return e.call(this,t)||this}return we(t,e),t.prototype.componentDidMount=function(){this.props.ds||this.props.backToHomePage()},t.prototype.componentDidUpdate=function(e,t){e.ds!==this.props.ds&&(this.props.ds||this.props.backToHomePage())},t.prototype.render=function(){return this.props.ds?o.React.createElement("div",{className:"ds-list"},o.React.createElement(me,{ds:this.props.ds,onMappingIconClick:this.props.onMappingIconClick,widgets:this.props.widgets,theme:this.props.theme,onShowDetailClick:this.props.onShowDetailClick,intl:this.props.intl,isDataSourceInited:this.props.isDataSourceInited,dsInfo:this.props.dsInfo}),o.React.createElement(r.Tabs,{pills:!0,fill:!0},o.React.createElement(r.Tab,{id:"layers",title:this.props.intl.formatMessage({id:"layers",defaultMessage:r.defaultMessages.layers}),defaultActive:"layers"===this.props.defaultActive},o.React.createElement("div",{className:"tab-scroll"},o.React.createElement(U,{dataSourceJson:this.props.dataSourceJson,ds:this.props.ds,key:this.props.ds.id,intl:this.props.intl,dispatch:this.props.dispatch,onDataSourceItemClick:this.props.onDsItemClicked,isDataSourceInited:this.props.isDataSourceInited,onChildDataIconClick:this.props.onChildDataIconClick,onRelatedWidgetsIconClick:this.props.onRelatedWidgetsIconClick,widgets:this.props.widgets,theme:this.props.theme}))),o.React.createElement(r.Tab,{id:"widgets",title:this.props.intl.formatMessage({id:"widgets",defaultMessage:r.defaultMessages.widgets}),defaultActive:"widgets"===this.props.defaultActive},o.React.createElement("div",{className:"tab-scroll"},o.React.createElement(Se,{ds:this.props.ds,isDataSourceInited:this.props.isDataSourceInited,intl:this.props.intl,widgets:this.props.widgets}))))):null},t}(o.React.PureComponent),ve=o.ReactRedux.connect((function(e,t){var n;return{dataSourceJson:null===(n=t.ds)||void 0===n?void 0:n.getDataSourceJson()}}))(De),be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ye=function(e){function t(t){var n=e.call(this,t)||this;return n.onRemove=function(){n.props.onRemove(n.props.field)},n}return be(t,e),t.prototype.render=function(){if(!this.props.field)return null;var e=this.props.field;return o.React.createElement("div",{className:"pl-3 mb-3 d-flex field-item"},o.React.createElement("div",{className:"d-flex flex-grow-1 text-truncate field-label",title:e&&(e.alias||e.name)},e&&(e.alias||e.name)))},t}(o.React.PureComponent),xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Me=n(20),Re=function(e){function t(t){var n=e.call(this,t)||this;return n.getFields=function(e){var t=q(e);return t&&t.fields},n.onRemove=function(e){},n.hideRemovePopup=function(){n.setState({isRemoveOptionsShown:!1})},n.state={isRemoveOptionsShown:!1},n}return xe(t,e),t.prototype.render=function(){var e,t=this;if(!this.props.ds)return o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}));var n=this.getFields(this.props.ds);return n&&0!==Object.keys(n).length?o.React.createElement(o.React.Fragment,null,o.React.createElement("h5",{className:"m-3 data-setting-secondary-title"},this.props.intl.formatMessage({id:"inUse",defaultMessage:M})),n&&oe(n).map((function(e,s){return o.React.createElement(ye,{field:n[e],key:s,onRemove:t.onRemove,isDataSourceInited:t.props.isDataSourceInited})})),o.React.createElement(p.DataSourceRemoveWarningPopup,{dataSourceId:null===(e=this.props.ds)||void 0===e?void 0:e.id,isOpen:this.state.isRemoveOptionsShown,toggle:this.hideRemovePopup})):o.React.createElement("div",{className:"empty-placeholder w-100"},o.React.createElement("div",{className:"empty-placeholder-icon"},o.React.createElement(r.Icon,{icon:Me,width:80,height:71})),o.React.createElement("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"noUsedField",defaultMessage:I})}}))},t}(o.React.PureComponent),Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Oe=n(21),Ce=n(52),je=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.Item=function(e){var t,s=e.dataView,a=e.label,i=o.DataSourceManager.getInstance().getDataViewDataSourceId(null===(t=n.props.ds)||void 0===t?void 0:t.id,s.id),c=p.dataComponentsUtils.getWidgetsUsingDsOrItsDescendantDss(i,n.props.widgets),l=n.props.intl.formatMessage({id:"relatedWidgetsWithDirectlyNum",defaultMessage:r.defaultMessages.relatedWidgetsWithDirectlyNum},{num:null==c?void 0:c.length});return o.React.createElement("div",{className:"d-flex align-items-center justify-content-start mb-3 mx-3 data-view-item"},o.React.createElement("div",{className:"flex-grow-1 text-truncate px-2",title:l},a),o.React.createElement(r.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(){return n.onDataViewClick(s)},title:n.props.intl.formatMessage({id:"settings",defaultMessage:r.defaultMessages.settings})},o.React.createElement(r.Icon,{size:12,icon:Oe})))},n.toggleViewSetting=function(){return n.setState({isViewSettingOpen:!n.state.isViewSettingOpen})},n.toggleDataViewForNoSelection=function(e,t){if(t){var s=Object(o.Immutable)({id:o.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION,label:n.props.intl.formatMessage({id:"dataViewForNoSelection",defaultMessage:r.defaultMessages.dataViewForNoSelection})});n.editDataView(s,!1)}else n.removeDataView(o.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION)},n.onDataViewClick=function(e){n.setState({selectedDataView:e}),n.toggleViewSetting()},n.onCreateViewClick=function(){n.setState({selectedDataView:null}),n.toggleViewSetting()},n.onApply=function(e){n.editDataView(e,!0)},n.onDuplicate=function(e){n.editDataView(e,!1)},n.removeDataView=function(e){if(e){var t=n.props.ds.getDataSourceJson(),s=t.dataViews||Object(o.Immutable)({});s=s.without(e);var a=p.dataComponentsUtils.editDataSourceJson(t.setIn(["dataViews"],s));Object(d.getAppConfigAction)().editDataSource(a).exec()}},n.editDataView=function(e,t){if(e){var s=n.props.ds.getDataSourceJson(),a=s.dataViews||Object(o.Immutable)({});a=a.set(e.id,e);var i=p.dataComponentsUtils.editDataSourceJson(s.setIn(["dataViews"],a));Object(d.getAppConfigAction)().editDataSource(i).exec(),n.props.ds.getDataView(null==e?void 0:e.id)?(n.setState({selectedDataView:e}),t&&n.toggleViewSetting()):o.DataSourceManager.getInstance().createDataSource(s,e.id).then((function(){n.__unmount||(n.setState({selectedDataView:e}),t&&n.toggleViewSetting())}))}},n.state={isViewSettingOpen:!1,selectedDataView:null},n}return Ie(t,e),t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t,n,s,a=this;if(!this.props.ds)return o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}));var i=null===(t=null===(e=this.props.ds.getDataSourceJson())||void 0===e?void 0:e.dataViews)||void 0===t?void 0:t.without(o.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION),c=(null===(n=this.props.ds.getDataSourceJson())||void 0===n?void 0:n.dataViews)&&this.props.ds.getDataSourceJson().dataViews[o.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION],l=this.Item;return o.React.createElement("div",null,o.React.createElement(r.Link,{className:"m-3 d-flex justify-content-start align-items-center font-size-13",onClick:this.onCreateViewClick},o.React.createElement(r.Icon,{icon:Ce,size:12,className:"flex-shrink-0"}),o.React.createElement("div",{className:"text-truncate flex-grow-1 text-left"},this.props.intl.formatMessage({id:"createAView",defaultMessage:r.defaultMessages.createAView}))),i&&Object.values(i).map((function(e,t){return o.React.createElement(l,{dataView:e,label:e.label,key:t})})),o.React.createElement("div",{className:"d-flex align-items-center justify-content-between p-3 no-selection-view-item",title:this.props.intl.formatMessage({id:"dataViewForNoSelectionHint",defaultMessage:r.defaultMessages.dataViewForNoSelectionHint})},o.React.createElement("div",{className:"d-flex w-85"},o.React.createElement(r.Checkbox,{checked:!!c,onChange:this.toggleDataViewForNoSelection,className:"mr-2"}),o.React.createElement("div",{className:"flex-grow-1 text-truncate label"},this.props.intl.formatMessage({id:"dataViewForNoSelection",defaultMessage:r.defaultMessages.dataViewForNoSelection}))),!!c&&o.React.createElement(r.Button,{type:"tertiary",icon:!0,size:"sm",onClick:function(){return a.onDataViewClick(c)},title:this.props.intl.formatMessage({id:"settings",defaultMessage:r.defaultMessages.settings})},o.React.createElement(r.Icon,{size:12,icon:Oe}))),o.React.createElement(p.DataViewSettingPopup,{isOpen:this.state.isViewSettingOpen,toggle:this.toggleViewSetting,onApply:this.onApply,onDuplicate:this.onDuplicate,mainDataSource:this.props.ds,dataView:this.state.selectedDataView,disableRename:(null===(s=this.state.selectedDataView)||void 0===s?void 0:s.id)===o.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION}))},t}(o.React.PureComponent),Ee=o.ReactRedux.connect((function(e,t){var n;return{dataSourceJson:null===(n=t.ds)||void 0===n?void 0:n.getDataSourceJson()}}))(je),ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),_e=function(e){function t(t){return e.call(this,t)||this}return ke(t,e),t.prototype.componentDidMount=function(){this.props.ds||this.props.backToHomePage()},t.prototype.componentDidUpdate=function(e,t){e.ds!==this.props.ds&&(this.props.ds||this.props.backToHomePage())},t.prototype.render=function(){if(!this.props.ds)return null;var e=!!this.props.ds.query;return o.React.createElement("div",{className:"field-list"},o.React.createElement(me,{ds:this.props.ds,onMappingIconClick:this.props.onMappingIconClick,widgets:this.props.widgets,theme:this.props.theme,onShowDetailClick:this.props.onShowDetailClick,intl:this.props.intl,isDataSourceInited:this.props.isDataSourceInited,dsInfo:this.props.dsInfo}),o.React.createElement(r.Tabs,{pills:!0,fill:!0},e&&o.React.createElement(r.Tab,{id:"dataViews",title:this.props.intl.formatMessage({id:"dataViews",defaultMessage:j}),defaultActive:"dataViews"===this.props.defaultActive},o.React.createElement("div",{className:"tab-scroll-with-bottom-fix"},o.React.createElement(Ee,{ds:this.props.ds,isDataSourceInited:this.props.isDataSourceInited,intl:this.props.intl,widgets:this.props.widgets}))),o.React.createElement(r.Tab,{id:"fields",title:this.props.intl.formatMessage({id:"fields",defaultMessage:r.defaultMessages.fields}),defaultActive:"fields"===this.props.defaultActive},o.React.createElement("div",{className:"tab-scroll"},o.React.createElement(Re,{ds:this.props.ds,isDataSourceInited:this.props.isDataSourceInited,intl:this.props.intl,widgets:this.props.widgets}))),o.React.createElement(r.Tab,{id:"widgets",title:this.props.intl.formatMessage({id:"widgets",defaultMessage:r.defaultMessages.widgets}),defaultActive:"widgets"===this.props.defaultActive},o.React.createElement("div",{className:"tab-scroll"},o.React.createElement(Se,{ds:this.props.ds,isDataSourceInited:this.props.isDataSourceInited,intl:this.props.intl,widgets:this.props.widgets})))))},t}(o.React.PureComponent),Ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},He=n(53),Pe=n(54),Te=[{name:"applyStyle",enabled:!0,fn:function(e){var t=e.state;return Ae(Ae({},t),{styles:Ae(Ae({},t.styles),{zIndex:"1050"})})}}],ze=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.toggleDropdown=function(){n.setState({isNewDsDropdownOpen:!n.state.isNewDsDropdownOpen})},n.setNewChildDss=function(e){e&&n.setState({newDss:e.getChildDataSources()})},n.getSelectedDsLabel=function(e){return e&&(e.getLabel()||e.id)},n.onSelectedNewDsChange=function(e){n.props.updateMappedSchema(n.props.curDs,e)},n.DsInfo=function(e){var t=e.curDs;e.selectedNewDs;if(!t)return null;var s=p.dataComponentsUtils.getWidgetsUsingDsOrItsViews(t.id,n.props.widgets);return o.React.createElement("div",null,o.React.createElement("div",{className:"d-flex align-items-center m-2"},o.React.createElement("div",{className:"d-flex align-items-center justify-content-center mr-1 flex-shrink-0 border-light-500 ds-thumbnail"},o.React.createElement(r.Icon,{icon:p.dataComponentsUtils.getDsIcon(t.getDataSourceJson()),className:"text-dark",size:"22"})),o.React.createElement("div",{className:"flex-grow-1 text-truncate p-1",title:t.getLabel()||t.id},t.getLabel()||t.id),n.props.isDone?null:o.React.createElement("div",{className:"d-flex align-items-center justify-content-center mb-3"},o.React.createElement(r.Icon,{icon:He,className:"text-danger",size:"12"}))),o.React.createElement("div",{className:"d-flex m-2"},o.React.createElement("div",{className:"w-100 d-flex"},o.React.createElement("div",{className:"d-flex bg-light-300 ds-type h6 pl-1 pr-1"},o.React.createElement("div",{className:"flex-shrink-0 text-dark-600 mr-1 text-truncate ds-type-name"},p.dataComponentsUtils.getDsTypeString(t.type,n.props.intl)))),o.React.createElement("div",{className:"flex-shrink-0 d-flex flex-row ds-related-widgets"},o.React.createElement(r.Icon,{icon:Pe,className:"mr-1 text-dark"}),o.React.createElement("span",{className:"align-middle"},s&&s.length))))},n.state={isNewDsDropdownOpen:!1,newDss:null},n}return Ne(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.setNewChildDss(this.props.newParentDs)},t.prototype.componentDidUpdate=function(e){e.newParentDs!==this.props.newParentDs&&this.setNewChildDss(this.props.newParentDs)},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e=this;if(!this.props.curDs)return null;var t=this.props.selectedNewDs,n=this.DsInfo;return o.React.createElement("div",{className:"border-light-500 bg-white m-2 p-2 list-item ds-mapping-ds-item"},o.React.createElement(n,{curDs:this.props.curDs,selectedNewDs:t}),o.React.createElement("div",{className:"align-items-center"},o.React.createElement("div",{className:"ds-mapping-drop-down p-2"},o.React.createElement(r.Dropdown,{isOpen:this.state.isNewDsDropdownOpen,className:"w-100 drop-down",toggle:this.toggleDropdown},o.React.createElement(r.DropdownToggle,{caret:!0,outline:!0,className:"w-100 text-truncate",disabled:!this.state.newDss},this.getSelectedDsLabel(t)||""),this.state.newDss?o.React.createElement(r.DropdownMenu,{className:"text-truncate",modifiers:Te},o.dataSourceUtils.getSortedArrayByLabel(this.state.newDss).map((function(t,n){return t&&t.id?o.React.createElement(r.DropdownItem,{key:n,onClick:function(){e.onSelectedNewDsChange(t)},title:t.getLabel()||t.id,style:{width:"220px"}},o.React.createElement("div",{className:"text-truncate"},t.getLabel()||t.id)):null}))):null))))},t}(o.React.PureComponent),Le=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Je=function(){return(Je=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ue=[{name:"applyStyle",enabled:!0,fn:function(e){var t=e.state;return Je(Je({},t),{styles:Je(Je({},t.styles),{zIndex:"1050"})})}}],Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleDropdown=function(){n.setState({isDropdownOpen:!n.state.isDropdownOpen})},n.onDropDownItemClicked=function(e){n.props.updateMappedSchema(n.props.curField,e)},n.state={isDropdownOpen:!1},n}return Le(t,e),t.prototype.render=function(){var e=this;if(!this.props.curField||!this.props.newSchema)return null;var t=this.props.newSchema,n=this.props.selectedNewField;return o.React.createElement("div",{className:"m-2 filed-mapping-item"},o.React.createElement("div",null,this.props.curField.alias||this.props.curField.name),o.React.createElement("div",{className:"ds-mapping-drop-down p-2"},o.React.createElement(r.Dropdown,{isOpen:this.state.isDropdownOpen,className:"w-100 drop-down",toggle:this.toggleDropdown},o.React.createElement(r.DropdownToggle,{caret:!0,outline:!0,className:"w-100 text-truncate",disabled:!t||!t.fields},n&&(n.alias||n.name)||""),t&&t.fields?o.React.createElement(r.DropdownMenu,{className:"text-truncate",modifiers:Ue},oe(t.fields).map((function(n,s){return t.fields[n]&&t.fields[n].esriType===e.props.curField.esriType?o.React.createElement(r.DropdownItem,{key:s,onClick:function(){return e.onDropDownItemClicked(t.fields[n])},style:{width:"220px"}},o.React.createElement("div",{className:"text-truncate"},t.fields[n].alias||t.fields[n].name)):null}))):null)))},t}(o.React.PureComponent),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Fe=n(55),Be=n(56),qe=function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleExternalDsClicked=function(){n.props.toggleExternalDs(!n.props.isExternalDsShown)},n.onCancelClicked=function(){n.props.hideMapping()},n}return We(t,e),t.prototype.render=function(){if(!this.props.curDs)return o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}));var e=this.props.newDs||this.props.curDs;return o.React.createElement("div",{className:"mapping-info"},o.React.createElement("div",{className:"border-color-gray-300 m-2 ds-mapping-header"},this.props.isMappingReady&&o.React.createElement("div",{className:"d-inline-block ds-mapping-header-back",onClick:this.onCancelClicked},o.React.createElement(r.Icon,{icon:Be,autoFlip:!0}),o.React.createElement("span",{className:"align-middle ml-2"},this.props.intl.formatMessage({id:"cancel",defaultMessage:o.defaultMessages.cancel})))),o.React.createElement("div",{className:"border-color-gray-300 ds-mapping-cur-info"},o.React.createElement("div",{className:"flex-grow-1 m-2 align-self-center text-truncate ds-label",title:this.props.curDs.getLabel()||this.props.curDs.id},this.props.curDs.getLabel()||this.props.curDs.id),o.React.createElement("div",{className:"d-flex m-2"},o.React.createElement("div",{className:"d-flex bg-light-300 ds-type h6"},o.React.createElement("div",{className:"ml-1 mr-1 bg-success ds-type-icon"}),o.React.createElement("div",{className:"flex-shrink-0 text-dark-600 mr-1 text-truncate ds-type-name"},p.dataComponentsUtils.getDsTypeString(this.props.curDs.type,this.props.intl))))),o.React.createElement("div",{className:"m-2 d-flex flex-column ds-mapping-collapse"},o.React.createElement("div",{className:"mt-1 d-flex justify-content-between"},o.React.createElement("span",{className:"align-middle ml-1"},"Source"),this.props.isOpenSelectDataBtnHide?null:o.React.createElement("span",{className:"inline-block mr-1 bg-light-300 ds-mapping-source",onClick:this.onToggleExternalDsClicked},o.React.createElement(r.Icon,{icon:Fe,size:"12",className:"text-dark"}))),o.React.createElement("div",{className:Object(o.classNames)("text-truncate pl-1 mt-2 w-100 ds-origin-label",{"border border-primary":!!this.props.newDs},{"border-light-500":!this.props.newDs}),title:e.getLabel()||e.id},o.React.createElement("span",{className:"align-middle"},e.getLabel()||e.id))))},t}(o.React.PureComponent),$e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Qe=function(){return(Qe=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ke=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.updateMappedSchema=function(e,t){var s=Qe({},n.state.mappedSchema),a=ne(e,t,n.props.curDs&&n.props.curDs.getDataSourceJson()&&n.props.curDs.getDataSourceJson().schema);s.fields[a.jimuName]=a,n.setState({mappedSchema:s})},n.getIsDoneStatus=function(){return!(!G(n.state.curSchema,n.state.mappedSchema)||!n.props.newDs)},n.getCanSelectNewDs=function(){return!n.props.newDs||n.props.newDs.id===n.props.curDs.id},n.getSelectedNewField=function(e,t){if(!(n.state.newSchema&&n.state.newSchema.fields&&n.state.mappedSchema&&n.state.mappedSchema.fields&&n.state.mappedSchema.fields[e]))return null;var s=n.state.newSchema.fields[n.state.mappedSchema.fields[e].name];return s&&s.esriType===t?s:null},n.onNextClicked=function(){var e=Qe({},n.state.mappedSchema);n.state.newSchema&&n.state.newSchema.fields&&Object.keys(n.state.newSchema.fields).forEach((function(t){e=ie(e,n.state.newSchema.fields[t])})),n.setState({mappedSchema:e},(function(){n.props.onMappingFinished(n.props.curDs,n.state.mappedSchema,n.props.isLast)}))},n.onPreviousClicked=function(){n.props.backToPreviouseMapping()},n.state={curSchema:q(n.props.curDs),newSchema:Y(n.props.newDs),mappedSchema:n.props.defaultMappedSchema&&n.props.defaultMappedSchema.fields?Object(o.Immutable)(n.props.defaultMappedSchema).asMutable({deep:!0}):null,isDone:!1},n}return $e(t,e),t.prototype.componentDidMount=function(){if(this.__unmount=!1,this.getCanSelectNewDs()?this.props.toggleExternalDs(!0):this.props.toggleExternalDs(!1),!this.state.mappedSchema||!this.state.mappedSchema.fields||0===Object.keys(this.state.mappedSchema.fields).length){var e=this.props.curDs&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson().schema;this.setState({mappedSchema:{fields:te(this.state.curSchema,this.state.newSchema,e)}})}this.setState({isDone:this.getIsDoneStatus()})},t.prototype.componentDidUpdate=function(e,t){if((e.curDs!==this.props.curDs||this.getWhetherJsonRelatedDataChange(e,this.props))&&this.setState({curSchema:q(this.props.curDs)}),(e.newDs!==this.props.newDs||this.getWhetherJsonRelatedDataChange(e,this.props))&&this.setState({newSchema:Y(this.props.newDs)}),t.newSchema!==this.state.newSchema||t.curSchema!==this.state.curSchema)if(this.props.defaultMappedSchema&&this.props.defaultMappedSchema.fields&&Object.keys(this.props.defaultMappedSchema.fields).length>0)this.setState({mappedSchema:Object(o.Immutable)(this.props.defaultMappedSchema).asMutable({deep:!0})});else{var n=this.props.curDs&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson().schema,s={fields:te(this.state.curSchema,this.state.newSchema,n)};this.setState({mappedSchema:s})}t.curSchema===this.state.curSchema&&t.mappedSchema===this.state.mappedSchema&&t.newSchema===this.state.newSchema||this.setState({isDone:this.getIsDoneStatus()})},t.prototype.componentWillMount=function(){this.__unmount=!0},t.prototype.getWhetherJsonRelatedDataChange=function(e,t){return e.dataSources!==t.dataSources||e.widgets!==t.widgets||e.messages!==t.messages},t.prototype.render=function(){var e=this;return this.props.curDs?o.React.createElement("div",{className:"ds-mapping-field"},o.React.createElement(qe,{curDs:this.props.curDs,newDs:this.props.newDs,hideMapping:this.props.hideMapping,isOpenSelectDataBtnHide:!this.getCanSelectNewDs(),toggleExternalDs:this.props.toggleExternalDs,isMappingReady:this.props.isMappingReady,isExternalDsShown:this.props.isExternalDsShown,intl:this.props.intl}),this.state.curSchema&&this.state.curSchema.fields&&Object.keys(this.state.curSchema.fields).length>0?oe(this.state.curSchema.fields).map((function(t,n){return o.React.createElement(Ve,{curField:e.state.curSchema.fields[t],newSchema:e.state.newSchema,updateMappedSchema:e.updateMappedSchema,selectedNewField:e.getSelectedNewField(t,e.state.curSchema.fields[t].esriType),key:n})})):o.React.createElement("div",{className:"ml-4 mt-2"},this.props.intl.formatMessage({id:"noUsedFieldToMap",defaultMessage:y})),o.React.createElement("div",{className:"fixed-bottom ds-mapping-buttons"},this.props.curDs.parentDataSource&&o.React.createElement(r.Button,{onClick:this.onPreviousClicked,disabled:!this.props.isMappingReady||this.props.isWarning},this.props.intl.formatMessage({id:"previous",defaultMessage:r.defaultMessages.previous})),o.React.createElement(r.Button,{disabled:!this.state.isDone||!this.props.isMappingReady||this.props.isWarning,onClick:this.onNextClicked,className:"bg-primary ml-2"},this.props.isLast?this.props.intl.formatMessage({id:"done",defaultMessage:r.defaultMessages.done}):this.props.intl.formatMessage({id:"next",defaultMessage:r.defaultMessages.next})))):o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}))},t}(o.React.PureComponent),Ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xe=function(){return(Xe=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Ye=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.updateMappedChildSchema=function(e,t){var s=Xe({},n.state.mappedSchema),a=Y(e),i=a&&a.jimuChildId,o=e&&e.getDataSourceJson()&&e.getDataSourceJson()&&e.getDataSourceJson().schema,r=ee(q(e),Y(t),o);s.childSchemas[i]=r,n.setState({mappedSchema:s})},n.updateMappedSchema=function(e,t){var s=Xe({},n.state.mappedSchema),a=Y(t),i=a&&a.jimuChildId;s.childSchemas[i]=Xe(Xe({},s.childSchemas[i]),e),n.setState({mappedSchema:s})},n.setChildDs=function(e,t){n.setState({curChildDs:e,newChildDs:t})},n.getIsDoneStatus=function(){return!!G(n.state.curSchema,n.state.mappedSchema)},n.getIsChildMappingDoneStatus=function(){var e,t;return e=n.state.curSchema,t=n.state.mappedSchema,!!(e&&t&&(X(e)?Object.keys(e.childSchemas).every((function(e){return!(!t.childSchemas||!t.childSchemas[e])})):e.fields&&Object.keys(e.fields).every((function(e){return!(!t.fields||!t.fields[e])}))))},n.getSelectedNewDs=function(e){if(!(n.state.mappedSchema&&n.state.mappedSchema.childSchemas&&n.state.mappedSchema.childSchemas[e]&&n.props.newDs))return null;var t=n.state.mappedSchema.childSchemas[e].childId;return t?n.props.newDs.getChildDataSource(t):null},n.getDefaultMappedFieldSchema=function(){var e=Y(n.props.curDs);return n.props.defaultMappedSchema&&e?n.props.defaultMappedSchema.childSchemas[e.jimuChildId]:null},n.getWhetherHaveChildDssToMap=function(){return n.state.curSchema&&n.state.curSchema.childSchemas&&0!==Object.keys(n.state.curSchema.childSchemas).length},n.onFieldMappingFinished=function(e,t,s){var a=Xe({},t);n.props.updateMappedSchema&&n.props.updateMappedSchema(a,n.props.curDs),s?n.props.onDsMappingFinished():n.props.traverseParentDsMapping&&n.props.traverseParentDsMapping()},n.onDsMappingFinished=function(){if(n.props.newDs){var e=Xe({},n.state.mappedSchema);n.props.newDs.getChildDataSources().forEach((function(t){e=ae(e,Y(t))})),n.setState({mappedSchema:e},(function(){if(n.props.isRoot){var e=Z(n.props.curDs.getDataSourceJson(),n.props.newDs.getDataSourceJson(),n.state.mappedSchema);n.props.onMappingFinished&&n.props.onMappingFinished(e)}else n.props.updateMappedSchema&&n.props.updateMappedSchema(n.state.mappedSchema,n.props.curDs);n.props.hideMapping()}))}},n.traverseDsMapping=function(){var e=oe(n.state.curSchema.childSchemas).find((function(e){return n.props.mappingHistory.every((function(t){return!Y(t).jimuChildId||Y(t).jimuChildId!==e}))})),t=n.props.curDs.getChildDataSource(e),s=n.getSelectedNewDs(e);t?(n.setChildDs(t,s),n.props.updateMappingHistory(n.props.mappingHistory.concat(t))):n.props.traverseParentDsMapping?n.props.traverseParentDsMapping():(n.setChildDs(null,null),n.onDsMappingFinished())},n.reverseTraverseDsMapping=function(){var e=n.props.mappingHistory.length>1?n.props.mappingHistory.slice(n.props.mappingHistory.length-2)[0]:null,t=Y(e)&&Y(e).jimuChildId,s=n.getSelectedNewDs(t);e&&(n.setChildDs(e,s),n.props.updateMappingHistory(n.props.mappingHistory.slice(0,n.props.mappingHistory.length-1)))},n.state={newChildDs:null,curChildDs:null,curSchema:n.props.curDs&&n.props.curDs.isDataSourceSet?q(n.props.curDs):null,newSchema:n.props.newDs&&n.props.newDs.isDataSourceSet?Y(n.props.newDs):null,mappedSchema:n.props.defaultMappedSchema||null,isDone:!1,isChildMappingDone:!1},n}return Ge(t,e),t.prototype.componentDidMount=function(){if(this.__unmount=!1,!this.state.mappedSchema||0===Object.keys(this.state.mappedSchema).length){var e=this.props.curDs&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson().schema;this.setState({mappedSchema:ee(this.state.curSchema,this.state.newSchema,e)})}this.setState({isDone:this.getIsDoneStatus(),isChildMappingDone:this.getIsChildMappingDoneStatus()})},t.prototype.componentDidUpdate=function(e,t){if((e.curDs!==this.props.curDs&&this.props.curDs&&this.props.curDs.isDataSourceSet||this.getWhetherJsonRelatedDataChange(e,this.props))&&this.setState({curSchema:q(this.props.curDs)}),(e.newDs!==this.props.newDs&&this.props.newDs&&this.props.newDs.isDataSourceSet||this.getWhetherJsonRelatedDataChange(e,this.props))&&this.setState({newSchema:Y(this.props.newDs)}),t.newSchema!==this.state.newSchema){var n=this.props.curDs&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson()&&this.props.curDs.getDataSourceJson().schema;this.setState({mappedSchema:ee(this.state.curSchema,this.state.newSchema,n)})}t.curSchema===this.state.curSchema&&t.mappedSchema===this.state.mappedSchema&&t.newSchema===this.state.newSchema||this.setState({isDone:this.getIsDoneStatus(),isChildMappingDone:this.getIsChildMappingDoneStatus()}),e.isRoot!==this.props.isRoot&&this.props.isRoot&&this.props.toggleExternalDs(!0)},t.prototype.componentWillMount=function(){this.__unmount=!0},t.prototype.getWhetherJsonRelatedDataChange=function(e,t){return e.dataSources!==t.dataSources||e.widgets!==t.widgets||e.messages!==t.messages},t.prototype.render=function(){var e,n,s,a,i,c=this;return this.props.curDs?o.React.createElement(o.React.Fragment,null,this.state.curChildDs&&this.state.newChildDs?o.React.createElement(t,{newDs:this.state.newChildDs,curDs:this.state.curChildDs,defaultMappedSchema:this.state.mappedSchema,isRoot:!1,isExternalDsShown:this.props.isExternalDsShown,isMappingReady:this.props.isMappingReady,hideMapping:this.props.hideMapping,toggleExternalDs:this.props.toggleExternalDs,isWarning:this.props.isWarning,mappingHistory:this.props.mappingHistory,updateMappedSchema:this.updateMappedSchema,traverseParentDsMapping:this.traverseDsMapping,updateMappingHistory:this.props.updateMappingHistory,widgets:this.props.widgets,dataSources:this.props.dataSources,messages:this.props.messages,reverseTraverseParentDsMapping:this.reverseTraverseDsMapping,onDsMappingFinished:this.onDsMappingFinished,intl:this.props.intl}):o.React.createElement("div",{className:"w-100 h-100 ds-mapping-ds"},this.props.curDs.isDataSourceSet?o.React.createElement("div",null,o.React.createElement(qe,{curDs:this.props.curDs,newDs:this.props.newDs,hideMapping:this.props.hideMapping,toggleExternalDs:this.props.toggleExternalDs,isMappingReady:this.props.isMappingReady,isExternalDsShown:this.props.isExternalDsShown,intl:this.props.intl}),this.getWhetherHaveChildDssToMap()?o.React.createElement("div",null,o.React.createElement("h5",{className:"m-3 data-setting-secondary-title"},this.props.intl.formatMessage({id:"inUse",defaultMessage:M})),oe(this.state.curSchema.childSchemas).map((function(e,t){return o.React.createElement(ze,{curDs:c.props.curDs.getChildDataSource(e),selectedNewDs:c.getSelectedNewDs(e),key:t,newParentDs:c.props.newDs,updateMappedSchema:c.updateMappedChildSchema,isDone:G(c.state.curSchema.childSchemas[e],c.state.mappedSchema.childSchemas[e]),widgets:c.props.widgets,intl:c.props.intl})}))):o.React.createElement("div",{className:"p-2"},this.props.intl.formatMessage({id:"noChildDssToMap",defaultMessage:x})),o.React.createElement("div",{className:"fixed-bottom ds-mapping-buttons"},o.React.createElement(r.Button,{disabled:1===this.props.mappingHistory.length||!this.props.isMappingReady||this.props.isWarning,type:"secondary",onClick:this.reverseTraverseDsMapping},this.props.intl.formatMessage({id:"previous",defaultMessage:r.defaultMessages.previous})),o.React.createElement(r.Button,{type:"secondary",onClick:this.traverseDsMapping,disabled:!this.state.isChildMappingDone||!this.props.isMappingReady||this.props.isWarning,className:"bg-primary ml-2"},this.getWhetherHaveChildDssToMap()?this.props.intl.formatMessage({id:"next",defaultMessage:r.defaultMessages.next}):this.props.intl.formatMessage({id:"done",defaultMessage:r.defaultMessages.done})))):o.React.createElement("div",{className:"ds-mapping-field-container"},o.React.createElement(Ke,{curDs:this.props.curDs,newDs:this.props.newDs,onMappingFinished:this.onFieldMappingFinished,defaultMappedSchema:this.getDefaultMappedFieldSchema(),isExternalDsShown:this.props.isExternalDsShown,hideMapping:this.props.hideMapping,isLast:(e=this.props.curDs,n=this.props.curDs.parentDataSource,s=this.props.mappingHistory,a=q(n),i=Y(e),se(i.childId,a)?Object.keys(a.childSchemas).filter((function(e){return a.childSchemas[e].childId!==i.childId})).every((function(e){return s.some((function(t){return Y(t).childId===a.childSchemas[e].childId}))})):(console.warn("data source is not child of ",n),!1)),toggleExternalDs:this.props.toggleExternalDs,isMappingReady:this.props.isMappingReady,mappingHistory:this.props.mappingHistory.concat(this.props.curDs),isWarning:this.props.isWarning,backToPreviouseMapping:this.props.reverseTraverseParentDsMapping,intl:this.props.intl,widgets:this.props.widgets,dataSources:this.props.dataSources,messages:this.props.messages})))):o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}))},t}(o.React.PureComponent),Ze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),et=function(e){function t(t){var n=e.call(this,t)||this;return n.contentStyle={position:"fixed",bottom:"50px",top:"auto",left:"0",right:"auto",width:"280px",height:"90px",backgroundColor:n.props.theme.colors.palette.light[400],borderColor:n.props.theme.colors.danger,borderWidth:"1px",borderStyle:"solid",zIndex:5},n}return Ze(t,e),t.prototype.render=function(){return this.props.warning?Object(o.jsx)(r.Popper,{open:!0,style:this.contentStyle,disablePortal:!0,reference:null},this.props.warning):null},t}(o.React.PureComponent),tt=o.themeUtils.withTheme(et),nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),st=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.createSameDsWithDiffId=function(e){if(!e||!e.id)return Promise.reject("Pass a wrong data source");var t=n.getTempDsId(e.id),s=e.set("id",t).without("schema");return n.creatingDsId=t,o.DataSourceManager.getInstance().createDataSource(s).then((function(e){return n.creatingDsId=null,e}))},n.destoryDs=function(e){e&&e!==n.props.ds.id&&o.DataSourceManager.getInstance().destroyDataSource(e)},n.updateMappingHistory=function(e){n.setState({mappingHistory:e})},n.hideMapping=function(){n.state.newDs&&n.destoryDs(n.state.newDs.id),n.creatingDsId&&n.destoryDs(n.creatingDsId),n.props.hideMapping()},n.hideExternalDs=function(){n.setState({isExternalDsShown:!1})},n.getTempDsId=function(e){return e+"-"+Object(o.uuidv1)()},n.toggleExternalDs=function(e){n.setState({isExternalDsShown:e})},n.onSelectExternalDs=function(e){var t=e[0];t?(n.setState({isMappingReady:!1}),n.createSameDsWithDiffId(t).then((function(e){n.__unmount||n.setState({newDs:e,isMappingReady:!0,isWarning:!1})}),(function(e){n.__unmount||(console.error(e),n.setState({isMappingReady:!0,isWarning:!0}))}))):n.setState({isWarning:!0})},n.onRemoveExternalDs=function(e){e[0]||n.setState({isWarning:!0}),n.setState({newDs:null})},n.state={newDs:null,mappedSchema:n.props.ds&&n.props.ds.isDataSourceSet?{childSchemas:{}}:{},mappingHistory:n.props.ds?[n.props.ds]:[],isExternalDsShown:!0,isDone:!1,isMappingReady:!1,isWarning:!1},n}return nt(t,e),t.prototype.componentDidMount=function(){var e=this;this.__unmount=!1,this.rootDom&&this.dataSelector&&this.moveDataSelector(),this.props.ds&&this.createSameDsWithDiffId(this.props.ds.getDataSourceJson()).then((function(t){e.__unmount||e.setState({newDs:t,mappedSchema:q(t,(function(e){return delete e.alias,e})),isMappingReady:!0,isWarning:!1})}),(function(t){e.__unmount||(console.error(t),e.setState({isMappingReady:!0,isWarning:!0}))}))},t.prototype.componentDidUpdate=function(e,t){var n=this;this.rootDom&&this.dataSelector&&this.moveDataSelector(),t.newDs!==this.state.newDs&&t.newDs&&this.destoryDs(t.newDs.id),this.state.newDs||this.creatingDsId||!this.props.ds||(this.setState({isMappingReady:!1}),this.createSameDsWithDiffId(this.props.ds.getDataSourceJson()).then((function(e){n.__unmount||n.setState({newDs:e,mappedSchema:q(e,(function(e){return delete e.alias,e})),isMappingReady:!0,isWarning:!1})}),(function(e){n.__unmount||(console.error(e),n.setState({isMappingReady:!0,isWarning:!0}))})))},t.prototype.componentWillUnmount=function(){this.__unmount=!0,this.state.newDs&&this.destoryDs(this.state.newDs.id),this.creatingDsId&&this.destoryDs(this.creatingDsId)},t.prototype.moveDataSelector=function(){var e=function(e){if(!e)return null;for(var t=e.offsetLeft,n=e.offsetTop,s=e.offsetParent;null!==s;)t+=s.offsetLeft,n+=s.offsetTop,s=s.offsetParent;return{x:t,y:n}}(this.rootDom);this.dataSelector&&e&&(this.dataSelector.style.left=e.x+this.rootDom.offsetWidth+"px",this.dataSelector.style.top="40px",this.dataSelector.style.bottom="0px",this.dataSelector.style.right="0px")},t.prototype.onMappingFinished=function(e,t){var n;e&&this.state.newDs&&(e.getDataSourceJson?e.getDataSourceJson&&t&&(n=Z(this.props.ds.getDataSourceJson(),this.state.newDs.getDataSourceJson(),t)):n=e,Object(d.getAppConfigAction)().editDataSource(n).exec(),o.DataSourceManager.getInstance().createDataSource(n),this.setState({mappedSchema:n.schema}),this.hideMapping())},t.prototype.render=function(){var e=this;return this.props.ds?o.React.createElement("div",{className:"ds-mapping",ref:function(t){return e.rootDom=t}},this.props.ds.isDataSourceSet?o.React.createElement("div",{className:"ds-mapping-ds-container"},o.React.createElement(Ye,{curDs:this.props.ds,newDs:this.state.newDs,isRoot:!0,intl:this.props.intl,onMappingFinished:this.onMappingFinished.bind(this),defaultMappedSchema:this.state.mappedSchema,hideMapping:this.hideMapping,toggleExternalDs:this.toggleExternalDs,isWarning:this.state.isWarning,isExternalDsShown:this.state.isExternalDsShown,isMappingReady:this.state.isMappingReady,mappingHistory:this.state.mappingHistory,updateMappingHistory:this.updateMappingHistory,widgets:this.props.widgets,dataSources:this.props.dataSources,messages:this.props.messages})):null,this.props.ds.isDataSourceSet?null:o.React.createElement("div",{className:"ds-mapping-field-container"},o.React.createElement(Ke,{curDs:this.props.ds,newDs:this.state.newDs,onMappingFinished:this.onMappingFinished.bind(this),defaultMappedSchema:this.state.mappedSchema,hideMapping:this.hideMapping,isWarning:this.state.isWarning,isMappingReady:this.state.isMappingReady,isExternalDsShown:this.state.isExternalDsShown,isLast:!0,toggleExternalDs:this.toggleExternalDs,mappingHistory:this.state.mappingHistory,intl:this.props.intl,widgets:this.props.widgets,dataSources:this.props.dataSources,messages:this.props.messages})),this.state.isMappingReady?null:o.React.createElement("div",{className:"jimu-secondary-loading"}),this.state.isExternalDsShown?o.React.createElement("div",{className:"ds-mapping-external-data",ref:function(t){return e.dataSelector=t}},o.React.createElement(p.ExternalDataSourceSelector,{portalUrl:this.props.portalUrl,onSelect:this.onSelectExternalDs,onRemove:this.onRemoveExternalDs,onCancel:this.hideExternalDs,isRadio:!0,types:this.props.ds?Object(o.Immutable)([this.props.ds.type]):Object(o.Immutable)([])})):null,this.state.isWarning?o.React.createElement(tt,{warning:this.props.intl.formatMessage({id:"createFailedWarning",defaultMessage:v})}):null):o.React.createElement("div",{className:"m-2"},this.props.intl.formatMessage({id:"noSupportedDataSource",defaultMessage:b}))},t}(o.React.PureComponent),at=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var it=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ot=n(28),rt=n(57),ct=n(20),pt=n(14),lt=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.externalDsStyle={width:"100%",height:"100%",maxWidth:"5000px",margin:0},n.addToDsHistory=function(e){n.setState({dsHistory:n.state.dsHistory.concat(e)})},n.onDsItemClick=function(e){n.addToDsHistory(e),n.resetDefaultActiveTab()},n.onChildDataIconClick=function(e){n.addToDsHistory(e),n.setState({dsListActiveTab:"layers",fieldListActiveTab:"dataViews"})},n.onRelatedWidgetsIconClick=function(e){n.addToDsHistory(e),e.isDataSourceSet?n.setState({dsListActiveTab:"widgets",fieldListActiveTab:"dataViews"}):n.setState({dsListActiveTab:"layers",fieldListActiveTab:"widgets"})},n.resetDefaultActiveTab=function(){n.setState({dsListActiveTab:"layers",fieldListActiveTab:"dataViews"})},n.removeFromDsHistory=function(e){if(n.resetDefaultActiveTab(),e){var t=[],s=n.state.dsHistory.findIndex((function(t){return t.id===e.id}));n.state.dsHistory.length>0&&(t=n.state.dsHistory.slice(0,s+1)),n.setState({dsHistory:t,detailedItem:null})}else n.setState({dsHistory:[],detailedItem:null})},n.getSearch=function(e){var t=re(e);if(!t)return null;var n=e.getDataSourceJson().portalUrl;return{q:"id: "+t,authentication:o.SessionManager.getInstance().getSessionByUrl(n)}},n.getDsById=function(e){return e?o.DataSourceManager.getInstance().getDataSource(e):null},n.getListUsedDs=function(e){return e?n.state.isDataSourceInited?n.getDsById(e.id):e:null},n.backToHomePage=function(){n.removeFromDsHistory(null)},n.onNavClicked=function(e){n.removeFromDsHistory(e)},n.onSelectDataFinished=function(e){e?(Object(d.getAppConfigAction)().addDataSources(e).exec(),e.forEach((function(e){return o.DataSourceManager.getInstance().createDataSource(e)})),n.setState({isExternalDsShown:!1,isDataSourceInited:!1})):n.setState({isExternalDsShown:!1})},n.onSelectDataCanceled=function(){n.setState({isExternalDsShown:!1})},n.onMappingIconClick=function(e){n.setState({mappingDs:e})},n.onShowDetailClick=function(e){var t=n.getSearch(e);t&&(n.setState({isDataSourceInited:!1}),t&&o.esri.restPortal.searchItems(t).then((function(t){n.__unmount||n.setState({detailedItem:{item:t.results[0],portalUrl:e.getDataSourceJson().portalUrl},isDataSourceInited:!0})}),(function(e){n.__unmount||(console.error(e),n.setState({isDataSourceInited:!0}))})))},n.onCloseDetailClicked=function(){n.setState({detailedItem:null})},n.toggleMoreOptions=function(e){n.setState({moreOptionsDsId:n.state.moreOptionsDsId===e?null:e})},n.onToggleExternalDs=function(){n.setState({isExternalDsShown:!n.state.isExternalDsShown})},n.hideMapping=function(){n.setState({mappingDs:null})},n.showExternalDs=function(){n.setState({isExternalDsShown:!0})},n.onSearchIconClick=function(e){n.setState({isSearchInputShown:!n.state.isSearchInputShown})},n.onSearchValueChange=function(e){n.setState({searchValue:e.target.value})},n.ExternalDs=Object(o.jsx)(p.ExternalDataSourceSelector,{portalUrl:n.props.portalUrl,onCancel:n.onSelectDataCanceled,onFinish:n.onSelectDataFinished}),n.AddDataSourceBtn=Object(o.jsx)("div",{className:"d-flex mx-3 mb-1 mt-3"},Object(o.jsx)(r.Button,{type:"primary",className:"flex-grow-1 text-center add-data",onClick:n.showExternalDs},Object(o.jsx)("div",{className:"w-100 px-2 text-truncate"},Object(o.jsx)(r.Icon,{icon:rt,size:12,className:"add-data-icon"}),n.props.intl.formatMessage({id:"addData",defaultMessage:r.defaultMessages.addData})))),n.state={isDataSourceInited:p.dataComponentsUtils.getWhetherDataSourceIsInited(n.props.dataSources,n.props.dataSourcesInfo),isExternalDsShown:!1,isSearchInputShown:!1,mappingDs:null,detailedItem:null,dsHistory:[],moreOptionsDsId:null,searchValue:"",dsListActiveTab:"layers",fieldListActiveTab:"dataViews"},n}return it(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1},t.prototype.componentDidUpdate=function(e,t){o.lodash.isDeepEqual(this.props.dataSources,e.dataSources)&&o.lodash.isDeepEqual(this.props.dataSourcesInfo,e.dataSourcesInfo)||this.setState({isDataSourceInited:p.dataComponentsUtils.getWhetherDataSourceIsInited(this.props.dataSources,this.props.dataSourcesInfo)}),t.isSearchInputShown!==this.state.isSearchInputShown&&this.state.isSearchInputShown&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t,n,s,a,i,d,u,h,m=this;return Object(o.jsx)("div",{css:(h=this.props.theme,Object(o.css)(ce||(ce=at(["\n    .widget-ds-setting{\n      width: 100%;\n      height: 100%;\n      background-color: ",";\n      transform: translate(0, 0);\n\n      .tab-scroll{\n        height: calc(100% - 20px);\n        overflow: auto;\n        position: relative;\n      }\n\n      .tab-scroll-with-bottom-fix{\n        height: calc(100% - 50px);\n        overflow: auto;\n      }\n\n      .w-85{\n        width: 85%;\n      }\n\n      .font-size-13{\n        font-size: ",";\n      }\n\n      .highlight-refresh-icon{\n        svg{\n          color: ",";\n        }\n      }\n\n      .refresh-last-update-label{\n        font-size: ",";\n        color: ",";\n      }\n\n      .data-view-item{\n        width: ",";\n        height: ",";\n        background-color: ",";\n        font-size: ",";\n      }\n\n      .no-selection-view-item{\n        width: ",";\n        height: ",";\n        border-top: 1px solid ",";\n        position: fixed;\n        bottom: 0;\n      }\n\n      .empty-placeholder{\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        .empty-placeholder-text, .empty-placeholder-icon{\n          display: table;\n          margin: 0 auto;\n        }\n        .empty-placeholder-text{\n          color: ",";\n          font-size: ",";\n          margin-top: 16px;\n          text-align: center;\n        }\n        .empty-placeholder-icon{\n          color: ",";\n        }\n      }\n\n      .title{\n        padding: 18px 16px 2px 16px !important;\n        font-size: 1rem;\n        font-weight: 500;\n        .search-icon{\n          cursor: pointer;\n          width: 30px;\n        }\n      }\n      .search-input{\n        height: 26px;\n        border-radius: 2px;\n      }\n\n      .list-container{\n        height: calc(100% - 80px);\n        overflow: auto;\n        padding-bottom: 20px;\n      }\n\n      .with-search-input.list-container{\n        height: calc(100% - 120px);\n      }\n\n      .text-data-600{\n        color: ",";\n      }\n\n      .border-color-gray-300{\n        border-color: "," !important;\n      }\n\n      .data-setting-secondary-title{\n        font-size: 14px;\n        color: ",";\n        margin-top: 16px !important;\n        margin-bottom: 16px !important;\n        font-weight: 400;\n      }\n\n      .widget-icon{\n        >img{\n          vertical-align: text-top;\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .drop-down{\n        button{\n          background-color: ",";\n        }\n      }\n\n      .setting-header{\n        border-bottom: 1px;\n      }\n\n      .ds-nav{\n        .max-width-1{\n          max-width: ",";\n        }\n        .max-width-2{\n          max-width: ",";\n        }\n        .max-width-3{\n          max-width: ",";\n        }\n        a, .current-ds-link{\n          font-size: "," !important;\n          padding: 0 !important;\n          svg{\n            margin: 0 0 5px 0 !important;\n          }\n        }\n        .current-ds-link{\n          color: ",";\n        }\n      }\n\n      .add-data{\n        height: ",";\n        line-height: ",";\n        width: 228px;\n        padding: 0;\n        border-radius: 2px;\n        cursor: pointer;\n        .add-data-icon{\n          vertical-align: baseline;\n        }\n      }\n      button.add-data:hover{\n        color: "," !important;\n      }\n\n      .two-line-truncate{\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        word-break: break-word;\n        word-wrap: break-word;\n      }\n\n      .three-line-truncate{\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n        word-break: break-word;\n        word-wrap: break-word;\n      }\n\n      .ds-info{\n        .ds-more, .ds-detail{\n          cursor: pointer;\n        }\n        .ds-more{\n          margin-right: ",";\n        }\n      }\n\n      .ds-origin-label{\n        max-width: 100%;\n        .ds-origin-label-link, .ds-origin-label-link:hover, .ds-origin-label-link:focus, .ds-origin-label-link:active{\n          color: ",";\n          outline: none;\n          box-shadow: 0 0 0 !important;\n          border: 0 !important;\n        }\n        .ds-origin-label-link-text{\n          display: inline-block;\n          font-size: ",";\n          max-width: 100%;\n          text-decoration: underline;\n        }\n      }\n\n      .mapping-info{\n        .ds-label{\n          cursor: default;\n        }\n      }\n\n      .ds-mapping-collapse{\n        padding: "," "," 0  ",";\n        .ds-origin-label{\n          max-width: 170px;\n          height:  ",";\n          line-height:  ",";\n          border-radius: 2px;\n        }\n      }\n\n      .ds-thumbnail{\n        width:  ",";\n        height:  ",";\n        background-color: ",";\n      }\n\n      .mapping-info{\n        .ds-mapping-collapse{\n          border: 0;\n        }\n      }\n\n      .field-list, .ds-list{\n        height: calc(100% - 50px);\n        .jimu-tab{\n          height: calc(100% - 140px);\n          .tab-content{\n            height: calc(100% - 40px);\n          }\n          .jimu-nav.nav-pills{\n            margin: 0 "," !important;\n          }\n        }\n        .ds-info{\n          width: 100%;\n          .ds-thumbnail-type{\n            width: calc(100% - ",");\n          }\n          .ds-label{\n            font-size: ",";\n            color: ",";\n          }\n          .ds-type{\n            font-size: ",";\n            color: ",";\n          }\n        }\n        .tab-pane{\n          width: 100%;\n        }\n      }\n\n      .field-item{\n        font-size: ",";\n        color: ",";\n      }\n\n      .ds-mapping{\n        .ds-mapping-header{\n          height:  ",";\n          line-height:  ",";\n          border-bottom: 1px solid;\n          .ds-mapping-header-back{\n            cursor: pointer;\n          }\n        }\n\n        .ds-mapping-cur-info{\n          border-bottom: 1px solid;\n        }\n\n        .ds-mapping-external-data{\n          position: fixed;\n          z-index: 4;\n        }\n\n        .ds-mapping-set-item{\n          .ds-mapping-drop-down{\n            .btn-group{\n              width: 100%;\n              button{\n                width: 100%;\n              }\n            }\n          }\n        }\n\n        .ds-mapping-buttons{\n          left:  ",";\n          bottom:  ",";\n        }\n\n        .ds-mapping-source{\n          width:  ",";\n          height:  ",";\n          border-radius:  ",";\n          line-height:  ",";\n          text-align: center;\n          cursor: pointer;\n        }\n\n        .ds-mapping-ds{\n          .ds-origin-label{\n            max-width: 100%;\n          }\n        }\n\n      }\n    }\n\n    .widget-ds-setting-add-data-popup{\n      .modal-content{\n        height: 100%;\n      }\n    }\n\n  "],["\n    .widget-ds-setting{\n      width: 100%;\n      height: 100%;\n      background-color: ",";\n      transform: translate(0, 0);\n\n      .tab-scroll{\n        height: calc(100% - 20px);\n        overflow: auto;\n        position: relative;\n      }\n\n      .tab-scroll-with-bottom-fix{\n        height: calc(100% - 50px);\n        overflow: auto;\n      }\n\n      .w-85{\n        width: 85%;\n      }\n\n      .font-size-13{\n        font-size: ",";\n      }\n\n      .highlight-refresh-icon{\n        svg{\n          color: ",";\n        }\n      }\n\n      .refresh-last-update-label{\n        font-size: ",";\n        color: ",";\n      }\n\n      .data-view-item{\n        width: ",";\n        height: ",";\n        background-color: ",";\n        font-size: ",";\n      }\n\n      .no-selection-view-item{\n        width: ",";\n        height: ",";\n        border-top: 1px solid ",";\n        position: fixed;\n        bottom: 0;\n      }\n\n      .empty-placeholder{\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        .empty-placeholder-text, .empty-placeholder-icon{\n          display: table;\n          margin: 0 auto;\n        }\n        .empty-placeholder-text{\n          color: ",";\n          font-size: ",";\n          margin-top: 16px;\n          text-align: center;\n        }\n        .empty-placeholder-icon{\n          color: ",";\n        }\n      }\n\n      .title{\n        padding: 18px 16px 2px 16px !important;\n        font-size: 1rem;\n        font-weight: 500;\n        .search-icon{\n          cursor: pointer;\n          width: 30px;\n        }\n      }\n      .search-input{\n        height: 26px;\n        border-radius: 2px;\n      }\n\n      .list-container{\n        height: calc(100% - 80px);\n        overflow: auto;\n        padding-bottom: 20px;\n      }\n\n      .with-search-input.list-container{\n        height: calc(100% - 120px);\n      }\n\n      .text-data-600{\n        color: ",";\n      }\n\n      .border-color-gray-300{\n        border-color: "," !important;\n      }\n\n      .data-setting-secondary-title{\n        font-size: 14px;\n        color: ",";\n        margin-top: 16px !important;\n        margin-bottom: 16px !important;\n        font-weight: 400;\n      }\n\n      .widget-icon{\n        >img{\n          vertical-align: text-top;\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .drop-down{\n        button{\n          background-color: ",";\n        }\n      }\n\n      .setting-header{\n        border-bottom: 1px;\n      }\n\n      .ds-nav{\n        .max-width-1{\n          max-width: ",";\n        }\n        .max-width-2{\n          max-width: ",";\n        }\n        .max-width-3{\n          max-width: ",";\n        }\n        a, .current-ds-link{\n          font-size: "," !important;\n          padding: 0 !important;\n          svg{\n            margin: 0 0 5px 0 !important;\n          }\n        }\n        .current-ds-link{\n          color: ",";\n        }\n      }\n\n      .add-data{\n        height: ",";\n        line-height: ",";\n        width: 228px;\n        padding: 0;\n        border-radius: 2px;\n        cursor: pointer;\n        .add-data-icon{\n          vertical-align: baseline;\n        }\n      }\n      button.add-data:hover{\n        color: "," !important;\n      }\n\n      .two-line-truncate{\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        word-break: break-word;\n        word-wrap: break-word;\n      }\n\n      .three-line-truncate{\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 3;\n        -webkit-box-orient: vertical;\n        word-break: break-word;\n        word-wrap: break-word;\n      }\n\n      .ds-info{\n        .ds-more, .ds-detail{\n          cursor: pointer;\n        }\n        .ds-more{\n          margin-right: ",";\n        }\n      }\n\n      .ds-origin-label{\n        max-width: 100%;\n        .ds-origin-label-link, .ds-origin-label-link:hover, .ds-origin-label-link:focus, .ds-origin-label-link:active{\n          color: ",";\n          outline: none;\n          box-shadow: 0 0 0 !important;\n          border: 0 !important;\n        }\n        .ds-origin-label-link-text{\n          display: inline-block;\n          font-size: ",";\n          max-width: 100%;\n          text-decoration: underline;\n        }\n      }\n\n      .mapping-info{\n        .ds-label{\n          cursor: default;\n        }\n      }\n\n      .ds-mapping-collapse{\n        padding: "," "," 0  ",";\n        .ds-origin-label{\n          max-width: 170px;\n          height:  ",";\n          line-height:  ",";\n          border-radius: 2px;\n        }\n      }\n\n      .ds-thumbnail{\n        width:  ",";\n        height:  ",";\n        background-color: ",";\n      }\n\n      .mapping-info{\n        .ds-mapping-collapse{\n          border: 0;\n        }\n      }\n\n      .field-list, .ds-list{\n        height: calc(100% - 50px);\n        .jimu-tab{\n          height: calc(100% - 140px);\n          .tab-content{\n            height: calc(100% - 40px);\n          }\n          .jimu-nav.nav-pills{\n            margin: 0 "," !important;\n          }\n        }\n        .ds-info{\n          width: 100%;\n          .ds-thumbnail-type{\n            width: calc(100% - ",");\n          }\n          .ds-label{\n            font-size: ",";\n            color: ",";\n          }\n          .ds-type{\n            font-size: ",";\n            color: ",";\n          }\n        }\n        .tab-pane{\n          width: 100%;\n        }\n      }\n\n      .field-item{\n        font-size: ",";\n        color: ",";\n      }\n\n      .ds-mapping{\n        .ds-mapping-header{\n          height:  ",";\n          line-height:  ",";\n          border-bottom: 1px solid;\n          .ds-mapping-header-back{\n            cursor: pointer;\n          }\n        }\n\n        .ds-mapping-cur-info{\n          border-bottom: 1px solid;\n        }\n\n        .ds-mapping-external-data{\n          position: fixed;\n          z-index: 4;\n        }\n\n        .ds-mapping-set-item{\n          .ds-mapping-drop-down{\n            .btn-group{\n              width: 100%;\n              button{\n                width: 100%;\n              }\n            }\n          }\n        }\n\n        .ds-mapping-buttons{\n          left:  ",";\n          bottom:  ",";\n        }\n\n        .ds-mapping-source{\n          width:  ",";\n          height:  ",";\n          border-radius:  ",";\n          line-height:  ",";\n          text-align: center;\n          cursor: pointer;\n        }\n\n        .ds-mapping-ds{\n          .ds-origin-label{\n            max-width: 100%;\n          }\n        }\n\n      }\n    }\n\n    .widget-ds-setting-add-data-popup{\n      .modal-content{\n        height: 100%;\n      }\n    }\n\n  "])),h.colors.palette.light[200],o.polished.rem(13),h.colors.palette.primary[700],o.polished.rem(10),h.colors.palette.dark[600],o.polished.rem(228),o.polished.rem(32),h.colors.palette.light[500],o.polished.rem(13),o.polished.rem(260),o.polished.rem(40),h.colors.palette.light[800],h.colors.palette.dark[400],o.polished.rem(14),h.colors.palette.secondary[800],h.colors.palette.dark[600],h.colors.palette.light[500],h.colors.palette.dark[400],o.polished.rem(16),o.polished.rem(16),h.colors.white,o.polished.rem(200),o.polished.rem(90),o.polished.rem(58),o.polished.rem(12),h.colors.palette.dark[800],o.polished.rem(30),o.polished.rem(30),h.colors.black,o.polished.rem(-8),h.colors.palette.primary[700],o.polished.rem(10),o.polished.rem(10),o.polished.rem(10),o.polished.rem(10),o.polished.rem(25),o.polished.rem(25),o.polished.rem(18),o.polished.rem(18),h.colors.palette.info[400],o.polished.rem(16),o.polished.rem(35),o.polished.rem(14),h.colors.palette.dark[800],o.polished.rem(11),h.colors.palette.dark[600],o.polished.rem(13),h.colors.dark,o.polished.rem(42),o.polished.rem(42),o.polished.rem(65),o.polished.rem(10),o.polished.rem(20),o.polished.rem(20),o.polished.rem(10),o.polished.rem(20))),className:"w-100 h-100"},Object(o.jsx)("div",{className:"jimu-widget widget-ds-setting setting-pane bg-light-300"},this.state.mappingDs?Object(o.jsx)(st,{portalUrl:this.props.portalUrl,ds:this.state.mappingDs,widgets:this.props.widgets,dispatch:this.props.dispatch,hideMapping:this.hideMapping,intl:this.props.intl,dataSources:this.props.dataSources,messages:this.props.messages}):Object(o.jsx)("div",{className:"h-100"},this.state.dsHistory.length>0?Object(o.jsx)("div",{className:"d-flex flex-wrap p-3 ds-nav"},Object(o.jsx)(r.Link,{title:this.props.intl.formatMessage({id:"home",defaultMessage:r.defaultMessages.home}),onClick:this.backToHomePage},Object(o.jsx)(r.Icon,{icon:ot,size:12})),this.state.dsHistory.map((function(e,t){return t===m.state.dsHistory.length-1?Object(o.jsx)("div",{className:"d-flex align-items-center",key:t},Object(o.jsx)("span",{className:"mx-1"},"/"),Object(o.jsx)("div",{title:e.getLabel(),className:Object(o.classNames)("current-ds-link text-left text-truncate",{"max-width-1":1===m.state.dsHistory.length,"max-width-3":m.state.dsHistory.length>1&&m.state.dsHistory.length%2!=0,"max-width-2":m.state.dsHistory.length>1&&m.state.dsHistory.length%2==0})},e.getLabel())):Object(o.jsx)("div",{className:"d-flex align-items-center",key:t},Object(o.jsx)("span",{className:"mx-1"},"/"),Object(o.jsx)(r.Link,{title:e.getLabel(),onClick:function(){return m.onNavClicked(e)},className:Object(o.classNames)("text-left text-truncate",{"max-width-1":1===m.state.dsHistory.length,"max-width-3":m.state.dsHistory.length>1&&m.state.dsHistory.length%2!=0,"max-width-2":m.state.dsHistory.length>1&&m.state.dsHistory.length%2==0})},e.getLabel()))}))):null,0===this.state.dsHistory.length?Object(o.jsx)("div",{className:"h-100"},Object(o.jsx)("div",{className:"jimu-builder-panel--header d-flex flex-row text-data-600 title justify-content-between"},Object(o.jsx)("div",{className:"mb-0 w-100 text-truncate text-left"},this.props.intl.formatMessage({id:"data",defaultMessage:r.defaultMessages.data})),Object(o.jsx)("div",{className:"search-icon d-flex align-items-start justify-content-end",onClick:this.onSearchIconClick,title:this.props.intl.formatMessage({id:"search",defaultMessage:o.defaultMessages.search})},Object(o.jsx)(r.Button,{size:"sm",icon:!0,type:"tertiary"},Object(o.jsx)(r.Icon,{icon:pt,size:16})))),Object(o.jsx)("div",{className:"w-100 px-3"},this.state.isSearchInputShown&&Object(o.jsx)(r.TextInput,{value:this.state.searchValue,onChange:this.onSearchValueChange,className:"search-input my-3",placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:o.defaultMessages.search}),ref:function(e){return m.searchInput=e}})),Object(o.jsx)("div",{className:"w-100"},this.AddDataSourceBtn),this.props.dataSources&&Object.keys(this.props.dataSources).length>0?Object(o.jsx)("div",{className:Object(o.classNames)("list-container",{"with-search-input":this.state.isSearchInputShown})},Object(o.jsx)("div",null,o.dataSourceUtils.getSortedArrayByLabel(Object.keys(this.props.dataSources).map((function(e){return m.getDsById(e)})).filter((function(e){return e&&!e.getDataSourceJson().isOutputFromWidget&&!e.parentDataSource&&e.getLabel()}))).map((function(e){return e.getDataSourceJson()})).concat(Object.values(this.props.dataSources).filter((function(e){return!m.getDsById(null==e?void 0:e.id)&&!(null==e?void 0:e.isOutputFromWidget)}))).map((function(e,t){var n=m.getDsById(null==e?void 0:e.id);return(null==e?void 0:e.id)&&(!m.state.isSearchInputShown||m.state.isSearchInputShown&&p.dataComponentsUtils.isFuzzySearch(n.getLabel(),m.state.searchValue))?n&&n.id?Object(o.jsx)(S,{ds:n,key:t,onDataSourceItemClick:m.onDsItemClick,intl:m.props.intl,widgets:m.props.widgets,onMappingIconClick:m.onMappingIconClick,isMoreOptionsShown:m.state.moreOptionsDsId===n.id,onChildDataIconClick:m.onChildDataIconClick,onRelatedWidgetsIconClick:m.onRelatedWidgetsIconClick,toggleMoreOptions:m.toggleMoreOptions,isDataSourceInited:m.state.isDataSourceInited,theme:m.props.theme}):Object(o.jsx)(D,{dsJson:e,key:t,intl:m.props.intl,widgets:m.props.widgets,isMoreOptionsShown:m.state.moreOptionsDsId===e.id,theme:m.props.theme,isMoreIconShown:!0,isDataSourceInited:m.state.isDataSourceInited,toggleMoreOptions:m.toggleMoreOptions,isErrorIconShown:!0}):null})))):Object(o.jsx)("div",null,(null===(t=null===(e=Object(o.getAppStore)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)&&Object(o.jsx)("div",{className:"empty-placeholder w-100"},Object(o.jsx)("div",{className:"empty-placeholder-icon"},Object(o.jsx)(r.Icon,{icon:ct,width:80,height:71})),Object(o.jsx)("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:this.props.intl.formatMessage({id:"noDataNotice",defaultMessage:C})}})))):null,this.props.dataSources&&this.state.dsHistory.length>0&&!this.state.dsHistory[this.state.dsHistory.length-1].isDataSourceSet?Object(o.jsx)(_e,{onShowDetailClick:this.onShowDetailClick,isDataSourceInited:this.state.isDataSourceInited,backToHomePage:this.backToHomePage,ds:this.getListUsedDs(this.state.dsHistory[this.state.dsHistory.length-1]),widgets:this.props.widgets,onMappingIconClick:this.onMappingIconClick,intl:this.props.intl,theme:this.props.theme,defaultActive:this.state.fieldListActiveTab,dsInfo:null===(n=this.props.dataSourcesInfo)||void 0===n?void 0:n[null===(s=this.getListUsedDs(this.state.dsHistory[this.state.dsHistory.length-1]))||void 0===s?void 0:s.id]}):null,this.props.dataSources&&this.state.dsHistory.length>0&&this.state.dsHistory[this.state.dsHistory.length-1].isDataSourceSet?Object(o.jsx)(ve,{onDsItemClicked:this.onDsItemClick,dispatch:this.props.dispatch,ds:this.getListUsedDs(this.state.dsHistory[this.state.dsHistory.length-1]),theme:this.props.theme,onMappingIconClick:this.onMappingIconClick,isDataSourceInited:this.state.isDataSourceInited,onShowDetailClick:this.onShowDetailClick,intl:this.props.intl,widgets:this.props.widgets,backToHomePage:this.backToHomePage,onChildDataIconClick:this.onChildDataIconClick,onRelatedWidgetsIconClick:this.onRelatedWidgetsIconClick,defaultActive:this.state.dsListActiveTab,dsInfo:null===(a=this.props.dataSourcesInfo)||void 0===a?void 0:a[null===(i=this.getListUsedDs(this.state.dsHistory[this.state.dsHistory.length-1]))||void 0===i?void 0:i.id]}):null),this.state.isDataSourceInited?null:Object(o.jsx)(r.Loading,{type:r.LoadingType.Secondary})),Object(o.jsx)(c.SidePopper,{position:"left",isOpen:!!this.state.detailedItem},Object(o.jsx)(l.ItemDetail,{item:null===(d=this.state.detailedItem)||void 0===d?void 0:d.item,portalUrl:null===(u=this.state.detailedItem)||void 0===u?void 0:u.portalUrl,onClose:this.onCloseDetailClicked})),this.state.isExternalDsShown?Object(o.jsx)(r.Modal,{isOpen:this.state.isExternalDsShown,style:this.externalDsStyle,toggle:this.onToggleExternalDs,contentClassName:"border-0 h-100",className:"widget-ds-setting-add-data-popup"},this.ExternalDs):null)},t.mapExtraStateProps=function(e){var t,n,s,a,i,o,r;return{dataSources:null===(n=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.dataSources,widgets:null===(a=null===(s=e.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===a?void 0:a.widgets,messages:null===(o=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.messageConfigs,dataSourcesInfo:null===(r=e.appStateInBuilder)||void 0===r?void 0:r.dataSourcesInfo}},t}(o.React.PureComponent);t.default=lt},14:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M7 1a6 6 0 100 12A6 6 0 007 1zm0 13a7 7 0 115.621-2.828l-.222.284 3.405 3.404a.668.668 0 01-.944.944L11.456 12.4A6.974 6.974 0 017 14z" fill="#000" fill-rule="evenodd"></path></svg>'},15:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="none"><path d="M9.5 6.25a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0zm-4.75 0a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0zM0 6.25a1.25 1.25 0 112.5 0 1.25 1.25 0 01-2.5 0z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},2:function(e,t){e.exports=s},20:function(e,t){e.exports='<svg viewBox="0 0 80 71" xmlns="http://www.w3.org/2000/svg"><path d="M63.86 24a4 4 0 013.327 1.781l12.141 18.211a4 4 0 01.672 2.22V67a4 4 0 01-4 4H4a4 4 0 01-4-4V46.211a4 4 0 01.672-2.219l12.14-18.21A4 4 0 0116.142 24h47.718zm0 4H16.14L4.808 44.999H29a2 2 0 012 2V47c0 .687.077 1.357.223 2l-27.224-.001L4 67h72l-.001-18.001H48.777A9.03 9.03 0 0049 47a2 2 0 012-2.001h23.585L63.859 28zM31.222 49a9.003 9.003 0 0017.554 0h4.07C51.885 55.23 46.499 60 40 60c-6.5 0-11.885-4.77-12.847-11h4.07zm36.42-42.128a2.5 2.5 0 01.307 3.522l-7.07 8.426a2.5 2.5 0 01-3.83-3.214l7.07-8.426a2.5 2.5 0 013.522-.308zM15.88 7.18l7.07 8.426a2.5 2.5 0 01-3.83 3.214l-7.07-8.426a2.5 2.5 0 013.83-3.214zM40 0a2.5 2.5 0 012.5 2.5v14a2.5 2.5 0 11-5 0v-14A2.5 2.5 0 0140 0z" fill="#6A6A6A" fill-rule="evenodd"></path></svg>'},21:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.185 0c.105 0 .195.118.232.24l.013.062.245 1.567c.294.145.588.29.85.465l.19.138 1.53-.603c.154-.05.264-.016.332.031l.036.03 1.224 2.11c.051.1.06.201-.01.302l-.05.06-1.286 1.025c.061.181.061.362.061.603 0 .181-.034.328-.052.467l-.01.136 1.409.965c.105.052.12.192.083.307l-.022.055-1.224 2.11c-.053.104-.195.163-.312.14l-.056-.019-1.53-.603a4.796 4.796 0 01-.82.494l-.22.109-.245 1.568c0 .103-.135.207-.25.234L7.246 12H4.798c-.157 0-.27-.089-.298-.19l-.253-1.619c-.293-.145-.587-.29-.85-.465l-.19-.138-1.53.603c-.153.05-.264.017-.332-.03l-.036-.03L.085 8.02c-.05-.101-.06-.202.01-.302l.051-.06 1.286-1.026c-.061-.18-.061-.362-.061-.603 0-.18.034-.328.051-.466l.01-.137-1.286-.965c-.104-.103-.164-.25-.14-.329L1.247 1.99c.102-.1.204-.16.342-.141l.087.02 1.469.603.419-.281c.135-.09.268-.17.407-.236l.214-.086.245-1.628c0-.103.135-.207.25-.234L4.738 0h2.448zm-.658 1h-1.2l-.243 1.627-.586.192a1.42 1.42 0 00-.3.154l-.503.335-.441.29-1.439-.593-.59 1.017 1.207.905v.5c0 .088-.003.147-.013.228l-.044.31a.577.577 0 00-.004.065l.005.26.005.027.223.66L1.258 8.05l.581 1.001 1.536-.604.45.356c.162.126.334.226.712.416l.618.304.23 1.476h1.274l.23-1.476.751-.371c.206-.106.342-.182.453-.258l.126-.091.451-.356 1.506.595.587-1.01-1.272-.872v-.607l.009-.117.048-.341.003-.035v-.18l-.003-.098-.004-.034-.225-.665 1.345-1.073-.581-1.002-1.535.605-.451-.355-.126-.092a5.312 5.312 0 00-.59-.326l-.614-.303L6.527 1zM6 3.75a2.25 2.25 0 110 4.5 2.25 2.25 0 010-4.5zm0 1a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" fill="#000" fill-rule="nonzero"></path></svg>'},27:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 11A5 5 0 106 1a5 5 0 000 10zm0 1A6 6 0 116 0a6 6 0 010 12zm-.5-7.5h1v4H7a.5.5 0 010 1H5a.5.5 0 010-1h.5v-3H5a.5.5 0 010-1h.5zm.5-1a.5.5 0 110-1 .5.5 0 010 1z" fill="#000" fill-rule="nonzero"></path></svg>'},28:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M2 5.055V11h2V8a1 1 0 011-1h2a1 1 0 011 1v3h2V4.969L6.043 1 2 5.055zM1 6.058l-.149.15a.497.497 0 01-.705 0 .501.501 0 010-.708L5.338.293a.995.995 0 011.41 0l5.106 5.121a.501.501 0 010 .707.497.497 0 01-.705 0L11 5.971V11a1 1 0 01-1 1H2a1 1 0 01-1-1V6.058zM5 11h2V8H5v3z" fill="#000" fill-rule="nonzero"></path></svg>'},3:function(e,t){e.exports=a},42:function(e,t){e.exports=o},5:function(e,t){e.exports=i},51:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.444 3.582A7.011 7.011 0 008 1 7.014 7.014 0 001.05 7.03c-.017.122-.031.281-.044.477A.525.525 0 01.481 8 .48.48 0 010 7.492c.01-.195.024-.354.039-.476C.526 3.062 3.904 0 8 0c2.482 0 4.7 1.124 6.172 2.89l.19-1.356a.502.502 0 01.994.138l-.441 3.126-3.03-.425a.5.5 0 01.14-.99l1.419.199zM1.936 13.236l-.163 1.322a.502.502 0 01-.996-.121l.387-3.133 3.036.371a.5.5 0 01-.122.993l-1.463-.179A7.01 7.01 0 008 15a7.014 7.014 0 006.947-6c.019-.128.034-.297.048-.507A.526.526 0 0115.519 8a.48.48 0 01.48.507 7.579 7.579 0 01-.042.505C15.458 12.952 12.087 16 8 16a8.01 8.01 0 01-6.064-2.764z" fill="#000" fill-rule="nonzero"></path></svg>'},52:function(e,t){e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 5.5v-5a.5.5 0 011 0v5h5a.5.5 0 010 1h-5v5a.5.5 0 01-1 0v-5h-5a.5.5 0 010-1h5z" fill="#000" fill-rule="nonzero"></path></svg>'},53:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 32"><path d="M16.492 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 21.333a2 2 0 11.001 3.999 2 2 0 01-.001-3.999zm0-2.666a2 2 0 01-2-2v-8a2 2 0 114 0v8a2 2 0 01-2 2z"></path></svg>'},54:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 32"><path d="M11.742 1.623a3.228 3.228 0 001.204 4.384A3.21 3.21 0 0016.15.443a3.204 3.204 0 00-4.408 1.18zm16.86 22.929a3.204 3.204 0 00-4.32-4.435 3.204 3.204 0 00-1.532 3.591 3.179 3.179 0 001.493 1.951 3.204 3.204 0 004.36-1.108zm-3.95-7.081a5.47 5.47 0 012.409 0V9.065l-7.226-4.143a5.366 5.366 0 01-1.204 2.095l6.021 3.444v7.009zM.446 21.301a3.204 3.204 0 001.181 4.384 3.204 3.204 0 004.384-1.181 3.204 3.204 0 00-2.77-4.818A3.227 3.227 0 00.447 21.3zm4.07-3.806v-7.033l5.901-3.468a5.594 5.594 0 01-1.204-2.071L2.108 9.066v8.43a5.5 5.5 0 012.409 0zm15.945 7.033l-5.925 3.42-5.925-3.42c-.119.428-.289.84-.506 1.228a5.69 5.69 0 01-.626.891l7.081 4.095 7.105-4.095a5.604 5.604 0 01-1.204-2.12z"></path></svg>'},55:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 32"><path d="M38.784 9.778v2.962H3.236V9.778h.074L13.086.002l2.111 2.111-7.702 7.665h31.29zM3.236 21.628h31.327l-7.702 7.702 2.111 2.111 9.776-9.813h.037v-2.962H3.237v2.962z"></path></svg>'},56:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 32"><path d="M18.568 27.566c.873.913.873 2.392 0 3.305s-2.288.913-3.16 0L2.766 17.652a2.413 2.413 0 010-3.305L15.408 1.128c.873-.913 2.288-.913 3.16 0s.873 2.392 0 3.305L7.507 15.999l11.061 11.566z"></path></svg>'},57:function(e,t){e.exports='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 4.5h4a.5.5 0 010 1h-4v4a.5.5 0 01-1 0v-4h-4a.5.5 0 010-1h4v-4a.5.5 0 011 0v4z" fill="#000" fill-rule="nonzero"></path></svg>'}}))}}}));