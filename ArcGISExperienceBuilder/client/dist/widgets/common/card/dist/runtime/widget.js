System.register(["jimu-core","jimu-ui","jimu-layouts/layout-runtime"],(function(e){var t,n,o;return{setters:[function(e){t=e},function(e){n=e},function(e){o=e}],execute:function(){e(function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=380)}({0:function(e,n){e.exports=t},1:function(e,t){e.exports=n},12:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var o,i,r,a=n(0),l={transition:{type:a.TransitionType.None,direction:a.TransitionDirection.Horizontal},oneByOneEffect:null};!function(e){e.Style0="STYLE0",e.Style1="STYLE1",e.Style2="STYLE2",e.Style3="STYLE3",e.Style4="STYLE4",e.Style5="STYLE5",e.Style6="STYLE6",e.Style7="STYLE7",e.Style8="STYLE8",e.Style9="STYLE9",e.Style10="STYLE10"}(o||(o={})),function(e){e.Regular="REGULAR",e.Hover="HOVER"}(i||(i={})),function(e){e.Horizontal="Horizontal",e.Vertical="Vertical"}(r||(r={}))},178:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 3a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4zm5-3a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zm0 7a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zm0 7a1 1 0 000 2h7a1 1 0 000-2H7zm0-1h7a2 2 0 110 4H7a2 2 0 110-4zM2 9a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4zm0 5a1 1 0 100-2 1 1 0 000 2zm0 1a2 2 0 110-4 2 2 0 010 4z" fill="#FFF" fill-rule="nonzero"></path></svg>'},380:function(e,t,n){"use strict";n.r(t),n.d(t,"Widget",(function(){return A}));var o,i,r,a,l,s,d=n(0),u=n(1),c=n(12),p=n(5),f=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.formatMessage=function(e,n){return t.props.formatMessage(e,n)},t.getStyle=function(){var e=t.props.widgetId;return Object(d.css)(i||(i=g(["\n    &, .animation-list{\n      overflow: hidden;\n    }\n    .card-link {\n      cursor: pointer;\n    }\n    "," {\n      padding: 0;\n      border: 0;\n      background-color: transparent;\n      height: 100%;\n      position: relative;\n      .card-content {\n        width: 100%;\n        height: 100%;\n        /* overflow: hidden; */\n        &>div {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n    .edit-mask {\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      z-index: 10;\n    }\n    .clear-background {\n      background: transparent;\n      z-index: 100;\n    }\n    .clear-background:focus {\n      outline: none;\n    }\n    .surface-1 {\n      border: none !important;\n    }\n    ",":hover {}\n    "],["\n    &, .animation-list{\n      overflow: hidden;\n    }\n    .card-link {\n      cursor: pointer;\n    }\n    "," {\n      padding: 0;\n      border: 0;\n      background-color: transparent;\n      height: 100%;\n      position: relative;\n      .card-content {\n        width: 100%;\n        height: 100%;\n        /* overflow: hidden; */\n        &>div {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n    .edit-mask {\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      z-index: 10;\n    }\n    .clear-background {\n      background: transparent;\n      z-index: 100;\n    }\n    .clear-background:focus {\n      outline: none;\n    }\n    .surface-1 {\n      border: none !important;\n    }\n    ",":hover {}\n    "])),"&.card-"+e,"&.card-"+e)},t}return f(t,e),t}(d.React.PureComponent),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=function(){return(b=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},m=n(88),S=n(89),I=[0,5],w=[{name:"flip",options:{boundary:document.body,fallbackPlacements:["right-start","bottom-start","top-start"]}}],j=[{name:"offset",options:{offset:[0,10]}},{name:"arrow",enabled:!0}],C=function(e){function t(t){var n=e.call(this,t)||this;return n.lastResizeCall=null,n.handleCopyTo=function(e,t,o,i){if(o){var r=n.props,a=r.layouts,l=r.builderSupportModules,s=r.browserSizeMode,u=r.builderStatus,c=l.jimuForBuilderLib.getAppConfigAction(),f=c.appConfig,g=p.searchUtils.findLayoutId(a[u],s,f.mainSizeMode),v=p.searchUtils.findLayoutId(a[t],s,f.mainSizeMode);if(i){var y=l.widgetModules.searchUtils.getContainerLayoutItem(f.layouts[v],o.widgetId,d.LayoutItemType.Widget);y&&c.removeLayoutItem({layoutId:v,layoutItemId:y.id},!1)}c.duplicateLayoutItem(g,v,o.id,!1,i),c.exec(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},n.editStatus=function(e,t){var o=n.props,i=o.dispatch,r=o.widgetId;i(d.appActions.widgetStatePropChange(r,e,t))},n.toggleStatus=function(e){var t,o=n.props.cardConfigs,i=null===(t=null==o?void 0:o.HOVER)||void 0===t?void 0:t.enable,r=e===c.b.Hover,a=n.state,l=a.previousIndex,s=a.currentIndex,d=a.hoverPlayId,u=a.regularPlayId;i&&(l=r?0:1,s=r?1:0,d=r?Symbol():null,u=r?null:Symbol()),n.setState({previousIndex:l,currentIndex:s,hoverPlayId:d,regularPlayId:u})},n.handleBreakLink=function(e){var t=n.props,o=t.layouts,i=t.builderSupportModules,r=t.browserSizeMode,a=t.selection,l=t.builderStatus,s=t.dispatch,u=i.jimuForBuilderLib.getAppConfigAction(),c=u.appConfig,f=p.searchUtils.findLayoutItem(c,a);if(f){var g=p.searchUtils.findLayoutId(o[l],r,c.mainSizeMode);u.duplicateLayoutItem(g,g,f.id,!0),u.removeLayoutItem({layoutId:g,layoutItemId:f.id},!1),u.exec(),a.layoutId===g&&a.layoutItemId===f.id&&s(d.appActions.selectionChanged(null));var v=u.appConfig.layouts[g].content,y=Object.keys(v)[Object.keys(v).length-1];if(y){var h=v[y];s(d.appActions.selectionChanged({layoutId:g,layoutItemId:h.id}))}e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},n.getCopyDropdownItems=function(e){var t=n.props,o=t.cardConfigs,i=t.layouts,r=t.browserSizeMode,a=t.selection,l=t.builderStatus,s=t.builderSupportModules,u=s.jimuForBuilderLib.getAppConfigAction().appConfig,f=p.searchUtils.findLayoutItem(u,a);if(!a||!f||!window.jimuConfig.isInBuilder)return{items:Object(d.Immutable)([]),title:""};var g,v=[],y="",h=!0,b=!0,m=function(e,t){return s.widgetModules.searchUtils.getContentsInLayoutWithLayoutWidgetOnly(u,e,d.LayoutItemType.Widget,r).indexOf(t)>-1};return l===c.b.Regular?(!function(){if(o[c.b.Hover]){var e=p.searchUtils.findLayoutId(i[c.b.Hover],r,u.mainSizeMode);m(e,u.layouts[a.layoutId].content[a.layoutItemId].widgetId)||(b=!1),v.push({label:n.formatMessage("applyTo",{status:n.formatMessage("hover").toLocaleLowerCase()}),event:function(e){n.handleCopyTo(e,c.b.Hover,f,b)}})}}(),y=n.formatMessage("linkedTo",{where:n.formatMessage("hover").toLocaleLowerCase()})):l===c.b.Hover&&(g=p.searchUtils.findLayoutId(i[c.b.Regular],r,u.mainSizeMode),m(g,u.layouts[a.layoutId].content[a.layoutItemId].widgetId)||(h=!1),v.push({label:n.formatMessage("applyTo",{status:n.formatMessage("regular").toLocaleLowerCase()}),event:function(e){n.handleCopyTo(e,c.b.Regular,f,h)}}),y=n.formatMessage("linkedTo",{where:n.formatMessage("regular").toLocaleLowerCase()})),e?v.push({label:n.formatMessage("isolate"),event:n.handleBreakLink}):y=n.formatMessage("isolate"),{items:Object(d.Immutable)(v),title:y}},n.getCardToolsStyle=function(e){return Object(d.css)(r||(r=h(["\n        width: 100%;\n        .btn {\n          width: 100%;\n        }\n        .dropdown-toggle {\n          justify-content: center;\n        }\n        "],["\n        width: 100%;\n        .btn {\n          width: 100%;\n        }\n        .dropdown-toggle {\n          justify-content: center;\n        }\n        "])))},n.renderCardTools=function(){if(window.jimuConfig.isInBuilder){var e=n.props,t=e.selection,o=e.widgetId,i=e.builderSupportModules,r=e.browserSizeMode,l=e.builderStatus,s=e.selectionIsCard,p=e.selectionIsInCard,f=e.appMode,g=e.hideCardTool,v=e.cardConfigs,y=i.jimuForBuilderLib.getAppConfigAction().appConfig,b=i.widgetModules,C=b.searchUtils,O=b.BuilderDropDown,x=b.BuilderPopper,M=b.GLOBAL_RESIZING_CLASS_NAME,L=b.GLOBAL_H5_DRAGGING_CLASS_NAME,R=b.GLOBAL_DRAGGING_CLASS_NAME,k=b.BuilderButton,T=b.withBuilderTheme,P=s,A=!0,B=!P&&t&&C&&C.getRelatedLayoutItemsInWidgetByLayoutInfo(y,t,o,r).length>1,_=n.getCopyDropdownItems(B),E=_.items,H=_.title,z=E&&E.length>0;(!p&&!P||f===d.AppMode.Run||g)&&(A=!1);var N=T((function(e){return Object(d.jsx)("div",{className:"status-group d-flex flex-column align-items-center p-2",css:n.getCardToolsStyle(e)},Object(d.jsx)(k,{active:l===c.b.Regular,onClick:function(e){return n.handleBuilderStatusChange(e,c.b.Regular)}},n.formatMessage("regular")),Object(d.jsx)(k,{active:l===c.b.Hover,className:"mt-1",onClick:function(e){return n.handleBuilderStatusChange(e,c.b.Hover)}},n.formatMessage("hover")),!P&&(z||B)&&Object(d.jsx)(O,{className:"mt-1 w-100",toggleIsIcon:!0,toggleTitle:H,toggleType:"default",direction:"left",toggleContent:function(e){return Object(d.jsx)(u.Icon,{icon:B?S:m,size:16})},modifiers:j,items:E}))}));return n.props.isEditing&&v[c.b.Hover].enable&&Object(d.jsx)(x,{placement:"left-start",css:Object(d.css)(a||(a=h(["\n          ."," &,\n          ."," &,\n          ."," & {\n            &.popper{\n              display: none;\n            }\n          }\n        "],["\n          ."," &,\n          ."," &,\n          ."," & {\n            &.popper{\n              display: none;\n            }\n          }\n        "])),R,M,L),reference:n.layoutRef.current,offset:I,modifiers:w,open:A},N())}},n.getEditorStyle=function(){return Object(d.css)(l||(l=h(["\n      &.card-content {\n        .fixed-layout {\n          border: 0 !important;\n        }\n      }\n    "],["\n      &.card-content {\n        .fixed-layout {\n          border: 0 !important;\n        }\n      }\n    "])))},n.renderCardEditor=function(){var e=n.props,t=e.cardConfigs,o=e.LayoutEntry,i=e.layouts,r=n.state,a=r.hoverPlayId,l=r.regularPlayId,s=i[c.b.Regular],p=i[c.b.Hover],f=t[c.b.Regular].backgroundStyle.setIn(["boxShadow","color"],"transparent"),g=t[c.b.Hover].backgroundStyle.setIn(["boxShadow","color"],"transparent"),v=t.transitionInfo,y=[],h=b({},u.styleUtils.toCSSStyle(f||{})),m=Object(d.jsx)("div",{className:"card-content d-flex surface-1",css:n.getEditorStyle(),ref:n.regularLayoutRef,key:c.b.Regular},Object(d.jsx)("div",{className:"w-100, h-100 animation-list",style:h},Object(d.jsx)(d.AnimationContext.Provider,{value:{trigger:d.AnimationTriggerType.Manual,setting:(null==v?void 0:v.oneByOneEffect)||null,inheritedOneByOneSetting:null,playId:l,depth:100}},Object(d.jsx)(o,{className:"h-100",isRepeat:!0,layouts:s,isInWidget:!0}))));if(y.push(m),!t[c.b.Hover].enable)return y;var S=b({},u.styleUtils.toCSSStyle(g||{})),I=Object(d.jsx)("div",{className:"card-content d-flex surface-1",css:n.getEditorStyle(),ref:n.hoverLayoutRef,key:c.b.Hover},Object(d.jsx)("div",{className:"w-100, h-100 animation-list",style:S},Object(d.jsx)(d.AnimationContext.Provider,{value:{trigger:d.AnimationTriggerType.Manual,setting:(null==v?void 0:v.oneByOneEffect)||null,inheritedOneByOneSetting:null,playId:a,depth:100}},Object(d.jsx)(o,{className:"h-100",isRepeat:!0,layouts:p,isInWidget:!0}))));return y.push(I),y},n.getCardStyle=function(){var e,t,o,i,r=n.props,a=r.builderStatus,l=r.cardConfigs,s=l[c.b.Hover].enable?a:c.b.Regular,d={boxShadow:null===(t=null===(e=l[s])||void 0===e?void 0:e.backgroundStyle)||void 0===t?void 0:t.boxShadow,borderRadius:null===(i=null===(o=l[s])||void 0===o?void 0:o.backgroundStyle)||void 0===i?void 0:i.borderRadius};return b({},u.styleUtils.toCSSStyle(d))},n.state={didMount:!1,previousIndex:1,currentIndex:0,regularPlayId:null,hoverPlayId:null},n.regularLayoutRef=d.React.createRef(),n.hoverLayoutRef=d.React.createRef(),n.layoutRef=d.React.createRef(),n.isUpdateFirst=!0,n}return y(t,e),t.prototype.componentDidMount=function(){this.setState({didMount:!0})},t.prototype.componentDidUpdate=function(e){var t,n,o=this.props,i=o.cardConfigs,r=o.builderStatus,a=o.isEditing,l=e.cardConfigs,s=(null===(t=null==l?void 0:l.transitionInfo)||void 0===t?void 0:t.previewId)==(null===(n=null==i?void 0:i.transitionInfo)||void 0===n?void 0:n.previewId),d=e.builderStatus&&e.builderStatus!=r&&!this.isUpdateFirst,u=l[c.b.Hover].enable!=i[c.b.Hover].enable;(!s||d||u)&&this.toggleStatus(r),a||this.isUpdateFirst||this.setState({previousIndex:1,currentIndex:0}),this.isUpdateFirst&&(this.isUpdateFirst=!1)},t.prototype.handleBuilderStatusChange=function(e,t){var n;this.editStatus("showCardSetting",t),this.editStatus("builderStatus",t),null===(n=null==this?void 0:this.props)||void 0===n||n.selectSelf(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},t.prototype.render=function(){var e,t,n=this.props,o=n.cardConfigs,i=n.widgetId,r=n.isEditing,a=this.state,l=a.didMount,s=a.previousIndex,u=a.currentIndex,c=o.transitionInfo,p="card-"+i,f=(null==c?void 0:c.previewId)||null;return Object(d.jsx)("div",{css:this.getStyle(),style:this.getCardStyle(),className:p},l&&this.renderCardTools(),Object(d.jsx)("div",{className:"w-100, h-100",ref:this.layoutRef},Object(d.jsx)(d.TransitionContainer,{previousIndex:s,currentIndex:u,transitionType:null===(e=null==c?void 0:c.transition)||void 0===e?void 0:e.type,direction:null===(t=null==c?void 0:c.transition)||void 0===t?void 0:t.direction,playId:l?f:null,withOneByOne:!!(null==c?void 0:c.oneByOneEffect)},this.renderCardEditor())),!r&&Object(d.jsx)("div",{className:"edit-mask position-absolute"}))},t}(v),O=d.ReactRedux.connect((function(e,t){var n,o=t.appMode;return window.jimuConfig.isInBuilder&&o!==d.AppMode.Run?{selection:t.selectionIsInCard&&(null===(n=null==e?void 0:e.appRuntimeInfo)||void 0===n?void 0:n.selection)}:{selection:void 0}}))(C),x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=function(){return(M=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},L=function(e){function t(t){var n=e.call(this,t)||this;return n.handleItemClick=function(e){var t=n.linkRef,o=e.target&&e.target.tagName||"";"a"!==o.toLowerCase()&&"button"!==o.toLowerCase()&&"linkClick"!==e.exbEventType&&t.current&&t.current.click(),"linkClick"===e.exbEventType&&delete e.exbEventType},n.handleLinkClick=function(e){e.stopPropagation()},n.onMouse=function(e,t){var o;void 0===t&&(t=!1),e.stopPropagation();var i=n.props.cardConfigs,r=null===(o=null==i?void 0:i.HOVER)||void 0===o?void 0:o.enable,a=n.state,l=a.previousIndex,s=a.currentIndex,d=a.hoverPlayId,u=a.regularPlayId;r&&(l=t?0:1,s=t?1:0,d=t?Symbol():null,u=t?null:Symbol()),n.setState({isHover:t,previousIndex:l,currentIndex:s,hoverPlayId:d,regularPlayId:u})},n.getCardContent=function(){var e,t,o,i,r,a,l,s=n.props,f=s.cardConfigs,g=s.layouts,v=s.appMode,y=s.linkParam,h=n.props.queryObject,b=n.state,m=b.hoverPlayId,S=b.regularPlayId,I=null==f?void 0:f.transitionInfo,w=null===(e=null==f?void 0:f.HOVER)||void 0===e?void 0:e.enable,j=[];window.jimuConfig.isInBuilder&&v!==d.AppMode.Run?(o=n.getBackgroundStyle(c.b.Regular),t=g[c.b.Regular],w&&(r=n.getBackgroundStyle(c.b.Hover),i=g[c.b.Hover])):(t=g[c.b.Regular],o=n.getBackgroundStyle(c.b.Regular),y&&y.linkType&&(a=y.openType,l={linkType:y.linkType},y.linkType===d.LinkType.WebAddress?(l.value=(null==y?void 0:y.value)||"",h=void 0):l.value=y.value),w&&(i=g[c.b.Hover],r=n.getBackgroundStyle(c.b.Hover)));var C=M({},u.styleUtils.toCSSStyle(o||{})),O=(null==y?void 0:y.linkType)&&(null==y?void 0:y.linkType)!=d.LinkType.None,x=Object(d.jsx)("div",{className:Object(d.classNames)("card-content d-flex surface-1",O?"card-link":""),key:c.b.Regular},Object(d.jsx)("div",{className:"w-100 animation-list",style:C},O&&Object(d.jsx)(u._Link,{className:"p-0 w-100 h-100 position-absolute  border-0 clear-background",ref:n.linkRef,to:l,onClick:n.handleLinkClick,target:a,queryObject:h}),Object(d.jsx)("div",{className:"d-flex w-100 h-100",ref:n.regularLayoutRef},Object(d.jsx)(d.AnimationContext.Provider,{value:{trigger:d.AnimationTriggerType.Manual,setting:(null==I?void 0:I.oneByOneEffect)||null,inheritedOneByOneSetting:null,playId:S,depth:100}},Object(d.jsx)(p.FixedLayoutViewer,{layouts:t})))));if(j.push(x),w){var L=M({},u.styleUtils.toCSSStyle(r||{})),R=Object(d.jsx)("div",{className:Object(d.classNames)("card-content d-flex surface-1",O?"card-link":""),key:c.b.Hover},Object(d.jsx)("div",{className:"w-100 animation-list",style:L},O&&Object(d.jsx)(u._Link,{className:"p-0 w-100 h-100 position-absolute border-0 clear-background",ref:n.linkRef,to:l,onClick:n.handleLinkClick,target:a,queryObject:h}),Object(d.jsx)("div",{className:"d-flex w-100 h-100",ref:n.hoverLayoutRef},Object(d.jsx)(d.AnimationContext.Provider,{value:{trigger:d.AnimationTriggerType.Manual,setting:(null==I?void 0:I.oneByOneEffect)||null,inheritedOneByOneSetting:null,playId:m,depth:100}},Object(d.jsx)(p.FixedLayoutViewer,{layouts:i})))));j.push(R)}return j},n.getBackgroundStyle=function(e){var t=n.props.cardConfigs[e].backgroundStyle;return(null==t?void 0:t.boxShadow)?t.setIn(["boxShadow","color"],"transparent"):t},n.getCardShadowStyle=function(){var e,t,o=n.props.cardConfigs,i=n.state.isHover&&o[c.b.Hover].enable?c.b.Hover:c.b.Regular,r={boxShadow:null===(e=o[i].backgroundStyle)||void 0===e?void 0:e.boxShadow,borderRadius:null===(t=o[i].backgroundStyle)||void 0===t?void 0:t.borderRadius};return M({},u.styleUtils.toCSSStyle(r))},n.state={url:"",isHover:!1,previousIndex:1,currentIndex:0,regularPlayId:null,hoverPlayId:null},n.regularLayoutRef=d.React.createRef(),n.hoverLayoutRef=d.React.createRef(),n.linkRef=d.React.createRef(),n.didMount=!1,n}return x(t,e),t.prototype.componentDidMount=function(){this.didMount=!0},t.prototype.componentDidUpdate=function(e){var t,n,o=this.props.cardConfigs,i=e.cardConfigs;(null===(t=null==o?void 0:o.transitionInfo)||void 0===t?void 0:t.previewId)==(null===(n=null==i?void 0:i.transitionInfo)||void 0===n?void 0:n.previewId)||this.setState({hoverPlayId:Symbol(),regularPlayId:Symbol()})},t.prototype.render=function(){var e,t,n=this,o=this.props,i=o.widgetId,r=o.cardConfigs,a=this.state,l=a.previousIndex,s=a.currentIndex,u=r.transitionInfo,c="card-"+i,p=(null==u?void 0:u.previewId)||null;return Object(d.jsx)("div",{css:this.getStyle(),style:this.getCardShadowStyle(),className:c,onMouseLeave:function(e){n.onMouse(e,!1)},onMouseEnter:function(e){n.onMouse(e,!0)},onClick:this.handleItemClick},Object(d.jsx)(d.TransitionContainer,{previousIndex:l,currentIndex:s,transitionType:null===(e=null==u?void 0:u.transition)||void 0===e?void 0:e.type,direction:null===(t=null==u?void 0:u.transition)||void 0===t?void 0:t.direction,playId:this.didMount?p:null,withOneByOne:!!(null==u?void 0:u.oneByOneEffect)},this.getCardContent()))},t}(v),R={_layout_REGULAR_label:"Regular",_layout_HOVER_label:"Hover",applyTo:"Apply to {status}",isolate:"Isolate",linkedToAnd:"Linked to {where1} and {where2}",linkedTo:"Linked to {where}",placeHolderTip:"Please select a card template.",showSelected:"Show selection",_widgetLabel:"Card"},k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),T=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},P=function(){return(P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},A=function(e){function t(t){var n=e.call(this,t)||this;n.setSettinglayout=function(){var e=n.props,t=e.layoutId,o=e.layoutItemId,i=e.id,r=e.selectionIsSelf,a=n.state.isSetlayout;t&&i&&o&&!a&&r&&(n.props.dispatch(d.appActions.widgetStatePropChange(i,"layoutInfo",{layoutId:t,layoutItemId:o})),n.setState({isSetlayout:!0}))},n.onResize=function(e,t){n.updateCardToolPosition()},n.updateCardToolPosition=function(){n.props.selectionIsSelf&&(n.setState({hideCardTool:!0}),n.updateCardToolTimeout&&(clearTimeout(n.updateCardToolTimeout),n.updateCardToolTimeout=void 0),n.updateCardToolTimeout=setTimeout((function(){n.setState({hideCardTool:!1})}),500))},n.formatMessage=function(e,t){return n.props.intl.formatMessage({id:e,defaultMessage:P(P({},R),d.defaultMessages)[e]},t)},n.editStatus=function(e,t){var o=n.props,i=o.dispatch,r=o.id;i(d.appActions.widgetStatePropChange(r,e,t))},n.editWidgetConfig=function(e){window.jimuConfig.isInBuilder&&n.props.builderSupportModules.jimuForBuilderLib.getAppConfigAction().editWidgetConfig(n.props.id,e).exec()},n.isEditing=function(){var e=n.props,t=e.appMode,o=e.config,i=e.selectionIsSelf,r=e.selectionIsInSelf;return!!window.jimuConfig.isInBuilder&&((i||r)&&window.jimuConfig.isInBuilder&&t!==d.AppMode.Run&&o.isItemStyleConfirm)},n.editBuilderAndSettingStatus=function(e){n.editStatus("showCardSetting",e),n.editStatus("builderStatus",e)},n.getAppConfig=function(){return Object(d.getAppStore)().getState().appConfig},n.getStyle=function(e){var t=n.props.id;return Object(d.css)(s||(s=T(["\n      "," {\n        overflow: visible;\n        background-color: transparent;\n        border: "," solid ",";\n        width: 100%;\n        height: 100%;\n      }\n    "],["\n      "," {\n        overflow: visible;\n        background-color: transparent;\n        border: "," solid ",";\n        width: 100%;\n        height: 100%;\n      }\n    "])),"&.card-widget-"+t,d.polished.rem(0),d.polished.rgba(e.colors.black,window.jimuConfig.isInBuilder&&n.isEditing()?.2:0))},n.getCardProps=function(){var e=n.props,t=e.config,o=e.selectionIsInSelf,i=e.selectionIsSelf,r=e.builderStatus,a=e.appMode,l=e.queryObject,s=window.jimuConfig.isInBuilder&&a===d.AppMode.Design?{hideCardTool:n.state.hideCardTool,selectionIsCard:i,selectionIsInCard:o,isEditing:n.isEditing(),builderStatus:r,selectSelf:n.selectSelf}:{linkParam:t.linkParam,queryObject:l};return P(P({},n.getOtherProps()),s)},n.getOtherProps=function(){var e=n.props,t=e.config,o=e.theme,i=e.id,r=e.appMode,a=e.builderSupportModules,l=e.layouts,s=e.browserSizeMode,d=e.dispatch,u=e.isRTL,c=e.isHeightAuto,p=e.isWidthAuto;return{browserSizeMode:s,isRTL:u,builderSupportModules:a,formatMessage:n.formatMessage,dispatch:d,widgetId:i,interact:window.jimuConfig.isInBuilder&&a.widgetModules.interact,appMode:r,theme:o,LayoutEntry:n.state.LayoutEntry,layouts:l,cardConfigs:t,isHeightAuto:c,isWidthAuto:p}},n.cardRender=function(){var e=n.getCardProps(),t=n.props.appMode,o=window.jimuConfig.isInBuilder&&t===d.AppMode.Design?O:L;return Object(d.jsx)(o,P({},e))};var o={LayoutEntry:null,hideCardTool:!1,isSetlayout:!1};return window.jimuConfig.isInBuilder?o.LayoutEntry=n.props.builderSupportModules.LayoutEntry:o.LayoutEntry=p.FixedLayoutViewer,n.state=o,n.onResize=n.onResize.bind(n),n.selectSelf=n.selectSelf.bind(n),n.debounceOnResize=d.lodash.debounce((function(e,t){return n.onResize(e,t)}),200),n}return k(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this.props,o=n.appMode,i=n.selectionStatus,r=n.builderStatus,a=n.left,l=n.top;o!==d.AppMode.Run&&i!==r&&i&&this.editBuilderAndSettingStatus(i),e.appMode!=o&&o===d.AppMode.Run&&this.editBuilderAndSettingStatus(c.b.Regular),l===e.top&&a===e.left||this.updateCardToolPosition(),this.setSettinglayout()},t.prototype.selectSelf=function(){if(!window.jimuConfig.isInBuilder)return!1;var e=this.props,t={layoutId:e.layoutId,layoutItemId:e.layoutItemId};this.props.dispatch(d.appActions.selectionChanged(t))},t.prototype.render=function(){var e=this.props,t=e.config,o=e.id,i=Object(d.classNames)("jimu-widget","widget-card","card-widget-"+o);return t.itemStyle?Object(d.jsx)("div",{className:i,css:this.getStyle(this.props.theme)},this.cardRender(),Object(d.jsx)(d.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.debounceOnResize})):Object(d.jsx)(u.WidgetPlaceholder,{widgetId:this.props.id,icon:n(178),message:this.formatMessage("placeHolderTip")})},t.mapExtraStateProps=function(e,t){var n,o,i,r,a,l,s,d,u,f,g,v,y,h,b,m=e&&e.appConfig,S=t.layouts,I=t.layoutId,w=t.layoutItemId,j=t.builderSupportModules,C=t.id,O=null==e?void 0:e.browserSizeMode,x=(null==e?void 0:e.widgetsState[t.id])&&(null===(n=null==e?void 0:e.widgetsState[t.id])||void 0===n?void 0:n.builderStatus)||c.b.Regular,M=e&&e.appRuntimeInfo&&e.appRuntimeInfo.selection,L=M&&j&&j.widgetModules&&j.widgetModules.selectionInCard(M,C,m,!1);L&&(b=Object.keys(S).find((function(e){return p.searchUtils.findLayoutId(S[e],O,m.mainSizeMode)===M.layoutId}))),M||(b=c.b.Regular);var R=null===(o=m.layouts)||void 0===o?void 0:o[I],k=null===(r=null===(i=null==R?void 0:R.content)||void 0===i?void 0:i[w])||void 0===r?void 0:r.setting,T=(null===(a=null==k?void 0:k.autoProps)||void 0===a?void 0:a.height)===p.LayoutItemSizeModes.Auto||!0===(null===(l=null==k?void 0:k.autoProps)||void 0===l?void 0:l.height),P=(null===(s=null==k?void 0:k.autoProps)||void 0===s?void 0:s.width)===p.LayoutItemSizeModes.Auto||!0===(null===(d=null==k?void 0:k.autoProps)||void 0===d?void 0:d.width),A=void 0;if(window.jimuConfig.isInBuilder){var B=null===(v=null===(g=null===(f=null===(u=m.layouts)||void 0===u?void 0:u[I])||void 0===f?void 0:f.content)||void 0===g?void 0:g[w])||void 0===v?void 0:v.bbox;A=B&&{left:B.left,top:B.top}}return{selectionIsSelf:(null==M?void 0:M.layoutId)===I&&(null==M?void 0:M.layoutItemId)===w,selectionIsInSelf:L,selectionStatus:b,appMode:null===(y=null==e?void 0:e.appRuntimeInfo)||void 0===y?void 0:y.appMode,browserSizeMode:null==e?void 0:e.browserSizeMode,builderStatus:x,isRTL:null===(h=null==e?void 0:e.appContext)||void 0===h?void 0:h.isRTL,left:A&&A.left,top:A&&A.top,isHeightAuto:T,isWidthAuto:P,queryObject:e.queryObject}},t}(d.React.PureComponent);t.default=A},5:function(e,t){e.exports=o},88:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M3.433.822l8 13.856-.866.5L9.31 13H1.5v-3h1v2h6.232L4.114 4H2.5v2h.95l-1.5 2-1.5-2H1.5V3h2.036l-.97-1.678.867-.5zM14.049 8l1.5 2H14.5v3h-3.035l-.576-1H13.5v-2h-.951l1.5-2zm.451-5v3h-1V4H6.268L5.69 3h8.81z" fill="#FFF" fill-rule="evenodd"></path></svg>'},89:function(e,t){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.049 8l1.5 2h-1.05v3H1.502v-3H2.5v2h11v-2h-.951l1.5-2zm.451-5v3h-1V4h-11v2h.951l-1.5 2-1.5-2h1.05V3h13z" fill="#FFF" fill-rule="evenodd"></path></svg>'}}))}}}));