System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-for-builder","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/style-setting-components","jimu-ui/advanced/expression-builder","jimu-ui/basic/color-picker","jimu-ui/advanced/resource-selector"],(function(t){var e,n,o,i,s,r,p,a,u;return{setters:[function(t){e=t},function(t){n=t},function(t){o=t},function(t){i=t},function(t){s=t},function(t){r=t},function(t){p=t},function(t){a=t},function(t){u=t}],execute:function(){t(function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=374)}({0:function(t,n){t.exports=e},1:function(t,e){t.exports=n},11:function(t,e){t.exports=s},13:function(t,e){t.exports=r},2:function(t,e){t.exports=o},21:function(t,e){t.exports=p},22:function(t,e){t.exports=a},31:function(t,e){t.exports=u},374:function(t,e,n){"use strict";n.r(e);var o,i=n(0),s=n(8),r=n(2),p=n(31),a=n(1),u=n(11),c=n(21),l=n(58),g=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};var f,d,h=n(13),m=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),x=[a.BorderSides.TL,a.BorderSides.TR,a.BorderSides.BR,a.BorderSides.BL],S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onBackgroundStyleChange=function(t){var n,o,s=Object(i.Immutable)(null!==(o=null===(n=e.props.style)||void 0===n?void 0:n.background)&&void 0!==o?o:{});for(var r in t)switch(r){case"fillType":s.fillType!==t[r]&&(s=s.set("fillType",t[r]));break;case"color":s=s.set("color",t[r]);break;case"image":s=s.set("image",t[r])}e.props.onChange(e.getStyleSettings().set("background",s))},e.updateBorder=function(t){e.props.onChange(e.getStyleSettings().set("border",t))},e.updateRadius=function(t){e.props.onChange(e.getStyleSettings().set("borderRadius",t))},e.updateShadow=function(t){e.props.onChange(e.getStyleSettings().set("boxShadow",t))},e}return m(e,t),e.prototype.getStyleSettings=function(){return this.props.style?Object(i.Immutable)(this.props.style):Object(i.Immutable)({})},e.prototype.render=function(){var t=this.props.style||Object(i.Immutable)({});return Object(i.jsx)("div",{className:"common-style-setting"},Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"background",defaultMessage:a.defaultMessages.background})}),Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(h.BackgroundSetting,{background:t.background,onChange:this.onBackgroundStyleChange}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"border",defaultMessage:a.defaultMessages.border})}),Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(h.BorderSetting,{value:t.border,onChange:this.updateBorder})),Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"borderRadius",defaultMessage:a.defaultMessages.borderRadius}),flow:"wrap"},Object(i.jsx)(h.BorderRadiusSetting,{sides:x,value:t.borderRadius,onChange:this.updateRadius}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"shadow",defaultMessage:a.defaultMessages.shadow})}),Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(h.BoxShadowSetting,{value:t.boxShadow,onChange:this.updateShadow}))))},e}(i.React.PureComponent),y=n(22),b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.units=[a.UnitTypes.PIXEL],e.onSizeChange=function(t){e.changeIcon("size",t.distance)},e.onColorChange=function(t){e.changeIcon("color",t)},e.changeIcon=function(t,n){var o,s=e.props.iconProps?e.props.iconProps.set(t,n):Object(i.Immutable)(((o={})[t]=n,o));e.props.onChange(s)},e}return b(e,t),e.prototype.render=function(){var t=this.props.iconProps||{};return Object(i.jsx)("div",{className:"w-100 d-flex justify-content-between icon-size-font-style-setting"},Object(i.jsx)("div",null,Object(i.jsx)(h.InputUnit,{units:this.units,value:{distance:t.size,unit:a.UnitTypes.PIXEL},onChange:this.onSizeChange})),Object(i.jsx)("div",null,Object(i.jsx)(y.ThemeColorPicker,{specificTheme:this.props.appTheme,value:t.color,onChange:this.onColorChange})))},e}(i.React.PureComponent),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=function(){return(j=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changeText=function(t,n){var o,s=e.props.text?e.props.text.set(t,n):Object(i.Immutable)(((o={})[t]=n,o));e.props.onChange(s)},e}return C(e,t),e.prototype.render=function(){return Object(i.jsx)(h.TextStyle,j({},this.props.text,{onChange:this.changeText}))},e}(i.React.PureComponent),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(){return(I=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTextChange=function(t){var n=e.getStyleFromCustomAndTheme().set("text",t);e.props.onChange(n)},e.onIconChange=function(t){var n=e.getStyleFromCustomAndTheme().set("iconProps",t);e.props.onChange(n)},e.onCommonChange=function(t){var n=e.getStyleFromCustomAndTheme(),o=I(I({},n),t);e.props.onChange(Object(i.Immutable)(o))},e.getStyleFromCustomAndTheme=function(){var t=e.props.themeStyle||Object(i.Immutable)({}),n=e.props.style||Object(i.Immutable)({});return t.merge(n)},e}return T(e,t),e.prototype.render=function(){var t=this.getStyleFromCustomAndTheme();return Object(i.jsx)("div",{className:"advance-style-setting mt-3"},this.props.isTextSettingOpen&&Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"text",defaultMessage:a.defaultMessages.text})}),Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(O,{appTheme:this.props.appTheme,text:t.text,onChange:this.onTextChange}))),this.props.isIconSettingOpen&&Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon})}),Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(v,{appTheme:this.props.appTheme,intl:this.props.intl,iconProps:t.iconProps,onChange:this.onIconChange}))),Object(i.jsx)("div",{className:"mb-3"},Object(i.jsx)(S,{intl:this.props.intl,style:t,onChange:this.onCommonChange})))},e}(i.React.PureComponent),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function e(e){return t.call(this,e)||this}return P(e,t),e.prototype.render=function(){return i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{onClick:this.props.toggle,className:"d-flex justify-content-between mb-2"},i.React.createElement("div",null,i.React.createElement(a.Label,{for:"open-collapse",className:"collapse-label"},this.props.title)),i.React.createElement("div",null,i.React.createElement(a.Switch,{id:"open-collapse",name:"open-collapse",onChange:this.props.toggle,checked:this.props.isOpen}))),i.React.createElement(a.Collapse,{isOpen:this.props.isOpen},this.props.children))},e}(i.React.PureComponent),k=n(64),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=n(60),U=Object(i.Immutable)([c.ExpressionInputType.Static,c.ExpressionInputType.Attribute,c.ExpressionInputType.Statistics,c.ExpressionInputType.Expression]),_=Object(i.Immutable)([u.AllDataSourceTypes.FeatureLayer,u.AllDataSourceTypes.SceneLayer]);!function(t){t.hover="HOVER",t.regular="REGULAR"}(d||(d={}));var R=function(t){function e(e){var n,o,r,p,u=t.call(this,e)||this;return u.toggleLinkSetting=function(){u.setState({isLinkSettingShown:!u.state.isLinkSettingShown})},u.onSettingLinkConfirm=function(t){var e;if(t){if(t.expression){i=u.getTextExpression(),s=u.getTipExpression();var n=t.expression;o=u.mergeUseDataSources(i,s,n);e={id:u.props.id,config:u.props.config.setIn(["functionConfig","linkParam"],t),useDataSources:o}}else{var o=void 0;if(u.getIsDataSourceUsed()){var i=u.getTextExpression(),s=u.getTipExpression();o=u.mergeUseDataSources(i,s,null)}else o=u.getUseDataSourcesWithoutFields();e={id:u.props.id,config:u.props.config.setIn(["functionConfig","linkParam"],t),useDataSources:o}}u.props.onSettingChange(e),u.setState({isLinkSettingShown:!1})}},u.onTextChange=function(){var t={id:u.props.id,config:u.props.config.setIn(["functionConfig","text"],u.state.currentTextInput).setIn(["functionConfig","textExpression"],null),useDataSources:u.getUseDataSourcesWithoutFields()};u.props.onSettingChange(t)},u.onToolTipChange=function(){var t={id:u.props.id,config:u.props.config.setIn(["functionConfig","toolTip"],u.state.currentTipInput).setIn(["functionConfig","toolTipExpression"],null),useDataSources:u.getUseDataSourcesWithoutFields()};u.props.onSettingChange(t)},u.onTextExpChange=function(t){if(t){var e=u.getTipExpression(),n=u.getLinkSettingExpression(),o=u.mergeUseDataSources(Object(i.Immutable)(t),e,n);u.props.onSettingChange({id:u.props.id,config:u.props.config.setIn(["functionConfig","textExpression"],t).setIn(["functionConfig","text"],""),useDataSources:o}),u.setState({isTextExpOpen:!1})}},u.onTipExpChange=function(t){if(t){var e=u.getTextExpression(),n=u.getLinkSettingExpression(),o=u.mergeUseDataSources(e,Object(i.Immutable)(t),n);u.props.onSettingChange({id:u.props.id,config:u.props.config.setIn(["functionConfig","toolTipExpression"],t).setIn(["functionConfig","toolTip"],""),useDataSources:o}),u.setState({isTipExpOpen:!1})}},u.onToggleUseDataEnabled=function(t){var e,n,o,s,r,p,a=u.props.config;t?(a=(a=a.setIn(["functionConfig","textExpression"],u.getTextExpression()).setIn(["functionConfig","toolTipExpression"],u.getTipExpression())).set("functionConfig",a.functionConfig.without("text").without("toolTip")),(null===(o=null===(n=null===(e=u.props.config)||void 0===e?void 0:e.functionConfig)||void 0===n?void 0:n.linkParam)||void 0===o?void 0:o.linkType)===i.LinkType.WebAddress&&(a=(a=a.setIn(["functionConfig","linkParam","expression"],u.getLinkSettingExpression())).setIn(["functionConfig","linkParam"],a.functionConfig.linkParam.without("value")))):(a=(a=a.setIn(["functionConfig","text"],u.state.currentTextInput).setIn(["functionConfig","toolTip"],u.state.currentTipInput)).set("functionConfig",a.functionConfig.without("textExpression").without("toolTipExpression")),(null===(p=null===(r=null===(s=u.props.config)||void 0===s?void 0:s.functionConfig)||void 0===r?void 0:r.linkParam)||void 0===p?void 0:p.linkType)===i.LinkType.WebAddress&&(a=(a=a.setIn(["functionConfig","linkParam","value"],"")).setIn(["functionConfig","linkParam"],a.functionConfig.linkParam.without("expression")))),u.props.onSettingChange({id:u.props.id,useDataSourcesEnabled:t,config:a})},u.onDataSourceChange=function(t){t&&u.props.onSettingChange({id:u.props.id,useDataSources:t})},u.getDefaultIconColor=function(t){var e=t?"regular":"hover";return u.props.config.getIn(["styleConfig","customStyle",e,"iconProps","color"])||u.props.appTheme.colors.dark},u.onIconResultChange=function(t){var e;if(t){e=u.props.config;var n=u.props.config.getIn(["functionConfig","icon","position"])||l.a.Left,o=u.getDefaultIconColor(!0),s=u.getDefaultIconColor(!1),r=u.props.config.getIn(["styleConfig","customStyle","regular","iconProps","size"])||t.properties.size,p=u.props.config.getIn(["styleConfig","customStyle","hover","iconProps","size"])||t.properties.size;e=e.setIn(["functionConfig","icon","data"],t.svg).setIn(["functionConfig","icon","position"],n).setIn(["styleConfig","customStyle","regular","iconProps","color"],o).setIn(["styleConfig","customStyle","regular","iconProps","size"],r).setIn(["styleConfig","customStyle","hover","iconProps","color"],s).setIn(["styleConfig","customStyle","hover","iconProps","size"],p)}else e=u.props.config.set("functionConfig",u.props.config.functionConfig.without("icon")).setIn(["styleConfig","customStyle","regular"],u.props.config.getIn(["styleConfig","customStyle","regular"],Object(i.Immutable)({})).without("iconProps")).setIn(["styleConfig","customStyle","hover"],u.props.config.getIn(["styleConfig","customStyle","hover"],Object(i.Immutable)({})).without("iconProps"));u.props.onSettingChange({id:u.props.id,config:e})},u.getWhetherHaveCustomStyle=function(t){var e=t?"regular":"hover",n=u.props.config.getIn(["styleConfig","customStyle",e]);return n&&n.iconProps&&(n=n.without("iconProps")),!!(n&&Object.keys(n).length>0)},u.onRegularStyleChange=function(t){var e=u.props.config.setIn(["styleConfig","customStyle","regular"],t);u.getWhetherHaveCustomStyle(!1)||(e=e.setIn(["styleConfig","customStyle","hover"],u.getThemeStyle(!1))),e.getIn(["styleConfig","themeStyle"])&&(e=e.set("styleConfig",e.styleConfig.without("themeStyle"))),u.props.onSettingChange({id:u.props.id,config:e})},u.onHoverStyleChange=function(t){var e=u.props.config.setIn(["styleConfig","customStyle","hover"],t);u.getWhetherHaveCustomStyle(!0)||(e=e.setIn(["styleConfig","customStyle","regular"],u.getThemeStyle(!0))),e.getIn(["styleConfig","themeStyle"])&&(e=e.set("styleConfig",e.styleConfig.without("themeStyle"))),u.props.onSettingChange({id:u.props.id,config:e})},u.onIconPositionChange=function(t){u.props.onSettingChange({id:u.props.id,config:u.props.config.setIn(["functionConfig","icon","position"],t.target.value)})},u.onAdvanceTabSelect=function(t){var e=t===d.hover;s.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:u.props.id,propKey:"isConfiguringHover",value:e})},u.mergeUseDataSources=function(t,e,n){var o=i.expressionUtils.getUseDataSourceFromExpParts(t&&t.parts,u.props.useDataSources),s=i.expressionUtils.getUseDataSourceFromExpParts(e&&e.parts,u.props.useDataSources),r=i.expressionUtils.getUseDataSourceFromExpParts(n&&n.parts,u.props.useDataSources);return u.mergeUseDataSourcesByDss(o,s,r)},u.mergeUseDataSourcesByDss=function(t,e,n){var o=u.getUseDataSourcesWithoutFields(),s=i.expressionUtils.mergeUseDataSources(o,t);return s=i.expressionUtils.mergeUseDataSources(s,e),s=i.expressionUtils.mergeUseDataSources(s,n)},u.getUseDataSourcesWithoutFields=function(){return u.props.useDataSources&&u.props.useDataSources[0]&&u.props.useDataSources[0].dataSourceId?Object(i.Immutable)([u.props.useDataSources[0].without("fields").asMutable({deep:!0})]):Object(i.Immutable)([])},u.getIsDataSourceUsed=function(){return!!u.props.useDataSourcesEnabled},u.getTipExpression=function(){return u.props.config&&u.props.config.functionConfig&&u.props.config.functionConfig.toolTipExpression&&u.props.config.functionConfig.toolTipExpression||Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:'"'+u.state.currentTipInput+'"'}]})},u.getTextExpression=function(){return u.props.config&&u.props.config.functionConfig&&u.props.config.functionConfig.textExpression&&u.props.config.functionConfig.textExpression||Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:'"'+u.state.currentTextInput+'"'}]})},u.getLinkSettingExpression=function(){var t,e,n,o,s,r,p,a,c;return u.props.config&&u.props.config.functionConfig&&u.props.config.functionConfig.linkParam&&u.props.config.functionConfig.linkParam&&u.props.config.functionConfig.linkParam.expression||((null===(n=null===(e=null===(t=u.props.config)||void 0===t?void 0:t.functionConfig)||void 0===e?void 0:e.linkParam)||void 0===n?void 0:n.linkType)===i.LinkType.WebAddress&&(null===(r=null===(s=null===(o=u.props.config)||void 0===o?void 0:o.functionConfig)||void 0===s?void 0:s.linkParam)||void 0===r?void 0:r.value)?Object(i.Immutable)({name:"",parts:[{type:i.ExpressionPartType.String,exp:'"'+(null===(c=null===(a=null===(p=u.props.config)||void 0===p?void 0:p.functionConfig)||void 0===a?void 0:a.linkParam)||void 0===c?void 0:c.value)+'"'}]}):null)},u.getThemeStyle=function(t){if(!u.props.config.getIn(["styleConfig","themeStyle"]))return Object(i.Immutable)({});var e=u.props.config.getIn(["styleConfig","themeStyle","quickStyleType"]),n=t?"default":"hover",o=u.props.appTheme.getIn(["components","button","variants",e,n])||{},s=u.props.appTheme.getIn(["components","button","sizes","default"])||{},r=parseFloat(a.styleUtils.remToPixel(s.borderRadius)),p={color:o.color,size:parseFloat(a.styleUtils.remToPixel(s.fontSize))},c={background:{color:o.bg,fillType:a.FillType.FILL},border:{type:a.LineType.SOLID,color:o.border&&o.border.color,width:a.utils.stringOfLinearUnit({distance:o.border&&"string"==typeof o.border.width?parseFloat(a.styleUtils.remToPixel(o.border.width)):void 0,unit:a.UnitTypes.PIXEL})},text:{color:o.color,size:a.styleUtils.remToPixel(s.fontSize)},borderRadius:{unit:a.UnitTypes.PIXEL,number:[r,r,r,r]},iconProps:p};return Object(i.Immutable)(c)},u.openTextExpPopup=function(){u.setState({isTextExpOpen:!0,isTipExpOpen:!1})},u.openTipExpPopup=function(){u.setState({isTextExpOpen:!1,isTipExpOpen:!0})},u.closeTextExpPopup=function(){u.setState({isTextExpOpen:!1,isTipExpOpen:!1})},u.closeTipExpPopup=function(){u.setState({isTextExpOpen:!1,isTipExpOpen:!1})},u.showTextSetting=function(){return!!(u.getIsDataSourceUsed()?!u.props.config.getIn(["functionConfig","textExpression"])||u.props.config.getIn(["functionConfig","textExpression"])&&u.props.config.getIn(["functionConfig","textExpression","parts"])&&(u.props.config.getIn(["functionConfig","textExpression","parts"]).length>1||'""'!==u.props.config.getIn(["functionConfig","textExpression","parts","0","exp"])):u.state.currentTextInput)},u.showIconSetting=function(){return!!u.props.config.getIn(["functionConfig","icon"])},u.toggleUseCustom=function(){var t=u.props.config;t=(t=t.setIn(["styleConfig","useCustom"],!t.getIn(["styleConfig","useCustom"]))).getIn(["styleConfig","useCustom"])?(t=(t=t.setIn(["styleConfig","customStyle","hover"],u.getThemeStyle(!1))).setIn(["styleConfig","customStyle","regular"],u.getThemeStyle(!0))).set("styleConfig",t.styleConfig.without("themeStyle")):(t=(t=t.setIn(["styleConfig","themeStyle","quickStyleType"],"default")).setIn(["styleConfig","customStyle","regular"],{iconProps:Object(k.a)(!0,"default",u.props.appTheme)})).setIn(["styleConfig","customStyle","hover"],{iconProps:Object(k.a)(!1,"default",u.props.appTheme)}),u.props.onSettingChange({id:u.props.id,config:t})},u.state={isLinkSettingShown:!1,isTextExpOpen:!1,isTipExpOpen:!1,currentTextInput:"string"==typeof(null===(o=null===(n=u.props.config)||void 0===n?void 0:n.functionConfig)||void 0===o?void 0:o.text)?null===(p=null===(r=u.props.config)||void 0===r?void 0:r.functionConfig)||void 0===p?void 0:p.text:u.props.intl.formatMessage({id:"variableButton",defaultMessage:a.defaultMessages.variableButton}),currentTipInput:u.props.config&&u.props.config.functionConfig&&u.props.config.functionConfig.toolTip||""},u}return D(e,t),e.prototype.componentDidUpdate=function(t){var e,n,o,i,s,r,p,u,c,l,g,f;this.getIsDataSourceUsed()||((null===(n=null===(e=this.props.config)||void 0===e?void 0:e.functionConfig)||void 0===n?void 0:n.text)!==(null===(i=null===(o=t.config)||void 0===o?void 0:o.functionConfig)||void 0===i?void 0:i.text)&&this.setState({currentTextInput:"string"==typeof(null===(r=null===(s=this.props.config)||void 0===s?void 0:s.functionConfig)||void 0===r?void 0:r.text)?null===(u=null===(p=this.props.config)||void 0===p?void 0:p.functionConfig)||void 0===u?void 0:u.text:this.props.intl.formatMessage({id:"variableButton",defaultMessage:a.defaultMessages.variableButton})}),(null===(l=null===(c=this.props.config)||void 0===c?void 0:c.functionConfig)||void 0===l?void 0:l.toolTip)!==(null===(f=null===(g=t.config)||void 0===g?void 0:g.functionConfig)||void 0===f?void 0:f.toolTip)&&this.setState({currentTipInput:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip||""}))},e.prototype.componentWillUnmount=function(){s.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:this.props.id,propKey:"isConfiguringHover",value:!1})},e.prototype.render=function(){var t,e,n,s=this,f=this.props.config.functionConfig.icon?{svg:this.props.config.functionConfig.icon.data}:null,h=this.props.config.styleConfig&&this.props.config.styleConfig.customStyle,m=this.showTextSetting(),x=this.showIconSetting(),S=m&&x;return Object(i.jsx)("div",{css:(n=this.props.theme,Object(i.css)(o||(o=g(["\n    .widget-setting-link {\n      overflow-y: auto;\n      font-size: 13px;\n      font-weight: lighter;\n      .collapse-label{\n        color: ",";\n      }\n      .font-size-container{\n        width: ",";\n      }\n    }\n\n  "],["\n    .widget-setting-link {\n      overflow-y: auto;\n      font-size: 13px;\n      font-weight: lighter;\n      .collapse-label{\n        color: ",";\n      }\n      .font-size-container{\n        width: ",";\n      }\n    }\n\n  "])),n.colors.palette.dark[400],i.polished.rem(82)))},Object(i.jsx)("div",{className:"widget-setting-link jimu-widget"},Object(i.jsx)("div",null,Object(i.jsx)(r.SettingSection,null,Object(i.jsx)(r.SettingRow,null,Object(i.jsx)("div",{className:"choose-ds w-100"},Object(i.jsx)(u.DataSourceSelector,{types:_,useDataSources:this.props.useDataSources,useDataSourcesEnabled:this.getIsDataSourceUsed(),onToggleUseDataEnabled:this.onToggleUseDataEnabled,onChange:this.onDataSourceChange,widgetId:this.props.id})))),Object(i.jsx)(r.SettingSection,null,Object(i.jsx)(r.SettingRow,null,Object(i.jsx)(a.Button,{className:"w-100 text-dark set-link-btn",type:"primary",onClick:this.toggleLinkSetting},Object(i.jsx)("div",{className:"w-100 px-2 text-truncate"},Object(i.jsx)(a.Icon,{icon:M,size:12,className:"add-data-icon"}),this.props.intl.formatMessage({id:"setLink",defaultMessage:a.defaultMessages.setLink})))),Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"tooltip",defaultMessage:a.defaultMessages.tooltip})}),Object(i.jsx)(r.SettingRow,null,this.getIsDataSourceUsed()?Object(i.jsx)("div",{className:"w-100"},Object(i.jsx)(c.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.onTipExpChange,openExpPopup:this.openTipExpPopup,expression:this.getTipExpression(),isExpPopupOpen:this.state.isTipExpOpen,closeExpPopup:this.closeTipExpPopup,types:U,widgetId:this.props.id})):Object(i.jsx)(a.TextInput,{className:"w-100",value:this.state.currentTipInput,onChange:function(t){s.setState({currentTipInput:t.target.value})},onBlur:function(){s.onToolTipChange()},onKeyUp:function(){s.onToolTipChange()}})),Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"text",defaultMessage:a.defaultMessages.text})}),Object(i.jsx)(r.SettingRow,null,this.getIsDataSourceUsed()?Object(i.jsx)("div",{className:"w-100"},Object(i.jsx)(c.ExpressionInput,{useDataSources:this.props.useDataSources,onChange:this.onTextExpChange,openExpPopup:this.openTextExpPopup,expression:this.getTextExpression(),isExpPopupOpen:this.state.isTextExpOpen,closeExpPopup:this.closeTextExpPopup,types:U,widgetId:this.props.id})):Object(i.jsx)(a.TextInput,{className:"w-100",value:this.state.currentTextInput,onChange:function(t){s.setState({currentTextInput:t.target.value})},onBlur:function(){s.onTextChange()},onKeyUp:function(){s.onTextChange()}})),Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon})},Object(i.jsx)(p.IconPicker,{icon:f,configurableOption:"none",onChange:this.onIconResultChange})),S&&Object(i.jsx)(r.SettingRow,{label:this.props.intl.formatMessage({id:"position",defaultMessage:a.defaultMessages.position})},Object(i.jsx)("div",null,Object(i.jsx)(a.Select,{onChange:this.onIconPositionChange,value:this.props.config.functionConfig&&this.props.config.functionConfig.icon&&this.props.config.functionConfig.icon.position},Object.keys(l.a).map((function(t){return Object(i.jsx)("option",{value:l.a[t],key:t},s.props.intl.formatMessage({id:t.toLowerCase(),defaultMessage:a.defaultMessages[t.toLowerCase()]}))})))))),Object(i.jsx)(r.SettingSection,null,Object(i.jsx)(E,{title:this.props.intl.formatMessage({id:"advance",defaultMessage:a.defaultMessages.advance}),isOpen:!!(null===(e=null===(t=this.props.config)||void 0===t?void 0:t.styleConfig)||void 0===e?void 0:e.useCustom),toggle:this.toggleUseCustom},Object(i.jsx)(a.Tabs,{fill:!0,pills:!0,onTabSelect:this.onAdvanceTabSelect},Object(i.jsx)(a.Tab,{id:d.regular,defaultActive:!0,title:this.props.intl.formatMessage({id:"regular",defaultMessage:a.defaultMessages.regular})},Object(i.jsx)(w,{intl:this.props.intl,appTheme:this.props.appTheme,style:h&&h.regular,themeStyle:this.getThemeStyle(!0),onChange:this.onRegularStyleChange,isTextSettingOpen:m,isIconSettingOpen:x})),Object(i.jsx)(a.Tab,{id:d.hover,title:this.props.intl.formatMessage({id:"hover",defaultMessage:a.defaultMessages.hover})},Object(i.jsx)(w,{intl:this.props.intl,appTheme:this.props.appTheme,style:h&&h.hover,themeStyle:this.getThemeStyle(!1),onChange:this.onHoverStyleChange,isTextSettingOpen:m,isIconSettingOpen:x})))))),this.state.isLinkSettingShown&&!i.urlUtils.getAppIdPageIdFromUrl().pageId&&Object(i.jsx)(r.LinkSettingPopup,{isOpen:this.state.isLinkSettingShown,onSettingCancel:function(){s.setState({isLinkSettingShown:!1})},onSettingConfirm:this.onSettingLinkConfirm,linkParam:this.props.config.functionConfig.linkParam,useDataSources:this.getIsDataSourceUsed()&&this.props.useDataSources,widgetId:this.props.id})))},e.mapExtraStateProps=function(t,e){return{appTheme:t&&t.appStateInBuilder&&t.appStateInBuilder.theme||Object(i.Immutable)({})}},e}(i.React.PureComponent);e.default=R},58:function(t,e,n){"use strict";var o;n.d(e,"a",(function(){return o})),function(t){t.Left="LEFT",t.Right="RIGHT"}(o||(o={}))},60:function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M7.42 8.84a.502.502 0 010 .71L6 10.97A3.515 3.515 0 111.03 6l1.42-1.42a.502.502 0 11.71.71L1.74 6.71a2.51 2.51 0 103.55 3.55l1.42-1.42a.502.502 0 01.71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 10-3.55-3.55L5.29 3.16a.502.502 0 11-.71-.71L6 1.03A3.515 3.515 0 1110.97 6L9.55 7.42a.502.502 0 11-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 01.71.71L4.58 8.13a.502.502 0 01-.71-.71z" fill="#000" fill-rule="nonzero"></path></svg>'},64:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(0),i=n(1);function s(t,e,n){var s=t?"default":"hover",r=Object(o.Immutable)(n),p=r.getIn(["components","button","variants",e,s,"color"]),a=r.getIn(["components","button","sizes","default","fontSize"]);return{color:p,size:parseFloat(i.styleUtils.remToPixel(a))}}},8:function(t,e){t.exports=i}}))}}}));