System.register(["jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-layouts/layout-runtime","jimu-ui/advanced/style-setting-components","jimu-layouts/layout-builder"],(function(t){var e,o,n,i,s,a;return{setters:[function(t){e=t},function(t){o=t},function(t){n=t},function(t){i=t},function(t){s=t},function(t){a=t}],execute:function(){t(function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=336)}({0:function(t,o){t.exports=e},1:function(t,e){t.exports=o},13:function(t,e){t.exports=s},19:function(t,e){t.exports=a},2:function(t,e){t.exports=n},336:function(t,e,o){"use strict";o.r(e);var n,i,s=o(0),a=o(2),r=o(19),u=o(5),l=o(1),p=o(42),c=o(13),d=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),g=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},f={width:"7.5rem"},y=[u.LayoutItemSizeModes.Auto,u.LayoutItemSizeModes.Stretch,u.LayoutItemSizeModes.Custom],h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateAlign=function(t){e.updateStyle("alignSelf",t.target.value)},e.updateHeight=function(t){var o=e.props.layoutItem.bbox,n=t.distance,i=t.unit,s=o.height,a=e.getSizeOfContainer(),r=n.toFixed(2);u.utils.isPercentage(s)&&i===l.UnitTypes.PIXEL?a&&(r=Math.round(parseFloat(s)*a.height/100)):u.utils.isPercentage(s)||i!==l.UnitTypes.PERCENTAGE||a&&(r=(100*parseFloat(s)/a.height).toFixed(4)),o=o.set("height",i===l.UnitTypes.PERCENTAGE?r+"%":r+"px"),e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateHeightMode=function(t){var o,n=null!==(o=e.props.layoutItem.setting)&&void 0!==o?o:Object(s.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.setIn(["autoProps","height"],t))},e.updateAspectSetting=function(t){var o=e.props.layoutItem.setting||Object(s.Immutable)({});if(o=o.set("heightMode",t),"ratio"===t){var n=e.getSizeOfItem();n&&(o=o.set("aspectRatio",Number((n.height/n.width).toFixed(2))))}else{var i=e.props.layoutItem.bbox,a=e.getSizeOfItem();if(u.utils.isPercentage(i.height)){var r=e.getSizeOfContainer();e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},i.set("height",(100*a.height/r.height).toFixed(4)+"%"))}else e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},i.set("height",Math.round(a.height)+"px"))}e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateAspectRatio=function(t){var o=e.props.layoutItem.setting||Object(s.Immutable)({});o=o.set("aspectRatio",t),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o)},e.updateOffsetX=function(t){var o=e.props.layoutItem.setting||Object(s.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o.set("offsetX",t))},e.updateOffsetY=function(t){var o=e.props.layoutItem.setting||Object(s.Immutable)({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},o.set("offsetY",t))},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return d(e,t),e.prototype.updateStyle=function(t,e){var o,n,i=this.props.layoutItem,a=Object(s.Immutable)(null!==(n=null===(o=null==i?void 0:i.setting)||void 0===o?void 0:o.style)&&void 0!==n?n:{});this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},{style:a.set(t,e)})},e.prototype.getSizeOfContainer=function(){var t=this.querySelector('div.row-layout[data-layoutid="'+this.props.layoutId+'"]');return t?t.getBoundingClientRect():null},e.prototype.getSizeOfItem=function(){var t=this.props,e=t.layoutId,o=t.layoutItem,n=this.querySelector('div.exb-rnd[data-layoutid="'+e+'"][data-layoutitemid="'+o.id+'"] > div.widget-renderer');return n?n.getBoundingClientRect():null},e.prototype.querySelector=function(t){var e=document.querySelector('iframe[name="'+s.APP_FRAME_NAME_IN_BUILDER+'"]');return e?(e.contentDocument||e.contentWindow.document).querySelector(t):null},e.prototype.getStyle=function(){return Object(s.css)(i||(i=g(["\n      .align-select {\n        .dropdown-button, .dropdown-button:hover {\n          height: 26px;\n        }\n      }\n    "],["\n      .align-select {\n        .dropdown-button, .dropdown-button:hover {\n          height: 26px;\n        }\n      }\n    "])))},e.prototype.render=function(){var t,e,o=this,n=this.props,i=n.layoutId,d=n.layoutItem,g=n.isLockLayout;if(!d)return null;var h=s.lodash.assign({},p.a,d.setting),m=d.bbox,I=h.style||{},b=null!==(e=null===(t=h.autoProps)||void 0===t?void 0:t.height)&&void 0!==e?e:u.LayoutItemSizeModes.Stretch,j="ratio"===h.heightMode;return Object(s.jsx)("div",{className:"row-item-setting",css:this.getStyle()},!g&&Object(s.jsx)(s.React.Fragment,null,Object(s.jsx)(a.SettingSection,{title:this.formatMessage("size")},Object(s.jsx)(a.SettingRow,{label:this.formatMessage("height")},Object(s.jsx)("div",{style:f},Object(s.jsx)(c.SizeEditor,{label:"H",mode:b,sizeModes:y,value:l.utils.stringOfLinearUnit(m.height),onChange:this.updateHeight,onModeChange:this.updateHeightMode,disabled:j}))),b===u.LayoutItemSizeModes.Custom&&Object(s.jsx)(a.SettingRow,null,Object(s.jsx)(l.Checkbox,{checked:j,onChange:function(t){return o.updateAspectSetting(t.target.checked?"ratio":"fixed")},className:"mr-2"}),this.formatMessage("keepAspectRatio")),j&&Object(s.jsx)(a.SettingRow,{label:this.formatMessage("aspectRatio")},Object(s.jsx)(c.InputRatio,{value:h.aspectRatio,style:f,onChange:this.updateAspectRatio})),b!==u.LayoutItemSizeModes.Stretch&&Object(s.jsx)(a.SettingRow,{label:this.formatMessage("align")},Object(s.jsx)(l.Select,{className:"align-select",style:f,value:I.alignSelf||"flex-start",onChange:this.updateAlign},Object(s.jsx)("option",{value:"flex-start"},this.formatMessage("T")),Object(s.jsx)("option",{value:"flex-end"},this.formatMessage("B")),Object(s.jsx)("option",{value:"center"},this.formatMessage("center"))))),Object(s.jsx)(a.SettingSection,{title:this.formatMessage("position")},Object(s.jsx)(r.CommonTransformSetting,{layoutId:i,layoutItemId:d.id,setting:d.setting,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}),Object(s.jsx)(a.SettingRow,{label:this.formatMessage("offsetX")},Object(s.jsx)(l.NumericInput,{style:f,value:h.offsetX,onChange:this.updateOffsetX,size:"sm"})),Object(s.jsx)(a.SettingRow,{label:this.formatMessage("offsetY")},Object(s.jsx)(l.NumericInput,{style:f,value:h.offsetY,onChange:this.updateOffsetY,size:"sm"})))),(d.widgetId||d.sectionId)&&Object(s.jsx)(r.CommonLayoutItemSetting,{layoutId:i,layoutItemId:d.id,isSection:d.type===s.LayoutItemType.Section,style:this.props.style,onStyleChange:this.props.onStyleChange,onSettingChange:this.props.onSettingChange,formatMessage:this.props.formatMessage}))},e}(s.React.PureComponent);e.default=h},42:function(t,e,o){"use strict";o.d(e,"b",(function(){return s})),o.d(e,"a",(function(){return a}));var n=o(0),i=o(1),s=Object(n.Immutable)({space:20,style:{padding:{number:[10],unit:i.UnitTypes.PIXEL}}}),a={heightMode:"fixed",aspectRatio:1,offsetX:0,offsetY:0,style:{alignSelf:"flex-start"}}},5:function(t,e){t.exports=i}}))}}}));