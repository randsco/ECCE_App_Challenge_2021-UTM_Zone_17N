System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-arcgis","jimu-ui/advanced/data-source-selector"],(function(e){var t,o,n,r;return{setters:[function(e){t=e},function(e){o=e},function(e){n=e},function(e){r=e}],execute:function(){e(function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=422)}({0:function(e,o){e.exports=t},11:function(e,t){e.exports=r},2:function(e,t){e.exports=o},4:function(e,t){e.exports=n},422:function(e,t,o){"use strict";o.r(t),o.d(t,"_getInitConfig",(function(){return l}));var n,r=o(0),a=o(11),i=o(2),u=o(4),c="Select field",s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),d=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},p=function(e){function t(t){var o=e.call(this,t)||this;return o.modalStyle={position:"absolute",top:"0",bottom:"0",width:"259px",height:"auto",borderRight:"",borderBottom:"",paddingBottom:"1px"},o.getInitConfig=function(){return l(o.props)},o.getDsSelectorSourceData=function(e){var t,o,n,a=null===(o=null===(t=Object(r.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===o?void 0:o.appConfig,i=null===(n=null==a?void 0:a.widgets)||void 0===n?void 0:n[e];return i&&i.useDataSources},o.onFieldSelected=function(e,t){var n=e[0];n&&o.props.config.useDataSource&&o.props.onSettingChange({actionId:o.props.actionId,config:o.props.config.set("fieldName",n.name).set("useDataSource",{dataSourceId:o.props.config.useDataSource.dataSourceId,mainDataSourceId:o.props.config.useDataSource.mainDataSourceId,dataViewId:o.props.config.useDataSource.dataViewId,rootDataSourceId:o.props.config.useDataSource.rootDataSourceId,fields:e.map((function(e){return e.jimuName}))})})},o.modalStyle.borderRight="1px solid black",o.modalStyle.borderBottom="1px solid black",o.state={isShowLayerList:!1},o}return s(t,e),t.prototype.componentDidMount=function(){var e=this.getInitConfig();this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config.set("useDataSource",e.useDataSource)})},t.prototype.getStyle=function(e){return Object(r.css)(f||(f=d(["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n    "],["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .deleteIcon {\n        cursor: pointer;\n        opacity: .8;\n      }\n\n      .deleteIcon:hover {\n        opacity: 1;\n      }\n    "])),r.polished.rem(10),r.polished.rem(16),r.polished.rem(0),r.polished.rem(16))},t.prototype.render=function(){var e=this.getDsSelectorSourceData(this.props.widgetId);return Object(r.jsx)("div",{css:this.getStyle(this.props.theme)},Object(r.jsx)(i.SettingSection,{title:this.props.intl.formatMessage({id:"queryAction_Field",defaultMessage:c})},e&&e.length>0&&Object(r.jsx)("div",{className:"mt-2"},"Please choose a Field to query:",Object(r.jsx)(a.FieldSelector,{useDataSources:e,onChange:this.onFieldSelected,selectedFields:this.props.config.useDataSource&&this.props.config.useDataSource.fields?this.props.config.useDataSource.fields:Object(r.Immutable)([])}))))},t.defaultProps={config:Object(r.Immutable)({useDataSource:null})},t}(r.React.PureComponent);function l(e){var t=e.messageWidgetId,o=Object(r.getAppStore)().getState().appStateInBuilder.appConfig,n=o.widgets[t],a=null;if(e.config.useDataSource)a=e.config.useDataSource;else if(n&&n.useDataSources&&n.useDataSources[0]&&1===n.useDataSources.length){var i=o.dataSources[n.useDataSources[0].dataSourceId];a=!i||i.type!==u.ArcGISDataSourceTypes.WebMap&&i.type!==u.ArcGISDataSourceTypes.WebScene?Object(r.Immutable)({dataSourceId:n.useDataSources[0].dataSourceId,mainDataSourceId:n.useDataSources[0].mainDataSourceId,dataViewId:n.useDataSources[0].dataViewId,rootDataSourceId:n.useDataSources[0].rootDataSourceId}):null}return{useDataSource:a}}var f;t.default=r.themeUtils.withTheme(p)}}))}}}));