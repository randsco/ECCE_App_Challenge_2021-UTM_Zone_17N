System.register(["jimu-core","jimu-ui","jimu-arcgis"],(function(e){var n,t,o;return{setters:[function(e){n=e},function(e){t=e},function(e){o=e}],execute:function(){e(function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=397)}({0:function(e,t){e.exports=n},1:function(e,n){e.exports=t},175:function(e,n){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1.5 11a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm14 1a.5.5 0 110 1h-10a.5.5 0 110-1h10zM3 6v3H0V6h3zm12.5 1a.5.5 0 110 1h-10a.5.5 0 010-1h10zm-14-6L3 4H0l1.5-3zm14 1a.5.5 0 110 1h-10a.5.5 0 010-1h10z" fill="#000" fill-rule="evenodd"></path></svg>'},397:function(e,n,t){"use strict";t.r(n),t.d(n,"LoadStatus",(function(){return d}));var o,r=t(0),i=t(4),c=t(1),a=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};function s(e,n){var t,i,s,l,d,u,g,p=c.styleUtils.toCSSStyle({background:n.background});delete p.backgroundColor;var f=n.fontColor||(null===(s=null===(i=null===(t=e.arcgis.widgets.legend.variants)||void 0===t?void 0:t.default)||void 0===i?void 0:i.root)||void 0===s?void 0:s.color),h=(null===(l=n.background)||void 0===l?void 0:l.color)||e.surfaces[1].bg,w=e.surfaces[1].bg;return Object(r.css)(o||(o=a(["\n    overflow: auto;\n    .widget-legend {\n      width: 100%;\n      height: 100%;\n      /*background-color: ",";*/\n      background-color: ",";\n      position: relative;\n      ","\n\n      .esri-legend {\n        background-color: transparent;\n        color: ",";\n        height: 100%;\n      }\n\n      .esri-legend--card {\n        background-color: transparent;\n        color: ",";\n        height: 100%;\n      }\n\n      .esri-legend--card.esri-legend--stacked{\n      /*\n        position: absolute;\n        height: 100%;\n        width: 100%;\n      */\n        flex-direction: column;\n        justify-content: space-between;\n      }\n\n      .esri-legend--card__section {\n        width: 100%;\n        height: unset;\n        margin-bottom: 32px;\n      }\n\n      .esri-legend--card__carousel-indicator-container {\n        order: 1;\n        color: ",";\n      }\n\n      .esri-legend--card__service-caption-container {\n        color: ",";\n      }\n\n      .esri-legend--card.esri-widget{\n        background-color: ",";\n      }\n\n      /* .esri-legend {\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-widget__heading {\n        color: ",";\n      }\n\n      .esri-legend--card.esri-widget{\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-legend--card__section {\n        width: 100%;\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-legend--card__carousel-indicator-container {\n        background-color: ",";\n      }\n\n      .esri-legend--card__service {\n        width: 100%;\n      }\n\n      .esri-legend--card__service-caption-container {\n        background-color: ",";\n        color: ",";\n      } */\n\n      /*\n      .esri-legend--card__carousel-indicator {\n        background-color: ",";\n      }\n      */\n    }\n  "],["\n    overflow: auto;\n    .widget-legend {\n      width: 100%;\n      height: 100%;\n      /*background-color: ",";*/\n      background-color: ",";\n      position: relative;\n      ","\n\n      .esri-legend {\n        background-color: transparent;\n        color: ",";\n        height: 100%;\n      }\n\n      .esri-legend--card {\n        background-color: transparent;\n        color: ",";\n        height: 100%;\n      }\n\n      .esri-legend--card.esri-legend--stacked{\n      /*\n        position: absolute;\n        height: 100%;\n        width: 100%;\n      */\n        flex-direction: column;\n        justify-content: space-between;\n      }\n\n      .esri-legend--card__section {\n        width: 100%;\n        height: unset;\n        margin-bottom: 32px;\n      }\n\n      .esri-legend--card__carousel-indicator-container {\n        order: 1;\n        color: ",";\n      }\n\n      .esri-legend--card__service-caption-container {\n        color: ",";\n      }\n\n      .esri-legend--card.esri-widget{\n        background-color: ",";\n      }\n\n      /* .esri-legend {\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-widget__heading {\n        color: ",";\n      }\n\n      .esri-legend--card.esri-widget{\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-legend--card__section {\n        width: 100%;\n        background-color: ",";\n        color: ","\n      }\n\n      .esri-legend--card__carousel-indicator-container {\n        background-color: ",";\n      }\n\n      .esri-legend--card__service {\n        width: 100%;\n      }\n\n      .esri-legend--card__service-caption-container {\n        background-color: ",";\n        color: ",";\n      } */\n\n      /*\n      .esri-legend--card__carousel-indicator {\n        background-color: ",";\n      }\n      */\n    }\n  "])),null===(g=null===(u=null===(d=e.arcgis.widgets.legend.variants)||void 0===d?void 0:d.card)||void 0===u?void 0:u.root)||void 0===g?void 0:g.bg,h,p,f,f,f,f,w,e.colors.palette.light[100],e.colors.black,e.colors.black,e.colors.palette.light[300],e.colors.black,e.colors.palette.light[100],e.colors.black,e.colors.palette.light[300],e.colors.palette.light[300],e.colors.black,e.colors.palette.dark[900])}var l,d,u="Legend",g=(l=function(e,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}l(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),p=t(175);!function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(d||(d={}));var f=function(e){function n(n){var t=e.call(this,n)||this;return t.componentDidMount=function(){},t.componentWillUnmount=function(){},t.createWebMapView=function(e,n,o){t.destoryView();var r={map:t.dataSource.map,container:t.refs.mapContainer};t.mapView=new e(r),t.mapView.when((function(){n(t.mapView)}),(function(e){return o(e)}))},t.createSceneView=function(e,n,o){t.destoryView();var r={map:t.dataSource.map,container:t.refs.mapContainer};t.sceneView=new t.SceneView(r),t.sceneView.when((function(){n(t.sceneView)}),(function(e){return o(e)}))},t.loadViewModules=function(e){return e.type===i.DataSourceTypes.WebMap?t.MapView?Promise.resolve(t.MapView):Object(i.loadArcGISJSAPIModules)(["esri/views/MapView"]).then((function(e){return t.MapView=e[0],t.MapView})):e.type===i.DataSourceTypes.WebScene?t.SceneView?Promise.resolve(t.SceneView):Object(i.loadArcGISJSAPIModules)(["esri/views/SceneView"]).then((function(e){return t.SceneView=e[0],t.SceneView})):Promise.reject()},t.destoryLegend=function(){t.legend&&!t.legend.destroyed&&t.legend.destroy()},t.createLegend=function(e){return(t.Legend?Promise.resolve():Object(i.loadArcGISJSAPIModules)(["esri/widgets/Legend"]).then((function(e){t.Legend=e[0]}))).then((function(){var n=document&&document.createElement("div");t.refs.legendContainer.appendChild(n),t.destoryLegend(),t.legend=new t.Legend({view:e,container:n}),t.configLegend()}))},t.configLegend=function(){if(t.legend){var e=t.props.config.showBaseMap;t.legend.style=t.calculateStyle(),t.legend.basemapLegendVisible=e}},t.calculateStyle=function(){var e,n=t.currentWidth||1e5;if(t.legend)if(t.props.config.cardStyle){e={type:"card",layout:"auto"===t.props.config.cardLayout?n<=600?"stack":"side-by-side":t.props.config.cardLayout}}else e="classic";else e="classic";return e},t.onActiveViewChange=function(e){e&&e.view?t.createLegend(e.view).then((function(){t.setState({loadStatus:d.Fulfilled})})).catch((function(e){return console.error(e)})):t.destoryLegend()},t.onDataSourceCreated=function(e){t.dataSource=e,t.createViewByDataSource(e).then((function(e){return t.createLegend(e)})).then((function(){t.setState({loadStatus:d.Fulfilled})})).catch((function(e){return console.error(e)}))},t.onCreateDataSourceFailed=function(e){},t.onResize=function(e){if(t.currentWidth=e,t.legend&&"auto"===t.props.config.cardLayout){var n=t.calculateStyle();t.legend.style=n}},t.state={loadStatus:d.Pending},t}return g(n,e),n.prototype.createViewByDataSource=function(e){var n=this;return this.loadViewModules(e).then((function(){return e.type===i.DataSourceTypes.WebMap?new Promise((function(e,t){return n.createWebMapView(n.MapView,e,t)})):e.type===i.DataSourceTypes.WebScene?new Promise((function(e,t){return n.createSceneView(n.SceneView,e,t)})):Promise.reject()}))},n.prototype.destoryView=function(){this.mapView&&!this.mapView.destroyed&&this.mapView.destroy(),this.sceneView&&!this.sceneView.destroyed&&this.sceneView.destroy()},n.prototype.getDefaultStyleConfig=function(){return{useCustom:!1,background:{color:"",fillType:c.FillType.FILL},fontColor:""}},n.prototype.getStyleConfig=function(){return this.props.config.style&&this.props.config.style.useCustom?this.props.config.style:this.getDefaultStyleConfig()},n.prototype.render=function(){var e=this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0],n=this.props.useDataSources&&this.props.useDataSources[0],t=null,o=null;if(e?o=Object(r.jsx)(i.JimuMapViewComponent,{useMapWidgetIds:this.props.useMapWidgetIds,onActiveViewChange:this.onActiveViewChange}):n&&(o=Object(r.jsx)(r.DataSourceComponent,{useDataSource:n,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})),e||n){var a=null;this.state.loadStatus===d.Pending&&(a=Object(r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-secondary-loading"})),window.jimuConfig.isInBuilder&&this.configLegend(),t=Object(r.jsx)("div",{className:"widget-legend"},a,Object(r.jsx)("div",{ref:"legendContainer",style:{height:"100%"}}),Object(r.jsx)("div",{style:{position:"absolute",display:"none"},ref:"mapContainer"},"mapContainer"),Object(r.jsx)("div",{style:{position:"absolute",display:"none"}},o),Object(r.jsx)(r.ReactResizeDetector,{handleHeight:!0,handleWidth:!0,onResize:this.onResize}))}else this.destoryLegend(),t=Object(r.jsx)("div",{className:"widget-legend"},Object(r.jsx)(c.WidgetPlaceholder,{icon:p,autoFlip:!0,message:this.props.intl.formatMessage({id:"_widgetLabel",defaultMessage:u}),widgetId:this.props.id}));return Object(r.jsx)("div",{css:s(this.props.theme,this.getStyleConfig()),className:"jimu-widget"},t)},n}(r.React.PureComponent);n.default=f},4:function(e,n){e.exports=o}}))}}}));