System.register(["jimu-core","jimu-ui"],(function(t){var e,n;return{setters:[function(t){e=t},function(t){n=t}],execute:function(){t(function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=382)}({0:function(t,n){t.exports=e},1:function(t,e){t.exports=n},15:function(t,e,n){"use strict";var o,i;n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i})),function(t){t.ByUpload="BYUPLOAD",t.ByStaticUrl="BYSTATICURL",t.ByDynamicUrl="BYDYNAMICURL"}(o||(o={})),function(t){t.Expression="EXPRESSION",t.Attachment="ATTACHMENT",t.Symbol="SYMBOL"}(i||(i={}))},382:function(t,e,n){"use strict";n.r(e);var o,i,s=n(0),r=n(1),a=n(15),c=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=t.call(this,e)||this;return n.dataSources=null,n.__unmount=!1,n.isLoading=!1,n.resolveExpressions=function(t){if(t){var e=t;n.isLoading=!0,e&&e.queryAttachments&&e.queryAttachments(n.props.attachmentTypes).then((function(t){n.isLoading&&(n.isLoading=!1,n.setState({attachmentInfos:t}))}),(function(){n.isLoading=!1}))}else n.isLoading=!1,n.setState({attachmentInfos:null})},n.shallowEquals=function(t,e){return!t&&!e||!(!t||!e)&&(Object.keys(t).length===Object.keys(e).length&&!Object.keys(t).some((function(n){return t[n]!==e[n]})))},n.state={attachmentInfos:null},n}return c(e,t),e.prototype.componentDidMount=function(){this.__unmount=!1,this.resolveExpressions(this.props.record)},e.prototype.componentWillUnmount=function(){this.__unmount=!0,this.props.unmountAttachmentInfosChange&&this.props.unmountAttachmentInfosChange()},e.prototype.componentDidUpdate=function(t,e){this.shallowEquals(this.props.record,t.record)||this.resolveExpressions(this.props.record),e.attachmentInfos!==this.state.attachmentInfos&&this.props.onChange&&this.props.onChange(this.state.attachmentInfos)},e.prototype.render=function(){return null},e}(s.React.PureComponent),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.dataSources=null,n.__unmount=!1,n.isLoading=!1,n.resolveExpressions=function(t){if(t){var e=t;n.isLoading=!0,e&&e.getSymbolPreviewHTML&&e.getSymbolPreviewHTML().then((function(t){n.isLoading&&(n.isLoading=!1,n.setState({symbolElement:t}))}),(function(){n.isLoading=!1}))}else n.isLoading=!1,n.setState({symbolElement:null})},n.shallowEquals=function(t,e){return!t&&!e||!(!t||!e)&&(Object.keys(t).length===Object.keys(e).length&&!Object.keys(t).some((function(n){return t[n]!==e[n]})))},n.state={symbolElement:null},n}return u(e,t),e.prototype.componentDidMount=function(){this.__unmount=!1,this.resolveExpressions(this.props.record)},e.prototype.componentWillUnmount=function(){this.__unmount=!0,this.props.unmountSymbolElementChange&&this.props.unmountSymbolElementChange()},e.prototype.componentDidUpdate=function(t,e){this.shallowEquals(this.props.record,t.record)||this.resolveExpressions(this.props.record),e.symbolElement!==this.state.symbolElement&&this.props.onChange&&this.props.onChange(this.state.symbolElement)},e.prototype.render=function(){return null},e}(s.React.PureComponent),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e){var n=t.call(this,e)||this;return n.dataSources=null,n.__unmount=!1,n.updateRecord=function(){var t=n.getSingleRecord();n.props.onRecordChange&&n.props.onRecordChange(t)},n.shallowEquals=function(t,e){return!t&&!e||!(!t||!e)&&(Object.keys(t).length===Object.keys(e).length&&!Object.keys(t).some((function(n){return t[n]!==e[n]})))},n.getSingleRecord=function(){var t,e;if(n.props.isSelectedFromRepeatedDataSourceContext){var o=n.props.repeatedDataSource;return a=Array.isArray(o)?null===(t=o[0])||void 0===t?void 0:t.record:null===(e=o)||void 0===e?void 0:e.record}if(!n.props.useDataSources||0===n.props.useDataSources.length)return null;var i=n.props.useDataSources[0].dataSourceId;if(i.split("-").reverse()[0]===s.CONSTANTS.SELECTION_DATA_VIEW_ID){var r,a;if(!(a=null==(r=s.DataSourceManager.getInstance().getDataSource(i))?void 0:r.getRecords()[0])){var c=null==r?void 0:r.getMainDataSource().getDataView(s.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION);a=null==c?void 0:c.getRecords()[0]}return a}return a=null==(r=s.DataSourceManager.getInstance().getDataSource(i))?void 0:r.getRecords()[0]},n.onDataSourceCreated=function(t){if(n.dataSources=t,t){var e={};Object.keys(t).forEach((function(n){n&&t[n]&&(e[n]=t[n].getInfo())})),n.setState({infos:e})}},n.onDataSourceInfoChange=function(t){n.setState({infos:t})},n.addDataViewForNoSelection=function(t){var e=Object(s.Immutable)([]);return t?(t.forEach((function(t){if(t.mainDataSourceId&&!e.some((function(e){return e.mainDataSourceId===t.mainDataSourceId}))){var n=s.DataSourceManager.getInstance().getDataSource(t.mainDataSourceId),o=n&&n.getDataSourceJson();(null==o?void 0:o.dataViews)&&(null==o?void 0:o.dataViews[s.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION])&&(e=e.concat(t.set("dataSourceId",s.DataSourceManager.getInstance().getDataViewDataSourceId(t.mainDataSourceId,s.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION)).set("dataViewId",s.CONSTANTS.DATA_VIEW_ID_FOR_NO_SELECTION)))}})),e.concat(t)):e},n.getQueries=function(t){var e={};return t?(t.forEach((function(t){e[t.dataSourceId]={}})),e):e},n.state={infos:null},n}return g(e,t),e.prototype.componentDidMount=function(){this.__unmount=!1,this.updateRecord()},e.prototype.componentDidUpdate=function(t,e){this.props.isSelectedFromRepeatedDataSourceContext?this.props.repeatedDataSource===t.repeatedDataSource&&this.props.isSelectedFromRepeatedDataSourceContext===t.isSelectedFromRepeatedDataSourceContext||this.updateRecord():this.props.useDataSources===t.useDataSources&&this.shallowEquals(this.state.infos,e.infos)||this.updateRecord()},e.prototype.render=function(){var t=this.addDataViewForNoSelection(this.props.useDataSources);return s.React.createElement(s.MultipleDataSourceComponent,{useDataSources:t,onDataSourceCreated:this.onDataSourceCreated,onDataSourceInfoChange:this.onDataSourceInfoChange,queries:this.getQueries(t),widgetId:this.props.widgetId})},e}(s.React.PureComponent),h=Object(s.withRepeatedDataSource)(f),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=n(45),y=n(41),x=function(t){function e(e){var n=t.call(this,e)||this;return n.backImg=function(t){var e=n.state.currentIndex>0?n.state.currentIndex-1:n.props.sources.length-1;n.setState({currentIndex:e}),t.stopPropagation()},n.forwardImg=function(t){var e=n.state.currentIndex<n.props.sources.length-1?n.state.currentIndex+1:0;n.setState({currentIndex:e}),t.stopPropagation()},n.state={currentIndex:0},n}return d(e,t),e.prototype.componentDidUpdate=function(t,e){t.sources!==this.props.sources&&this.setState({currentIndex:0})},e.prototype.render=function(){var t={},e=this.props.toolTipWithAttachmentName?this.props.sources&&this.props.sources[this.state.currentIndex]&&this.props.sources[this.state.currentIndex].name:this.props.toolTip,n=this.props.altTextWithAttachmentName?this.props.sources&&this.props.sources[this.state.currentIndex]&&this.props.sources[this.state.currentIndex].name:this.props.altText;return this.props.imageParam.set?t=this.props.imageParam.set("url",this.props.sources&&this.props.sources[this.state.currentIndex]&&this.props.sources[this.state.currentIndex].url):t.url=this.props.sources&&this.props.sources[this.state.currentIndex]&&this.props.sources[this.state.currentIndex].url,s.React.createElement("div",{className:"w-100 h-100"},this.props.sources&&this.props.sources.length>1&&s.React.createElement("div",{title:e,className:"silder-tool-container w-100 h-100",style:{position:"absolute",zIndex:1}},s.React.createElement("div",{className:"d-flex justify-content-center align-items-center image-gallery-button ml-2",onClick:this.backImg,style:{top:"50%",transform:"translateY(-50%)",position:"absolute",left:0}},s.React.createElement(r.Icon,{size:"12",icon:m})),s.React.createElement("div",{className:"d-flex justify-content-center align-items-center image-gallery-button mr-2",onClick:this.forwardImg,style:{top:"50%",transform:"translateY(-50%)",position:"absolute",right:0}},s.React.createElement(r.Icon,{size:"12",icon:y}))),s.React.createElement("div",{className:"image-gallery-content w-100 h-100"},s.React.createElement(r.ImageWithParam,{imageParam:t,useFadein:!0,size:this.props.size,imageFillMode:this.props.imageFillMode,isAutoHeight:this.props.isAutoHeight,toolTip:e,altText:n})))},e}(s.React.PureComponent),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},C={},v=function(t){function e(e){var n=t.call(this,e)||this;n.__unmount=!1,n.attachmentTypes=["image/png","image/jpeg","image/gif","image/bmp","image/svg+xml"],n.isAutoHeight=!1,n.checkIsStaticSrc=function(t){return t===a.b.ByUpload||t===a.b.ByStaticUrl||!t},n.getSrcExpression=function(){return n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.srcExpression||Object(s.Immutable)({name:"",parts:[{type:s.ExpressionPartType.String,exp:'"'+(n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.imageParam&&n.props.config.functionConfig.imageParam.url)+'"'}]})},n.getAltTextExpression=function(){return n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.altTextExpression||Object(s.Immutable)({name:"",parts:[{type:s.ExpressionPartType.String,exp:'"'+(n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.altText)+'"'}]})},n.getToolTipExpression=function(){return n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.toolTipExpression||Object(s.Immutable)({name:"",parts:[{type:s.ExpressionPartType.String,exp:'"'+(n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.toolTip)+'"'}]})},n.getLinkUrlExpression=function(){return n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.linkParam&&n.props.config.functionConfig.linkParam&&n.props.config.functionConfig.linkParam.expression||null},n.onSrcExpResolveChange=function(t){if(t.isSuccessful)n.setState({src:"null"===t.value?"":t.value});else{var e="";t.value===s.ExpressionResolverErrorCode.Failed&&(e=n.state.srcExpression&&n.state.srcExpression.name),n.setState({src:e})}},n.onToolTipExpResolveChange=function(t){if(t.isSuccessful)n.setState({toolTip:"null"===t.value?"":t.value});else{var e="";t.value===s.ExpressionResolverErrorCode.Failed&&(e=n.state.srcExpression&&n.state.srcExpression.name),n.setState({toolTip:e})}},n.onAltTextExpResolveChange=function(t){if(t.isSuccessful)n.setState({altText:"null"===t.value?"":t.value});else{var e="";t.value===s.ExpressionResolverErrorCode.Failed&&(e=n.state.srcExpression&&n.state.srcExpression.name),n.setState({altText:e})}},n.onLinkUrlExpResolveChange=function(t){if(t.isSuccessful)n.setState({linkUrl:t.value});else{var e="";t.value===s.ExpressionResolverErrorCode.Failed&&(e=n.state.srcExpression&&n.state.srcExpression.name),n.setState({linkUrl:e})}},n.onAttachmentInfosChange=function(t){n.setState({attachmentInfos:t})},n.unmountAttachmentInfosChange=function(){n.setState({attachmentInfos:[]})},n.onSymbolElementChange=function(t){n.setState({symbolElement:t})},n.unmountSymbolElementChange=function(){n.setState({symbolElement:null})},n.getRecordsFromRepeatedDataSource=function(){var t,e=n.props.useDataSources&&n.props.useDataSources[0]&&n.props.useDataSources[0].dataSourceId;if(e&&n.props.repeatedDataSource&&e===n.props.repeatedDataSource.dataSourceId){var o=n.props.repeatedDataSource.record;return(t={})[e]=o,t}return null},n.onClick=function(t){var e=n.props.config.functionConfig.linkParam;e&&e.value&&e.linkType!==s.LinkType.None&&(t.exbEventType="linkClick")},n.handleImageLoaded=function(t,e){n.setState({imageWidth:t,imageHeight:e})},n.getWidgetWidth=function(){return n.state.widgetWidth},n.getWidgetHeight=function(){return n.state.widgetHeight},n.onResize=function(t,e){n.__unmount||(t||e)&&(t===n.state.widgetWidth&&e===n.state.widgetHeight||(C[n.props.id+"-"+n.props.layoutId]={width:t,height:e},n.setState({widgetWidth:t,widgetHeight:e})))},n.onCropWidgetResize=function(t,e){n.__unmount||(t||e)&&n.setState({cropWidgetWidth:t,cropWidgetHeight:e})},n.clearCropWidgetSize=function(){n.setState({cropWidgetWidth:null,cropWidgetHeight:null})},n.handleRecordChange=function(t){n.setState({record:t})};var o=navigator.userAgent.toLowerCase();return-1===o.indexOf("chrom")&&-1===o.indexOf("firefox")&&o.indexOf("safari")>-1&&(n.isAutoHeight=!0),n.debounceOnResize=s.lodash.debounce((function(t,e){return n.onResize(t,e)}),200),n.state={record:null,toolTip:n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.toolTip||"",altText:n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.altText||"",src:n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.imageParam&&n.props.config.functionConfig.imageParam.url||"",linkUrl:n.props.config&&n.props.config.functionConfig&&n.props.config.functionConfig.linkParam&&n.props.config.functionConfig.linkParam.value||"",srcExpression:n.props.useDataSourcesEnabled&&n.getSrcExpression(),altTextExpression:n.props.useDataSourcesEnabled&&n.getAltTextExpression(),toolTipExpression:n.props.useDataSourcesEnabled&&n.getToolTipExpression(),linkUrlExpression:n.props.useDataSourcesEnabled&&n.getLinkUrlExpression(),attachmentInfos:[],symbolElement:null,widgetWidth:C[n.props.id+"-"+n.props.layoutId]&&C[n.props.id+"-"+n.props.layoutId].width,widgetHeight:C[n.props.id+"-"+n.props.layoutId]&&C[n.props.id+"-"+n.props.layoutId].height,cropWidgetWidth:null,cropWidgetHeight:null},n}return S(e,t),e.prototype.getStyle=function(){var t=this.props.config.functionConfig.symbolScale?this.props.config.functionConfig.symbolScale:1;return Object(s.css)(i||(i=b(["\n      .widget-image-container {\n        .btn-link {\n          border-bottom: 0;\n          border-top: 0;\n          border-left: 0;\n          border-right: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .image-symbol {\n        svg {\n          transform: scale(",", ",")\n        }\n      }\n\n      .image-gallery-button {\n        cursor: pointer;\n        border-radius: 50%;\n        width: 24px;\n        height: 24px;\n        background-color: ",";\n      }\n\n      .image-gallery-button: hover {\n        background-color: ",";\n      }\n    "],["\n      .widget-image-container {\n        .btn-link {\n          border-bottom: 0;\n          border-top: 0;\n          border-left: 0;\n          border-right: 0;\n          padding: 0;\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .image-symbol {\n        svg {\n          transform: scale(",", ",")\n        }\n      }\n\n      .image-gallery-button {\n        cursor: pointer;\n        border-radius: 50%;\n        width: 24px;\n        height: 24px;\n        background-color: ",";\n      }\n\n      .image-gallery-button: hover {\n        background-color: ",";\n      }\n    "])),t,t,s.polished.rgba(this.props.theme.colors.white,.5),this.props.theme.colors.white)},e.prototype.componentDidMount=function(){this.__unmount=!1},e.prototype.componentDidUpdate=function(t,e){this.props.useDataSourcesEnabled||this.props.config===t.config&&!t.useDataSourcesEnabled||this.setState({src:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.url||"",toolTip:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.toolTip,altText:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.altText,linkUrl:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.linkParam&&this.props.config.functionConfig.linkParam.value}),!this.props.useDataSourcesEnabled||this.props.config===t.config&&t.useDataSourcesEnabled||(this.checkIsStaticSrc(this.props.config.functionConfig.imgSourceType)?this.setState({src:this.props.config&&this.props.config.functionConfig&&this.props.config.functionConfig.imageParam&&this.props.config.functionConfig.imageParam.url||"",toolTipExpression:this.getToolTipExpression(),altTextExpression:this.getAltTextExpression(),linkUrlExpression:this.getLinkUrlExpression()}):this.props.config.functionConfig.imgSourceType!==a.b.ByDynamicUrl||this.props.config.functionConfig.dynamicUrlType&&this.props.config.functionConfig.dynamicUrlType!==a.a.Expression?this.setState({src:"",toolTipExpression:this.getToolTipExpression(),altTextExpression:this.getAltTextExpression(),linkUrlExpression:this.getLinkUrlExpression()}):this.setState({srcExpression:this.getSrcExpression(),toolTipExpression:this.getToolTipExpression(),altTextExpression:this.getAltTextExpression(),linkUrlExpression:this.getLinkUrlExpression()}))},e.prototype.componentWillUnmount=function(){this.__unmount=!0,Object(s.getAppStore)().getState().appConfig.widgets[this.props.id]||delete C[this.props.id+"-"+this.props.layoutId]},e.prototype.render=function(){var t,e=this,n=this.props.useDataSourcesEnabled,o=this.state.toolTip,i=this.state.altText,c=null,u=this.props.config.functionConfig.imageParam?this.props.config.functionConfig.imageParam:Object(s.Immutable)({});u.set?u=u.set("url",this.state.src):u.url=this.state.src;var g,f,d=u&&u.cropParam,m=d&&(d.cropType===r.CropType.Fake||d.cropShape);t=Object(s.jsx)("div",{className:"jimu-widget"},Object(s.jsx)("div",{className:"jimu-widget widget-image image-param",style:{minHeight:"16px"}},this.props.config.functionConfig.dynamicUrlType!==a.a.Attachment&&this.props.config.functionConfig.dynamicUrlType!==a.a.Symbol&&Object(s.jsx)(r.ImageWithParam,{imageParam:u,toolTip:o,altText:i,onImageLoaded:this.handleImageLoaded,useFadein:!0,size:m?{width:this.state.widgetWidth,height:this.state.widgetHeight}:null,imageFillMode:this.props.config.functionConfig.imageFillMode,isAutoHeight:this.isAutoHeight}),this.props.config.functionConfig.dynamicUrlType===a.a.Attachment&&Object(s.jsx)("div",{className:"w-100 h-100"},n&&Object(s.jsx)(x,{sources:this.state.attachmentInfos,imageParam:u,imageFillMode:this.props.config.functionConfig.imageFillMode,size:m?{width:this.state.widgetWidth,height:this.state.widgetHeight}:null,isAutoHeight:this.isAutoHeight,toolTip:o,altText:i,altTextWithAttachmentName:this.props.config.functionConfig.altTextWithAttachmentName,toolTipWithAttachmentName:this.props.config.functionConfig.toolTipWithAttachmentName,useFadein:!0}),!n&&Object(s.jsx)(r.ImageWithParam,{imageParam:u,toolTip:o,altText:i,useFadein:!0,size:m?{width:this.state.widgetWidth,height:this.state.widgetHeight}:null,imageFillMode:this.props.config.functionConfig.imageFillMode,isAutoHeight:this.isAutoHeight})),this.props.config.functionConfig.dynamicUrlType===a.a.Symbol&&Object(s.jsx)("div",{className:"w-100 h-100"},(!this.state.symbolElement||!n)&&Object(s.jsx)(r.ImageWithParam,{imageParam:u,toolTip:o,altText:i,useFadein:!0,size:m?{width:this.state.widgetWidth,height:this.state.widgetHeight}:null,imageFillMode:this.props.config.functionConfig.imageFillMode,isAutoHeight:this.isAutoHeight}),this.state.symbolElement&&n&&Object(s.jsx)("div",{className:"w-100 h-100 image-symbol",title:o,dangerouslySetInnerHTML:{__html:this.state.symbolElement.outerHTML}})),m&&Object(s.jsx)(s.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.debounceOnResize})));var y=this.props.config.functionConfig.linkParam;y&&y.linkType&&(g=y.openType,f={linkType:y.linkType},y.linkType===s.LinkType.WebAddress?f.value=this.state.linkUrl:f.value=y.value);var S=null==y?void 0:y.linkType;if(c=S==s.LinkType.Page||S==s.LinkType.Dialog||S==s.LinkType.View?Object(s.jsx)("div",{className:"widget-image-container jimu-widget"},Object(s.jsx)(r.Link,{to:f,target:g,queryObject:this.props.queryObject},t)):S==s.LinkType.WebAddress?Object(s.jsx)("div",{className:"widget-image-container jimu-widget"},Object(s.jsx)(r.Link,{to:f,target:g},t)):t,this.props.config.functionConfig.imageFillMode!==r.ImageFillMode.Fit&&this.props.isInlineEditing&&this.state.src&&(!this.props.repeatedDataSource||this.props.repeatedDataSource&&0===this.props.repeatedDataSource.recordIndex)){var b=this.props.builderSupportModules.widgetModules.WidgetInBuilder;c=Object(s.jsx)("div",{className:"jimu-widget"},Object(s.jsx)(s.ReactResizeDetector,{handleWidth:!0,handleHeight:!0,onResize:this.onCropWidgetResize}),c,this.state.cropWidgetHeight&&this.state.cropWidgetWidth&&Object(s.jsx)(b,{widgetId:this.props.id,config:this.props.config,onUnmount:function(){e.clearCropWidgetSize()},widgetWidth:this.state.cropWidgetWidth,widgetHeight:this.state.cropWidgetHeight}))}else c=Object(s.jsx)("div",{className:"jimu-widget",css:this.getStyle(),onClick:function(t){e.onClick(t)},onTouchEnd:function(t){e.onClick(t)}},c,Object(s.jsx)("div",{style:{display:"none"}},n&&this.props.config.functionConfig.imgSourceType===a.b.ByDynamicUrl&&(!this.props.config.functionConfig.dynamicUrlType||this.props.config.functionConfig.dynamicUrlType===a.a.Expression)&&Object(s.jsx)("div",null,Object(s.jsx)(s.ExpressionResolverComponent,{useDataSources:this.props.useDataSources,expression:this.getSrcExpression(),onChange:this.onSrcExpResolveChange,widgetId:this.props.id})),n&&Object(s.jsx)("div",null,Object(s.jsx)(s.ExpressionResolverComponent,{useDataSources:this.props.useDataSources,expression:this.getAltTextExpression(),onChange:this.onAltTextExpResolveChange,widgetId:this.props.id}),Object(s.jsx)(s.ExpressionResolverComponent,{useDataSources:this.props.useDataSources,expression:this.getToolTipExpression(),onChange:this.onToolTipExpResolveChange,widgetId:this.props.id}),Object(s.jsx)(s.ExpressionResolverComponent,{useDataSources:this.props.useDataSources,expression:this.state.linkUrlExpression,onChange:this.onLinkUrlExpResolveChange,widgetId:this.props.id})),n&&this.props.config.functionConfig.dynamicUrlType===a.a.Attachment&&Object(s.jsx)("div",null,Object(s.jsx)(p,{record:this.state.record,unmountAttachmentInfosChange:this.unmountAttachmentInfosChange,onChange:this.onAttachmentInfosChange,attachmentTypes:this.attachmentTypes})),n&&this.props.config.functionConfig.dynamicUrlType===a.a.Symbol&&Object(s.jsx)("div",null,Object(s.jsx)(l,{record:this.state.record,unmountSymbolElementChange:this.unmountSymbolElementChange,onChange:this.onSymbolElementChange})),n&&(this.props.config.functionConfig.dynamicUrlType===a.a.Attachment||this.props.config.functionConfig.dynamicUrlType===a.a.Symbol)&&Object(s.jsx)("div",null,Object(s.jsx)(h,{widgetId:this.props.id,useDataSources:this.props.config.functionConfig.useDataSourceForMainDataAndViewSelector?Object(s.Immutable)([this.props.config.functionConfig.useDataSourceForMainDataAndViewSelector]):Object(s.Immutable)([]),isSelectedFromRepeatedDataSourceContext:this.props.config.functionConfig.isSelectedFromRepeatedDataSourceContext,onRecordChange:this.handleRecordChange}))));return c},e.mapExtraStateProps=function(t){return{queryObject:t.queryObject}},e}(s.React.PureComponent);e.default=v},41:function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M9.521 5.47L3.981.162a.592.592 0 00-.813 0 .534.534 0 000 .779L8.448 6l-5.28 5.06a.534.534 0 000 .779.592.592 0 00.813 0l5.54-5.31a.726.726 0 000-1.058z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'},45:function(t,e){t.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M2.479 5.47L8.019.162a.592.592 0 01.813 0 .534.534 0 010 .779L3.552 6l5.28 5.06a.534.534 0 010 .779.592.592 0 01-.813 0l-5.54-5.31a.726.726 0 010-1.058z" fill="#000"></path><path d="M0 0h12v12H0z"></path></g></svg>'}}))}}}));